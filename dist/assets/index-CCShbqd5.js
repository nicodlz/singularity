function D2(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Uf={exports:{}},gc={},Wf={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function j2(){if(vg)return it;vg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),k=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=k&&z[k]||z["@@iterator"],typeof z=="function"?z:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function M(z,ee,Se){this.props=z,this.context=ee,this.refs=A,this.updater=Se||N}M.prototype.isReactComponent={},M.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},M.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function I(){}I.prototype=M.prototype;function b(z,ee,Se){this.props=z,this.context=ee,this.refs=A,this.updater=Se||N}var O=b.prototype=new I;O.constructor=b,P(O,M.prototype),O.isPureReactComponent=!0;var L=Array.isArray,X=Object.prototype.hasOwnProperty,te={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function K(z,ee,Se){var je,Ye={},Xe=null,Ue=null;if(ee!=null)for(je in ee.ref!==void 0&&(Ue=ee.ref),ee.key!==void 0&&(Xe=""+ee.key),ee)X.call(ee,je)&&!ie.hasOwnProperty(je)&&(Ye[je]=ee[je]);var et=arguments.length-2;if(et===1)Ye.children=Se;else if(1<et){for(var B=Array(et),Y=0;Y<et;Y++)B[Y]=arguments[Y+2];Ye.children=B}if(z&&z.defaultProps)for(je in et=z.defaultProps,et)Ye[je]===void 0&&(Ye[je]=et[je]);return{$$typeof:r,type:z,key:Xe,ref:Ue,props:Ye,_owner:te.current}}function ye(z,ee){return{$$typeof:r,type:z.type,key:ee,ref:z.ref,props:z.props,_owner:z._owner}}function ke(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function Ge(z){var ee={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Se){return ee[Se]})}var ve=/\/+/g;function De(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?Ge(""+z.key):ee.toString(36)}function Me(z,ee,Se,je,Ye){var Xe=typeof z;(Xe==="undefined"||Xe==="boolean")&&(z=null);var Ue=!1;if(z===null)Ue=!0;else switch(Xe){case"string":case"number":Ue=!0;break;case"object":switch(z.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=z,Ye=Ye(Ue),z=je===""?"."+De(Ue,0):je,L(Ye)?(Se="",z!=null&&(Se=z.replace(ve,"$&/")+"/"),Me(Ye,ee,Se,"",function(Y){return Y})):Ye!=null&&(ke(Ye)&&(Ye=ye(Ye,Se+(!Ye.key||Ue&&Ue.key===Ye.key?"":(""+Ye.key).replace(ve,"$&/")+"/")+z)),ee.push(Ye)),1;if(Ue=0,je=je===""?".":je+":",L(z))for(var et=0;et<z.length;et++){Xe=z[et];var B=je+De(Xe,et);Ue+=Me(Xe,ee,Se,B,Ye)}else if(B=S(z),typeof B=="function")for(z=B.call(z),et=0;!(Xe=z.next()).done;)Xe=Xe.value,B=je+De(Xe,et++),Ue+=Me(Xe,ee,Se,B,Ye);else if(Xe==="object")throw ee=String(z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ue}function _e(z,ee,Se){if(z==null)return z;var je=[],Ye=0;return Me(z,je,"","",function(Xe){return ee.call(Se,Xe,Ye++)}),je}function le(z){if(z._status===-1){var ee=z._result;ee=ee(),ee.then(function(Se){(z._status===0||z._status===-1)&&(z._status=1,z._result=Se)},function(Se){(z._status===0||z._status===-1)&&(z._status=2,z._result=Se)}),z._status===-1&&(z._status=0,z._result=ee)}if(z._status===1)return z._result.default;throw z._result}var ue={current:null},G={transition:null},he={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:G,ReactCurrentOwner:te};function oe(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:_e,forEach:function(z,ee,Se){_e(z,function(){ee.apply(this,arguments)},Se)},count:function(z){var ee=0;return _e(z,function(){ee++}),ee},toArray:function(z){return _e(z,function(ee){return ee})||[]},only:function(z){if(!ke(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},it.Component=M,it.Fragment=t,it.Profiler=o,it.PureComponent=b,it.StrictMode=i,it.Suspense=g,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,it.act=oe,it.cloneElement=function(z,ee,Se){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var je=P({},z.props),Ye=z.key,Xe=z.ref,Ue=z._owner;if(ee!=null){if(ee.ref!==void 0&&(Xe=ee.ref,Ue=te.current),ee.key!==void 0&&(Ye=""+ee.key),z.type&&z.type.defaultProps)var et=z.type.defaultProps;for(B in ee)X.call(ee,B)&&!ie.hasOwnProperty(B)&&(je[B]=ee[B]===void 0&&et!==void 0?et[B]:ee[B])}var B=arguments.length-2;if(B===1)je.children=Se;else if(1<B){et=Array(B);for(var Y=0;Y<B;Y++)et[Y]=arguments[Y+2];je.children=et}return{$$typeof:r,type:z.type,key:Ye,ref:Xe,props:je,_owner:Ue}},it.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:u,_context:z},z.Consumer=z},it.createElement=K,it.createFactory=function(z){var ee=K.bind(null,z);return ee.type=z,ee},it.createRef=function(){return{current:null}},it.forwardRef=function(z){return{$$typeof:f,render:z}},it.isValidElement=ke,it.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:le}},it.memo=function(z,ee){return{$$typeof:x,type:z,compare:ee===void 0?null:ee}},it.startTransition=function(z){var ee=G.transition;G.transition={};try{z()}finally{G.transition=ee}},it.unstable_act=oe,it.useCallback=function(z,ee){return ue.current.useCallback(z,ee)},it.useContext=function(z){return ue.current.useContext(z)},it.useDebugValue=function(){},it.useDeferredValue=function(z){return ue.current.useDeferredValue(z)},it.useEffect=function(z,ee){return ue.current.useEffect(z,ee)},it.useId=function(){return ue.current.useId()},it.useImperativeHandle=function(z,ee,Se){return ue.current.useImperativeHandle(z,ee,Se)},it.useInsertionEffect=function(z,ee){return ue.current.useInsertionEffect(z,ee)},it.useLayoutEffect=function(z,ee){return ue.current.useLayoutEffect(z,ee)},it.useMemo=function(z,ee){return ue.current.useMemo(z,ee)},it.useReducer=function(z,ee,Se){return ue.current.useReducer(z,ee,Se)},it.useRef=function(z){return ue.current.useRef(z)},it.useState=function(z){return ue.current.useState(z)},it.useSyncExternalStore=function(z,ee,Se){return ue.current.useSyncExternalStore(z,ee,Se)},it.useTransition=function(){return ue.current.useTransition()},it.version="18.3.1",it}var xg;function Wh(){return xg||(xg=1,Wf.exports=j2()),Wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function z2(){if(_g)return gc;_g=1;var r=Wh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,x){var _,k={},S=null,N=null;x!==void 0&&(S=""+x),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(N=g.ref);for(_ in g)i.call(g,_)&&!u.hasOwnProperty(_)&&(k[_]=g[_]);if(f&&f.defaultProps)for(_ in g=f.defaultProps,g)k[_]===void 0&&(k[_]=g[_]);return{$$typeof:e,type:f,key:S,ref:N,props:k,_owner:o.current}}return gc.Fragment=t,gc.jsx=d,gc.jsxs=d,gc}var wg;function F2(){return wg||(wg=1,Uf.exports=z2()),Uf.exports}var T=F2(),Le=Wh();const Pe=Uh(Le),B2=D2({__proto__:null,default:Pe},[Le]);var oh={},Hf={exports:{}},Cr={},Vf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function G2(){return Sg||(Sg=1,(function(r){function e(G,he){var oe=G.length;G.push(he);e:for(;0<oe;){var z=oe-1>>>1,ee=G[z];if(0<o(ee,he))G[z]=he,G[oe]=ee,oe=z;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var he=G[0],oe=G.pop();if(oe!==he){G[0]=oe;e:for(var z=0,ee=G.length,Se=ee>>>1;z<Se;){var je=2*(z+1)-1,Ye=G[je],Xe=je+1,Ue=G[Xe];if(0>o(Ye,oe))Xe<ee&&0>o(Ue,Ye)?(G[z]=Ue,G[Xe]=oe,z=Xe):(G[z]=Ye,G[je]=oe,z=je);else if(Xe<ee&&0>o(Ue,oe))G[z]=Ue,G[Xe]=oe,z=Xe;else break e}}return he}function o(G,he){var oe=G.sortIndex-he.sortIndex;return oe!==0?oe:G.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],_=1,k=null,S=3,N=!1,P=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(G){for(var he=t(x);he!==null;){if(he.callback===null)i(x);else if(he.startTime<=G)i(x),he.sortIndex=he.expirationTime,e(g,he);else break;he=t(x)}}function L(G){if(A=!1,O(G),!P)if(t(g)!==null)P=!0,le(X);else{var he=t(x);he!==null&&ue(L,he.startTime-G)}}function X(G,he){P=!1,A&&(A=!1,I(K),K=-1),N=!0;var oe=S;try{for(O(he),k=t(g);k!==null&&(!(k.expirationTime>he)||G&&!Ge());){var z=k.callback;if(typeof z=="function"){k.callback=null,S=k.priorityLevel;var ee=z(k.expirationTime<=he);he=r.unstable_now(),typeof ee=="function"?k.callback=ee:k===t(g)&&i(g),O(he)}else i(g);k=t(g)}if(k!==null)var Se=!0;else{var je=t(x);je!==null&&ue(L,je.startTime-he),Se=!1}return Se}finally{k=null,S=oe,N=!1}}var te=!1,ie=null,K=-1,ye=5,ke=-1;function Ge(){return!(r.unstable_now()-ke<ye)}function ve(){if(ie!==null){var G=r.unstable_now();ke=G;var he=!0;try{he=ie(!0,G)}finally{he?De():(te=!1,ie=null)}}else te=!1}var De;if(typeof b=="function")De=function(){b(ve)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,_e=Me.port2;Me.port1.onmessage=ve,De=function(){_e.postMessage(null)}}else De=function(){M(ve,0)};function le(G){ie=G,te||(te=!0,De())}function ue(G,he){K=M(function(){G(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_continueExecution=function(){P||N||(P=!0,le(X))},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(G){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var oe=S;S=he;try{return G()}finally{S=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=S;S=G;try{return he()}finally{S=oe}},r.unstable_scheduleCallback=function(G,he,oe){var z=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?z+oe:z):oe=z,G){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=oe+ee,G={id:_++,callback:he,priorityLevel:G,startTime:oe,expirationTime:ee,sortIndex:-1},oe>z?(G.sortIndex=oe,e(x,G),t(g)===null&&G===t(x)&&(A?(I(K),K=-1):A=!0,ue(L,oe-z))):(G.sortIndex=ee,e(g,G),P||N||(P=!0,le(X))),G},r.unstable_shouldYield=Ge,r.unstable_wrapCallback=function(G){var he=S;return function(){var oe=S;S=he;try{return G.apply(this,arguments)}finally{S=oe}}}})(qf)),qf}var kg;function i0(){return kg||(kg=1,Vf.exports=G2()),Vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function U2(){if(Cg)return Cr;Cg=1;var r=Wh(),e=i0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},k={};function S(n){return g.call(k,n)?!0:g.call(_,n)?!1:x.test(n)?k[n]=!0:(_[n]=!0,!1)}function N(n,s,c,p){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,s,c,p){if(s===null||typeof s>"u"||N(n,s,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function A(n,s,c,p,y,w,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=n,this.type=s,this.sanitizeURL=w,this.removeEmptyString=E}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){M[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];M[s]=new A(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){M[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){M[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){M[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){M[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){M[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){M[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){M[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function b(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(I,b);M[s]=new A(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(I,b);M[s]=new A(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(I,b);M[s]=new A(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){M[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),M.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){M[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,c,p){var y=M.hasOwnProperty(s)?M[s]:null;(y!==null?y.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,c,y,p)&&(c=null),p||y===null?S(s)&&(c===null?n.removeAttribute(s):n.setAttribute(s,""+c)):y.mustUseProperty?n[y.propertyName]=c===null?y.type===3?!1:"":c:(s=y.attributeName,p=y.attributeNamespace,c===null?n.removeAttribute(s):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?n.setAttributeNS(p,s,c):n.setAttribute(s,c))))}var L=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),te=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),G=Symbol.iterator;function he(n){return n===null||typeof n!="object"?null:(n=G&&n[G]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,z;function ee(n){if(z===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+n}var Se=!1;function je(n,s){if(!n||Se)return"";Se=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(J){var p=J}Reflect.construct(n,[],s)}else{try{s.call()}catch(J){p=J}n.call(s.prototype)}else{try{throw Error()}catch(J){p=J}n()}}catch(J){if(J&&p&&typeof J.stack=="string"){for(var y=J.stack.split(`
`),w=p.stack.split(`
`),E=y.length-1,D=w.length-1;1<=E&&0<=D&&y[E]!==w[D];)D--;for(;1<=E&&0<=D;E--,D--)if(y[E]!==w[D]){if(E!==1||D!==1)do if(E--,D--,0>D||y[E]!==w[D]){var F=`
`+y[E].replace(" at new "," at ");return n.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",n.displayName)),F}while(1<=E&&0<=D);break}}}finally{Se=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?ee(n):""}function Ye(n){switch(n.tag){case 5:return ee(n.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return n=je(n.type,!1),n;case 11:return n=je(n.type.render,!1),n;case 1:return n=je(n.type,!0),n;default:return""}}function Xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ie:return"Fragment";case te:return"Portal";case ye:return"Profiler";case K:return"StrictMode";case De:return"Suspense";case Me:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ge:return(n.displayName||"Context")+".Consumer";case ke:return(n._context.displayName||"Context")+".Provider";case ve:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _e:return s=n.displayName||null,s!==null?s:Xe(n.type)||"Memo";case le:s=n._payload,n=n._init;try{return Xe(n(s))}catch{}}return null}function Ue(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xe(s);case 8:return s===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function et(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function B(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Y(n){var s=B(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),p=""+n[s];if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return y.call(this)},set:function(E){p=""+E,w.call(this,E)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function re(n){n._valueTracker||(n._valueTracker=Y(n))}function We(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),p="";return n&&(p=B(n)?n.checked?"true":"false":n.value),n=p,n!==c?(s.setValue(n),!0):!1}function Re(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function He(n,s){var c=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function Ct(n,s){var c=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;c=et(s.value!=null?s.value:c),n._wrapperState={initialChecked:p,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function Cn(n,s){gt(n,s);var c=et(s.value),p=s.type;if(c!=null)p==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ut(n,s.type,c):s.hasOwnProperty("defaultValue")&&Ut(n,s.type,et(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function jt(n,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,c||s===n.value||(n.value=s),n.defaultValue=s}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function Ut(n,s,c){(s!=="number"||Re(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var Et=Array.isArray;function fn(n,s,c,p){if(n=n.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<n.length;c++)y=s.hasOwnProperty("$"+n[c].value),n[c].selected!==y&&(n[c].selected=y),y&&p&&(n[c].defaultSelected=!0)}else{for(c=""+et(c),s=null,y=0;y<n.length;y++){if(n[y].value===c){n[y].selected=!0,p&&(n[y].defaultSelected=!0);return}s!==null||n[y].disabled||(s=n[y])}s!==null&&(s.selected=!0)}}function Nr(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Tr(n,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(Et(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}n._wrapperState={initialValue:et(c)}}function Vr(n,s){var c=et(s.value),p=et(s.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),s.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),p!=null&&(n.defaultValue=""+p)}function na(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Ai(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ds(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Ai(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gr,$a=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,p,y){MSApp.execUnsafeLocalFunction(function(){return n(s,c,p,y)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function hs(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tf=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(n){tf.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),ra[s]=ra[n]})});function Yc(n,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||ra.hasOwnProperty(n)&&ra[n]?(""+s).trim():s+"px"}function Xc(n,s){n=n.style;for(var c in s)if(s.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=Yc(c,s[c],p);c==="float"&&(c="cssFloat"),p?n.setProperty(c,y):n[c]=y}}var nf=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gu(n,s){if(s){if(nf[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ja(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=null;function yu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vu=null,Js=null,Zs=null;function Qc(n){if(n=Sa(n)){if(typeof vu!="function")throw Error(t(280));var s=n.stateNode;s&&(s=un(s),vu(n.stateNode,n.type,s))}}function xu(n){Js?Zs?Zs.push(n):Zs=[n]:Js=n}function _u(){if(Js){var n=Js,s=Zs;if(Zs=Js=null,Qc(n),s)for(n=0;n<s.length;n++)Qc(s[n])}}function Kc(n,s){return n(s)}function Za(){}var el=!1;function wu(n,s,c){if(el)return n(s,c);el=!0;try{return Kc(n,s,c)}finally{el=!1,(Js!==null||Zs!==null)&&(Za(),_u())}}function ia(n,s){var c=n.stateNode;if(c===null)return null;var p=un(c);if(p===null)return null;c=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var Su=!1;if(f)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){Su=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{Su=!1}function $c(n,s,c,p,y,w,E,D,F){var J=Array.prototype.slice.call(arguments,3);try{s.apply(c,J)}catch(ae){this.onError(ae)}}var fs=!1,tl=null,nl=!1,eo=null,rf={onError:function(n){fs=!0,tl=n}};function sf(n,s,c,p,y,w,E,D,F){fs=!1,tl=null,$c.apply(rf,arguments)}function of(n,s,c,p,y,w,E,D,F){if(sf.apply(this,arguments),fs){if(fs){var J=tl;fs=!1,tl=null}else throw Error(t(198));nl||(nl=!0,eo=J)}}function ps(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function Jc(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Zc(n){if(ps(n)!==n)throw Error(t(188))}function af(n){var s=n.alternate;if(!s){if(s=ps(n),s===null)throw Error(t(188));return s!==n?null:n}for(var c=n,p=s;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return Zc(y),n;if(w===p)return Zc(y),s;w=w.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=w;else{for(var E=!1,D=y.child;D;){if(D===c){E=!0,c=y,p=w;break}if(D===p){E=!0,p=y,c=w;break}D=D.sibling}if(!E){for(D=w.child;D;){if(D===c){E=!0,c=w,p=y;break}if(D===p){E=!0,p=w,c=y;break}D=D.sibling}if(!E)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?n:s}function ed(n){return n=af(n),n!==null?td(n):null}function td(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=td(n);if(s!==null)return s;n=n.sibling}return null}var nd=e.unstable_scheduleCallback,rd=e.unstable_cancelCallback,lf=e.unstable_shouldYield,uf=e.unstable_requestPaint,Wt=e.unstable_now,ku=e.unstable_getCurrentPriorityLevel,gs=e.unstable_ImmediatePriority,rl=e.unstable_UserBlockingPriority,to=e.unstable_NormalPriority,cf=e.unstable_LowPriority,il=e.unstable_IdlePriority,ci=null,pn=null;function Pt(n){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ci,n,void 0,(n.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:Vn,Oi=Math.log,En=Math.LN2;function Vn(n){return n>>>=0,n===0?32:31-(Oi(n)/En|0)|0}var qr=64,di=4194304;function on(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ms(n,s){var c=n.pendingLanes;if(c===0)return 0;var p=0,y=n.suspendedLanes,w=n.pingedLanes,E=c&268435455;if(E!==0){var D=E&~y;D!==0?p=on(D):(w&=E,w!==0&&(p=on(w)))}else E=c&~y,E!==0?p=on(E):w!==0&&(p=on(w));if(p===0)return 0;if(s!==0&&s!==p&&(s&y)===0&&(y=p&-p,w=s&-s,y>=w||y===16&&(w&4194240)!==0))return s;if((p&4)!==0&&(p|=c&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=p;0<s;)c=31-nt(s),y=1<<c,p|=n[c],s&=~y;return p}function id(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sd(n,s){for(var c=n.suspendedLanes,p=n.pingedLanes,y=n.expirationTimes,w=n.pendingLanes;0<w;){var E=31-nt(w),D=1<<E,F=y[E];F===-1?((D&c)===0||(D&p)!==0)&&(y[E]=id(D,s)):F<=s&&(n.expiredLanes|=D),w&=~D}}function no(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Cu(){var n=qr;return qr<<=1,(qr&4194240)===0&&(qr=64),n}function er(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function oa(n,s,c){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-nt(s),n[s]=c}function df(n,s){var c=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<c;){var y=31-nt(c),w=1<<y;s[y]=0,p[y]=-1,n[y]=-1,c&=~w}}function Eu(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var p=31-nt(c),y=1<<p;y&s|n[p]&s&&(n[p]|=s),c&=~y}}var ut=0;function aa(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ro,io,od,ad,sl,ol=!1,so=[],mr=null,Li=null,Yr=null,rt=new Map,oo=new Map,Xr=[],ld="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ud(n,s){switch(n){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":rt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(s.pointerId)}}function la(n,s,c,p,y,w){return n===null||n.nativeEvent!==w?(n={blockedOn:s,domEventName:c,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},s!==null&&(s=Sa(s),s!==null&&io(s)),n):(n.eventSystemFlags|=p,s=n.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),n)}function an(n,s,c,p,y){switch(s){case"focusin":return mr=la(mr,n,s,c,p,y),!0;case"dragenter":return Li=la(Li,n,s,c,p,y),!0;case"mouseover":return Yr=la(Yr,n,s,c,p,y),!0;case"pointerover":var w=y.pointerId;return rt.set(w,la(rt.get(w)||null,n,s,c,p,y)),!0;case"gotpointercapture":return w=y.pointerId,oo.set(w,la(oo.get(w)||null,n,s,c,p,y)),!0}return!1}function al(n){var s=Vi(n.target);if(s!==null){var c=ps(s);if(c!==null){if(s=c.tag,s===13){if(s=Jc(c),s!==null){n.blockedOn=s,sl(n.priority,function(){od(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ll(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=dl(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var p=new c.constructor(c.type,c);mu=p,c.target.dispatchEvent(p),mu=null}else return s=Sa(c),s!==null&&io(s),n.blockedOn=c,!1;s.shift()}return!0}function ul(n,s,c){ll(n)&&c.delete(s)}function hf(){ol=!1,mr!==null&&ll(mr)&&(mr=null),Li!==null&&ll(Li)&&(Li=null),Yr!==null&&ll(Yr)&&(Yr=null),rt.forEach(ul),oo.forEach(ul)}function Di(n,s){n.blockedOn===s&&(n.blockedOn=null,ol||(ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hf)))}function qn(n){function s(y){return Di(y,n)}if(0<so.length){Di(so[0],n);for(var c=1;c<so.length;c++){var p=so[c];p.blockedOn===n&&(p.blockedOn=null)}}for(mr!==null&&Di(mr,n),Li!==null&&Di(Li,n),Yr!==null&&Di(Yr,n),rt.forEach(s),oo.forEach(s),c=0;c<Xr.length;c++)p=Xr[c],p.blockedOn===n&&(p.blockedOn=null);for(;0<Xr.length&&(c=Xr[0],c.blockedOn===null);)al(c),c.blockedOn===null&&Xr.shift()}var ao=L.ReactCurrentBatchConfig,cl=!0;function br(n,s,c,p){var y=ut,w=ao.transition;ao.transition=null;try{ut=1,lo(n,s,c,p)}finally{ut=y,ao.transition=w}}function hi(n,s,c,p){var y=ut,w=ao.transition;ao.transition=null;try{ut=4,lo(n,s,c,p)}finally{ut=y,ao.transition=w}}function lo(n,s,c,p){if(cl){var y=dl(n,s,c,p);if(y===null)Nl(n,s,p,uo,c),ud(n,p);else if(an(y,n,s,c,p))p.stopPropagation();else if(ud(n,p),s&4&&-1<ld.indexOf(n)){for(;y!==null;){var w=Sa(y);if(w!==null&&ro(w),w=dl(n,s,c,p),w===null&&Nl(n,s,p,uo,c),w===y)break;y=w}y!==null&&p.stopPropagation()}else Nl(n,s,p,null,c)}}var uo=null;function dl(n,s,c,p){if(uo=null,n=yu(p),n=Vi(n),n!==null)if(s=ps(n),s===null)n=null;else if(c=s.tag,c===13){if(n=Jc(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return uo=n,null}function cd(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ku()){case gs:return 1;case rl:return 4;case to:case cf:return 16;case il:return 536870912;default:return 16}default:return 16}}var gn=null,ji=null,fi=null;function ua(){if(fi)return fi;var n,s=ji,c=s.length,p,y="value"in gn?gn.value:gn.textContent,w=y.length;for(n=0;n<c&&s[n]===y[n];n++);var E=c-n;for(p=1;p<=E&&s[c-p]===y[w-p];p++);return fi=y.slice(n,1<p?1-p:void 0)}function ys(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function On(){return!0}function tr(){return!1}function Jt(n){function s(c,p,y,w,E){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=E,this.currentTarget=null;for(var D in n)n.hasOwnProperty(D)&&(c=n[D],this[D]=c?c(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?On:tr,this.isPropagationStopped=tr,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),s}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=Jt(Yn),Mr=oe({},Yn,{view:0,detail:0}),dd=Jt(Mr),ca,da,mn,Ln=oe({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mn&&(mn&&n.type==="mousemove"?(ca=n.screenX-mn.screenX,da=n.screenY-mn.screenY):da=ca=0,mn=n),ca)},movementY:function(n){return"movementY"in n?n.movementY:da}}),Nt=Jt(Ln),ha=oe({},Ln,{dataTransfer:0}),Ir=Jt(ha),hd=oe({},Mr,{relatedTarget:0}),hl=Jt(hd),Pu=oe({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=Jt(Pu),fd=oe({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fl=Jt(fd),pd=oe({},Yn,{data:0}),vs=Jt(pd),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ff={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=pl[n])?!!s[n]:!1}function xs(){return pf}var gl=oe({},Mr,{key:function(n){if(n.key){var s=Tu[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ys(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ff[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xs,charCode:function(n){return n.type==="keypress"?ys(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ys(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gd=Jt(gl),md=oe({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_s=Jt(md),yd=oe({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xs}),ml=Jt(yd),yl=oe({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),co=Jt(yl),bu=oe({},Ln,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ru=Jt(bu),vd=[9,13,27,32],fa=f&&"CompositionEvent"in window,ws=null;f&&"documentMode"in document&&(ws=document.documentMode);var ho=f&&"TextEvent"in window&&!ws,nr=f&&(!fa||ws&&8<ws&&11>=ws),zi=" ",vl=!1;function Mu(n,s){switch(n){case"keyup":return vd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ar(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var rr=!1;function Iu(n,s){switch(n){case"compositionend":return Ar(s);case"keypress":return s.which!==32?null:(vl=!0,zi);case"textInput":return n=s.data,n===zi&&vl?null:n;default:return null}}function xd(n,s){if(rr)return n==="compositionend"||!fa&&Mu(n,s)?(n=ua(),fi=ji=gn=null,rr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return nr&&s.locale!=="ko"?null:s.data;default:return null}}var pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gi(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!pi[n.type]:s==="textarea"}function pa(n,s,c,p){xu(p),s=Tl(s,"onChange"),0<s.length&&(c=new Rr("onChange","change",null,c,p),n.push({event:c,listeners:s}))}var fo=null,Fi=null;function _d(n){Wu(n,0)}function Bi(n){var s=en(n);if(We(s))return n}function yr(n,s){if(n==="change")return s}var po=!1;if(f){var Gi;if(f){var vr="oninput"in document;if(!vr){var xl=document.createElement("div");xl.setAttribute("oninput","return;"),vr=typeof xl.oninput=="function"}Gi=vr}else Gi=!1;po=Gi&&(!document.documentMode||9<document.documentMode)}function Ss(){fo&&(fo.detachEvent("onpropertychange",Au),Fi=fo=null)}function Au(n){if(n.propertyName==="value"&&Bi(Fi)){var s=[];pa(s,Fi,n,yu(n)),wu(_d,s)}}function Ou(n,s,c){n==="focusin"?(Ss(),fo=s,Fi=c,fo.attachEvent("onpropertychange",Au)):n==="focusout"&&Ss()}function zt(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bi(Fi)}function _l(n,s){if(n==="click")return Bi(s)}function Lu(n,s){if(n==="input"||n==="change")return Bi(s)}function Du(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Xn=typeof Object.is=="function"?Object.is:Du;function ks(n,s){if(Xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),p=Object.keys(s);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!g.call(s,y)||!Xn(n[y],s[y]))return!1}return!0}function Ui(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mt(n,s){var c=Ui(n);n=0;for(var p;c;){if(c.nodeType===3){if(p=n+c.textContent.length,n<=s&&p>=s)return{node:c,offset:s-n};n=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ui(c)}}function Yt(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Yt(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Zt(){for(var n=window,s=Re();s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=Re(n.document)}return s}function go(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function ga(n){var s=Zt(),c=n.focusedElem,p=n.selectionRange;if(s!==c&&c&&c.ownerDocument&&Yt(c.ownerDocument.documentElement,c)){if(p!==null&&go(c)){if(s=p.start,n=p.end,n===void 0&&(n=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(n,c.value.length);else if(n=(s=c.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var y=c.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!n.extend&&w>p&&(y=p,p=w,w=y),y=Mt(c,w);var E=Mt(c,p);y&&E&&(n.rangeCount!==1||n.anchorNode!==y.node||n.anchorOffset!==y.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(y.node,y.offset),n.removeAllRanges(),w>p?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=c;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)n=s[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ma=f&&"documentMode"in document&&11>=document.documentMode,mo=null,ln=null,Cs=null,ya=!1;function wl(n,s,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ya||mo==null||mo!==Re(p)||(p=mo,"selectionStart"in p&&go(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Cs&&ks(Cs,p)||(Cs=p,p=Tl(ln,"onSelect"),0<p.length&&(s=new Rr("onSelect","select",null,s,c),n.push({event:s,listeners:p}),s.target=mo)))}function ir(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var yn={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionend:ir("Transition","TransitionEnd")},Es={},Sl={};f&&(Sl=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function yo(n){if(Es[n])return Es[n];if(!yn[n])return n;var s=yn[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in Sl)return Es[n]=s[c];return n}var ju=yo("animationend"),zu=yo("animationiteration"),Fu=yo("animationstart"),Bu=yo("transitionend"),Gu=new Map,Uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(n,s){Gu.set(n,s),u(s,[n])}for(var kl=0;kl<Uu.length;kl++){var Ps=Uu[kl],wd=Ps.toLowerCase(),Cl=Ps[0].toUpperCase()+Ps.slice(1);mi(wd,"on"+Cl)}mi(ju,"onAnimationEnd"),mi(zu,"onAnimationIteration"),mi(Fu,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Bu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function El(n,s,c){var p=n.type||"unknown-event";n.currentTarget=c,of(p,s,void 0,n),n.currentTarget=null}function Wu(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var p=n[c],y=p.event;p=p.listeners;e:{var w=void 0;if(s)for(var E=p.length-1;0<=E;E--){var D=p[E],F=D.instance,J=D.currentTarget;if(D=D.listener,F!==w&&y.isPropagationStopped())break e;El(y,D,J),w=F}else for(E=0;E<p.length;E++){if(D=p[E],F=D.instance,J=D.currentTarget,D=D.listener,F!==w&&y.isPropagationStopped())break e;El(y,D,J),w=F}}}if(nl)throw n=eo,nl=!1,eo=null,n}function _t(n,s){var c=s[Rl];c===void 0&&(c=s[Rl]=new Set);var p=n+"__bubble";c.has(p)||(Hu(s,n,2,!1),c.add(p))}function Pl(n,s,c){var p=0;s&&(p|=4),Hu(c,n,p,s)}var va="_reactListening"+Math.random().toString(36).slice(2);function Ns(n){if(!n[va]){n[va]=!0,i.forEach(function(c){c!=="selectionchange"&&(Sd.has(c)||Pl(c,!1,n),Pl(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[va]||(s[va]=!0,Pl("selectionchange",!1,s))}}function Hu(n,s,c,p){switch(cd(s)){case 1:var y=br;break;case 4:y=hi;break;default:y=lo}c=y.bind(null,s,c,n),y=void 0,!Su||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),p?y!==void 0?n.addEventListener(s,c,{capture:!0,passive:y}):n.addEventListener(s,c,!0):y!==void 0?n.addEventListener(s,c,{passive:y}):n.addEventListener(s,c,!1)}function Nl(n,s,c,p,y){var w=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var D=p.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(E===4)for(E=p.return;E!==null;){var F=E.tag;if((F===3||F===4)&&(F=E.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;E=E.return}for(;D!==null;){if(E=Vi(D),E===null)return;if(F=E.tag,F===5||F===6){p=w=E;continue e}D=D.parentNode}}p=p.return}wu(function(){var J=w,ae=yu(c),de=[];e:{var se=Gu.get(n);if(se!==void 0){var Ne=Rr,Ie=n;switch(n){case"keypress":if(ys(c)===0)break e;case"keydown":case"keyup":Ne=gd;break;case"focusin":Ie="focus",Ne=hl;break;case"focusout":Ie="blur",Ne=hl;break;case"beforeblur":case"afterblur":Ne=hl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=Ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=ml;break;case ju:case zu:case Fu:Ne=Nu;break;case Bu:Ne=co;break;case"scroll":Ne=dd;break;case"wheel":Ne=Ru;break;case"copy":case"cut":case"paste":Ne=fl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=_s}var ze=(s&4)!==0,sn=!ze&&n==="scroll",q=ze?se!==null?se+"Capture":null:se;ze=[];for(var U=J,Q;U!==null;){Q=U;var ge=Q.stateNode;if(Q.tag===5&&ge!==null&&(Q=ge,q!==null&&(ge=ia(U,q),ge!=null&&ze.push(vo(U,ge,Q)))),sn)break;U=U.return}0<ze.length&&(se=new Ne(se,Ie,null,c,ae),de.push({event:se,listeners:ze}))}}if((s&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",Ne=n==="mouseout"||n==="pointerout",se&&c!==mu&&(Ie=c.relatedTarget||c.fromElement)&&(Vi(Ie)||Ie[Kr]))break e;if((Ne||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,Ne?(Ie=c.relatedTarget||c.toElement,Ne=J,Ie=Ie?Vi(Ie):null,Ie!==null&&(sn=ps(Ie),Ie!==sn||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(Ne=null,Ie=J),Ne!==Ie)){if(ze=Nt,ge="onMouseLeave",q="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(ze=_s,ge="onPointerLeave",q="onPointerEnter",U="pointer"),sn=Ne==null?se:en(Ne),Q=Ie==null?se:en(Ie),se=new ze(ge,U+"leave",Ne,c,ae),se.target=sn,se.relatedTarget=Q,ge=null,Vi(ae)===J&&(ze=new ze(q,U+"enter",Ie,c,ae),ze.target=Q,ze.relatedTarget=sn,ge=ze),sn=ge,Ne&&Ie)t:{for(ze=Ne,q=Ie,U=0,Q=ze;Q;Q=Ts(Q))U++;for(Q=0,ge=q;ge;ge=Ts(ge))Q++;for(;0<U-Q;)ze=Ts(ze),U--;for(;0<Q-U;)q=Ts(q),Q--;for(;U--;){if(ze===q||q!==null&&ze===q.alternate)break t;ze=Ts(ze),q=Ts(q)}ze=null}else ze=null;Ne!==null&&kd(de,se,Ne,ze,!1),Ie!==null&&sn!==null&&kd(de,sn,Ie,ze,!0)}}e:{if(se=J?en(J):window,Ne=se.nodeName&&se.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&se.type==="file")var Fe=yr;else if(gi(se))if(po)Fe=Lu;else{Fe=zt;var Ve=Ou}else(Ne=se.nodeName)&&Ne.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Fe=_l);if(Fe&&(Fe=Fe(n,J))){pa(de,Fe,c,ae);break e}Ve&&Ve(n,se,J),n==="focusout"&&(Ve=se._wrapperState)&&Ve.controlled&&se.type==="number"&&Ut(se,"number",se.value)}switch(Ve=J?en(J):window,n){case"focusin":(gi(Ve)||Ve.contentEditable==="true")&&(mo=Ve,ln=J,Cs=null);break;case"focusout":Cs=ln=mo=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,wl(de,c,ae);break;case"selectionchange":if(ma)break;case"keydown":case"keyup":wl(de,c,ae)}var qe;if(fa)e:{switch(n){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else rr?Mu(n,c)&&(Qe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(nr&&c.locale!=="ko"&&(rr||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&rr&&(qe=ua()):(gn=ae,ji="value"in gn?gn.value:gn.textContent,rr=!0)),Ve=Tl(J,Qe),0<Ve.length&&(Qe=new vs(Qe,n,null,c,ae),de.push({event:Qe,listeners:Ve}),qe?Qe.data=qe:(qe=Ar(c),qe!==null&&(Qe.data=qe)))),(qe=ho?Iu(n,c):xd(n,c))&&(J=Tl(J,"onBeforeInput"),0<J.length&&(ae=new vs("onBeforeInput","beforeinput",null,c,ae),de.push({event:ae,listeners:J}),ae.data=qe))}Wu(de,s)})}function vo(n,s,c){return{instance:n,listener:s,currentTarget:c}}function Tl(n,s){for(var c=s+"Capture",p=[];n!==null;){var y=n,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=ia(n,c),w!=null&&p.unshift(vo(n,w,y)),w=ia(n,s),w!=null&&p.push(vo(n,w,y))),n=n.return}return p}function Ts(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function kd(n,s,c,p,y){for(var w=s._reactName,E=[];c!==null&&c!==p;){var D=c,F=D.alternate,J=D.stateNode;if(F!==null&&F===p)break;D.tag===5&&J!==null&&(D=J,y?(F=ia(c,w),F!=null&&E.unshift(vo(c,F,D))):y||(F=ia(c,w),F!=null&&E.push(vo(c,F,D)))),c=c.return}E.length!==0&&n.push({event:s,listeners:E})}var gf=/\r\n?/g,Cd=/\u0000|\uFFFD/g;function Vu(n){return(typeof n=="string"?n:""+n).replace(gf,`
`).replace(Cd,"")}function xa(n,s,c){if(s=Vu(s),Vu(n)!==s&&c)throw Error(t(425))}function bs(){}var qu=null,Yu=null;function Xu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sr=typeof setTimeout=="function"?setTimeout:void 0,Qu=typeof clearTimeout=="function"?clearTimeout:void 0,_a=typeof Promise=="function"?Promise:void 0,Ed=typeof queueMicrotask=="function"?queueMicrotask:typeof _a<"u"?function(n){return _a.resolve(null).then(n).catch(Pd)}:sr;function Pd(n){setTimeout(function(){throw n})}function bl(n,s){var c=s,p=0;do{var y=c.nextSibling;if(n.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){n.removeChild(y),qn(s);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);qn(s)}function Qr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Rs(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return n;s--}else c==="/$"&&s++}n=n.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),xr="__reactFiber$"+Hi,wa="__reactProps$"+Hi,Kr="__reactContainer$"+Hi,Rl="__reactEvents$"+Hi,Nd="__reactListeners$"+Hi,Td="__reactHandles$"+Hi;function Vi(n){var s=n[xr];if(s)return s;for(var c=n.parentNode;c;){if(s=c[Kr]||c[xr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=Rs(n);n!==null;){if(c=n[xr])return c;n=Rs(n)}return s}n=c,c=n.parentNode}return null}function Sa(n){return n=n[xr]||n[Kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function en(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function un(n){return n[wa]||null}var Ml=[],Ms=-1;function yi(n){return{current:n}}function wt(n){0>Ms||(n.current=Ml[Ms],Ml[Ms]=null,Ms--)}function vt(n,s){Ms++,Ml[Ms]=n.current,n.current=s}var $r={},vn=yi($r),Pn=yi(!1),qi=$r;function Is(n,s){var c=n.type.contextTypes;if(!c)return $r;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=s[w];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=y),y}function Nn(n){return n=n.childContextTypes,n!=null}function xo(){wt(Pn),wt(vn)}function Ku(n,s,c){if(vn.current!==$r)throw Error(t(168));vt(vn,s),vt(Pn,c)}function Il(n,s,c){var p=n.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in s))throw Error(t(108,Ue(n)||"Unknown",y));return oe({},c,p)}function As(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$r,qi=vn.current,vt(vn,n),vt(Pn,Pn.current),!0}function bd(n,s,c){var p=n.stateNode;if(!p)throw Error(t(169));c?(n=Il(n,s,qi),p.__reactInternalMemoizedMergedChildContext=n,wt(Pn),wt(vn),vt(vn,n)):wt(Pn),vt(Pn,c)}var Jr=null,_o=!1,Al=!1;function ka(n){Jr===null?Jr=[n]:Jr.push(n)}function vi(n){_o=!0,ka(n)}function Yi(){if(!Al&&Jr!==null){Al=!0;var n=0,s=ut;try{var c=Jr;for(ut=1;n<c.length;n++){var p=c[n];do p=p(!0);while(p!==null)}Jr=null,_o=!1}catch(y){throw Jr!==null&&(Jr=Jr.slice(n+1)),nd(gs,Yi),y}finally{ut=s,Al=!1}}return null}var Dn=[],Os=0,Xi=null,Qi=0,jn=[],zn=0,Ki=null,or=1,It="";function Ls(n,s){Dn[Os++]=Qi,Dn[Os++]=Xi,Xi=n,Qi=s}function Rd(n,s,c){jn[zn++]=or,jn[zn++]=It,jn[zn++]=Ki,Ki=n;var p=or;n=It;var y=32-nt(p)-1;p&=~(1<<y),c+=1;var w=32-nt(s)+y;if(30<w){var E=y-y%5;w=(p&(1<<E)-1).toString(32),p>>=E,y-=E,or=1<<32-nt(s)+y|c<<y|p,It=w+n}else or=1<<w|c<<y|p,It=n}function wo(n){n.return!==null&&(Ls(n,1),Rd(n,1,0))}function cn(n){for(;n===Xi;)Xi=Dn[--Os],Dn[Os]=null,Qi=Dn[--Os],Dn[Os]=null;for(;n===Ki;)Ki=jn[--zn],jn[zn]=null,It=jn[--zn],jn[zn]=null,or=jn[--zn],jn[zn]=null}var ar=null,we=null,ht=!1,lr=null;function $u(n,s){var c=si(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=n,s=n.deletions,s===null?(n.deletions=[c],n.flags|=16):s.push(c)}function Md(n,s){switch(n.tag){case 5:var c=n.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,ar=n,we=Qr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,ar=n,we=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Ki!==null?{id:or,overflow:It}:null,n.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=si(18,null,null,0),c.stateNode=s,c.return=n,n.child=c,ar=n,we=null,!0):!1;default:return!1}}function Ds(n){return(n.mode&1)!==0&&(n.flags&128)===0}function So(n){if(ht){var s=we;if(s){var c=s;if(!Md(n,s)){if(Ds(n))throw Error(t(418));s=Qr(c.nextSibling);var p=ar;s&&Md(n,s)?$u(p,c):(n.flags=n.flags&-4097|2,ht=!1,ar=n)}}else{if(Ds(n))throw Error(t(418));n.flags=n.flags&-4097|2,ht=!1,ar=n}}}function Ol(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function Ca(n){if(n!==ar)return!1;if(!ht)return Ol(n),ht=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Xu(n.type,n.memoizedProps)),s&&(s=we)){if(Ds(n))throw Ju(),Error(t(418));for(;s;)$u(n,s),s=Qr(s.nextSibling)}if(Ol(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(s===0){we=Qr(n.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}n=n.nextSibling}we=null}}else we=ar?Qr(n.stateNode.nextSibling):null;return!0}function Ju(){for(var n=we;n;)n=Qr(n.nextSibling)}function js(){we=ar=null,ht=!1}function Ea(n){lr===null?lr=[n]:lr.push(n)}var Zu=L.ReactCurrentBatchConfig;function Ht(n,s,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,n));var y=p,w=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===w?s.ref:(s=function(E){var D=y.refs;E===null?delete D[w]:D[w]=E},s._stringRef=w,s)}if(typeof n!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,n))}return n}function Qn(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Or(n){var s=n._init;return s(n._payload)}function Ll(n){function s(q,U){if(n){var Q=q.deletions;Q===null?(q.deletions=[U],q.flags|=16):Q.push(U)}}function c(q,U){if(!n)return null;for(;U!==null;)s(q,U),U=U.sibling;return null}function p(q,U){for(q=new Map;U!==null;)U.key!==null?q.set(U.key,U):q.set(U.index,U),U=U.sibling;return q}function y(q,U){return q=Uo(q,U),q.index=0,q.sibling=null,q}function w(q,U,Q){return q.index=Q,n?(Q=q.alternate,Q!==null?(Q=Q.index,Q<U?(q.flags|=2,U):Q):(q.flags|=2,U)):(q.flags|=1048576,U)}function E(q){return n&&q.alternate===null&&(q.flags|=2),q}function D(q,U,Q,ge){return U===null||U.tag!==6?(U=Df(Q,q.mode,ge),U.return=q,U):(U=y(U,Q),U.return=q,U)}function F(q,U,Q,ge){var Fe=Q.type;return Fe===ie?ae(q,U,Q.props.children,ge,Q.key):U!==null&&(U.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===le&&Or(Fe)===U.type)?(ge=y(U,Q.props),ge.ref=Ht(q,U,Q),ge.return=q,ge):(ge=Jd(Q.type,Q.key,Q.props,null,q.mode,ge),ge.ref=Ht(q,U,Q),ge.return=q,ge)}function J(q,U,Q,ge){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=jf(Q,q.mode,ge),U.return=q,U):(U=y(U,Q.children||[]),U.return=q,U)}function ae(q,U,Q,ge,Fe){return U===null||U.tag!==7?(U=Da(Q,q.mode,ge,Fe),U.return=q,U):(U=y(U,Q),U.return=q,U)}function de(q,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=Df(""+U,q.mode,Q),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case X:return Q=Jd(U.type,U.key,U.props,null,q.mode,Q),Q.ref=Ht(q,null,U),Q.return=q,Q;case te:return U=jf(U,q.mode,Q),U.return=q,U;case le:var ge=U._init;return de(q,ge(U._payload),Q)}if(Et(U)||he(U))return U=Da(U,q.mode,Q,null),U.return=q,U;Qn(q,U)}return null}function se(q,U,Q,ge){var Fe=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Fe!==null?null:D(q,U,""+Q,ge);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case X:return Q.key===Fe?F(q,U,Q,ge):null;case te:return Q.key===Fe?J(q,U,Q,ge):null;case le:return Fe=Q._init,se(q,U,Fe(Q._payload),ge)}if(Et(Q)||he(Q))return Fe!==null?null:ae(q,U,Q,ge,null);Qn(q,Q)}return null}function Ne(q,U,Q,ge,Fe){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return q=q.get(Q)||null,D(U,q,""+ge,Fe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case X:return q=q.get(ge.key===null?Q:ge.key)||null,F(U,q,ge,Fe);case te:return q=q.get(ge.key===null?Q:ge.key)||null,J(U,q,ge,Fe);case le:var Ve=ge._init;return Ne(q,U,Q,Ve(ge._payload),Fe)}if(Et(ge)||he(ge))return q=q.get(Q)||null,ae(U,q,ge,Fe,null);Qn(U,ge)}return null}function Ie(q,U,Q,ge){for(var Fe=null,Ve=null,qe=U,Qe=U=0,An=null;qe!==null&&Qe<Q.length;Qe++){qe.index>Qe?(An=qe,qe=null):An=qe.sibling;var dt=se(q,qe,Q[Qe],ge);if(dt===null){qe===null&&(qe=An);break}n&&qe&&dt.alternate===null&&s(q,qe),U=w(dt,U,Qe),Ve===null?Fe=dt:Ve.sibling=dt,Ve=dt,qe=An}if(Qe===Q.length)return c(q,qe),ht&&Ls(q,Qe),Fe;if(qe===null){for(;Qe<Q.length;Qe++)qe=de(q,Q[Qe],ge),qe!==null&&(U=w(qe,U,Qe),Ve===null?Fe=qe:Ve.sibling=qe,Ve=qe);return ht&&Ls(q,Qe),Fe}for(qe=p(q,qe);Qe<Q.length;Qe++)An=Ne(qe,q,Qe,Q[Qe],ge),An!==null&&(n&&An.alternate!==null&&qe.delete(An.key===null?Qe:An.key),U=w(An,U,Qe),Ve===null?Fe=An:Ve.sibling=An,Ve=An);return n&&qe.forEach(function(Wo){return s(q,Wo)}),ht&&Ls(q,Qe),Fe}function ze(q,U,Q,ge){var Fe=he(Q);if(typeof Fe!="function")throw Error(t(150));if(Q=Fe.call(Q),Q==null)throw Error(t(151));for(var Ve=Fe=null,qe=U,Qe=U=0,An=null,dt=Q.next();qe!==null&&!dt.done;Qe++,dt=Q.next()){qe.index>Qe?(An=qe,qe=null):An=qe.sibling;var Wo=se(q,qe,dt.value,ge);if(Wo===null){qe===null&&(qe=An);break}n&&qe&&Wo.alternate===null&&s(q,qe),U=w(Wo,U,Qe),Ve===null?Fe=Wo:Ve.sibling=Wo,Ve=Wo,qe=An}if(dt.done)return c(q,qe),ht&&Ls(q,Qe),Fe;if(qe===null){for(;!dt.done;Qe++,dt=Q.next())dt=de(q,dt.value,ge),dt!==null&&(U=w(dt,U,Qe),Ve===null?Fe=dt:Ve.sibling=dt,Ve=dt);return ht&&Ls(q,Qe),Fe}for(qe=p(q,qe);!dt.done;Qe++,dt=Q.next())dt=Ne(qe,q,Qe,dt.value,ge),dt!==null&&(n&&dt.alternate!==null&&qe.delete(dt.key===null?Qe:dt.key),U=w(dt,U,Qe),Ve===null?Fe=dt:Ve.sibling=dt,Ve=dt);return n&&qe.forEach(function(L2){return s(q,L2)}),ht&&Ls(q,Qe),Fe}function sn(q,U,Q,ge){if(typeof Q=="object"&&Q!==null&&Q.type===ie&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case X:e:{for(var Fe=Q.key,Ve=U;Ve!==null;){if(Ve.key===Fe){if(Fe=Q.type,Fe===ie){if(Ve.tag===7){c(q,Ve.sibling),U=y(Ve,Q.props.children),U.return=q,q=U;break e}}else if(Ve.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===le&&Or(Fe)===Ve.type){c(q,Ve.sibling),U=y(Ve,Q.props),U.ref=Ht(q,Ve,Q),U.return=q,q=U;break e}c(q,Ve);break}else s(q,Ve);Ve=Ve.sibling}Q.type===ie?(U=Da(Q.props.children,q.mode,ge,Q.key),U.return=q,q=U):(ge=Jd(Q.type,Q.key,Q.props,null,q.mode,ge),ge.ref=Ht(q,U,Q),ge.return=q,q=ge)}return E(q);case te:e:{for(Ve=Q.key;U!==null;){if(U.key===Ve)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){c(q,U.sibling),U=y(U,Q.children||[]),U.return=q,q=U;break e}else{c(q,U);break}else s(q,U);U=U.sibling}U=jf(Q,q.mode,ge),U.return=q,q=U}return E(q);case le:return Ve=Q._init,sn(q,U,Ve(Q._payload),ge)}if(Et(Q))return Ie(q,U,Q,ge);if(he(Q))return ze(q,U,Q,ge);Qn(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,U!==null&&U.tag===6?(c(q,U.sibling),U=y(U,Q),U.return=q,q=U):(c(q,U),U=Df(Q,q.mode,ge),U.return=q,q=U),E(q)):c(q,U)}return sn}var zs=Ll(!0),_r=Ll(!1),Pa=yi(null),ur=null,ko=null,Dl=null;function jl(){Dl=ko=ur=null}function zl(n){var s=Pa.current;wt(Pa),n._currentValue=s}function Fl(n,s,c){for(;n!==null;){var p=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),n===c)break;n=n.return}}function xi(n,s){ur=n,Dl=ko=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(C=!0),n.firstContext=null)}function Fn(n){var s=n._currentValue;if(Dl!==n)if(n={context:n,memoizedValue:s,next:null},ko===null){if(ur===null)throw Error(t(308));ko=n,ur.dependencies={lanes:0,firstContext:n}}else ko=ko.next=n;return s}var Zr=null;function Co(n){Zr===null?Zr=[n]:Zr.push(n)}function Na(n,s,c,p){var y=s.interleaved;return y===null?(c.next=c,Co(s)):(c.next=y.next,y.next=c),s.interleaved=c,cr(n,p)}function cr(n,s){n.lanes|=s;var c=n.alternate;for(c!==null&&(c.lanes|=s),c=n,n=n.return;n!==null;)n.childLanes|=s,c=n.alternate,c!==null&&(c.childLanes|=s),c=n,n=n.return;return c.tag===3?c.stateNode:null}var ei=!1;function Ta(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bl(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ti(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ni(n,s,c){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var y=p.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),p.pending=s,cr(n,c)}return y=p.interleaved,y===null?(s.next=s,Co(p)):(s.next=y.next,y.next=s),p.interleaved=s,cr(n,c)}function Gl(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var p=s.lanes;p&=n.pendingLanes,c|=p,s.lanes=c,Eu(n,c)}}function ba(n,s){var c=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var E={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=E:w=w.next=E,c=c.next}while(c!==null);w===null?y=w=s:w=w.next=s}else y=w=s;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}function Eo(n,s,c,p){var y=n.updateQueue;ei=!1;var w=y.firstBaseUpdate,E=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,J=F.next;F.next=null,E===null?w=J:E.next=J,E=F;var ae=n.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==E&&(D===null?ae.firstBaseUpdate=J:D.next=J,ae.lastBaseUpdate=F))}if(w!==null){var de=y.baseState;E=0,ae=J=F=null,D=w;do{var se=D.lane,Ne=D.eventTime;if((p&se)===se){ae!==null&&(ae=ae.next={eventTime:Ne,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Ie=n,ze=D;switch(se=s,Ne=c,ze.tag){case 1:if(Ie=ze.payload,typeof Ie=="function"){de=Ie.call(Ne,de,se);break e}de=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ze.payload,se=typeof Ie=="function"?Ie.call(Ne,de,se):Ie,se==null)break e;de=oe({},de,se);break e;case 2:ei=!0}}D.callback!==null&&D.lane!==0&&(n.flags|=64,se=y.effects,se===null?y.effects=[D]:se.push(D))}else Ne={eventTime:Ne,lane:se,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(J=ae=Ne,F=de):ae=ae.next=Ne,E|=se;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;se=D,D=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(ae===null&&(F=de),y.baseState=F,y.firstBaseUpdate=J,y.lastBaseUpdate=ae,s=y.shared.interleaved,s!==null){y=s;do E|=y.lane,y=y.next;while(y!==s)}else w===null&&(y.shared.lanes=0);Ia|=E,n.lanes=E,n.memoizedState=de}}function Bt(n,s,c){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var p=n[s],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Je={},xt=yi(Je),At=yi(Je),Vt=yi(Je);function tn(n){if(n===Je)throw Error(t(174));return n}function $i(n,s){switch(vt(Vt,s),vt(At,n),vt(xt,Je),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ds(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ds(s,n)}wt(xt),vt(xt,s)}function Ot(){wt(xt),wt(At),wt(Vt)}function Po(n){tn(Vt.current);var s=tn(xt.current),c=ds(s,n.type);s!==c&&(vt(At,n),vt(xt,c))}function _i(n){At.current===n&&(wt(xt),wt(At))}var St=yi(0);function No(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fs=[];function Tn(){for(var n=0;n<Fs.length;n++)Fs[n]._workInProgressVersionPrimary=null;Fs.length=0}var To=L.ReactCurrentDispatcher,Ra=L.ReactCurrentBatchConfig,Bn=0,mt=null,Gt=null,Xt=null,Lr=!1,Ji=!1,wr=0,Ul=0;function Qt(){throw Error(t(321))}function Ma(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!Xn(n[c],s[c]))return!1;return!0}function bo(n,s,c,p,y,w){if(Bn=w,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,To.current=n===null||n.memoizedState===null?yf:ts,n=c(p,y),Ji){w=0;do{if(Ji=!1,wr=0,25<=w)throw Error(t(301));w+=1,Xt=Gt=null,s.updateQueue=null,To.current=Yl,n=c(p,y)}while(Ji)}if(To.current=Ao,s=Gt!==null&&Gt.next!==null,Bn=0,Xt=Gt=mt=null,Lr=!1,s)throw Error(t(300));return n}function Ro(){var n=wr!==0;return wr=0,n}function Tt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?mt.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function nn(){if(Gt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var s=Xt===null?mt.memoizedState:Xt.next;if(s!==null)Xt=s,Gt=n;else{if(n===null)throw Error(t(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Xt===null?mt.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function bn(n,s){return typeof s=="function"?s(n):s}function Rn(n){var s=nn(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var p=Gt,y=p.baseQueue,w=c.pending;if(w!==null){if(y!==null){var E=y.next;y.next=w.next,w.next=E}p.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,p=p.baseState;var D=E=null,F=null,J=w;do{var ae=J.lane;if((Bn&ae)===ae)F!==null&&(F=F.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),p=J.hasEagerState?J.eagerState:n(p,J.action);else{var de={lane:ae,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};F===null?(D=F=de,E=p):F=F.next=de,mt.lanes|=ae,Ia|=ae}J=J.next}while(J!==null&&J!==w);F===null?E=p:F.next=D,Xn(p,s.memoizedState)||(C=!0),s.memoizedState=p,s.baseState=E,s.baseQueue=F,c.lastRenderedState=p}if(n=c.interleaved,n!==null){y=n;do w=y.lane,mt.lanes|=w,Ia|=w,y=y.next;while(y!==n)}else y===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Wl(n){var s=nn(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var p=c.dispatch,y=c.pending,w=s.memoizedState;if(y!==null){c.pending=null;var E=y=y.next;do w=n(w,E.action),E=E.next;while(E!==y);Xn(w,s.memoizedState)||(C=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,p]}function Hl(){}function Vl(n,s){var c=mt,p=nn(),y=s(),w=!Xn(p.memoizedState,y);if(w&&(p.memoizedState=y,C=!0),p=p.queue,rc(ec.bind(null,c,p,n),[n]),p.getSnapshot!==s||w||Xt!==null&&Xt.memoizedState.tag&1){if(c.flags|=2048,Mo(9,wi.bind(null,c,p,y,s),void 0,null),In===null)throw Error(t(349));(Bn&30)!==0||Id(c,s,y)}return y}function Id(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function wi(n,s,c,p){s.value=c,s.getSnapshot=p,tc(s)&&ql(n)}function ec(n,s,c){return c(function(){tc(s)&&ql(n)})}function tc(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!Xn(n,c)}catch{return!0}}function ql(n){var s=cr(n,1);s!==null&&Ei(s,n,1,-1)}function Zi(n){var s=Tt();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:n},s.queue=n,n=n.dispatch=zd.bind(null,mt,n),[s.memoizedState,n]}function Mo(n,s,c,p){return n={tag:n,create:s,destroy:c,deps:p,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=n.next=n):(c=s.lastEffect,c===null?s.lastEffect=n.next=n:(p=c.next,c.next=n,n.next=p,s.lastEffect=n)),n}function nc(){return nn().memoizedState}function Io(n,s,c,p){var y=Tt();mt.flags|=n,y.memoizedState=Mo(1|s,c,void 0,p===void 0?null:p)}function Bs(n,s,c,p){var y=nn();p=p===void 0?null:p;var w=void 0;if(Gt!==null){var E=Gt.memoizedState;if(w=E.destroy,p!==null&&Ma(p,E.deps)){y.memoizedState=Mo(s,c,w,p);return}}mt.flags|=n,y.memoizedState=Mo(1|s,c,w,p)}function Ad(n,s){return Io(8390656,8,n,s)}function rc(n,s){return Bs(2048,8,n,s)}function ic(n,s){return Bs(4,2,n,s)}function sc(n,s){return Bs(4,4,n,s)}function es(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Od(n,s,c){return c=c!=null?c.concat([n]):null,Bs(4,4,es.bind(null,s,n),c)}function Si(){}function oc(n,s){var c=nn();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&Ma(s,p[1])?p[0]:(c.memoizedState=[n,s],n)}function bt(n,s){var c=nn();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&Ma(s,p[1])?p[0]:(n=n(),c.memoizedState=[n,s],n)}function Ld(n,s,c){return(Bn&21)===0?(n.baseState&&(n.baseState=!1,C=!0),n.memoizedState=c):(Xn(c,s)||(c=Cu(),mt.lanes|=c,Ia|=c,n.baseState=!0),s)}function Dd(n,s){var c=ut;ut=c!==0&&4>c?c:4,n(!0);var p=Ra.transition;Ra.transition={};try{n(!1),s()}finally{ut=c,Ra.transition=p}}function jd(){return nn().memoizedState}function mf(n,s,c){var p=Bo(n);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},ac(n))Fd(s,c);else if(c=Na(n,s,c,p),c!==null){var y=hr();Ei(c,n,p,y),dr(c,s,p)}}function zd(n,s,c){var p=Bo(n),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(ac(n))Fd(s,y);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var E=s.lastRenderedState,D=w(E,c);if(y.hasEagerState=!0,y.eagerState=D,Xn(D,E)){var F=s.interleaved;F===null?(y.next=y,Co(s)):(y.next=F.next,F.next=y),s.interleaved=y;return}}catch{}finally{}c=Na(n,s,y,p),c!==null&&(y=hr(),Ei(c,n,p,y),dr(c,s,p))}}function ac(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function Fd(n,s){Ji=Lr=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function dr(n,s,c){if((c&4194240)!==0){var p=s.lanes;p&=n.pendingLanes,c|=p,s.lanes=c,Eu(n,c)}}var Ao={readContext:Fn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},yf={readContext:Fn,useCallback:function(n,s){return Tt().memoizedState=[n,s===void 0?null:s],n},useContext:Fn,useEffect:Ad,useImperativeHandle:function(n,s,c){return c=c!=null?c.concat([n]):null,Io(4194308,4,es.bind(null,s,n),c)},useLayoutEffect:function(n,s){return Io(4194308,4,n,s)},useInsertionEffect:function(n,s){return Io(4,2,n,s)},useMemo:function(n,s){var c=Tt();return s=s===void 0?null:s,n=n(),c.memoizedState=[n,s],n},useReducer:function(n,s,c){var p=Tt();return s=c!==void 0?c(s):s,p.memoizedState=p.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},p.queue=n,n=n.dispatch=mf.bind(null,mt,n),[p.memoizedState,n]},useRef:function(n){var s=Tt();return n={current:n},s.memoizedState=n},useState:Zi,useDebugValue:Si,useDeferredValue:function(n){return Tt().memoizedState=n},useTransition:function(){var n=Zi(!1),s=n[0];return n=Dd.bind(null,n[1]),Tt().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,c){var p=mt,y=Tt();if(ht){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),In===null)throw Error(t(349));(Bn&30)!==0||Id(p,s,c)}y.memoizedState=c;var w={value:c,getSnapshot:s};return y.queue=w,Ad(ec.bind(null,p,w,n),[n]),p.flags|=2048,Mo(9,wi.bind(null,p,w,c,s),void 0,null),c},useId:function(){var n=Tt(),s=In.identifierPrefix;if(ht){var c=It,p=or;c=(p&~(1<<32-nt(p)-1)).toString(32)+c,s=":"+s+"R"+c,c=wr++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Ul++,s=":"+s+"r"+c.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},ts={readContext:Fn,useCallback:oc,useContext:Fn,useEffect:rc,useImperativeHandle:Od,useInsertionEffect:ic,useLayoutEffect:sc,useMemo:bt,useReducer:Rn,useRef:nc,useState:function(){return Rn(bn)},useDebugValue:Si,useDeferredValue:function(n){var s=nn();return Ld(s,Gt.memoizedState,n)},useTransition:function(){var n=Rn(bn)[0],s=nn().memoizedState;return[n,s]},useMutableSource:Hl,useSyncExternalStore:Vl,useId:jd,unstable_isNewReconciler:!1},Yl={readContext:Fn,useCallback:oc,useContext:Fn,useEffect:rc,useImperativeHandle:Od,useInsertionEffect:ic,useLayoutEffect:sc,useMemo:bt,useReducer:Wl,useRef:nc,useState:function(){return Wl(bn)},useDebugValue:Si,useDeferredValue:function(n){var s=nn();return Gt===null?s.memoizedState=n:Ld(s,Gt.memoizedState,n)},useTransition:function(){var n=Wl(bn)[0],s=nn().memoizedState;return[n,s]},useMutableSource:Hl,useSyncExternalStore:Vl,useId:jd,unstable_isNewReconciler:!1};function xn(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var c in n)s[c]===void 0&&(s[c]=n[c]);return s}return s}function Oo(n,s,c,p){s=n.memoizedState,c=c(p,s),c=c==null?s:oe({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Lo={isMounted:function(n){return(n=n._reactInternals)?ps(n)===n:!1},enqueueSetState:function(n,s,c){n=n._reactInternals;var p=hr(),y=Bo(n),w=ti(p,y);w.payload=s,c!=null&&(w.callback=c),s=ni(n,w,y),s!==null&&(Ei(s,n,y,p),Gl(s,n,y))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var p=hr(),y=Bo(n),w=ti(p,y);w.tag=1,w.payload=s,c!=null&&(w.callback=c),s=ni(n,w,y),s!==null&&(Ei(s,n,y,p),Gl(s,n,y))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=hr(),p=Bo(n),y=ti(c,p);y.tag=2,s!=null&&(y.callback=s),s=ni(n,y,p),s!==null&&(Ei(s,n,p,c),Gl(s,n,p))}};function Xl(n,s,c,p,y,w,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,w,E):s.prototype&&s.prototype.isPureReactComponent?!ks(c,p)||!ks(y,w):!0}function Bd(n,s,c){var p=!1,y=$r,w=s.contextType;return typeof w=="object"&&w!==null?w=Fn(w):(y=Nn(s)?qi:vn.current,p=s.contextTypes,w=(p=p!=null)?Is(n,y):$r),s=new s(c,w),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Lo,n.stateNode=s,s._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=y,n.__reactInternalMemoizedMaskedChildContext=w),s}function lc(n,s,c,p){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,p),s.state!==n&&Lo.enqueueReplaceState(s,s.state,null)}function Ql(n,s,c,p){var y=n.stateNode;y.props=c,y.state=n.memoizedState,y.refs={},Ta(n);var w=s.contextType;typeof w=="object"&&w!==null?y.context=Fn(w):(w=Nn(s)?qi:vn.current,y.context=Is(n,w)),y.state=n.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(Oo(n,s,w,c),y.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(s=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),s!==y.state&&Lo.enqueueReplaceState(y,y.state,null),Eo(n,c,y,p),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308)}function Gs(n,s){try{var c="",p=s;do c+=Ye(p),p=p.return;while(p);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:n,source:s,stack:y,digest:null}}function Kl(n,s,c){return{value:n,source:null,stack:c??null,digest:s??null}}function Do(n,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var vf=typeof WeakMap=="function"?WeakMap:Map;function Gd(n,s,c){c=ti(-1,c),c.tag=3,c.payload={element:null};var p=s.value;return c.callback=function(){qd||(qd=!0,Tf=p),Do(n,s)},c}function a(n,s,c){c=ti(-1,c),c.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var y=s.value;c.payload=function(){return p(y)},c.callback=function(){Do(n,s)}}var w=n.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Do(n,s),typeof p!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),c}function l(n,s,c){var p=n.pingCache;if(p===null){p=n.pingCache=new vf;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(c)||(y.add(c),n=C2.bind(null,n,s,c),s.then(n,n))}function h(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function m(n,s,c,p,y){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=ti(-1,1),s.tag=2,ni(c,s,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=y,n)}var v=L.ReactCurrentOwner,C=!1;function R(n,s,c,p){s.child=n===null?_r(s,null,c,p):zs(s,n.child,c,p)}function W(n,s,c,p,y){c=c.render;var w=s.ref;return xi(s,y),p=bo(n,s,c,p,w,y),c=Ro(),n!==null&&!C?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,Mn(n,s,y)):(ht&&c&&wo(s),s.flags|=1,R(n,s,p,y),s.child)}function Z(n,s,c,p,y){if(n===null){var w=c.type;return typeof w=="function"&&!Lf(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=w,fe(n,s,w,p,y)):(n=Jd(c.type,null,p,s,s.mode,y),n.ref=s.ref,n.return=s,s.child=n)}if(w=n.child,(n.lanes&y)===0){var E=w.memoizedProps;if(c=c.compare,c=c!==null?c:ks,c(E,p)&&n.ref===s.ref)return Mn(n,s,y)}return s.flags|=1,n=Uo(w,p),n.ref=s.ref,n.return=s,s.child=n}function fe(n,s,c,p,y){if(n!==null){var w=n.memoizedProps;if(ks(w,p)&&n.ref===s.ref)if(C=!1,s.pendingProps=p=w,(n.lanes&y)!==0)(n.flags&131072)!==0&&(C=!0);else return s.lanes=n.lanes,Mn(n,s,y)}return Ce(n,s,c,p,y)}function Te(n,s,c){var p=s.pendingProps,y=p.children,w=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Jl,Dr),Dr|=c;else{if((c&1073741824)===0)return n=w!==null?w.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,vt(Jl,Dr),Dr|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:c,vt(Jl,Dr),Dr|=p}else w!==null?(p=w.baseLanes|c,s.memoizedState=null):p=c,vt(Jl,Dr),Dr|=p;return R(n,s,y,c),s.child}function Ke(n,s){var c=s.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Ce(n,s,c,p,y){var w=Nn(c)?qi:vn.current;return w=Is(s,w),xi(s,y),c=bo(n,s,c,p,w,y),p=Ro(),n!==null&&!C?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,Mn(n,s,y)):(ht&&p&&wo(s),s.flags|=1,R(n,s,c,y),s.child)}function kt(n,s,c,p,y){if(Nn(c)){var w=!0;As(s)}else w=!1;if(xi(s,y),s.stateNode===null)st(n,s),Bd(s,c,p),Ql(s,c,p,y),p=!0;else if(n===null){var E=s.stateNode,D=s.memoizedProps;E.props=D;var F=E.context,J=c.contextType;typeof J=="object"&&J!==null?J=Fn(J):(J=Nn(c)?qi:vn.current,J=Is(s,J));var ae=c.getDerivedStateFromProps,de=typeof ae=="function"||typeof E.getSnapshotBeforeUpdate=="function";de||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==p||F!==J)&&lc(s,E,p,J),ei=!1;var se=s.memoizedState;E.state=se,Eo(s,p,E,y),F=s.memoizedState,D!==p||se!==F||Pn.current||ei?(typeof ae=="function"&&(Oo(s,c,ae,p),F=s.memoizedState),(D=ei||Xl(s,c,D,p,se,F,J))?(de||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=F),E.props=p,E.state=F,E.context=J,p=D):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{E=s.stateNode,Bl(n,s),D=s.memoizedProps,J=s.type===s.elementType?D:xn(s.type,D),E.props=J,de=s.pendingProps,se=E.context,F=c.contextType,typeof F=="object"&&F!==null?F=Fn(F):(F=Nn(c)?qi:vn.current,F=Is(s,F));var Ne=c.getDerivedStateFromProps;(ae=typeof Ne=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==de||se!==F)&&lc(s,E,p,F),ei=!1,se=s.memoizedState,E.state=se,Eo(s,p,E,y);var Ie=s.memoizedState;D!==de||se!==Ie||Pn.current||ei?(typeof Ne=="function"&&(Oo(s,c,Ne,p),Ie=s.memoizedState),(J=ei||Xl(s,c,J,p,se,Ie,F)||!1)?(ae||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,Ie,F),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,Ie,F)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=Ie),E.props=p,E.state=Ie,E.context=F,p=J):(typeof E.componentDidUpdate!="function"||D===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),p=!1)}return ft(n,s,c,p,w,y)}function ft(n,s,c,p,y,w){Ke(n,s);var E=(s.flags&128)!==0;if(!p&&!E)return y&&bd(s,c,!1),Mn(n,s,w);p=s.stateNode,v.current=s;var D=E&&typeof c.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,n!==null&&E?(s.child=zs(s,n.child,null,w),s.child=zs(s,null,D,w)):R(n,s,D,w),s.memoizedState=p.state,y&&bd(s,c,!0),s.child}function Gn(n){var s=n.stateNode;s.pendingContext?Ku(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Ku(n,s.context,!1),$i(n,s.containerInfo)}function ri(n,s,c,p,y){return js(),Ea(y),s.flags|=256,R(n,s,c,p),s.child}var $={dehydrated:null,treeContext:null,retryLane:0};function H(n){return{baseLanes:n,cachePool:null,transitions:null}}function ne(n,s,c){var p=s.pendingProps,y=St.current,w=!1,E=(s.flags&128)!==0,D;if((D=E)||(D=n!==null&&n.memoizedState===null?!1:(y&2)!==0),D?(w=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(y|=1),vt(St,y&1),n===null)return So(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=p.children,n=p.fallback,w?(p=s.mode,w=s.child,E={mode:"hidden",children:E},(p&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=E):w=Zd(E,p,0,null),n=Da(n,p,c,null),w.return=s,n.return=s,w.sibling=n,s.child=w,s.child.memoizedState=H(c),s.memoizedState=$,n):Ee(s,E));if(y=n.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return Ze(n,s,E,p,D,y,c);if(w){w=p.fallback,E=s.mode,y=n.child,D=y.sibling;var F={mode:"hidden",children:p.children};return(E&1)===0&&s.child!==y?(p=s.child,p.childLanes=0,p.pendingProps=F,s.deletions=null):(p=Uo(y,F),p.subtreeFlags=y.subtreeFlags&14680064),D!==null?w=Uo(D,w):(w=Da(w,E,c,null),w.flags|=2),w.return=s,p.return=s,p.sibling=w,s.child=p,p=w,w=s.child,E=n.child.memoizedState,E=E===null?H(c):{baseLanes:E.baseLanes|c,cachePool:null,transitions:E.transitions},w.memoizedState=E,w.childLanes=n.childLanes&~c,s.memoizedState=$,p}return w=n.child,n=w.sibling,p=Uo(w,{mode:"visible",children:p.children}),(s.mode&1)===0&&(p.lanes=c),p.return=s,p.sibling=null,n!==null&&(c=s.deletions,c===null?(s.deletions=[n],s.flags|=16):c.push(n)),s.child=p,s.memoizedState=null,p}function Ee(n,s){return s=Zd({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Be(n,s,c,p){return p!==null&&Ea(p),zs(s,n.child,null,c),n=Ee(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Ze(n,s,c,p,y,w,E){if(c)return s.flags&256?(s.flags&=-257,p=Kl(Error(t(422))),Be(n,s,E,p)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(w=p.fallback,y=s.mode,p=Zd({mode:"visible",children:p.children},y,0,null),w=Da(w,y,E,null),w.flags|=2,p.return=s,w.return=s,p.sibling=w,s.child=p,(s.mode&1)!==0&&zs(s,n.child,null,E),s.child.memoizedState=H(E),s.memoizedState=$,w);if((s.mode&1)===0)return Be(n,s,E,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var D=p.dgst;return p=D,w=Error(t(419)),p=Kl(w,p,void 0),Be(n,s,E,p)}if(D=(E&n.childLanes)!==0,C||D){if(p=In,p!==null){switch(E&-E){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|E))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,cr(n,y),Ei(p,n,y,-1))}return Of(),p=Kl(Error(t(421))),Be(n,s,E,p)}return y.data==="$?"?(s.flags|=128,s.child=n.child,s=E2.bind(null,n),y._reactRetry=s,null):(n=w.treeContext,we=Qr(y.nextSibling),ar=s,ht=!0,lr=null,n!==null&&(jn[zn++]=or,jn[zn++]=It,jn[zn++]=Ki,or=n.id,It=n.overflow,Ki=s),s=Ee(s,p.children),s.flags|=4096,s)}function $e(n,s,c){n.lanes|=s;var p=n.alternate;p!==null&&(p.lanes|=s),Fl(n.return,s,c)}function ot(n,s,c,p,y){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=c,w.tailMode=y)}function rn(n,s,c){var p=s.pendingProps,y=p.revealOrder,w=p.tail;if(R(n,s,p.children,c),p=St.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$e(n,c,s);else if(n.tag===19)$e(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(vt(St,p),(s.mode&1)===0)s.memoizedState=null;else switch(y){case"forwards":for(c=s.child,y=null;c!==null;)n=c.alternate,n!==null&&No(n)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),ot(s,!1,y,c,w);break;case"backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(n=y.alternate,n!==null&&No(n)===null){s.child=y;break}n=y.sibling,y.sibling=c,c=y,y=n}ot(s,!0,c,null,w);break;case"together":ot(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function st(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Mn(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),Ia|=s.lanes,(c&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,c=Uo(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=Uo(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function xf(n,s,c){switch(s.tag){case 3:Gn(s),js();break;case 5:Po(s);break;case 1:Nn(s.type)&&As(s);break;case 4:$i(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,y=s.memoizedProps.value;vt(Pa,p._currentValue),p._currentValue=y;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(vt(St,St.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?ne(n,s,c):(vt(St,St.current&1),n=Mn(n,s,c),n!==null?n.sibling:null);vt(St,St.current&1);break;case 19:if(p=(c&s.childLanes)!==0,(n.flags&128)!==0){if(p)return rn(n,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),vt(St,St.current),p)break;return null;case 22:case 23:return s.lanes=0,Te(n,s,c)}return Mn(n,s,c)}var U0,_f,W0,H0;U0=function(n,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},_f=function(){},W0=function(n,s,c,p){var y=n.memoizedProps;if(y!==p){n=s.stateNode,tn(xt.current);var w=null;switch(c){case"input":y=He(n,y),p=He(n,p),w=[];break;case"select":y=oe({},y,{value:void 0}),p=oe({},p,{value:void 0}),w=[];break;case"textarea":y=Nr(n,y),p=Nr(n,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=bs)}gu(c,p);var E;c=null;for(J in y)if(!p.hasOwnProperty(J)&&y.hasOwnProperty(J)&&y[J]!=null)if(J==="style"){var D=y[J];for(E in D)D.hasOwnProperty(E)&&(c||(c={}),c[E]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(o.hasOwnProperty(J)?w||(w=[]):(w=w||[]).push(J,null));for(J in p){var F=p[J];if(D=y!=null?y[J]:void 0,p.hasOwnProperty(J)&&F!==D&&(F!=null||D!=null))if(J==="style")if(D){for(E in D)!D.hasOwnProperty(E)||F&&F.hasOwnProperty(E)||(c||(c={}),c[E]="");for(E in F)F.hasOwnProperty(E)&&D[E]!==F[E]&&(c||(c={}),c[E]=F[E])}else c||(w||(w=[]),w.push(J,c)),c=F;else J==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(w=w||[]).push(J,F)):J==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(J,""+F):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(o.hasOwnProperty(J)?(F!=null&&J==="onScroll"&&_t("scroll",n),w||D===F||(w=[])):(w=w||[]).push(J,F))}c&&(w=w||[]).push("style",c);var J=w;(s.updateQueue=J)&&(s.flags|=4)}},H0=function(n,s,c,p){c!==p&&(s.flags|=4)};function uc(n,s){if(!ht)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Kn(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,p=0;if(s)for(var y=n.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=p,n.childLanes=c,s}function p2(n,s,c){var p=s.pendingProps;switch(cn(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(s),null;case 1:return Nn(s.type)&&xo(),Kn(s),null;case 3:return p=s.stateNode,Ot(),wt(Pn),wt(vn),Tn(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Ca(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lr!==null&&(Mf(lr),lr=null))),_f(n,s),Kn(s),null;case 5:_i(s);var y=tn(Vt.current);if(c=s.type,n!==null&&s.stateNode!=null)W0(n,s,c,p,y),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(t(166));return Kn(s),null}if(n=tn(xt.current),Ca(s)){p=s.stateNode,c=s.type;var w=s.memoizedProps;switch(p[xr]=s,p[wa]=w,n=(s.mode&1)!==0,c){case"dialog":_t("cancel",p),_t("close",p);break;case"iframe":case"object":case"embed":_t("load",p);break;case"video":case"audio":for(y=0;y<Wi.length;y++)_t(Wi[y],p);break;case"source":_t("error",p);break;case"img":case"image":case"link":_t("error",p),_t("load",p);break;case"details":_t("toggle",p);break;case"input":Ct(p,w),_t("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},_t("invalid",p);break;case"textarea":Tr(p,w),_t("invalid",p)}gu(c,w),y=null;for(var E in w)if(w.hasOwnProperty(E)){var D=w[E];E==="children"?typeof D=="string"?p.textContent!==D&&(w.suppressHydrationWarning!==!0&&xa(p.textContent,D,n),y=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(w.suppressHydrationWarning!==!0&&xa(p.textContent,D,n),y=["children",""+D]):o.hasOwnProperty(E)&&D!=null&&E==="onScroll"&&_t("scroll",p)}switch(c){case"input":re(p),jt(p,w,!0);break;case"textarea":re(p),na(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=bs)}p=y,s.updateQueue=p,p!==null&&(s.flags|=4)}else{E=y.nodeType===9?y:y.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ai(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=E.createElement(c,{is:p.is}):(n=E.createElement(c),c==="select"&&(E=n,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):n=E.createElementNS(n,c),n[xr]=s,n[wa]=p,U0(n,s,!1,!1),s.stateNode=n;e:{switch(E=Ja(c,p),c){case"dialog":_t("cancel",n),_t("close",n),y=p;break;case"iframe":case"object":case"embed":_t("load",n),y=p;break;case"video":case"audio":for(y=0;y<Wi.length;y++)_t(Wi[y],n);y=p;break;case"source":_t("error",n),y=p;break;case"img":case"image":case"link":_t("error",n),_t("load",n),y=p;break;case"details":_t("toggle",n),y=p;break;case"input":Ct(n,p),y=He(n,p),_t("invalid",n);break;case"option":y=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},y=oe({},p,{value:void 0}),_t("invalid",n);break;case"textarea":Tr(n,p),y=Nr(n,p),_t("invalid",n);break;default:y=p}gu(c,y),D=y;for(w in D)if(D.hasOwnProperty(w)){var F=D[w];w==="style"?Xc(n,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&$a(n,F)):w==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&hs(n,F):typeof F=="number"&&hs(n,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(o.hasOwnProperty(w)?F!=null&&w==="onScroll"&&_t("scroll",n):F!=null&&O(n,w,F,E))}switch(c){case"input":re(n),jt(n,p,!1);break;case"textarea":re(n),na(n);break;case"option":p.value!=null&&n.setAttribute("value",""+et(p.value));break;case"select":n.multiple=!!p.multiple,w=p.value,w!=null?fn(n,!!p.multiple,w,!1):p.defaultValue!=null&&fn(n,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(n.onclick=bs)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kn(s),null;case 6:if(n&&s.stateNode!=null)H0(n,s,n.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(t(166));if(c=tn(Vt.current),tn(xt.current),Ca(s)){if(p=s.stateNode,c=s.memoizedProps,p[xr]=s,(w=p.nodeValue!==c)&&(n=ar,n!==null))switch(n.tag){case 3:xa(p.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xa(p.nodeValue,c,(n.mode&1)!==0)}w&&(s.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[xr]=s,s.stateNode=p}return Kn(s),null;case 13:if(wt(St),p=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ht&&we!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ju(),js(),s.flags|=98560,w=!1;else if(w=Ca(s),p!==null&&p.dehydrated!==null){if(n===null){if(!w)throw Error(t(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[xr]=s}else js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kn(s),w=!1}else lr!==null&&(Mf(lr),lr=null),w=!0;if(!w)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(St.current&1)!==0?_n===0&&(_n=3):Of())),s.updateQueue!==null&&(s.flags|=4),Kn(s),null);case 4:return Ot(),_f(n,s),n===null&&Ns(s.stateNode.containerInfo),Kn(s),null;case 10:return zl(s.type._context),Kn(s),null;case 17:return Nn(s.type)&&xo(),Kn(s),null;case 19:if(wt(St),w=s.memoizedState,w===null)return Kn(s),null;if(p=(s.flags&128)!==0,E=w.rendering,E===null)if(p)uc(w,!1);else{if(_n!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(E=No(n),E!==null){for(s.flags|=128,uc(w,!1),p=E.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=c,c=s.child;c!==null;)w=c,n=p,w.flags&=14680066,E=w.alternate,E===null?(w.childLanes=0,w.lanes=n,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=E.childLanes,w.lanes=E.lanes,w.child=E.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=E.memoizedProps,w.memoizedState=E.memoizedState,w.updateQueue=E.updateQueue,w.type=E.type,n=E.dependencies,w.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return vt(St,St.current&1|2),s.child}n=n.sibling}w.tail!==null&&Wt()>Zl&&(s.flags|=128,p=!0,uc(w,!1),s.lanes=4194304)}else{if(!p)if(n=No(E),n!==null){if(s.flags|=128,p=!0,c=n.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),uc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!E.alternate&&!ht)return Kn(s),null}else 2*Wt()-w.renderingStartTime>Zl&&c!==1073741824&&(s.flags|=128,p=!0,uc(w,!1),s.lanes=4194304);w.isBackwards?(E.sibling=s.child,s.child=E):(c=w.last,c!==null?c.sibling=E:s.child=E,w.last=E)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=Wt(),s.sibling=null,c=St.current,vt(St,p?c&1|2:c&1),s):(Kn(s),null);case 22:case 23:return Af(),p=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(s.flags|=8192),p&&(s.mode&1)!==0?(Dr&1073741824)!==0&&(Kn(s),s.subtreeFlags&6&&(s.flags|=8192)):Kn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function g2(n,s){switch(cn(s),s.tag){case 1:return Nn(s.type)&&xo(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ot(),wt(Pn),wt(vn),Tn(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return _i(s),null;case 13:if(wt(St),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));js()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return wt(St),null;case 4:return Ot(),null;case 10:return zl(s.type._context),null;case 22:case 23:return Af(),null;case 24:return null;default:return null}}var Ud=!1,$n=!1,m2=typeof WeakSet=="function"?WeakSet:Set,be=null;function $l(n,s){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Kt(n,s,p)}else c.current=null}function wf(n,s,c){try{c()}catch(p){Kt(n,s,p)}}var V0=!1;function y2(n,s){if(qu=cl,n=Zt(),go(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var E=0,D=-1,F=-1,J=0,ae=0,de=n,se=null;t:for(;;){for(var Ne;de!==c||y!==0&&de.nodeType!==3||(D=E+y),de!==w||p!==0&&de.nodeType!==3||(F=E+p),de.nodeType===3&&(E+=de.nodeValue.length),(Ne=de.firstChild)!==null;)se=de,de=Ne;for(;;){if(de===n)break t;if(se===c&&++J===y&&(D=E),se===w&&++ae===p&&(F=E),(Ne=de.nextSibling)!==null)break;de=se,se=de.parentNode}de=Ne}c=D===-1||F===-1?null:{start:D,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yu={focusedElem:n,selectionRange:c},cl=!1,be=s;be!==null;)if(s=be,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,be=n;else for(;be!==null;){s=be;try{var Ie=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var ze=Ie.memoizedProps,sn=Ie.memoizedState,q=s.stateNode,U=q.getSnapshotBeforeUpdate(s.elementType===s.type?ze:xn(s.type,ze),sn);q.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Kt(s,s.return,ge)}if(n=s.sibling,n!==null){n.return=s.return,be=n;break}be=s.return}return Ie=V0,V0=!1,Ie}function cc(n,s,c){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&n)===n){var w=y.destroy;y.destroy=void 0,w!==void 0&&wf(s,c,w)}y=y.next}while(y!==p)}}function Wd(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&n)===n){var p=c.create;c.destroy=p()}c=c.next}while(c!==s)}}function Sf(n){var s=n.ref;if(s!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof s=="function"?s(n):s.current=n}}function q0(n){var s=n.alternate;s!==null&&(n.alternate=null,q0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[xr],delete s[wa],delete s[Rl],delete s[Nd],delete s[Td])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Y0(n){return n.tag===5||n.tag===3||n.tag===4}function X0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Y0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kf(n,s,c){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(n,s):c.insertBefore(n,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(n,c)):(s=c,s.appendChild(n)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=bs));else if(p!==4&&(n=n.child,n!==null))for(kf(n,s,c),n=n.sibling;n!==null;)kf(n,s,c),n=n.sibling}function Cf(n,s,c){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(Cf(n,s,c),n=n.sibling;n!==null;)Cf(n,s,c),n=n.sibling}var Un=null,ki=!1;function jo(n,s,c){for(c=c.child;c!==null;)Q0(n,s,c),c=c.sibling}function Q0(n,s,c){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ci,c)}catch{}switch(c.tag){case 5:$n||$l(c,s);case 6:var p=Un,y=ki;Un=null,jo(n,s,c),Un=p,ki=y,Un!==null&&(ki?(n=Un,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Un.removeChild(c.stateNode));break;case 18:Un!==null&&(ki?(n=Un,c=c.stateNode,n.nodeType===8?bl(n.parentNode,c):n.nodeType===1&&bl(n,c),qn(n)):bl(Un,c.stateNode));break;case 4:p=Un,y=ki,Un=c.stateNode.containerInfo,ki=!0,jo(n,s,c),Un=p,ki=y;break;case 0:case 11:case 14:case 15:if(!$n&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,E=w.destroy;w=w.tag,E!==void 0&&((w&2)!==0||(w&4)!==0)&&wf(c,s,E),y=y.next}while(y!==p)}jo(n,s,c);break;case 1:if(!$n&&($l(c,s),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(D){Kt(c,s,D)}jo(n,s,c);break;case 21:jo(n,s,c);break;case 22:c.mode&1?($n=(p=$n)||c.memoizedState!==null,jo(n,s,c),$n=p):jo(n,s,c);break;default:jo(n,s,c)}}function K0(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new m2),s.forEach(function(p){var y=P2.bind(null,n,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Ci(n,s){var c=s.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var w=n,E=s,D=E;e:for(;D!==null;){switch(D.tag){case 5:Un=D.stateNode,ki=!1;break e;case 3:Un=D.stateNode.containerInfo,ki=!0;break e;case 4:Un=D.stateNode.containerInfo,ki=!0;break e}D=D.return}if(Un===null)throw Error(t(160));Q0(w,E,y),Un=null,ki=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(J){Kt(y,s,J)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)$0(s,n),s=s.sibling}function $0(n,s){var c=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ci(s,n),ns(n),p&4){try{cc(3,n,n.return),Wd(3,n)}catch(ze){Kt(n,n.return,ze)}try{cc(5,n,n.return)}catch(ze){Kt(n,n.return,ze)}}break;case 1:Ci(s,n),ns(n),p&512&&c!==null&&$l(c,c.return);break;case 5:if(Ci(s,n),ns(n),p&512&&c!==null&&$l(c,c.return),n.flags&32){var y=n.stateNode;try{hs(y,"")}catch(ze){Kt(n,n.return,ze)}}if(p&4&&(y=n.stateNode,y!=null)){var w=n.memoizedProps,E=c!==null?c.memoizedProps:w,D=n.type,F=n.updateQueue;if(n.updateQueue=null,F!==null)try{D==="input"&&w.type==="radio"&&w.name!=null&&gt(y,w),Ja(D,E);var J=Ja(D,w);for(E=0;E<F.length;E+=2){var ae=F[E],de=F[E+1];ae==="style"?Xc(y,de):ae==="dangerouslySetInnerHTML"?$a(y,de):ae==="children"?hs(y,de):O(y,ae,de,J)}switch(D){case"input":Cn(y,w);break;case"textarea":Vr(y,w);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var Ne=w.value;Ne!=null?fn(y,!!w.multiple,Ne,!1):se!==!!w.multiple&&(w.defaultValue!=null?fn(y,!!w.multiple,w.defaultValue,!0):fn(y,!!w.multiple,w.multiple?[]:"",!1))}y[wa]=w}catch(ze){Kt(n,n.return,ze)}}break;case 6:if(Ci(s,n),ns(n),p&4){if(n.stateNode===null)throw Error(t(162));y=n.stateNode,w=n.memoizedProps;try{y.nodeValue=w}catch(ze){Kt(n,n.return,ze)}}break;case 3:if(Ci(s,n),ns(n),p&4&&c!==null&&c.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(ze){Kt(n,n.return,ze)}break;case 4:Ci(s,n),ns(n);break;case 13:Ci(s,n),ns(n),y=n.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Nf=Wt())),p&4&&K0(n);break;case 22:if(ae=c!==null&&c.memoizedState!==null,n.mode&1?($n=(J=$n)||ae,Ci(s,n),$n=J):Ci(s,n),ns(n),p&8192){if(J=n.memoizedState!==null,(n.stateNode.isHidden=J)&&!ae&&(n.mode&1)!==0)for(be=n,ae=n.child;ae!==null;){for(de=be=ae;be!==null;){switch(se=be,Ne=se.child,se.tag){case 0:case 11:case 14:case 15:cc(4,se,se.return);break;case 1:$l(se,se.return);var Ie=se.stateNode;if(typeof Ie.componentWillUnmount=="function"){p=se,c=se.return;try{s=p,Ie.props=s.memoizedProps,Ie.state=s.memoizedState,Ie.componentWillUnmount()}catch(ze){Kt(p,c,ze)}}break;case 5:$l(se,se.return);break;case 22:if(se.memoizedState!==null){eg(de);continue}}Ne!==null?(Ne.return=se,be=Ne):eg(de)}ae=ae.sibling}e:for(ae=null,de=n;;){if(de.tag===5){if(ae===null){ae=de;try{y=de.stateNode,J?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(D=de.stateNode,F=de.memoizedProps.style,E=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Yc("display",E))}catch(ze){Kt(n,n.return,ze)}}}else if(de.tag===6){if(ae===null)try{de.stateNode.nodeValue=J?"":de.memoizedProps}catch(ze){Kt(n,n.return,ze)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===n)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===n)break e;for(;de.sibling===null;){if(de.return===null||de.return===n)break e;ae===de&&(ae=null),de=de.return}ae===de&&(ae=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Ci(s,n),ns(n),p&4&&K0(n);break;case 21:break;default:Ci(s,n),ns(n)}}function ns(n){var s=n.flags;if(s&2){try{e:{for(var c=n.return;c!==null;){if(Y0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(hs(y,""),p.flags&=-33);var w=X0(n);Cf(n,w,y);break;case 3:case 4:var E=p.stateNode.containerInfo,D=X0(n);kf(n,D,E);break;default:throw Error(t(161))}}catch(F){Kt(n,n.return,F)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function v2(n,s,c){be=n,J0(n)}function J0(n,s,c){for(var p=(n.mode&1)!==0;be!==null;){var y=be,w=y.child;if(y.tag===22&&p){var E=y.memoizedState!==null||Ud;if(!E){var D=y.alternate,F=D!==null&&D.memoizedState!==null||$n;D=Ud;var J=$n;if(Ud=E,($n=F)&&!J)for(be=y;be!==null;)E=be,F=E.child,E.tag===22&&E.memoizedState!==null?tg(y):F!==null?(F.return=E,be=F):tg(y);for(;w!==null;)be=w,J0(w),w=w.sibling;be=y,Ud=D,$n=J}Z0(n)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,be=w):Z0(n)}}function Z0(n){for(;be!==null;){var s=be;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:$n||Wd(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!$n)if(c===null)p.componentDidMount();else{var y=s.elementType===s.type?c.memoizedProps:xn(s.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=s.updateQueue;w!==null&&Bt(s,w,p);break;case 3:var E=s.updateQueue;if(E!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}Bt(s,E,c)}break;case 5:var D=s.stateNode;if(c===null&&s.flags&4){c=D;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var J=s.alternate;if(J!==null){var ae=J.memoizedState;if(ae!==null){var de=ae.dehydrated;de!==null&&qn(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$n||s.flags&512&&Sf(s)}catch(se){Kt(s,s.return,se)}}if(s===n){be=null;break}if(c=s.sibling,c!==null){c.return=s.return,be=c;break}be=s.return}}function eg(n){for(;be!==null;){var s=be;if(s===n){be=null;break}var c=s.sibling;if(c!==null){c.return=s.return,be=c;break}be=s.return}}function tg(n){for(;be!==null;){var s=be;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{Wd(4,s)}catch(F){Kt(s,c,F)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var y=s.return;try{p.componentDidMount()}catch(F){Kt(s,y,F)}}var w=s.return;try{Sf(s)}catch(F){Kt(s,w,F)}break;case 5:var E=s.return;try{Sf(s)}catch(F){Kt(s,E,F)}}}catch(F){Kt(s,s.return,F)}if(s===n){be=null;break}var D=s.sibling;if(D!==null){D.return=s.return,be=D;break}be=s.return}}var x2=Math.ceil,Hd=L.ReactCurrentDispatcher,Ef=L.ReactCurrentOwner,ii=L.ReactCurrentBatchConfig,ct=0,In=null,dn=null,Wn=0,Dr=0,Jl=yi(0),_n=0,dc=null,Ia=0,Vd=0,Pf=0,hc=null,Sr=null,Nf=0,Zl=1/0,Us=null,qd=!1,Tf=null,zo=null,Yd=!1,Fo=null,Xd=0,fc=0,bf=null,Qd=-1,Kd=0;function hr(){return(ct&6)!==0?Wt():Qd!==-1?Qd:Qd=Wt()}function Bo(n){return(n.mode&1)===0?1:(ct&2)!==0&&Wn!==0?Wn&-Wn:Zu.transition!==null?(Kd===0&&(Kd=Cu()),Kd):(n=ut,n!==0||(n=window.event,n=n===void 0?16:cd(n.type)),n)}function Ei(n,s,c,p){if(50<fc)throw fc=0,bf=null,Error(t(185));oa(n,c,p),((ct&2)===0||n!==In)&&(n===In&&((ct&2)===0&&(Vd|=c),_n===4&&Go(n,Wn)),kr(n,p),c===1&&ct===0&&(s.mode&1)===0&&(Zl=Wt()+500,_o&&Yi()))}function kr(n,s){var c=n.callbackNode;sd(n,s);var p=ms(n,n===In?Wn:0);if(p===0)c!==null&&rd(c),n.callbackNode=null,n.callbackPriority=0;else if(s=p&-p,n.callbackPriority!==s){if(c!=null&&rd(c),s===1)n.tag===0?vi(rg.bind(null,n)):ka(rg.bind(null,n)),Ed(function(){(ct&6)===0&&Yi()}),c=null;else{switch(aa(p)){case 1:c=gs;break;case 4:c=rl;break;case 16:c=to;break;case 536870912:c=il;break;default:c=to}c=dg(c,ng.bind(null,n))}n.callbackPriority=s,n.callbackNode=c}}function ng(n,s){if(Qd=-1,Kd=0,(ct&6)!==0)throw Error(t(327));var c=n.callbackNode;if(eu()&&n.callbackNode!==c)return null;var p=ms(n,n===In?Wn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||s)s=$d(n,p);else{s=p;var y=ct;ct|=2;var w=sg();(In!==n||Wn!==s)&&(Us=null,Zl=Wt()+500,Oa(n,s));do try{S2();break}catch(D){ig(n,D)}while(!0);jl(),Hd.current=w,ct=y,dn!==null?s=0:(In=null,Wn=0,s=_n)}if(s!==0){if(s===2&&(y=no(n),y!==0&&(p=y,s=Rf(n,y))),s===1)throw c=dc,Oa(n,0),Go(n,p),kr(n,Wt()),c;if(s===6)Go(n,p);else{if(y=n.current.alternate,(p&30)===0&&!_2(y)&&(s=$d(n,p),s===2&&(w=no(n),w!==0&&(p=w,s=Rf(n,w))),s===1))throw c=dc,Oa(n,0),Go(n,p),kr(n,Wt()),c;switch(n.finishedWork=y,n.finishedLanes=p,s){case 0:case 1:throw Error(t(345));case 2:La(n,Sr,Us);break;case 3:if(Go(n,p),(p&130023424)===p&&(s=Nf+500-Wt(),10<s)){if(ms(n,0)!==0)break;if(y=n.suspendedLanes,(y&p)!==p){hr(),n.pingedLanes|=n.suspendedLanes&y;break}n.timeoutHandle=sr(La.bind(null,n,Sr,Us),s);break}La(n,Sr,Us);break;case 4:if(Go(n,p),(p&4194240)===p)break;for(s=n.eventTimes,y=-1;0<p;){var E=31-nt(p);w=1<<E,E=s[E],E>y&&(y=E),p&=~w}if(p=y,p=Wt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*x2(p/1960))-p,10<p){n.timeoutHandle=sr(La.bind(null,n,Sr,Us),p);break}La(n,Sr,Us);break;case 5:La(n,Sr,Us);break;default:throw Error(t(329))}}}return kr(n,Wt()),n.callbackNode===c?ng.bind(null,n):null}function Rf(n,s){var c=hc;return n.current.memoizedState.isDehydrated&&(Oa(n,s).flags|=256),n=$d(n,s),n!==2&&(s=Sr,Sr=c,s!==null&&Mf(s)),n}function Mf(n){Sr===null?Sr=n:Sr.push.apply(Sr,n)}function _2(n){for(var s=n;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],w=y.getSnapshot;y=y.value;try{if(!Xn(w(),y))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Go(n,s){for(s&=~Pf,s&=~Vd,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var c=31-nt(s),p=1<<c;n[c]=-1,s&=~p}}function rg(n){if((ct&6)!==0)throw Error(t(327));eu();var s=ms(n,0);if((s&1)===0)return kr(n,Wt()),null;var c=$d(n,s);if(n.tag!==0&&c===2){var p=no(n);p!==0&&(s=p,c=Rf(n,p))}if(c===1)throw c=dc,Oa(n,0),Go(n,s),kr(n,Wt()),c;if(c===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,La(n,Sr,Us),kr(n,Wt()),null}function If(n,s){var c=ct;ct|=1;try{return n(s)}finally{ct=c,ct===0&&(Zl=Wt()+500,_o&&Yi())}}function Aa(n){Fo!==null&&Fo.tag===0&&(ct&6)===0&&eu();var s=ct;ct|=1;var c=ii.transition,p=ut;try{if(ii.transition=null,ut=1,n)return n()}finally{ut=p,ii.transition=c,ct=s,(ct&6)===0&&Yi()}}function Af(){Dr=Jl.current,wt(Jl)}function Oa(n,s){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Qu(c)),dn!==null)for(c=dn.return;c!==null;){var p=c;switch(cn(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&xo();break;case 3:Ot(),wt(Pn),wt(vn),Tn();break;case 5:_i(p);break;case 4:Ot();break;case 13:wt(St);break;case 19:wt(St);break;case 10:zl(p.type._context);break;case 22:case 23:Af()}c=c.return}if(In=n,dn=n=Uo(n.current,null),Wn=Dr=s,_n=0,dc=null,Pf=Vd=Ia=0,Sr=hc=null,Zr!==null){for(s=0;s<Zr.length;s++)if(c=Zr[s],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,w=c.pending;if(w!==null){var E=w.next;w.next=y,p.next=E}c.pending=p}Zr=null}return n}function ig(n,s){do{var c=dn;try{if(jl(),To.current=Ao,Lr){for(var p=mt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Lr=!1}if(Bn=0,Xt=Gt=mt=null,Ji=!1,wr=0,Ef.current=null,c===null||c.return===null){_n=1,dc=s,dn=null;break}e:{var w=n,E=c.return,D=c,F=s;if(s=Wn,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var J=F,ae=D,de=ae.tag;if((ae.mode&1)===0&&(de===0||de===11||de===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ne=h(E);if(Ne!==null){Ne.flags&=-257,m(Ne,E,D,w,s),Ne.mode&1&&l(w,J,s),s=Ne,F=J;var Ie=s.updateQueue;if(Ie===null){var ze=new Set;ze.add(F),s.updateQueue=ze}else Ie.add(F);break e}else{if((s&1)===0){l(w,J,s),Of();break e}F=Error(t(426))}}else if(ht&&D.mode&1){var sn=h(E);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),m(sn,E,D,w,s),Ea(Gs(F,D));break e}}w=F=Gs(F,D),_n!==4&&(_n=2),hc===null?hc=[w]:hc.push(w),w=E;do{switch(w.tag){case 3:w.flags|=65536,s&=-s,w.lanes|=s;var q=Gd(w,F,s);ba(w,q);break e;case 1:D=F;var U=w.type,Q=w.stateNode;if((w.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(zo===null||!zo.has(Q)))){w.flags|=65536,s&=-s,w.lanes|=s;var ge=a(w,D,s);ba(w,ge);break e}}w=w.return}while(w!==null)}ag(c)}catch(Fe){s=Fe,dn===c&&c!==null&&(dn=c=c.return);continue}break}while(!0)}function sg(){var n=Hd.current;return Hd.current=Ao,n===null?Ao:n}function Of(){(_n===0||_n===3||_n===2)&&(_n=4),In===null||(Ia&268435455)===0&&(Vd&268435455)===0||Go(In,Wn)}function $d(n,s){var c=ct;ct|=2;var p=sg();(In!==n||Wn!==s)&&(Us=null,Oa(n,s));do try{w2();break}catch(y){ig(n,y)}while(!0);if(jl(),ct=c,Hd.current=p,dn!==null)throw Error(t(261));return In=null,Wn=0,_n}function w2(){for(;dn!==null;)og(dn)}function S2(){for(;dn!==null&&!lf();)og(dn)}function og(n){var s=cg(n.alternate,n,Dr);n.memoizedProps=n.pendingProps,s===null?ag(n):dn=s,Ef.current=null}function ag(n){var s=n;do{var c=s.alternate;if(n=s.return,(s.flags&32768)===0){if(c=p2(c,s,Dr),c!==null){dn=c;return}}else{if(c=g2(c,s),c!==null){c.flags&=32767,dn=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_n=6,dn=null;return}}if(s=s.sibling,s!==null){dn=s;return}dn=s=n}while(s!==null);_n===0&&(_n=5)}function La(n,s,c){var p=ut,y=ii.transition;try{ii.transition=null,ut=1,k2(n,s,c,p)}finally{ii.transition=y,ut=p}return null}function k2(n,s,c,p){do eu();while(Fo!==null);if((ct&6)!==0)throw Error(t(327));c=n.finishedWork;var y=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var w=c.lanes|c.childLanes;if(df(n,w),n===In&&(dn=In=null,Wn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Yd||(Yd=!0,dg(to,function(){return eu(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=ii.transition,ii.transition=null;var E=ut;ut=1;var D=ct;ct|=4,Ef.current=null,y2(n,c),$0(c,n),ga(Yu),cl=!!qu,Yu=qu=null,n.current=c,v2(c),uf(),ct=D,ut=E,ii.transition=w}else n.current=c;if(Yd&&(Yd=!1,Fo=n,Xd=y),w=n.pendingLanes,w===0&&(zo=null),Pt(c.stateNode),kr(n,Wt()),s!==null)for(p=n.onRecoverableError,c=0;c<s.length;c++)y=s[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(qd)throw qd=!1,n=Tf,Tf=null,n;return(Xd&1)!==0&&n.tag!==0&&eu(),w=n.pendingLanes,(w&1)!==0?n===bf?fc++:(fc=0,bf=n):fc=0,Yi(),null}function eu(){if(Fo!==null){var n=aa(Xd),s=ii.transition,c=ut;try{if(ii.transition=null,ut=16>n?16:n,Fo===null)var p=!1;else{if(n=Fo,Fo=null,Xd=0,(ct&6)!==0)throw Error(t(331));var y=ct;for(ct|=4,be=n.current;be!==null;){var w=be,E=w.child;if((be.flags&16)!==0){var D=w.deletions;if(D!==null){for(var F=0;F<D.length;F++){var J=D[F];for(be=J;be!==null;){var ae=be;switch(ae.tag){case 0:case 11:case 15:cc(8,ae,w)}var de=ae.child;if(de!==null)de.return=ae,be=de;else for(;be!==null;){ae=be;var se=ae.sibling,Ne=ae.return;if(q0(ae),ae===J){be=null;break}if(se!==null){se.return=Ne,be=se;break}be=Ne}}}var Ie=w.alternate;if(Ie!==null){var ze=Ie.child;if(ze!==null){Ie.child=null;do{var sn=ze.sibling;ze.sibling=null,ze=sn}while(ze!==null)}}be=w}}if((w.subtreeFlags&2064)!==0&&E!==null)E.return=w,be=E;else e:for(;be!==null;){if(w=be,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:cc(9,w,w.return)}var q=w.sibling;if(q!==null){q.return=w.return,be=q;break e}be=w.return}}var U=n.current;for(be=U;be!==null;){E=be;var Q=E.child;if((E.subtreeFlags&2064)!==0&&Q!==null)Q.return=E,be=Q;else e:for(E=U;be!==null;){if(D=be,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Wd(9,D)}}catch(Fe){Kt(D,D.return,Fe)}if(D===E){be=null;break e}var ge=D.sibling;if(ge!==null){ge.return=D.return,be=ge;break e}be=D.return}}if(ct=y,Yi(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ci,n)}catch{}p=!0}return p}finally{ut=c,ii.transition=s}}return!1}function lg(n,s,c){s=Gs(c,s),s=Gd(n,s,1),n=ni(n,s,1),s=hr(),n!==null&&(oa(n,1,s),kr(n,s))}function Kt(n,s,c){if(n.tag===3)lg(n,n,c);else for(;s!==null;){if(s.tag===3){lg(s,n,c);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zo===null||!zo.has(p))){n=Gs(c,n),n=a(s,n,1),s=ni(s,n,1),n=hr(),s!==null&&(oa(s,1,n),kr(s,n));break}}s=s.return}}function C2(n,s,c){var p=n.pingCache;p!==null&&p.delete(s),s=hr(),n.pingedLanes|=n.suspendedLanes&c,In===n&&(Wn&c)===c&&(_n===4||_n===3&&(Wn&130023424)===Wn&&500>Wt()-Nf?Oa(n,0):Pf|=c),kr(n,s)}function ug(n,s){s===0&&((n.mode&1)===0?s=1:(s=di,di<<=1,(di&130023424)===0&&(di=4194304)));var c=hr();n=cr(n,s),n!==null&&(oa(n,s,c),kr(n,c))}function E2(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),ug(n,c)}function P2(n,s){var c=0;switch(n.tag){case 13:var p=n.stateNode,y=n.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(s),ug(n,c)}var cg;cg=function(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps||Pn.current)C=!0;else{if((n.lanes&c)===0&&(s.flags&128)===0)return C=!1,xf(n,s,c);C=(n.flags&131072)!==0}else C=!1,ht&&(s.flags&1048576)!==0&&Rd(s,Qi,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;st(n,s),n=s.pendingProps;var y=Is(s,vn.current);xi(s,c),y=bo(null,s,p,n,y,c);var w=Ro();return s.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Nn(p)?(w=!0,As(s)):w=!1,s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ta(s),y.updater=Lo,s.stateNode=y,y._reactInternals=s,Ql(s,p,n,c),s=ft(null,s,p,!0,w,c)):(s.tag=0,ht&&w&&wo(s),R(null,s,y,c),s=s.child),s;case 16:p=s.elementType;e:{switch(st(n,s),n=s.pendingProps,y=p._init,p=y(p._payload),s.type=p,y=s.tag=T2(p),n=xn(p,n),y){case 0:s=Ce(null,s,p,n,c);break e;case 1:s=kt(null,s,p,n,c);break e;case 11:s=W(null,s,p,n,c);break e;case 14:s=Z(null,s,p,xn(p.type,n),c);break e}throw Error(t(306,p,""))}return s;case 0:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),Ce(n,s,p,y,c);case 1:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),kt(n,s,p,y,c);case 3:e:{if(Gn(s),n===null)throw Error(t(387));p=s.pendingProps,w=s.memoizedState,y=w.element,Bl(n,s),Eo(s,p,null,c);var E=s.memoizedState;if(p=E.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){y=Gs(Error(t(423)),s),s=ri(n,s,p,c,y);break e}else if(p!==y){y=Gs(Error(t(424)),s),s=ri(n,s,p,c,y);break e}else for(we=Qr(s.stateNode.containerInfo.firstChild),ar=s,ht=!0,lr=null,c=_r(s,null,p,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(js(),p===y){s=Mn(n,s,c);break e}R(n,s,p,c)}s=s.child}return s;case 5:return Po(s),n===null&&So(s),p=s.type,y=s.pendingProps,w=n!==null?n.memoizedProps:null,E=y.children,Xu(p,y)?E=null:w!==null&&Xu(p,w)&&(s.flags|=32),Ke(n,s),R(n,s,E,c),s.child;case 6:return n===null&&So(s),null;case 13:return ne(n,s,c);case 4:return $i(s,s.stateNode.containerInfo),p=s.pendingProps,n===null?s.child=zs(s,null,p,c):R(n,s,p,c),s.child;case 11:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),W(n,s,p,y,c);case 7:return R(n,s,s.pendingProps,c),s.child;case 8:return R(n,s,s.pendingProps.children,c),s.child;case 12:return R(n,s,s.pendingProps.children,c),s.child;case 10:e:{if(p=s.type._context,y=s.pendingProps,w=s.memoizedProps,E=y.value,vt(Pa,p._currentValue),p._currentValue=E,w!==null)if(Xn(w.value,E)){if(w.children===y.children&&!Pn.current){s=Mn(n,s,c);break e}}else for(w=s.child,w!==null&&(w.return=s);w!==null;){var D=w.dependencies;if(D!==null){E=w.child;for(var F=D.firstContext;F!==null;){if(F.context===p){if(w.tag===1){F=ti(-1,c&-c),F.tag=2;var J=w.updateQueue;if(J!==null){J=J.shared;var ae=J.pending;ae===null?F.next=F:(F.next=ae.next,ae.next=F),J.pending=F}}w.lanes|=c,F=w.alternate,F!==null&&(F.lanes|=c),Fl(w.return,c,s),D.lanes|=c;break}F=F.next}}else if(w.tag===10)E=w.type===s.type?null:w.child;else if(w.tag===18){if(E=w.return,E===null)throw Error(t(341));E.lanes|=c,D=E.alternate,D!==null&&(D.lanes|=c),Fl(E,c,s),E=w.sibling}else E=w.child;if(E!==null)E.return=w;else for(E=w;E!==null;){if(E===s){E=null;break}if(w=E.sibling,w!==null){w.return=E.return,E=w;break}E=E.return}w=E}R(n,s,y.children,c),s=s.child}return s;case 9:return y=s.type,p=s.pendingProps.children,xi(s,c),y=Fn(y),p=p(y),s.flags|=1,R(n,s,p,c),s.child;case 14:return p=s.type,y=xn(p,s.pendingProps),y=xn(p.type,y),Z(n,s,p,y,c);case 15:return fe(n,s,s.type,s.pendingProps,c);case 17:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),st(n,s),s.tag=1,Nn(p)?(n=!0,As(s)):n=!1,xi(s,c),Bd(s,p,y),Ql(s,p,y,c),ft(null,s,p,!0,n,c);case 19:return rn(n,s,c);case 22:return Te(n,s,c)}throw Error(t(156,s.tag))};function dg(n,s){return nd(n,s)}function N2(n,s,c,p){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(n,s,c,p){return new N2(n,s,c,p)}function Lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function T2(n){if(typeof n=="function")return Lf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ve)return 11;if(n===_e)return 14}return 2}function Uo(n,s){var c=n.alternate;return c===null?(c=si(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function Jd(n,s,c,p,y,w){var E=2;if(p=n,typeof n=="function")Lf(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case ie:return Da(c.children,y,w,s);case K:E=8,y|=8;break;case ye:return n=si(12,c,s,y|2),n.elementType=ye,n.lanes=w,n;case De:return n=si(13,c,s,y),n.elementType=De,n.lanes=w,n;case Me:return n=si(19,c,s,y),n.elementType=Me,n.lanes=w,n;case ue:return Zd(c,y,w,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ke:E=10;break e;case Ge:E=9;break e;case ve:E=11;break e;case _e:E=14;break e;case le:E=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=si(E,c,s,y),s.elementType=n,s.type=p,s.lanes=w,s}function Da(n,s,c,p){return n=si(7,n,p,s),n.lanes=c,n}function Zd(n,s,c,p){return n=si(22,n,p,s),n.elementType=ue,n.lanes=c,n.stateNode={isHidden:!1},n}function Df(n,s,c){return n=si(6,n,null,s),n.lanes=c,n}function jf(n,s,c){return s=si(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function b2(n,s,c,p,y){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=er(0),this.expirationTimes=er(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function zf(n,s,c,p,y,w,E,D,F){return n=new b2(n,s,c,D,F),s===1?(s=1,w===!0&&(s|=8)):s=0,w=si(3,null,null,s),n.current=w,w.stateNode=n,w.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(w),n}function R2(n,s,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:p==null?null:""+p,children:n,containerInfo:s,implementation:c}}function hg(n){if(!n)return $r;n=n._reactInternals;e:{if(ps(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Nn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var c=n.type;if(Nn(c))return Il(n,c,s)}return s}function fg(n,s,c,p,y,w,E,D,F){return n=zf(c,p,!0,n,y,w,E,D,F),n.context=hg(null),c=n.current,p=hr(),y=Bo(c),w=ti(p,y),w.callback=s??null,ni(c,w,y),n.current.lanes=y,oa(n,y,p),kr(n,p),n}function eh(n,s,c,p){var y=s.current,w=hr(),E=Bo(y);return c=hg(c),s.context===null?s.context=c:s.pendingContext=c,s=ti(w,E),s.payload={element:n},p=p===void 0?null:p,p!==null&&(s.callback=p),n=ni(y,s,E),n!==null&&(Ei(n,y,E,w),Gl(n,y,E)),E}function th(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function pg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function Ff(n,s){pg(n,s),(n=n.alternate)&&pg(n,s)}function M2(){return null}var gg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Bf(n){this._internalRoot=n}nh.prototype.render=Bf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));eh(n,s,null,null)},nh.prototype.unmount=Bf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Aa(function(){eh(null,n,null,null)}),s[Kr]=null}};function nh(n){this._internalRoot=n}nh.prototype.unstable_scheduleHydration=function(n){if(n){var s=ad();n={blockedOn:null,target:n,priority:s};for(var c=0;c<Xr.length&&s!==0&&s<Xr[c].priority;c++);Xr.splice(c,0,n),c===0&&al(n)}};function Gf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function rh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function mg(){}function I2(n,s,c,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var J=th(E);w.call(J)}}var E=fg(s,p,n,0,null,!1,!1,"",mg);return n._reactRootContainer=E,n[Kr]=E.current,Ns(n.nodeType===8?n.parentNode:n),Aa(),E}for(;y=n.lastChild;)n.removeChild(y);if(typeof p=="function"){var D=p;p=function(){var J=th(F);D.call(J)}}var F=zf(n,0,!1,null,null,!1,!1,"",mg);return n._reactRootContainer=F,n[Kr]=F.current,Ns(n.nodeType===8?n.parentNode:n),Aa(function(){eh(s,F,c,p)}),F}function ih(n,s,c,p,y){var w=c._reactRootContainer;if(w){var E=w;if(typeof y=="function"){var D=y;y=function(){var F=th(E);D.call(F)}}eh(s,E,n,y)}else E=I2(c,s,n,y,p);return th(E)}ro=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var c=on(s.pendingLanes);c!==0&&(Eu(s,c|1),kr(s,Wt()),(ct&6)===0&&(Zl=Wt()+500,Yi()))}break;case 13:Aa(function(){var p=cr(n,1);if(p!==null){var y=hr();Ei(p,n,1,y)}}),Ff(n,1)}},io=function(n){if(n.tag===13){var s=cr(n,134217728);if(s!==null){var c=hr();Ei(s,n,134217728,c)}Ff(n,134217728)}},od=function(n){if(n.tag===13){var s=Bo(n),c=cr(n,s);if(c!==null){var p=hr();Ei(c,n,s,p)}Ff(n,s)}},ad=function(){return ut},sl=function(n,s){var c=ut;try{return ut=n,s()}finally{ut=c}},vu=function(n,s,c){switch(s){case"input":if(Cn(n,c),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var p=c[s];if(p!==n&&p.form===n.form){var y=un(p);if(!y)throw Error(t(90));We(p),Cn(p,y)}}}break;case"textarea":Vr(n,c);break;case"select":s=c.value,s!=null&&fn(n,!!c.multiple,s,!1)}},Kc=If,Za=Aa;var A2={usingClientEntryPoint:!1,Events:[Sa,en,un,xu,_u,If]},pc={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O2={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ed(n),n===null?null:n.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||M2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ci=sh.inject(O2),pn=sh}catch{}}return Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A2,Cr.createPortal=function(n,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gf(s))throw Error(t(200));return R2(n,s,null,c)},Cr.createRoot=function(n,s){if(!Gf(n))throw Error(t(299));var c=!1,p="",y=gg;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=zf(n,1,!1,null,null,c,!1,p,y),n[Kr]=s.current,Ns(n.nodeType===8?n.parentNode:n),new Bf(s)},Cr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ed(s),n=n===null?null:n.stateNode,n},Cr.flushSync=function(n){return Aa(n)},Cr.hydrate=function(n,s,c){if(!rh(s))throw Error(t(200));return ih(null,n,s,!0,c)},Cr.hydrateRoot=function(n,s,c){if(!Gf(n))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,w="",E=gg;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),s=fg(s,null,n,1,c??null,y,!1,w,E),n[Kr]=s.current,Ns(n),p)for(n=0;n<p.length;n++)c=p[n],y=c._getVersion,y=y(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,y]:s.mutableSourceEagerHydrationData.push(c,y);return new nh(s)},Cr.render=function(n,s,c){if(!rh(s))throw Error(t(200));return ih(null,n,s,!1,c)},Cr.unmountComponentAtNode=function(n){if(!rh(n))throw Error(t(40));return n._reactRootContainer?(Aa(function(){ih(null,null,n,!1,function(){n._reactRootContainer=null,n[Kr]=null})}),!0):!1},Cr.unstable_batchedUpdates=If,Cr.unstable_renderSubtreeIntoContainer=function(n,s,c,p){if(!rh(c))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ih(n,s,c,!1,p)},Cr.version="18.3.1-next-f1338f8080-20240426",Cr}var Eg;function W2(){if(Eg)return Hf.exports;Eg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hf.exports=U2(),Hf.exports}var Pg;function H2(){if(Pg)return oh;Pg=1;var r=W2();return oh.createRoot=r.createRoot,oh.hydrateRoot=r.hydrateRoot,oh}var V2=H2();let q2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Y2=(r=21)=>{let e="",t=r|0;for(;t--;)e+=q2[Math.random()*64|0];return e};function bi(r){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+r+(t.length?" "+t.map((function(o){return"'"+o+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ou(r){return!!r&&!!r[Ur]}function Wa(r){var e;return!!r&&((function(t){if(!t||typeof t!="object")return!1;var i=Object.getPrototypeOf(t);if(i===null)return!0;var o=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===tv})(r)||Array.isArray(r)||!!r[Og]||!!(!((e=r.constructor)===null||e===void 0)&&e[Og])||s0(r)||o0(r))}function Fc(r,e,t){t===void 0&&(t=!1),uu(r)===0?(t?Object.keys:d0)(r).forEach((function(i){t&&typeof i=="symbol"||e(i,r[i],r)})):r.forEach((function(i,o){return e(o,i,r)}))}function uu(r){var e=r[Ur];return e?e.i>3?e.i-4:e.i:Array.isArray(r)?1:s0(r)?2:o0(r)?3:0}function Pp(r,e){return uu(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function X2(r,e){return uu(r)===2?r.get(e):r[e]}function c1(r,e,t){var i=uu(r);i===2?r.set(e,t):i===3?r.add(t):r[e]=t}function Q2(r,e){return r===e?r!==0||1/r==1/e:r!=r&&e!=e}function s0(r){return Z2&&r instanceof Map}function o0(r){return ev&&r instanceof Set}function Ga(r){return r.o||r.t}function a0(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var e=nv(r);delete e[Ur];for(var t=d0(e),i=0;i<t.length;i++){var o=t[i],u=e[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(e[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:r[o]})}return Object.create(Object.getPrototypeOf(r),e)}function l0(r,e){return e===void 0&&(e=!1),u0(r)||ou(r)||!Wa(r)||(uu(r)>1&&(r.set=r.add=r.clear=r.delete=K2),Object.freeze(r),e&&Fc(r,(function(t,i){return l0(i,!0)}),!0)),r}function K2(){bi(2)}function u0(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function is(r){var e=rv[r];return e||bi(18,r),e}function Ng(){return Bc}function Yf(r,e){e&&(is("Patches"),r.u=[],r.s=[],r.v=e)}function Ih(r){Np(r),r.p.forEach($2),r.p=null}function Np(r){r===Bc&&(Bc=r.l)}function Tg(r){return Bc={p:[],l:Bc,h:r,m:!0,_:0}}function $2(r){var e=r[Ur];e.i===0||e.i===1?e.j():e.g=!0}function Xf(r,e){e._=e.p.length;var t=e.p[0],i=r!==void 0&&r!==t;return e.h.O||is("ES5").S(e,r,i),i?(t[Ur].P&&(Ih(e),bi(4)),Wa(r)&&(r=Ah(e,r),e.l||Oh(e,r)),e.u&&is("Patches").M(t[Ur].t,r,e.u,e.s)):r=Ah(e,t,[]),Ih(e),e.u&&e.v(e.u,e.s),r!==d1?r:void 0}function Ah(r,e,t){if(u0(e))return e;var i=e[Ur];if(!i)return Fc(e,(function(f,g){return bg(r,i,e,f,g,t)}),!0),e;if(i.A!==r)return e;if(!i.P)return Oh(r,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var o=i.i===4||i.i===5?i.o=a0(i.k):i.o,u=o,d=!1;i.i===3&&(u=new Set(o),o.clear(),d=!0),Fc(u,(function(f,g){return bg(r,i,o,f,g,t,d)})),Oh(r,o,!1),t&&r.u&&is("Patches").N(i,t,r.u,r.s)}return i.o}function bg(r,e,t,i,o,u,d){if(ou(o)){var f=Ah(r,o,u&&e&&e.i!==3&&!Pp(e.R,i)?u.concat(i):void 0);if(c1(t,i,f),!ou(f))return;r.m=!1}else d&&t.add(o);if(Wa(o)&&!u0(o)){if(!r.h.D&&r._<1)return;Ah(r,o),e&&e.A.l||Oh(r,o)}}function Oh(r,e,t){t===void 0&&(t=!1),!r.l&&r.h.D&&r.m&&l0(e,t)}function Qf(r,e){var t=r[Ur];return(t?Ga(t):r)[e]}function Rg(r,e){if(e in r)for(var t=Object.getPrototypeOf(r);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function Tp(r){r.P||(r.P=!0,r.l&&Tp(r.l))}function Kf(r){r.o||(r.o=a0(r.t))}function bp(r,e,t){var i=s0(e)?is("MapSet").F(e,t):o0(e)?is("MapSet").T(e,t):r.O?(function(o,u){var d=Array.isArray(o),f={i:d?1:0,A:u?u.A:Ng(),P:!1,I:!1,R:{},l:u,t:o,k:null,o:null,j:null,C:!1},g=f,x=Rp;d&&(g=[f],x=Pc);var _=Proxy.revocable(g,x),k=_.revoke,S=_.proxy;return f.k=S,f.j=k,S})(e,t):is("ES5").J(e,t);return(t?t.A:Ng()).p.push(i),i}function J2(r){return ou(r)||bi(22,r),(function e(t){if(!Wa(t))return t;var i,o=t[Ur],u=uu(t);if(o){if(!o.P&&(o.i<4||!is("ES5").K(o)))return o.t;o.I=!0,i=Mg(t,u),o.I=!1}else i=Mg(t,u);return Fc(i,(function(d,f){o&&X2(o.t,d)===f||c1(i,d,e(f))})),u===3?new Set(i):i})(r)}function Mg(r,e){switch(e){case 2:return new Map(r);case 3:return Array.from(r)}return a0(r)}var Ig,Bc,c0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Z2=typeof Map<"u",ev=typeof Set<"u",Ag=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",d1=c0?Symbol.for("immer-nothing"):((Ig={})["immer-nothing"]=!0,Ig),Og=c0?Symbol.for("immer-draftable"):"__$immer_draftable",Ur=c0?Symbol.for("immer-state"):"__$immer_state",tv=""+Object.prototype.constructor,d0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,nv=Object.getOwnPropertyDescriptors||function(r){var e={};return d0(r).forEach((function(t){e[t]=Object.getOwnPropertyDescriptor(r,t)})),e},rv={},Rp={get:function(r,e){if(e===Ur)return r;var t=Ga(r);if(!Pp(t,e))return(function(o,u,d){var f,g=Rg(u,d);return g?"value"in g?g.value:(f=g.get)===null||f===void 0?void 0:f.call(o.k):void 0})(r,t,e);var i=t[e];return r.I||!Wa(i)?i:i===Qf(r.t,e)?(Kf(r),r.o[e]=bp(r.A.h,i,r)):i},has:function(r,e){return e in Ga(r)},ownKeys:function(r){return Reflect.ownKeys(Ga(r))},set:function(r,e,t){var i=Rg(Ga(r),e);if(i!=null&&i.set)return i.set.call(r.k,t),!0;if(!r.P){var o=Qf(Ga(r),e),u=o==null?void 0:o[Ur];if(u&&u.t===t)return r.o[e]=t,r.R[e]=!1,!0;if(Q2(t,o)&&(t!==void 0||Pp(r.t,e)))return!0;Kf(r),Tp(r)}return r.o[e]===t&&(t!==void 0||e in r.o)||Number.isNaN(t)&&Number.isNaN(r.o[e])||(r.o[e]=t,r.R[e]=!0),!0},deleteProperty:function(r,e){return Qf(r.t,e)!==void 0||e in r.t?(r.R[e]=!1,Kf(r),Tp(r)):delete r.R[e],r.o&&delete r.o[e],!0},getOwnPropertyDescriptor:function(r,e){var t=Ga(r),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:r.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){bi(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){bi(12)}},Pc={};Fc(Rp,(function(r,e){Pc[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Pc.deleteProperty=function(r,e){return Pc.set.call(this,r,e,void 0)},Pc.set=function(r,e,t){return Rp.set.call(this,r[0],e,t,r[0])};var iv=(function(){function r(t){var i=this;this.O=Ag,this.D=!0,this.produce=function(o,u,d){if(typeof o=="function"&&typeof u!="function"){var f=u;u=o;var g=i;return function(A){var M=this;A===void 0&&(A=f);for(var I=arguments.length,b=Array(I>1?I-1:0),O=1;O<I;O++)b[O-1]=arguments[O];return g.produce(A,(function(L){var X;return(X=u).call.apply(X,[M,L].concat(b))}))}}var x;if(typeof u!="function"&&bi(6),d!==void 0&&typeof d!="function"&&bi(7),Wa(o)){var _=Tg(i),k=bp(i,o,void 0),S=!0;try{x=u(k),S=!1}finally{S?Ih(_):Np(_)}return typeof Promise<"u"&&x instanceof Promise?x.then((function(A){return Yf(_,d),Xf(A,_)}),(function(A){throw Ih(_),A})):(Yf(_,d),Xf(x,_))}if(!o||typeof o!="object"){if((x=u(o))===void 0&&(x=o),x===d1&&(x=void 0),i.D&&l0(x,!0),d){var N=[],P=[];is("Patches").M(o,x,N,P),d(N,P)}return x}bi(21,o)},this.produceWithPatches=function(o,u){if(typeof o=="function")return function(x){for(var _=arguments.length,k=Array(_>1?_-1:0),S=1;S<_;S++)k[S-1]=arguments[S];return i.produceWithPatches(x,(function(N){return o.apply(void 0,[N].concat(k))}))};var d,f,g=i.produce(o,u,(function(x,_){d=x,f=_}));return typeof Promise<"u"&&g instanceof Promise?g.then((function(x){return[x,d,f]})):[g,d,f]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=r.prototype;return e.createDraft=function(t){Wa(t)||bi(8),ou(t)&&(t=J2(t));var i=Tg(this),o=bp(this,t,void 0);return o[Ur].C=!0,Np(i),o},e.finishDraft=function(t,i){var o=t&&t[Ur],u=o.A;return Yf(u,i),Xf(void 0,u)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!Ag&&bi(20),this.O=t},e.applyPatches=function(t,i){var o;for(o=i.length-1;o>=0;o--){var u=i[o];if(u.path.length===0&&u.op==="replace"){t=u.value;break}}o>-1&&(i=i.slice(o+1));var d=is("Patches").$;return ou(t)?d(t,i):this.produce(t,(function(f){return d(f,i)}))},r})(),Wr=new iv,sv=Wr.produce;Wr.produceWithPatches.bind(Wr);Wr.setAutoFreeze.bind(Wr);Wr.setUseProxies.bind(Wr);Wr.applyPatches.bind(Wr);Wr.createDraft.bind(Wr);Wr.finishDraft.bind(Wr);class ov{constructor(e){const t=av();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){const e=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function av(){let r=4022871197;return function(t){const i=t.toString();for(let o=0;o<i.length;o++){r+=i.charCodeAt(o);let u=.02519603282416938*r;r=u>>>0,u-=r,u*=r,r=u>>>0,u-=r,r+=u*4294967296}return(r>>>0)*23283064365386963e-26}}function Lg(r,e){return e.c=r.c,e.s0=r.s0,e.s1=r.s1,e.s2=r.s2,e}function h1(r,e){const t=new ov(r),i=t.next.bind(t);return e&&Lg(e,t),i.state=()=>Lg(t,{}),i}class Dg{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const e=this.state,t=e.prngstate?"":e.seed,i=h1(t,e.prngstate),o=i();return this.state={...e,prngstate:i.state()},o}api(){const e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},i={};for(const u in t){const d=t[u];i[u]=f=>f===void 0?Math.floor(e()*d)+1:Array.from({length:f}).map(()=>Math.floor(e()*d)+1)}function o(u=6,d){return d===void 0?Math.floor(e()*u)+1:Array.from({length:d}).map(()=>Math.floor(e()*u)+1)}return{...i,Die:o,Number:()=>e(),Shuffle:u=>{const d=[...u];let f=u.length,g=0;const x=Array.from({length:f});for(;f;){const _=Math.trunc(f*e());x[g++]=d[_],d[_]=d[--f]}return x},_private:this}}}const lv={name:"random",noClient:({api:r})=>r._private.isUsed(),flush:({api:r})=>r._private.getState(),api:({data:r})=>new Dg(r).api(),setup:({game:r})=>{let{seed:e}=r;return e===void 0&&(e=Dg.seed()),{seed:e}},playerView:()=>{}};var $f,jg;function uv(){if(jg)return $f;jg=1;var r="[object Object]";function e(S){var N=!1;if(S!=null&&typeof S.toString!="function")try{N=!!(S+"")}catch{}return N}function t(S,N){return function(P){return S(N(P))}}var i=Function.prototype,o=Object.prototype,u=i.toString,d=o.hasOwnProperty,f=u.call(Object),g=o.toString,x=t(Object.getPrototypeOf,Object);function _(S){return!!S&&typeof S=="object"}function k(S){if(!_(S)||g.call(S)!=r||e(S))return!1;var N=x(S);if(N===null)return!0;var P=d.call(N,"constructor")&&N.constructor;return typeof P=="function"&&P instanceof P&&u.call(P)==f}return $f=k,$f}uv();const Gc="MAKE_MOVE",Hh="GAME_EVENT",Vh="REDO",h0="RESET",f0="SYNC",qh="UNDO",p0="UPDATE",g0="PATCH",f1="PLUGIN",Yh="STRIP_TRANSIENTS",p1=(r,e,t,i)=>({type:Gc,payload:{type:r,args:e,playerID:t,credentials:i}}),Oc=(r,e,t,i)=>({type:Hh,payload:{type:r,args:e,playerID:t,credentials:i}}),g1=(r,e,t,i)=>({type:Hh,payload:{type:r,args:e,playerID:t,credentials:i},automatic:!0}),m1=r=>({type:f0,state:r.state,log:r.log,initialState:r.initialState,clientOnly:!0}),y1=(r,e,t,i)=>({type:g0,prevStateID:r,stateID:e,patch:t,deltalog:i,clientOnly:!0}),v1=(r,e)=>({type:p0,state:r,deltalog:e,clientOnly:!0}),x1=r=>({type:h0,state:r,clientOnly:!0}),_1=(r,e)=>({type:qh,payload:{type:null,args:null,playerID:r,credentials:e}}),w1=(r,e)=>({type:Vh,payload:{type:null,args:null,playerID:r,credentials:e}}),cv=(r,e,t,i)=>({type:f1,payload:{type:r,args:e,playerID:t,credentials:i}}),S1=()=>({type:Yh});var dv=Object.freeze({__proto__:null,makeMove:p1,gameEvent:Oc,automaticGameEvent:g1,sync:m1,patch:y1,update:v1,reset:x1,undo:_1,redo:w1,plugin:cv,stripTransients:S1});const $t="INVALID_MOVE",hv={name:"plugin-immer",fnWrap:r=>(e,...t)=>{let i=!1;const o=sv(e.G,u=>{const d=r({...e,G:u},...t);if(d===$t){i=!0;return}return d});return i?$t:o}};var Zn;(function(r){r.MOVE="MOVE",r.GAME_ON_END="GAME_ON_END",r.PHASE_ON_BEGIN="PHASE_ON_BEGIN",r.PHASE_ON_END="PHASE_ON_END",r.TURN_ON_BEGIN="TURN_ON_BEGIN",r.TURN_ON_MOVE="TURN_ON_MOVE",r.TURN_ON_END="TURN_ON_END"})(Zn||(Zn={}));var qs;(function(r){r.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",r.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",r.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,r.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",r.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",r.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",r.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(qs||(qs={}));class fv{constructor(e,t,i){this.flow=e,this.playerID=i,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=t.numPlayers*100}api(){const e={_private:this};for(const t of this.flow.eventNames)e[t]=(...i)=>{this.dispatch.push({type:t,args:i,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return e}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){const t=e,i=({stack:o},u)=>({...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:u+`
`+o}}}});e:for(let o=0;o<this.dispatch.length;o++){const u=this.dispatch[o],d=u.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return i(u.error,qs.MaxTurnEndings);if(u.calledFrom===void 0)return i(u.error,qs.CalledOutsideHook);if(e.ctx.gameover)break e;switch(u.type){case"endStage":case"setStage":case"setActivePlayers":{switch(u.calledFrom){case Zn.TURN_ON_END:case Zn.PHASE_ON_END:return i(u.error,qs.StageEventInOnEnd);case Zn.PHASE_ON_BEGIN:return i(u.error,qs.StageEventInPhaseBegin);case Zn.TURN_ON_BEGIN:if(u.type==="setActivePlayers")break;return i(u.error,qs.StageEventInTurnBegin)}if(d)continue e;break}case"endTurn":{if(u.calledFrom===Zn.TURN_ON_END||u.calledFrom===Zn.PHASE_ON_END)return i(u.error,qs.EndTurnInOnEnd);if(d)continue e;break}case"endPhase":case"setPhase":{if(u.calledFrom===Zn.PHASE_ON_END)return i(u.error,qs.PhaseEventInOnEnd);if(u.phase!==e.ctx.phase)continue e;break}}const g=g1(u.type,u.args,this.playerID);e=this.flow.processEvent(e,g)}return e}}const m0={name:"events",noClient:({api:r})=>r._private.isUsed(),isInvalid:({data:r})=>r.error||!1,fnWrap:(r,e)=>(t,...i)=>{const o=t.events;o&&o._private.updateTurnContext(t.ctx,e);const u=r(t,...i);return o&&o._private.unsetCurrentMethod(),u},dangerouslyFlushRawState:({state:r,api:e})=>e._private.update(r),api:({game:r,ctx:e,playerID:t})=>new fv(r.flow,e,t).api()},pv={name:"log",flush:()=>({}),api:({data:r})=>({setMetadata:e=>{r.metadata=e}}),setup:()=>({})},gv={name:"plugin-serializable",fnWrap:r=>(e,...t)=>r(e,...t)},mv=(...r)=>console.error(...r);function yt(r){mv("ERROR:",r)}const y0=[hv,lv,pv,gv],Vc=[...y0,m0],yv=(r,e,t)=>(t.game.plugins.filter(i=>i.action!==void 0).filter(i=>i.name===e.payload.type).forEach(i=>{const o=i.name,u=r.plugins[o]||{data:{}},d=i.action(u.data,e.payload);r={...r,plugins:{...r.plugins,[o]:{...u,data:d}}}}),r),au=({plugins:r})=>Object.entries(r||{}).reduce((e,[t,{api:i}])=>(e[t]=i,e),{}),k1=(r,e,t)=>[...y0,...t,m0].filter(i=>i.fnWrap!==void 0).reduce((i,{fnWrap:o})=>o(i,e),r),vv=(r,e)=>([...Vc,...e.game.plugins].filter(t=>t.setup!==void 0).forEach(t=>{const i=t.name,o=t.setup({G:r.G,ctx:r.ctx,game:e.game});r={...r,plugins:{...r.plugins,[i]:{data:o}}}}),r),Mp=(r,e)=>([...Vc,...e.game.plugins].filter(t=>t.api!==void 0).forEach(t=>{const i=t.name,o=r.plugins[i]||{data:{}},u=t.api({G:r.G,ctx:r.ctx,data:o.data,game:e.game,playerID:e.playerID});r={...r,plugins:{...r.plugins,[i]:{...o,api:u}}}}),r),xv=(r,e)=>([...y0,...e.game.plugins,m0].reverse().forEach(t=>{const i=t.name,o=r.plugins[i]||{data:{}};if(t.flush){const u=t.flush({G:r.G,ctx:r.ctx,game:e.game,api:o.api,data:o.data});r={...r,plugins:{...r.plugins,[t.name]:{data:u}}}}else if(t.dangerouslyFlushRawState){r=t.dangerouslyFlushRawState({state:r,game:e.game,api:o.api,data:o.data});const u=r.plugins[i].data;r={...r,plugins:{...r.plugins,[t.name]:{data:u}}}}}),r),_v=(r,e)=>[...Vc,...e.game.plugins].filter(t=>t.noClient!==void 0).map(t=>{const i=t.name,o=r.plugins[i];return o?t.noClient({G:r.G,ctx:r.ctx,game:e.game,api:o.api,data:o.data}):!1}).includes(!0),wv=(r,e)=>[...Vc,...e.game.plugins].filter(i=>i.isInvalid!==void 0).map(i=>{const{name:o}=i,u=r.plugins[o],d=i.isInvalid({G:r.G,ctx:r.ctx,game:e.game,data:u&&u.data});return d?{plugin:o,message:d}:!1}).find(i=>i)||!1,C1=(r,e)=>{const t=xv(r,e),i=wv(t,e);if(!i)return[t];const{plugin:o,message:u}=i;return yt(`${o} plugin declared action invalid:
${u}`),[r,i]},E1=({G:r,ctx:e,plugins:t={}},{game:i,playerID:o})=>([...Vc,...i.plugins].forEach(({name:u,playerView:d})=>{if(!d)return;const{data:f}=t[u]||{data:{}},g=d({G:r,ctx:e,game:i,data:f,playerID:o});t={...t,[u]:{data:g}}}),t);function Lh(r,e=!1){r.moveLimit&&(e&&(r.minMoves=r.moveLimit),r.maxMoves=r.moveLimit,delete r.moveLimit)}function Dh(r,e){let t={},i=[],o=null,u={},d={};if(Array.isArray(e)){const g={};e.forEach(x=>g[x]=jh.NULL),t=g}else{if(Lh(e),e.next&&(o=e.next),e.revert&&(i=[...r._prevActivePlayers,{activePlayers:r.activePlayers,_activePlayersMinMoves:r._activePlayersMinMoves,_activePlayersMaxMoves:r._activePlayersMaxMoves,_activePlayersNumMoves:r._activePlayersNumMoves}]),e.currentPlayer!==void 0&&ah(t,u,d,r.currentPlayer,e.currentPlayer),e.others!==void 0)for(let g=0;g<r.playOrder.length;g++){const x=r.playOrder[g];x!==r.currentPlayer&&ah(t,u,d,x,e.others)}if(e.all!==void 0)for(let g=0;g<r.playOrder.length;g++){const x=r.playOrder[g];ah(t,u,d,x,e.all)}if(e.value)for(const g in e.value)ah(t,u,d,g,e.value[g]);if(e.minMoves)for(const g in t)u[g]===void 0&&(u[g]=e.minMoves);if(e.maxMoves)for(const g in t)d[g]===void 0&&(d[g]=e.maxMoves)}Object.keys(t).length===0&&(t=null),Object.keys(u).length===0&&(u=null),Object.keys(d).length===0&&(d=null);const f={};for(const g in t)f[g]=0;return{...r,activePlayers:t,_activePlayersMinMoves:u,_activePlayersMaxMoves:d,_activePlayersNumMoves:f,_prevActivePlayers:i,_nextActivePlayers:o}}function Sv(r){let{activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u,_nextActivePlayers:d}=r;if(e&&Object.keys(e).length===0)if(d)r=Dh(r,d),{activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u}=r;else if(u.length>0){const f=u.length-1;({activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o}=u[f]),u=u.slice(0,f)}else e=null,t=null,i=null;return{...r,activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u}}function ah(r,e,t,i,o){(typeof o!="object"||o===jh.NULL)&&(o={stage:o}),o.stage!==void 0&&(Lh(o),r[i]=o.stage,o.minMoves&&(e[i]=o.minMoves),o.maxMoves&&(t[i]=o.maxMoves))}function Ip(r,e){return r[e]+""}function kv(r,e){let{G:t,ctx:i}=r;const{numPlayers:o}=i,d={...au(r),G:t,ctx:i},f=e.order;let g=[...Array.from({length:o})].map((S,N)=>N+"");f.playOrder!==void 0&&(g=f.playOrder(d));const x=f.first(d),_=typeof x;_!=="number"&&yt(`invalid value returned by turn.order.first  expected number got ${_} ${x}.`);const k=Ip(g,x);return i={...i,currentPlayer:k,playOrderPos:x,playOrder:g},i=Dh(i,e.activePlayers||{}),i}function Cv(r,e,t,i){const o=t.order;let{G:u,ctx:d}=r,f=d.playOrderPos,g=!1;if(i&&i!==!0)typeof i!="object"&&yt(`invalid argument to endTurn: ${i}`),Object.keys(i).forEach(x=>{switch(x){case"remove":e=Ip(d.playOrder,f);break;case"next":f=d.playOrder.indexOf(i.next),e=i.next;break;default:yt(`invalid argument to endTurn: ${x}`)}});else{const _={...au(r),G:u,ctx:d},k=o.next(_),S=typeof k;k!==void 0&&S!=="number"&&yt(`invalid value returned by turn.order.next  expected number or undefined got ${S} ${k}.`),k===void 0?g=!0:(f=k,e=Ip(d.playOrder,f))}return d={...d,playOrderPos:f,currentPlayer:e},{endPhase:g,ctx:d}}const Ap={DEFAULT:{first:({ctx:r})=>r.turn===0?r.playOrderPos:(r.playOrderPos+1)%r.playOrder.length,next:({ctx:r})=>(r.playOrderPos+1)%r.playOrder.length}},jh={NULL:null};var Jf={},Ws={},zg;function P1(){if(zg)return Ws;zg=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.Pointer=Ws.escapeToken=Ws.unescapeToken=void 0;function r(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}Ws.unescapeToken=r;function e(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}Ws.escapeToken=e;var t=(function(){function i(o){o===void 0&&(o=[""]),this.tokens=o}return i.fromJSON=function(o){var u=o.split("/").map(r);if(u[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(o));return new i(u)},i.prototype.toString=function(){return this.tokens.map(e).join("/")},i.prototype.evaluate=function(o){for(var u=null,d="",f=o,g=1,x=this.tokens.length;g<x;g++)u=f,d=this.tokens[g],!(d=="__proto__"||d=="constructor"||d=="prototype")&&(f=(u||{})[d]);return{parent:u,key:d,value:f}},i.prototype.get=function(o){return this.evaluate(o).value},i.prototype.set=function(o,u){var d=this.evaluate(o);d.parent&&(d.parent[d.key]=u)},i.prototype.push=function(o){this.tokens.push(o)},i.prototype.add=function(o){var u=this.tokens.concat(String(o));return new i(u)},i})();return Ws.Pointer=t,Ws}var Ft={},Zf={},Fg;function N1(){return Fg||(Fg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.objectType=r.hasOwnProperty=void 0,r.hasOwnProperty=Object.prototype.hasOwnProperty;function e(o){return o===void 0?"undefined":o===null?"null":Array.isArray(o)?"array":typeof o}r.objectType=e;function t(o){return o!=null&&typeof o=="object"}function i(o){if(!t(o))return o;if(o.constructor==Array){for(var u=o.length,d=new Array(u),f=0;f<u;f++)d[f]=i(o[f]);return d}if(o.constructor==Date){var g=new Date(+o);return g}var x={};for(var _ in o)r.hasOwnProperty.call(o,_)&&(x[_]=i(o[_]));return x}r.clone=i})(Zf)),Zf}var fr={},Bg;function T1(){if(Bg)return fr;Bg=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.diffAny=fr.diffObjects=fr.diffArrays=fr.intersection=fr.subtract=fr.isDestructive=void 0;var r=N1();function e(_){var k=_.op;return k==="remove"||k==="replace"||k==="copy"||k==="move"}fr.isDestructive=e;function t(_,k){var S={};for(var N in _)r.hasOwnProperty.call(_,N)&&_[N]!==void 0&&(S[N]=1);for(var P in k)r.hasOwnProperty.call(k,P)&&k[P]!==void 0&&delete S[P];return Object.keys(S)}fr.subtract=t;function i(_){for(var k=_.length,S={},N=0;N<k;N++){var P=_[N];for(var A in P)r.hasOwnProperty.call(P,A)&&P[A]!==void 0&&(S[A]=(S[A]||0)+1)}for(var A in S)S[A]<k&&delete S[A];return Object.keys(S)}fr.intersection=i;function o(_){return _.op==="add"}function u(_){return _.op==="remove"}function d(_,k){return{operations:_.operations.concat(k),cost:_.cost+1}}function f(_,k,S,N){N===void 0&&(N=x);var P={"0,0":{operations:[],cost:0}};function A(L,X){var te="".concat(L,",").concat(X),ie=P[te];if(ie===void 0){if(L>0&&X>0&&!N(_[L-1],k[X-1],S.add(String(L-1))).length)ie=A(L-1,X-1);else{var K=[];if(L>0){var ye=A(L-1,X),ke={op:"remove",index:L-1};K.push(d(ye,ke))}if(X>0){var Ge=A(L,X-1),ve={op:"add",index:L-1,value:k[X-1]};K.push(d(Ge,ve))}if(L>0&&X>0){var De=A(L-1,X-1),Me={op:"replace",index:L-1,original:_[L-1],value:k[X-1]};K.push(d(De,Me))}var _e=K.sort(function(le,ue){return le.cost-ue.cost})[0];ie=_e}P[te]=ie}return ie}var M=isNaN(_.length)||_.length<=0?0:_.length,I=isNaN(k.length)||k.length<=0?0:k.length,b=A(M,I).operations,O=b.reduce(function(L,X){var te=L[0],ie=L[1];if(o(X)){var K=X.index+1+ie,ye=K<M+ie?String(K):"-",ke={op:X.op,path:S.add(ye).toString(),value:X.value};return[te.concat(ke),ie+1]}else if(u(X)){var ke={op:X.op,path:S.add(String(X.index+ie)).toString()};return[te.concat(ke),ie-1]}else{var Ge=S.add(String(X.index+ie)),ve=N(X.original,X.value,Ge);return[te.concat.apply(te,ve),ie]}},[[],0])[0];return O}fr.diffArrays=f;function g(_,k,S,N){N===void 0&&(N=x);var P=[];return t(_,k).forEach(function(A){P.push({op:"remove",path:S.add(A).toString()})}),t(k,_).forEach(function(A){P.push({op:"add",path:S.add(A).toString(),value:k[A]})}),i([_,k]).forEach(function(A){P.push.apply(P,N(_[A],k[A],S.add(A)))}),P}fr.diffObjects=g;function x(_,k,S,N){if(N===void 0&&(N=x),_===k)return[];var P=(0,r.objectType)(_),A=(0,r.objectType)(k);return P=="array"&&A=="array"?f(_,k,S,N):P=="object"&&A=="object"?g(_,k,S,N):[{op:"replace",path:S.toString(),value:k}]}return fr.diffAny=x,fr}var Gg;function Ev(){if(Gg)return Ft;Gg=1;var r=Ft&&Ft.__extends||(function(){var M=function(I,b){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,L){O.__proto__=L}||function(O,L){for(var X in L)Object.prototype.hasOwnProperty.call(L,X)&&(O[X]=L[X])},M(I,b)};return function(I,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");M(I,b);function O(){this.constructor=I}I.prototype=b===null?Object.create(b):(O.prototype=b.prototype,new O)}})();Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.apply=Ft.InvalidOperationError=Ft.test=Ft.copy=Ft.move=Ft.replace=Ft.remove=Ft.add=Ft.TestError=Ft.MissingError=void 0;var e=P1(),t=N1(),i=T1(),o=(function(M){r(I,M);function I(b){var O=M.call(this,"Value required at path: ".concat(b))||this;return O.path=b,O.name="MissingError",O}return I})(Error);Ft.MissingError=o;var u=(function(M){r(I,M);function I(b,O){var L=M.call(this,"Test failed: ".concat(b," != ").concat(O))||this;return L.actual=b,L.expected=O,L.name="TestError",L}return I})(Error);Ft.TestError=u;function d(M,I,b){if(Array.isArray(M))if(I=="-")M.push(b);else{var O=parseInt(I,10);M.splice(O,0,b)}else M[I]=b}function f(M,I){if(Array.isArray(M)){var b=parseInt(I,10);M.splice(b,1)}else delete M[I]}function g(M,I){var b=e.Pointer.fromJSON(I.path).evaluate(M);return b.parent===void 0?new o(I.path):(d(b.parent,b.key,(0,t.clone)(I.value)),null)}Ft.add=g;function x(M,I){var b=e.Pointer.fromJSON(I.path).evaluate(M);return b.value===void 0?new o(I.path):(f(b.parent,b.key),null)}Ft.remove=x;function _(M,I){var b=e.Pointer.fromJSON(I.path).evaluate(M);if(b.parent===null)return new o(I.path);if(Array.isArray(b.parent)){if(parseInt(b.key,10)>=b.parent.length)return new o(I.path)}else if(b.value===void 0)return new o(I.path);return b.parent[b.key]=(0,t.clone)(I.value),null}Ft.replace=_;function k(M,I){var b=e.Pointer.fromJSON(I.from).evaluate(M);if(b.value===void 0)return new o(I.from);var O=e.Pointer.fromJSON(I.path).evaluate(M);return O.parent===void 0?new o(I.path):(f(b.parent,b.key),d(O.parent,O.key,b.value),null)}Ft.move=k;function S(M,I){var b=e.Pointer.fromJSON(I.from).evaluate(M);if(b.value===void 0)return new o(I.from);var O=e.Pointer.fromJSON(I.path).evaluate(M);return O.parent===void 0?new o(I.path):(d(O.parent,O.key,(0,t.clone)(b.value)),null)}Ft.copy=S;function N(M,I){var b=e.Pointer.fromJSON(I.path).evaluate(M);return(0,i.diffAny)(b.value,I.value,new e.Pointer).length?new u(b.value,I.value):null}Ft.test=N;var P=(function(M){r(I,M);function I(b){var O=M.call(this,"Invalid operation: ".concat(b.op))||this;return O.operation=b,O.name="InvalidOperationError",O}return I})(Error);Ft.InvalidOperationError=P;function A(M,I){switch(I.op){case"add":return g(M,I);case"remove":return x(M,I);case"replace":return _(M,I);case"move":return k(M,I);case"copy":return S(M,I);case"test":return N(M,I)}return new P(I)}return Ft.apply=A,Ft}var Ug;function Pv(){return Ug||(Ug=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTests=r.createPatch=r.applyPatch=r.Pointer=void 0;var e=P1();Object.defineProperty(r,"Pointer",{enumerable:!0,get:function(){return e.Pointer}});var t=Ev(),i=T1();function o(x,_){return _.map(function(k){return(0,t.apply)(x,k)})}r.applyPatch=o;function u(x){function _(k,S,N){var P=x(k,S,N);return Array.isArray(P)?P:(0,i.diffAny)(k,S,N,_)}return _}function d(x,_,k){var S=new e.Pointer;return(k?u(k):i.diffAny)(x,_,S)}r.createPatch=d;function f(x,_){var k=e.Pointer.fromJSON(_).evaluate(x);if(k!==void 0)return{op:"test",path:_,value:k.value}}function g(x,_){var k=new Array;return _.filter(i.isDestructive).forEach(function(S){var N=f(x,S.path);if(N&&k.push(N),"from"in S){var P=f(x,S.from);P&&k.push(P)}}),k}r.createTests=g})(Jf)),Jf}var b1=Pv();function Nv({moves:r,phases:e,endIf:t,onEnd:i,turn:o,events:u,plugins:d}){r===void 0&&(r={}),u===void 0&&(u={}),d===void 0&&(d=[]),e===void 0&&(e={}),t||(t=()=>{}),i||(i=({G:B})=>B),o||(o={});const f={...e};""in f&&yt("cannot specify phase with empty name"),f[""]={};const g={},x=new Set;let _=null;Object.keys(r).forEach(B=>x.add(B));const k=(B,Y)=>{const re=k1(B,Y,d);return We=>{const Re=au(We);return re({...Re,G:We.G,ctx:We.ctx,playerID:We.playerID})}},S=B=>Y=>{const re=au(Y);return B({...re,G:Y.G,ctx:Y.ctx})},N={onEnd:k(i,Zn.GAME_ON_END),endIf:S(t)};for(const B in f){const Y=f[B];if(Y.start===!0&&(_=B),Y.moves!==void 0)for(const re of Object.keys(Y.moves))g[B+"."+re]=Y.moves[re],x.add(re);Y.endIf===void 0&&(Y.endIf=()=>{}),Y.onBegin===void 0&&(Y.onBegin=({G:re})=>re),Y.onEnd===void 0&&(Y.onEnd=({G:re})=>re),Y.turn===void 0&&(Y.turn=o),Y.turn.order===void 0&&(Y.turn.order=Ap.DEFAULT),Y.turn.onBegin===void 0&&(Y.turn.onBegin=({G:re})=>re),Y.turn.onEnd===void 0&&(Y.turn.onEnd=({G:re})=>re),Y.turn.endIf===void 0&&(Y.turn.endIf=()=>!1),Y.turn.onMove===void 0&&(Y.turn.onMove=({G:re})=>re),Y.turn.stages===void 0&&(Y.turn.stages={}),Lh(Y.turn,!0);for(const re in Y.turn.stages){const Re=Y.turn.stages[re].moves||{};for(const He of Object.keys(Re)){const Ct=B+"."+re+"."+He;g[Ct]=Re[He],x.add(He)}}if(Y.wrapped={onBegin:k(Y.onBegin,Zn.PHASE_ON_BEGIN),onEnd:k(Y.onEnd,Zn.PHASE_ON_END),endIf:S(Y.endIf)},Y.turn.wrapped={onMove:k(Y.turn.onMove,Zn.TURN_ON_MOVE),onBegin:k(Y.turn.onBegin,Zn.TURN_ON_BEGIN),onEnd:k(Y.turn.onEnd,Zn.TURN_ON_END),endIf:S(Y.turn.endIf)},typeof Y.next!="function"){const{next:re}=Y;Y.next=()=>re||null}Y.wrapped.next=S(Y.next)}function P(B){return B.phase?f[B.phase]:f[""]}function A(B){return B}function M(B,Y){const re=new Set,We=new Set;for(let Re=0;Re<Y.length;Re++){const{fn:He,arg:Ct,...gt}=Y[Re];if(He===ve){We.clear();const Et=B.ctx.phase;if(re.has(Et)){const fn={...B.ctx,phase:null};return{...B,ctx:fn}}re.add(Et)}const Cn=[];if(B=He(B,{...gt,arg:Ct,next:Cn}),He===Ge)break;const jt=K(B);if(jt){Y.push({fn:Ge,arg:jt,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}const Ut=ye(B);if(Ut){Y.push({fn:ve,arg:Ut,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}if([A,te,ie].includes(He)){const Et=ke(B);if(Et){Y.push({fn:De,arg:Et,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}}Y.push(...Cn)}return B}function I(B,{next:Y}){return Y.push({fn:b}),B}function b(B,{next:Y}){let{G:re,ctx:We}=B;return re=P(We).wrapped.onBegin(B),Y.push({fn:O}),{...B,G:re,ctx:We}}function O(B,{currentPlayer:Y}){let{ctx:re}=B;const We=P(re);Y?(re={...re,currentPlayer:Y},We.turn.activePlayers&&(re=Dh(re,We.turn.activePlayers))):re=kv(B,We.turn);const Re=re.turn+1;re={...re,turn:Re,numMoves:0,_prevActivePlayers:[]};const He=We.turn.wrapped.onBegin({...B,ctx:re});return{...B,G:He,ctx:re,_undo:[],_redo:[]}}function L(B,{arg:Y,next:re,phase:We}){const Re=P({phase:We});let{ctx:He}=B;if(Y&&Y.next)if(Y.next in f)He={...He,phase:Y.next};else return yt("invalid phase: "+Y.next),B;else He={...He,phase:Re.wrapped.next(B)||null};return B={...B,ctx:He},re.push({fn:b}),B}function X(B,{arg:Y,currentPlayer:re,next:We}){let{G:Re,ctx:He}=B;const Ct=P(He),{endPhase:gt,ctx:Cn}=Cv(B,re,Ct.turn,Y);return He=Cn,B={...B,G:Re,ctx:He},gt?We.push({fn:ve,turn:He.turn,phase:He.phase}):We.push({fn:O,currentPlayer:He.currentPlayer}),B}function te(B,{arg:Y,playerID:re}){if((typeof Y=="string"||Y===jh.NULL)&&(Y={stage:Y}),typeof Y!="object")return B;Lh(Y);let{ctx:We}=B,{activePlayers:Re,_activePlayersMinMoves:He,_activePlayersMaxMoves:Ct,_activePlayersNumMoves:gt}=We;return Y.stage!==void 0&&(Re===null&&(Re={}),Re[re]=Y.stage,gt[re]=0,Y.minMoves&&(He===null&&(He={}),He[re]=Y.minMoves),Y.maxMoves&&(Ct===null&&(Ct={}),Ct[re]=Y.maxMoves)),We={...We,activePlayers:Re,_activePlayersMinMoves:He,_activePlayersMaxMoves:Ct,_activePlayersNumMoves:gt},{...B,ctx:We}}function ie(B,{arg:Y}){return{...B,ctx:Dh(B.ctx,Y)}}function K(B){return N.endIf(B)}function ye(B){return P(B.ctx).wrapped.endIf(B)}function ke(B){const Y=P(B.ctx),re=B.ctx.numMoves||0;return Y.turn.maxMoves&&re>=Y.turn.maxMoves?!0:Y.turn.wrapped.endIf(B)}function Ge(B,{arg:Y,phase:re}){B=ve(B,{}),Y===void 0&&(Y=!0),B={...B,ctx:{...B.ctx,gameover:Y}};const We=N.onEnd(B);return{...B,G:We}}function ve(B,{arg:Y,next:re,turn:We,automatic:Re}){B=De(B,{turn:We,force:!0,automatic:!0});const{phase:He,turn:Ct}=B.ctx;if(re&&re.push({fn:L,arg:Y,phase:He}),He===null)return B;const Cn=P(B.ctx).wrapped.onEnd(B),jt={...B.ctx,phase:null},Ut=Oc("endPhase",Y),{_stateID:Et}=B,fn={action:Ut,_stateID:Et,turn:Ct,phase:He};Re&&(fn.automatic=!0);const Nr=[...B.deltalog||[],fn];return{...B,G:Cn,ctx:jt,deltalog:Nr}}function De(B,{arg:Y,next:re,turn:We,force:Re,automatic:He,playerID:Ct}){if(We!==B.ctx.turn)return B;const{currentPlayer:gt,numMoves:Cn,phase:jt,turn:Ut}=B.ctx,Et=P(B.ctx),fn=Cn||0;if(!Re&&Et.turn.minMoves&&fn<Et.turn.minMoves)return`${Et.turn.minMoves}`,B;const Nr=Et.turn.wrapped.onEnd(B);re&&re.push({fn:X,arg:Y,currentPlayer:gt});let Tr={...B.ctx,activePlayers:null};if(Y&&Y.remove){Ct=Ct||gt;const gr=Tr.playOrder.filter(hs=>hs!=Ct),$a=Tr.playOrderPos>gr.length-1?0:Tr.playOrderPos;if(Tr={...Tr,playOrder:gr,playOrderPos:$a},gr.length===0)return re.push({fn:ve,turn:Ut,phase:jt}),B}const Vr=Oc("endTurn",Y),{_stateID:na}=B,Ai={action:Vr,_stateID:na,turn:Ut,phase:jt};He&&(Ai.automatic=!0);const ds=[...B.deltalog||[],Ai];return{...B,G:Nr,ctx:Tr,deltalog:ds,_undo:[],_redo:[]}}function Me(B,{arg:Y,next:re,automatic:We,playerID:Re}){Re=Re||B.ctx.currentPlayer;let{ctx:He,_stateID:Ct}=B,{activePlayers:gt,_activePlayersNumMoves:Cn,_activePlayersMinMoves:jt,_activePlayersMaxMoves:Ut,phase:Et,turn:fn}=He;const Nr=gt!==null&&Re in gt,Tr=P(He);if(!Y&&Nr){const gr=Tr.turn.stages[gt[Re]];gr&&gr.next&&(Y=gr.next)}if(re&&re.push({fn:te,arg:Y,playerID:Re}),!Nr)return B;const Vr=Cn[Re]||0;if(jt&&jt[Re]&&Vr<jt[Re])return`${jt[Re]}`,B;gt={...gt},delete gt[Re],jt&&(jt={...jt},delete jt[Re]),Ut&&(Ut={...Ut},delete Ut[Re]),He=Sv({...He,activePlayers:gt,_activePlayersMinMoves:jt,_activePlayersMaxMoves:Ut});const Ai={action:Oc("endStage",Y),_stateID:Ct,turn:fn,phase:Et};We&&(Ai.automatic=!0);const ds=[...B.deltalog||[],Ai];return{...B,ctx:He,deltalog:ds}}function _e(B,Y,re){const We=P(B),Re=We.turn.stages,{activePlayers:He}=B;if(He&&He[re]!==void 0&&He[re]!==jh.NULL&&Re[He[re]]!==void 0&&Re[He[re]].moves!==void 0){const gt=Re[He[re]].moves;if(Y in gt)return gt[Y]}else if(We.moves){if(Y in We.moves)return We.moves[Y]}else if(Y in r)return r[Y];return null}function le(B,Y){const{playerID:re,type:We}=Y,{currentPlayer:Re,activePlayers:He,_activePlayersMaxMoves:Ct}=B.ctx,gt=_e(B.ctx,We,re),Cn=!gt||typeof gt=="function"||gt.noLimit!==!0;let{numMoves:jt,_activePlayersNumMoves:Ut}=B.ctx;Cn&&(re===Re&&jt++,He&&Ut[re]++),B={...B,ctx:{...B.ctx,numMoves:jt,_activePlayersNumMoves:Ut}},Ct&&Ut[re]>=Ct[re]&&(B=Me(B,{playerID:re,automatic:!0}));const fn=P(B.ctx).turn.wrapped.onMove({...B,playerID:re});return B={...B,G:fn},M(B,[{fn:A}])}function ue(B,Y,re){return M(B,[{fn:Me,arg:re,playerID:Y}])}function G(B,Y){return M(B,[{fn:Me,playerID:Y}])}function he(B,Y,re){return M(B,[{fn:ie,arg:re}])}function oe(B,Y,re){return M(B,[{fn:ve,phase:B.ctx.phase,turn:B.ctx.turn,arg:{next:re}}])}function z(B){return M(B,[{fn:ve,phase:B.ctx.phase,turn:B.ctx.turn}])}function ee(B,Y,re){return M(B,[{fn:De,turn:B.ctx.turn,phase:B.ctx.phase,arg:re}])}function Se(B,Y,re){return M(B,[{fn:De,turn:B.ctx.turn,phase:B.ctx.phase,force:!0,arg:re}])}function je(B,Y,re){return M(B,[{fn:Ge,turn:B.ctx.turn,phase:B.ctx.phase,arg:re}])}const Ye={endStage:G,setStage:ue,endTurn:ee,pass:Se,endPhase:z,setPhase:oe,endGame:je,setActivePlayers:he},Xe=[];u.endTurn!==!1&&Xe.push("endTurn"),u.pass!==!1&&Xe.push("pass"),u.endPhase!==!1&&Xe.push("endPhase"),u.setPhase!==!1&&Xe.push("setPhase"),u.endGame!==!1&&Xe.push("endGame"),u.setActivePlayers!==!1&&Xe.push("setActivePlayers"),u.endStage!==!1&&Xe.push("endStage"),u.setStage!==!1&&Xe.push("setStage");function Ue(B,Y){const{type:re,playerID:We,args:Re}=Y.payload;return typeof Ye[re]!="function"?B:Ye[re](B,We,...Array.isArray(Re)?Re:[Re])}function et(B,Y,re){return Y.activePlayers?re in Y.activePlayers:Y.currentPlayer===re}return{ctx:B=>({numPlayers:B,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:B})].map((Y,re)=>re+""),playOrderPos:0,phase:_,activePlayers:null}),init:B=>M(B,[{fn:I}]),isPlayerActive:et,eventHandlers:Ye,eventNames:Object.keys(Ye),enabledEventNames:Xe,moveMap:g,moveNames:[...x.values()],processMove:le,processEvent:Ue,getMove:_e}}function Tv(r){return r.processMove!==void 0}function Xh(r){if(Tv(r))return r;if(r.name===void 0&&(r.name="default"),r.deltaState===void 0&&(r.deltaState=!1),r.disableUndo===void 0&&(r.disableUndo=!1),r.setup===void 0&&(r.setup=()=>({})),r.moves===void 0&&(r.moves={}),r.playerView===void 0&&(r.playerView=({G:t})=>t),r.plugins===void 0&&(r.plugins=[]),r.plugins.forEach(t=>{if(t.name===void 0)throw new Error("Plugin missing name attribute");if(t.name.includes(" "))throw new Error(t.name+": Plugin name must not include spaces")}),r.name.includes(" "))throw new Error(r.name+": Game name must not include spaces");const e=Nv(r);return{...r,flow:e,moveNames:e.moveNames,pluginNames:r.plugins.map(t=>t.name),processMove:(t,i)=>{let o=e.getMove(t.ctx,i.type,i.playerID);if(R1(o)&&(o=o.move),o instanceof Function){const u=k1(o,Zn.MOVE,r.plugins);let d=[];i.args!==void 0&&(d=Array.isArray(i.args)?i.args:[i.args]);const f={...au(t),G:t.G,ctx:t.ctx,playerID:i.playerID};return u(f,...d)}return yt(`invalid move object: ${i.type}`),t.G}}}function R1(r){return r instanceof Object&&r.move!==void 0}var Op;(function(r){r.UnauthorizedAction="update/unauthorized_action",r.MatchNotFound="update/match_not_found",r.PatchFailed="update/patch_failed"})(Op||(Op={}));var Jn;(function(r){r.StaleStateId="action/stale_state_id",r.UnavailableMove="action/unavailable_move",r.InvalidMove="action/invalid_move",r.InactivePlayer="action/inactive_player",r.GameOver="action/gameover",r.ActionDisabled="action/action_disabled",r.ActionInvalid="action/action_invalid",r.PluginActionInvalid="action/plugin_invalid"})(Jn||(Jn={}));const lh=r=>r.payload.playerID!==null&&r.payload.playerID!==void 0,bv=(r,e,t)=>{function i(u){return u.undoable!==void 0}function o(u){return u instanceof Function}return i(t)?o(t.undoable)?t.undoable({G:r,ctx:e}):t.undoable:!0};function Wg(r,e){if(e.game.disableUndo)return r;const t={G:r.G,ctx:r.ctx,plugins:r.plugins,playerID:e.action.payload.playerID||r.ctx.currentPlayer};return e.action.type==="MAKE_MOVE"&&(t.moveType=e.action.payload.type),{...r,_undo:[...r._undo,t],_redo:[]}}function ep(r,e,t){const i={action:e,_stateID:r._stateID,turn:r.ctx.turn,phase:r.ctx.phase},o=r.plugins.log.data.metadata;return o!==void 0&&(i.metadata=o),typeof t=="object"&&t.redact===!0?i.redact=!0:typeof t=="object"&&t.redact instanceof Function&&(i.redact=t.redact({G:r.G,ctx:r.ctx})),{...r,deltalog:[i]}}function tp(r,e,t){const[i,o]=C1(r,t);return o?[i,pr(e,Jn.PluginActionInvalid,o)]:[i]}function M1(r){if(!r)return[null,void 0];const{transients:e,...t}=r;return[t,e]}function pr(r,e,t){return{...r,transients:{error:{type:e,payload:t}}}}const I1=r=>e=>t=>{const i=e(t);switch(t.type){case Yh:return i;default:{const[,o]=M1(r.getState());return typeof o<"u"?(r.dispatch(S1()),{...i,transients:o}):i}}};function v0({game:r,isClient:e}){return r=Xh(r),(t=null,i)=>{let[o]=M1(t);switch(i.type){case Yh:return o;case Hh:{if(o={...o,deltalog:[]},e)return o;if(o.ctx.gameover!==void 0)return yt("cannot call event after game end"),pr(o,Jn.GameOver);if(lh(i)&&!r.flow.isPlayerActive(o.G,o.ctx,i.payload.playerID))return yt(`disallowed event: ${i.payload.type}`),pr(o,Jn.InactivePlayer);o=Mp(o,{game:r,playerID:i.payload.playerID});let u=r.flow.processEvent(o,i),d;return[u,d]=tp(u,o,{game:r}),d||(u=Wg(u,{game:r,action:i}),{...u,_stateID:o._stateID+1})}case Gc:{const u=o={...o,deltalog:[]},d=r.flow.getMove(o.ctx,i.payload.type,i.payload.playerID||o.ctx.currentPlayer);if(d===null)return yt(`disallowed move: ${i.payload.type}`),pr(o,Jn.UnavailableMove);if(e&&d.client===!1)return o;if(o.ctx.gameover!==void 0)return yt("cannot make move after game end"),pr(o,Jn.GameOver);if(lh(i)&&!r.flow.isPlayerActive(o.G,o.ctx,i.payload.playerID))return yt(`disallowed move: ${i.payload.type}`),pr(o,Jn.InactivePlayer);o=Mp(o,{game:r,playerID:i.payload.playerID});const f=r.processMove(o,i.payload);if(f===$t)return yt(`invalid move: ${i.payload.type} args: ${i.payload.args}`),pr(o,Jn.InvalidMove);const g={...o,G:f};if(e&&_v(g,{game:r}))return o;if(o=g,e){let _;return[o,_]=tp(o,u,{game:r}),_||{...o,_stateID:o._stateID+1}}o=ep(o,i,d),o=r.flow.processMove(o,i.payload);let x;return[o,x]=tp(o,u,{game:r}),x||(o=Wg(o,{game:r,action:i}),{...o,_stateID:o._stateID+1})}case h0:case p0:case f0:return i.state;case qh:{if(o={...o,deltalog:[]},r.disableUndo)return yt("Undo is not enabled"),pr(o,Jn.ActionDisabled);const{G:u,ctx:d,_undo:f,_redo:g,_stateID:x}=o;if(f.length<2)return yt("No moves to undo"),pr(o,Jn.ActionInvalid);const _=f[f.length-1],k=f[f.length-2];if(lh(i)&&i.payload.playerID!==_.playerID)return yt("Cannot undo other players' moves"),pr(o,Jn.ActionInvalid);if(_.moveType){const S=r.flow.getMove(k.ctx,_.moveType,_.playerID);if(!bv(u,d,S))return yt("Move cannot be undone"),pr(o,Jn.ActionInvalid)}return o=ep(o,i),{...o,G:k.G,ctx:k.ctx,plugins:k.plugins,_stateID:x+1,_undo:f.slice(0,-1),_redo:[_,...g]}}case Vh:{if(o={...o,deltalog:[]},r.disableUndo)return yt("Redo is not enabled"),pr(o,Jn.ActionDisabled);const{_undo:u,_redo:d,_stateID:f}=o;if(d.length===0)return yt("No moves to redo"),pr(o,Jn.ActionInvalid);const g=d[0];return lh(i)&&i.payload.playerID!==g.playerID?(yt("Cannot redo other players' moves"),pr(o,Jn.ActionInvalid)):(o=ep(o,i),{...o,G:g.G,ctx:g.ctx,plugins:g.plugins,_stateID:f+1,_undo:[...u,g],_redo:d.slice(1)})}case f1:return yv(o,i,{game:r});case g0:{const u=o,d=JSON.parse(JSON.stringify(u)),f=b1.applyPatch(d,i.patch);return f.some(x=>x!==null)?(yt(`Patch ${JSON.stringify(i.patch)} apply failed`),pr(u,Op.PatchFailed,f)):d}default:return o}}}var np={},Hg;function Rv(){return Hg||(Hg=1,(function(r,e){if(r.setImmediate)return;var t=1,i={},o=!1,u=r.document,d;function f(b){typeof b!="function"&&(b=new Function(""+b));for(var O=new Array(arguments.length-1),L=0;L<O.length;L++)O[L]=arguments[L+1];var X={callback:b,args:O};return i[t]=X,d(t),t++}function g(b){delete i[b]}function x(b){var O=b.callback,L=b.args;switch(L.length){case 0:O();break;case 1:O(L[0]);break;case 2:O(L[0],L[1]);break;case 3:O(L[0],L[1],L[2]);break;default:O.apply(e,L);break}}function _(b){if(o)setTimeout(_,0,b);else{var O=i[b];if(O){o=!0;try{x(O)}finally{g(b),o=!1}}}}function k(){d=function(b){process.nextTick(function(){_(b)})}}function S(){if(r.postMessage&&!r.importScripts){var b=!0,O=r.onmessage;return r.onmessage=function(){b=!1},r.postMessage("","*"),r.onmessage=O,b}}function N(){var b="setImmediate$"+Math.random()+"$",O=function(L){L.source===r&&typeof L.data=="string"&&L.data.indexOf(b)===0&&_(+L.data.slice(b.length))};r.addEventListener?r.addEventListener("message",O,!1):r.attachEvent("onmessage",O),d=function(L){r.postMessage(b+L,"*")}}function P(){var b=new MessageChannel;b.port1.onmessage=function(O){var L=O.data;_(L)},d=function(O){b.port2.postMessage(O)}}function A(){var b=u.documentElement;d=function(O){var L=u.createElement("script");L.onreadystatechange=function(){_(O),L.onreadystatechange=null,b.removeChild(L),L=null},b.appendChild(L)}}function M(){d=function(b){setTimeout(_,0,b)}}var I=Object.getPrototypeOf&&Object.getPrototypeOf(r);I=I&&I.setTimeout?I:r,{}.toString.call(r.process)==="[object process]"?k():S()?N():r.MessageChannel?P():u&&"onreadystatechange"in u.createElement("script")?A():M(),I.setImmediate=f,I.clearImmediate=g})(typeof self>"u"?typeof yg>"u"?np:yg:self)),np}Rv();class Mv{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:i}){this._opts[e]={range:t,value:i}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,i){return this.enumerateFn(e,t,i).map(u=>{if("payload"in u)return u;if("move"in u)return p1(u.move,u.args,i);if("event"in u)return Oc(u.event,u.args,i)})}random(e){let t;if(this.seed!==void 0){const i=this.prngstate?"":this.seed,o=h1(i,this.prngstate);t=o(),this.prngstate=o.state()}else t=Math.random();if(e)if(Array.isArray(e)){const i=Math.floor(t*e.length);return e[i]}else return Math.floor(t*e);return t}}const Iv=25;class Av extends Mv{constructor({enumerate:e,seed:t,objectives:i,game:o,iterations:u,playoutDepth:d,iterationCallback:f}){super({enumerate:e,seed:t}),i===void 0&&(i=()=>({})),this.objectives=i,this.iterationCallback=f||(()=>{}),this.reducer=v0({game:o}),this.iterations=u,this.playoutDepth=d,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof u=="number"?u:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof d=="number"?d:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:i,playerID:o}){const{G:u,ctx:d}=e;let f=[],g=[];if(o!==void 0)f=this.enumerate(u,d,o),g=this.objectives(u,d,o);else if(d.activePlayers)for(const x in d.activePlayers)f.push(...this.enumerate(u,d,x)),g.push(this.objectives(u,d,x));else f=this.enumerate(u,d,d.currentPlayer),g=this.objectives(u,d,d.currentPlayer);return{state:e,parent:i,parentAction:t,actions:f,objectives:g,children:[],visits:0,value:0}}select(e){if(e.actions.length>0||e.children.length===0)return e;let t=null,i=0;for(const o of e.children){const u=o.visits+Number.EPSILON,d=o.value/u+Math.sqrt(2*Math.log(e.visits)/u);(t==null||d>i)&&(i=d,t=o)}return this.select(t)}expand(e){const t=e.actions;if(t.length===0||e.state.ctx.gameover!==void 0)return e;const i=this.random(t.length),o=t[i];e.actions.splice(i,1);const u=this.reducer(e.state,o),d=this.createNode({state:u,parentAction:o,parent:e});return e.children.push(d),d}playout({state:e}){let t=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(t=this.playoutDepth(e.G,e.ctx));for(let i=0;i<t&&e.ctx.gameover===void 0;i++){const{G:o,ctx:u}=e;let d=u.currentPlayer;u.activePlayers&&(d=Object.keys(u.activePlayers)[0]);const f=this.enumerate(o,u,d),g=this.objectives(o,u,d),x=Object.keys(g).reduce((S,N)=>{const P=g[N];return P.checker(o,u)?S+P.weight:S},0);if(x>0)return{score:x};if(!f||f.length===0)return;const _=this.random(f.length);e=this.reducer(e,f[_])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,t.score!==void 0&&(e.value+=t.score),t.draw===!0&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){const i=this.createNode({state:e,playerID:t});let o=this.getOpt("iterations");typeof this.iterations=="function"&&(o=this.iterations(e.G,e.ctx));const u=()=>{let d=null;for(const x of i.children)(d==null||x.visits>d.visits)&&(d=x);return{action:d&&d.parentAction,metadata:i}};return new Promise(d=>{const f=()=>{for(let g=0;g<Iv&&this.iterationCounter<o;g++){const x=this.select(i),_=this.expand(x),k=this.playout(_);this.backpropagate(_,k),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:o,metadata:i})};if(this.iterationCounter=0,this.getOpt("async")){const g=()=>{this.iterationCounter<o?(f(),setImmediate(g)):d(u())};g()}else{for(;this.iterationCounter<o;)f();d(u())}})}}function Uc(r){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(r)}function Ov(r,e){if(Uc(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(Uc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lv(r){var e=Ov(r,"string");return Uc(e)=="symbol"?e:e+""}function Dv(r,e,t){return(e=Lv(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Vg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function qg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vg(Object(t),!0).forEach(function(i){Dv(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function jr(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Yg=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),Xg=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qg={INIT:"@@redux/INIT"+Xg(),REPLACE:"@@redux/REPLACE"+Xg()};function jv(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function x0(r,e,t){var i;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(jr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(jr(1));return t(x0)(r,e)}if(typeof r!="function")throw new Error(jr(2));var o=r,u=e,d=[],f=d,g=!1;function x(){f===d&&(f=d.slice())}function _(){if(g)throw new Error(jr(3));return u}function k(A){if(typeof A!="function")throw new Error(jr(4));if(g)throw new Error(jr(5));var M=!0;return x(),f.push(A),function(){if(M){if(g)throw new Error(jr(6));M=!1,x();var b=f.indexOf(A);f.splice(b,1),d=null}}}function S(A){if(!jv(A))throw new Error(jr(7));if(typeof A.type>"u")throw new Error(jr(8));if(g)throw new Error(jr(9));try{g=!0,u=o(u,A)}finally{g=!1}for(var M=d=f,I=0;I<M.length;I++){var b=M[I];b()}return A}function N(A){if(typeof A!="function")throw new Error(jr(10));o=A,S({type:Qg.REPLACE})}function P(){var A,M=k;return A={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(jr(11));function O(){b.next&&b.next(_())}O();var L=M(O);return{unsubscribe:L}}},A[Yg]=function(){return this},A}return S({type:Qg.INIT}),i={dispatch:S,subscribe:k,getState:_,replaceReducer:N},i[Yg]=P,i}function A1(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,o){return function(){return i(o.apply(void 0,arguments))}})}function O1(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(i){return function(){var o=i.apply(void 0,arguments),u=function(){throw new Error(jr(15))},d={getState:o.getState,dispatch:function(){return u.apply(void 0,arguments)}},f=e.map(function(g){return g(d)});return u=A1.apply(void 0,f)(o.dispatch),qg(qg({},o),{},{dispatch:u})}}}function L1({game:r,numPlayers:e,setupData:t}){r=Xh(r),e||(e=2);const i=r.flow.ctx(e);let o={G:{},ctx:i,plugins:{}};o=vv(o,{game:r}),o=Mp(o,{game:r,playerID:void 0});const u=au(o);o.G=r.setup({...u,ctx:o.ctx},t);let d={...o,_undo:[],_redo:[],_stateID:0};return d=r.flow.init(d),[d]=C1(d,{game:r}),r.disableUndo||(d._undo=[{G:d.G,ctx:d.ctx,plugins:d.plugins}]),d}let _0=class{constructor({transportDataCallback:e,gameName:t,playerID:i,matchID:o,credentials:u,numPlayers:d}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=e,this.gameName=t||"default",this.playerID=i||null,this.matchID=o||"default",this.credentials=u,this.numPlayers=d||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}};class zv extends _0{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const Fv=r=>new zv(r);class Bv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e){this.unmountDebug();for(const[t]of this.clients){if(this.debugPanel)break;this.mountDebug(t)}}this.notifySubscribers()}subscribe(e){const t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer){for(const[t]of this.clients)if(t.playerID===e&&t.debugOpt!==!1&&t.multiplayer===this.currentClient.multiplayer){this.switchToClient(t);return}}this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){const e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>e.debugOpt!==!1)}mountDebug(e){if(e.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let t,i=document.body;e.debugOpt&&e.debugOpt!==!0&&(t=e.debugOpt.impl||t,i=e.debugOpt.target||i),t&&(this.currentClient=e,this.debugPanel=new t({target:i,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Gv=new Bv;function Lp(r,e,t){return!t&&r==null&&(r=e.getState().ctx.currentPlayer),r}function w0(r,e,t,i,o,u){const d={};for(const f of e)d[f]=(...g)=>{const x=dv[r](f,g,Lp(i,t,u),o);t.dispatch(x)};return d}const Uv=w0.bind(null,"makeMove"),Wv=w0.bind(null,"gameEvent"),Hv=w0.bind(null,"plugin");class Vv{constructor({game:e,debug:t,numPlayers:i,multiplayer:o,matchID:u,playerID:d,credentials:f,enhancer:g}){this.game=Xh(e),this.playerID=d,this.matchID=u||"default",this.credentials=f,this.multiplayer=o,this.debugOpt=t,this.manager=Gv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=v0({game:this.game,isClient:o!==void 0}),this.initialState=null,o||(this.initialState=L1({game:this.game,numPlayers:i})),this.reset=()=>{this.store.dispatch(x1(this.initialState))},this.undo=()=>{const N=_1(Lp(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(N)},this.redo=()=>{const N=w1(Lp(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(N)},this.log=[];const S=O1(I1,()=>N=>P=>{const A=N(P);return this.notifySubscribers(),A},N=>P=>A=>{const M=N.getState(),I=P(A);return!("clientOnly"in A)&&A.type!==Yh&&this.transport.sendAction(M,A),I},N=>P=>A=>{const M=P(A),I=N.getState();switch(A.type){case Gc:case Hh:case qh:case Vh:{const b=I.deltalog;this.log=[...this.log,...b];break}case h0:{this.log=[];break}case g0:case p0:{let b=-1;this.log.length>0&&(b=this.log[this.log.length-1]._stateID);let O=A.deltalog||[];O=O.filter(L=>L._stateID>b),this.log=[...this.log,...O];break}case f0:{this.initialState=A.initialState,this.log=A.log||[];break}}return M});g=g!==void 0?A1(S,g):S,this.store=x0(this.reducer,this.initialState,g),o||(o=Fv),this.transport=o({transportDataCallback:N=>this.receiveTransportData(N),gameKey:e,game:this.game,matchID:u,playerID:d,credentials:f,gameName:this.game.name,numPlayers:i}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=N=>{this.transport.sendChatMessage(this.matchID,{id:Y2(7),sender:this.playerID,payload:N})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){const[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{const[,i]=e.args,o=m1(i);this.receiveMatchData(i.filteredMetadata),this.store.dispatch(o);break}case"update":{const[,i,o]=e.args,u=this.store.getState();if(i._stateID>=u._stateID){const d=v1(i,o);this.store.dispatch(d)}break}case"patch":{const[,i,o,u,d]=e.args,f=this.store.getState()._stateID;if(i!==f)break;const g=y1(i,o,u,d);this.store.dispatch(g),this.store.getState()._stateID===f&&this.transport.requestSync();break}case"matchData":{const[,i]=e.args;this.receiveMatchData(i);break}case"chat":{const[,i]=e.args;this.receiveChatMessage(i);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){const t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(this.gameStateOverride!==null&&(e=this.gameStateOverride),e===null)return e;let t=!0;const i=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!i&&(t=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!i&&(t=!1),e.ctx.gameover!==void 0&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView({G:e.G,ctx:e.ctx,playerID:this.playerID}),plugins:E1(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Uv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Wv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Hv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}function qv(r){return new Vv(r)}const D1=(r,e)=>{if(!r||typeof r!="string")throw new Error(`Expected ${e} string, got "${r}".`)},ja=r=>D1(r,"game name"),mc=r=>D1(r,"match ID"),yc=(r,e)=>{if(!r)throw new Error(`Expected body, got ${r}.`);for(const t in e){const i=e[t],o=Array.isArray(i)?i:[i],u=r[t];if(!o.includes(typeof u)){const d=o.join("|");throw new TypeError(`Expected body.${t} to be of type ${d}, got ${u}.`)}}};class Yv extends Error{constructor(e,t){super(e),this.details=t}}class j1{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){const i=await fetch(this.server+e,t);if(!i.ok){let o;try{o=await i.clone().json()}catch{try{o=await i.text()}catch(u){o=u.message}}throw new Yv(`HTTP status ${i.status}`,o)}return i.json()}async post(e,t){let i={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(i={...i,...t.init,headers:{...i.headers,...t.init.headers}}),this.request(e,i)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,i){ja(e);let o="";if(t){const u=[],{isGameover:d,updatedBefore:f,updatedAfter:g}=t;d!==void 0&&u.push(`isGameover=${d}`),f&&u.push(`updatedBefore=${f}`),g&&u.push(`updatedAfter=${g}`),u.length>0&&(o="?"+u.join("&"))}return this.request(`/games/${e}${o}`,i)}async getMatch(e,t,i){return ja(e),mc(t),this.request(`/games/${e}/${t}`,i)}async createMatch(e,t,i){return ja(e),yc(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:i})}async joinMatch(e,t,i,o){return ja(e),mc(t),yc(i,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:i,init:o})}async leaveMatch(e,t,i,o){ja(e),mc(t),yc(i,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:i,init:o})}async updatePlayer(e,t,i,o){ja(e),mc(t),yc(i,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:i,init:o})}async playAgain(e,t,i,o){return ja(e),mc(t),yc(i,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:i,init:o})}}var rp={exports:{}},ip,Kg;function Xv(){if(Kg)return ip;Kg=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ip=r,ip}var sp,$g;function Qv(){if($g)return sp;$g=1;var r=Xv();function e(){}function t(){}return t.resetWarningCache=e,sp=function(){function i(d,f,g,x,_,k){if(k!==r){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function o(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return u.PropTypes=u,u},sp}var Jg;function Kv(){return Jg||(Jg=1,rp.exports=Qv()()),rp.exports}var $v=Kv();const rs=Uh($v);var Pi={},uh={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Zg;function Jv(){if(Zg)return uh;Zg=1,uh.parse=o,uh.serialize=u;var r=decodeURIComponent,e=encodeURIComponent,t=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(f,g){if(typeof f!="string")throw new TypeError("argument str must be a string");for(var x={},_=g||{},k=f.split(t),S=_.decode||r,N=0;N<k.length;N++){var P=k[N],A=P.indexOf("=");if(!(A<0)){var M=P.substr(0,A).trim(),I=P.substr(++A,P.length).trim();I[0]=='"'&&(I=I.slice(1,-1)),x[M]==null&&(x[M]=d(I,S))}}return x}function u(f,g,x){var _=x||{},k=_.encode||e;if(typeof k!="function")throw new TypeError("option encode is invalid");if(!i.test(f))throw new TypeError("argument name is invalid");var S=k(g);if(S&&!i.test(S))throw new TypeError("argument val is invalid");var N=f+"="+S;if(_.maxAge!=null){var P=_.maxAge-0;if(isNaN(P))throw new Error("maxAge should be a Number");N+="; Max-Age="+Math.floor(P)}if(_.domain){if(!i.test(_.domain))throw new TypeError("option domain is invalid");N+="; Domain="+_.domain}if(_.path){if(!i.test(_.path))throw new TypeError("option path is invalid");N+="; Path="+_.path}if(_.expires){if(typeof _.expires.toUTCString!="function")throw new TypeError("option expires is invalid");N+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(N+="; HttpOnly"),_.secure&&(N+="; Secure"),_.sameSite){var A=typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite;switch(A){case!0:N+="; SameSite=Strict";break;case"lax":N+="; SameSite=Lax";break;case"strict":N+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return N}function d(f,g){try{return g(f)}catch{return f}}return uh}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var op,em;function Zv(){if(em)return op;em=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(u){if(u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}function o(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de",Object.getOwnPropertyNames(u)[0]==="5")return!1;for(var d={},f=0;f<10;f++)d["_"+String.fromCharCode(f)]=f;var g=Object.getOwnPropertyNames(d).map(function(_){return d[_]});if(g.join("")!=="0123456789")return!1;var x={};return"abcdefghijklmnopqrst".split("").forEach(function(_){x[_]=_}),Object.keys(Object.assign({},x)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return op=o()?Object.assign:function(u,d){for(var f,g=i(u),x,_=1;_<arguments.length;_++){f=Object(arguments[_]);for(var k in f)e.call(f,k)&&(g[k]=f[k]);if(r){x=r(f);for(var S=0;S<x.length;S++)t.call(f,x[S])&&(g[x[S]]=f[x[S]])}}return g},op}var tm;function e4(){if(tm)return Pi;tm=1;var r={};Object.defineProperty(Pi,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};Pi.load=k,Pi.loadAll=S,Pi.select=N,Pi.save=P,Pi.remove=A,Pi.setRawCookie=M,Pi.plugToRequest=I;var t=Jv(),i=d(t),o=Zv(),u=d(o);function d(b){return b&&b.__esModule?b:{default:b}}var f=typeof document>"u"||typeof process<"u"&&r&&!1,g={},x=void 0;function _(){return x&&!x.headersSent}function k(b,O){var L=f?g:i.default.parse(document.cookie),X=L&&L[b];if(typeof O>"u"&&(O=!X||X[0]!=="{"&&X[0]!=="["),!O)try{X=JSON.parse(X)}catch{}return X}function S(b){var O=f?g:i.default.parse(document.cookie),L=O;if(typeof b>"u"&&(b=!L||L[0]!=="{"&&L[0]!=="["),!b)try{L=JSON.parse(L)}catch{}return L}function N(b){var O=f?g:i.default.parse(document.cookie);return O?b?Object.keys(O).reduce(function(L,X){if(!b.test(X))return L;var te={};return te[X]=O[X],(0,u.default)({},L,te)},{}):O:{}}function P(b,O,L){g[b]=O,(typeof O>"u"?"undefined":e(O))==="object"&&(g[b]=JSON.stringify(O)),f||(document.cookie=i.default.serialize(b,g[b],L)),_()&&x.cookie&&x.cookie(b,O,L)}function A(b,O){delete g[b],typeof O>"u"?O={}:typeof O=="string"?O={path:O}:O=(0,u.default)({},O),typeof document<"u"&&(O.expires=new Date(1970,1,1,0,0,1),O.maxAge=0,document.cookie=i.default.serialize(b,"",O)),_()&&x.clearCookie&&x.clearCookie(b,O)}function M(b){b?g=i.default.parse(b):g={}}function I(b,O){return b.cookie?g=b.cookie:b.cookies?g=b.cookies:b.headers&&b.headers.cookie?M(b.headers.cookie):g={},x=O,function(){x=null,g={}}}return Pi.default={setRawCookie:M,load:k,loadAll:S,select:N,save:P,remove:A,plugToRequest:I},Pi}var t4=e4();const nm=Uh(t4);var zh;(function(r){r[r.SYNC=0]="SYNC",r[r.ASYNC=1]="ASYNC"})(zh||(zh={}));function za(r){return r.type()===zh.SYNC}class n4{type(){return zh.SYNC}connect(){}createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}}const r4=({game:r,unlisted:e,setupData:t,numPlayers:i})=>{const o={gameName:r.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let u=0;u<i;u++)o.players[u]={id:u};return o},i4=({game:r,numPlayers:e,setupData:t,unlisted:i})=>{(!e||typeof e!="number")&&(e=2);const o=r.validateSetupData&&r.validateSetupData(t,e);if(o!==void 0)return{setupDataError:o};const u=r4({game:r,numPlayers:e,setupData:t,unlisted:i}),d=L1({game:r,numPlayers:e,setupData:t});return{metadata:u,initialState:d}},rm=r=>Object.values(r.players).map(e=>{const{credentials:t,...i}=e;return i}),s4=r=>{const{credentials:e,...t}=r.payload;return{...r,payload:t}};class o4{constructor(e,t,i,o){this.game=Xh(e),this.storageAPI=t,this.transportAPI=i,this.subscribeCallback=()=>{},this.auth=o}subscribe(e){this.subscribeCallback=e}async onUpdate(e,t,i,o){if(!e||!e.payload)return{error:"missing action or action payload"};let u;if(za(this.storageAPI)?{metadata:u}=this.storageAPI.fetch(i,{metadata:!0}):{metadata:u}=await this.storageAPI.fetch(i,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:o,credentials:e.payload.credentials,metadata:u}))return{error:"unauthorized action"};const d=s4(e),f=i;let g;if(za(this.storageAPI)?{state:g}=this.storageAPI.fetch(f,{state:!0}):{state:g}=await this.storageAPI.fetch(f,{state:!0}),g===void 0)return yt(`game not found, matchID=[${f}]`),{error:"game not found"};if(g.ctx.gameover!==void 0){yt(`game over - matchID=[${f}] - playerID=[${o}] - action[${d.payload.type}]`);return}const x=v0({game:this.game}),_=O1(I1),k=x0(x,g,_);if(d.type==qh||d.type==Vh){const I=g.ctx.activePlayers!==null,b=g.ctx.currentPlayer===o;if(!I&&!b||I&&(g.ctx.activePlayers[o]===void 0||Object.keys(g.ctx.activePlayers).length>1)){yt(`playerID=[${o}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(g.G,g.ctx,o)){yt(`player not active - playerID=[${o}] - action[${d.payload.type}]`);return}const S=d.type==Gc?this.game.flow.getMove(g.ctx,d.payload.type,o):null;if(d.type==Gc&&!S){yt(`move not processed - canPlayerMakeMove=false - playerID=[${o}] - action[${d.payload.type}]`);return}if(g._stateID!==t&&!(S&&R1(S)&&S.ignoreStaleStateID)){yt(`invalid stateID, was=[${t}], expected=[${g._stateID}] - playerID=[${o}] - action[${d.payload.type}]`);return}const N=k.getState();k.dispatch(d),g=k.getState(),this.subscribeCallback({state:g,action:d,matchID:i}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[i,t,N,g]}):this.transportAPI.sendAll({type:"update",args:[i,g]});const{deltalog:P,...A}=g;let M;if(u&&(u.gameover===void 0||u.gameover===null)&&(M={...u,updatedAt:Date.now()},g.ctx.gameover!==void 0&&(M.gameover=g.ctx.gameover)),za(this.storageAPI))this.storageAPI.setState(f,A,P),M&&this.storageAPI.setMetadata(f,M);else{const I=[this.storageAPI.setState(f,A,P)];M&&I.push(this.storageAPI.setMetadata(f,M)),await Promise.all(I)}}async onSync(e,t,i,o=2){const u=e,d={state:!0,metadata:!0,log:!0,initialState:!0},f=za(this.storageAPI)?this.storageAPI.fetch(u,d):await this.storageAPI.fetch(u,d);let{state:g,initialState:x,log:_,metadata:k}=f;if(this.auth&&t!==void 0&&t!==null&&!await this.auth.authenticateCredentials({playerID:t,credentials:i,metadata:k}))return{error:"unauthorized"};if(g===void 0){const P=i4({game:this.game,unlisted:!0,numPlayers:o,setupData:void 0});if("setupDataError"in P)return{error:"game requires setupData"};x=g=P.initialState,k=P.metadata,this.subscribeCallback({state:g,matchID:e}),za(this.storageAPI)?this.storageAPI.createMatch(u,{initialState:x,metadata:k}):await this.storageAPI.createMatch(u,{initialState:x,metadata:k})}const S=k?rm(k):void 0,N={state:g,log:_,filteredMetadata:S,initialState:x};this.transportAPI.send({playerID:t,type:"sync",args:[e,N]})}async onConnectionChange(e,t,i,o){const u=e;if(t==null)return;let d;if(za(this.storageAPI)?{metadata:d}=this.storageAPI.fetch(u,{metadata:!0}):{metadata:d}=await this.storageAPI.fetch(u,{metadata:!0}),d===void 0)return yt(`metadata not found for matchID=[${u}]`),{error:"metadata not found"};if(d.players[t]===void 0)return yt(`Player not in the match, matchID=[${u}] playerID=[${t}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:t,credentials:i,metadata:d}))return{error:"unauthorized"};d.players[t].isConnected=o;const f=rm(d);this.transportAPI.sendAll({type:"matchData",args:[e,f]}),za(this.storageAPI)?this.storageAPI.setMetadata(u,d):await this.storageAPI.setMetadata(u,d)}async onChatMessage(e,t,i){const o=e;if(this.auth){const{metadata:u}=await this.storageAPI.fetch(o,{metadata:!0});if(!(t&&typeof t.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:t.sender,credentials:i,metadata:u}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[e,t]})}}const ch=(r,e,t)=>({...t,G:r.playerView({G:t.G,ctx:t.ctx,playerID:e}),plugins:E1(t,{playerID:e,game:r}),deltalog:void 0,_undo:[],_redo:[]}),a4=r=>(e,t)=>{switch(t.type){case"patch":{const[i,o,u,d]=t.args,f=ap(d.deltalog,e),g=ch(r,e,d),x=d._stateID,_=ch(r,e,u),k=b1.createPatch(_,g);return{type:"patch",args:[i,o,x,k,f]}}case"update":{const[i,o]=t.args,u=ap(o.deltalog,e),d=ch(r,e,o);return{type:"update",args:[i,d,u]}}case"sync":{const[i,o]=t.args,u=ch(r,e,o.state),d=ap(o.log,e),f={...o,state:u,log:d};return{type:"sync",args:[i,f]}}default:return t}};function ap(r,e){return r===void 0?r:r.map(t=>{if(e!==null&&+e==+t.action.payload.playerID||t.redact!==!0)return t;const i={...t.action.payload,args:null},o={...t,action:{...t.action,payload:i}},{redact:u,...d}=o;return d})}const as=Object.create(null);as.open="0";as.close="1";as.ping="2";as.pong="3";as.message="4";as.upgrade="5";as.noop="6";const Ph=Object.create(null);Object.keys(as).forEach(r=>{Ph[as[r]]=r});const Dp={type:"error",data:"parser error"},z1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",F1=typeof ArrayBuffer=="function",B1=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,S0=({type:r,data:e},t,i)=>z1&&e instanceof Blob?t?i(e):im(e,i):F1&&(e instanceof ArrayBuffer||B1(e))?t?i(e):im(new Blob([e]),i):i(as[r]+(e||"")),im=(r,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(r)};function sm(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let lp;function l4(r,e){if(z1&&r.data instanceof Blob)return r.data.arrayBuffer().then(sm).then(e);if(F1&&(r.data instanceof ArrayBuffer||B1(r.data)))return e(sm(r.data));S0(r,!1,t=>{lp||(lp=new TextEncoder),e(lp.encode(t))})}const om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<om.length;r++)Nc[om.charCodeAt(r)]=r;const u4=r=>{let e=r.length*.75,t=r.length,i,o=0,u,d,f,g;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const x=new ArrayBuffer(e),_=new Uint8Array(x);for(i=0;i<t;i+=4)u=Nc[r.charCodeAt(i)],d=Nc[r.charCodeAt(i+1)],f=Nc[r.charCodeAt(i+2)],g=Nc[r.charCodeAt(i+3)],_[o++]=u<<2|d>>4,_[o++]=(d&15)<<4|f>>2,_[o++]=(f&3)<<6|g&63;return x},c4=typeof ArrayBuffer=="function",k0=(r,e)=>{if(typeof r!="string")return{type:"message",data:G1(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:d4(r.substring(1),e)}:Ph[t]?r.length>1?{type:Ph[t],data:r.substring(1)}:{type:Ph[t]}:Dp},d4=(r,e)=>{if(c4){const t=u4(r);return G1(t,e)}else return{base64:!0,data:r}},G1=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},U1="",h4=(r,e)=>{const t=r.length,i=new Array(t);let o=0;r.forEach((u,d)=>{S0(u,!1,f=>{i[d]=f,++o===t&&e(i.join(U1))})})},f4=(r,e)=>{const t=r.split(U1),i=[];for(let o=0;o<t.length;o++){const u=k0(t[o],e);if(i.push(u),u.type==="error")break}return i};function p4(){return new TransformStream({transform(r,e){l4(r,t=>{const i=t.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(t)})}})}let up;function dh(r){return r.reduce((e,t)=>e+t.length,0)}function hh(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let i=0;for(let o=0;o<e;o++)t[o]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),t}function g4(r,e){up||(up=new TextDecoder);const t=[];let i=0,o=-1,u=!1;return new TransformStream({transform(d,f){for(t.push(d);;){if(i===0){if(dh(t)<1)break;const g=hh(t,1);u=(g[0]&128)===128,o=g[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(dh(t)<2)break;const g=hh(t,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),i=3}else if(i===2){if(dh(t)<8)break;const g=hh(t,8),x=new DataView(g.buffer,g.byteOffset,g.length),_=x.getUint32(0);if(_>Math.pow(2,21)-1){f.enqueue(Dp);break}o=_*Math.pow(2,32)+x.getUint32(4),i=3}else{if(dh(t)<o)break;const g=hh(t,o);f.enqueue(k0(u?g:up.decode(g),e)),i=0}if(o===0||o>r){f.enqueue(Dp);break}}}})}const W1=4;function hn(r){if(r)return m4(r)}function m4(r){for(var e in hn.prototype)r[e]=hn.prototype[e];return r}hn.prototype.on=hn.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};hn.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};hn.prototype.off=hn.prototype.removeListener=hn.prototype.removeAllListeners=hn.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,o=0;o<t.length;o++)if(i=t[o],i===e||i.fn===e){t.splice(o,1);break}return t.length===0&&delete this._callbacks["$"+r],this};hn.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,o=t.length;i<o;++i)t[i].apply(this,e)}return this};hn.prototype.emitReserved=hn.prototype.emit;hn.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};hn.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Qh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ai=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),y4="arraybuffer";function H1(r,...e){return e.reduce((t,i)=>(r.hasOwnProperty(i)&&(t[i]=r[i]),t),{})}const v4=ai.setTimeout,x4=ai.clearTimeout;function Kh(r,e){e.useNativeTimers?(r.setTimeoutFn=v4.bind(ai),r.clearTimeoutFn=x4.bind(ai)):(r.setTimeoutFn=ai.setTimeout.bind(ai),r.clearTimeoutFn=ai.clearTimeout.bind(ai))}const _4=1.33;function w4(r){return typeof r=="string"?S4(r):Math.ceil((r.byteLength||r.size)*_4)}function S4(r){let e=0,t=0;for(let i=0,o=r.length;i<o;i++)e=r.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function V1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function k4(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function C4(r){let e={},t=r.split("&");for(let i=0,o=t.length;i<o;i++){let u=t[i].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class E4 extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class C0 extends hn{constructor(e){super(),this.writable=!1,Kh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new E4(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=k0(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=k4(e);return t.length?"?"+t:""}}class P4 extends C0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};f4(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,h4(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=V1()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let q1=!1;try{q1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const N4=q1;function T4(){}class b4 extends P4{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class ss extends hn{constructor(e,t,i){super(),this.createRequest=e,Kh(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=H1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=ss.requestsCount++,ss.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=T4,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ss.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ss.requestsCount=0;ss.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",am);else if(typeof addEventListener=="function"){const r="onpagehide"in ai?"pagehide":"unload";addEventListener(r,am,!1)}}function am(){for(let r in ss.requests)ss.requests.hasOwnProperty(r)&&ss.requests[r].abort()}const R4=(function(){const r=Y1({xdomain:!1});return r&&r.responseType!==null})();class M4 extends b4{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=R4&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new ss(Y1,this.uri(),e)}}function Y1(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||N4))return new XMLHttpRequest}catch{}if(!e)try{return new ai[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const X1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class I4 extends C0{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=X1?{}:H1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],o=t===e.length-1;S0(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}o&&Qh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=V1()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const cp=ai.WebSocket||ai.MozWebSocket;class A4 extends I4{createSocket(e,t,i){return X1?new cp(e,t,i):t?new cp(e,t):new cp(e)}doWrite(e,t){this.ws.send(t)}}class O4 extends C0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=g4(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),o=p4();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const u=()=>{i.read().then(({done:f,value:g})=>{f||(this.onPacket(g),u())}).catch(f=>{})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],o=t===e.length-1;this._writer.write(i).then(()=>{o&&Qh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const L4={websocket:A4,webtransport:O4,polling:M4},D4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,j4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jp(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),i=r.indexOf("]");t!=-1&&i!=-1&&(r=r.substring(0,t)+r.substring(t,i).replace(/:/g,";")+r.substring(i,r.length));let o=D4.exec(r||""),u={},d=14;for(;d--;)u[j4[d]]=o[d]||"";return t!=-1&&i!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=z4(u,u.path),u.queryKey=F4(u,u.query),u}function z4(r,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function F4(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,u){o&&(t[o]=u)}),t}const zp=typeof addEventListener=="function"&&typeof removeEventListener=="function",Nh=[];zp&&addEventListener("offline",()=>{Nh.forEach(r=>r())},!1);class Ko extends hn{constructor(e,t){if(super(),this.binaryType=y4,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=jp(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=jp(t.host).host);Kh(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=C4(this.opts.query)),zp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Nh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=W1,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Ko.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Ko.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(t+=w4(o)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Qh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,o){if(typeof t=="function"&&(o=t,t=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:e,data:t,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(Ko.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Nh.indexOf(this._offlineEventListener);i!==-1&&Nh.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ko.protocol=W1;class B4 extends Ko{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;Ko.priorWebsocketSuccess=!1;const o=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",k=>{if(!i)if(k.type==="pong"&&k.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ko.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(_(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const S=new Error("probe error");S.transport=t.name,this.emitReserved("upgradeError",S)}}))};function u(){i||(i=!0,_(),t.close(),t=null)}const d=k=>{const S=new Error("probe error: "+k);S.transport=t.name,u(),this.emitReserved("upgradeError",S)};function f(){d("transport closed")}function g(){d("socket closed")}function x(k){t&&k.name!==t.name&&u()}const _=()=>{t.removeListener("open",o),t.removeListener("error",d),t.removeListener("close",f),this.off("close",g),this.off("upgrading",x)};t.once("open",o),t.once("error",d),t.once("close",f),this.once("close",g),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let G4=class extends B4{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>L4[o]).filter(o=>!!o)),super(e,i)}};function U4(r,e="",t){let i=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),i=jp(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+e,i.href=i.protocol+"://"+u+(t&&t.port===i.port?"":":"+i.port),i}const W4=typeof ArrayBuffer=="function",H4=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Q1=Object.prototype.toString,V4=typeof Blob=="function"||typeof Blob<"u"&&Q1.call(Blob)==="[object BlobConstructor]",q4=typeof File=="function"||typeof File<"u"&&Q1.call(File)==="[object FileConstructor]";function E0(r){return W4&&(r instanceof ArrayBuffer||H4(r))||V4&&r instanceof Blob||q4&&r instanceof File}function Th(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,i=r.length;t<i;t++)if(Th(r[t]))return!0;return!1}if(E0(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Th(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&Th(r[t]))return!0;return!1}function Y4(r){const e=[],t=r.data,i=r;return i.data=Fp(t,e),i.attachments=e.length,{packet:i,buffers:e}}function Fp(r,e){if(!r)return r;if(E0(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let i=0;i<r.length;i++)t[i]=Fp(r[i],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=Fp(r[i],e));return t}return r}function X4(r,e){return r.data=Bp(r.data,e),delete r.attachments,r}function Bp(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=Bp(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=Bp(r[t],e));return r}const Q4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var lt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(lt||(lt={}));class K4{constructor(e){this.replacer=e}encode(e){return(e.type===lt.EVENT||e.type===lt.ACK)&&Th(e)?this.encodeAsBinary({type:e.type===lt.EVENT?lt.BINARY_EVENT:lt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===lt.BINARY_EVENT||e.type===lt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Y4(e),i=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(i),o}}class P0 extends hn{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===lt.BINARY_EVENT;i||t.type===lt.BINARY_ACK?(t.type=i?lt.EVENT:lt.ACK,this.reconstructor=new $4(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(E0(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(lt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===lt.BINARY_EVENT||i.type===lt.BINARY_ACK){const u=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const d=e.substring(u,t);if(d!=Number(d)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(d)}if(e.charAt(t+1)==="/"){const u=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(u,t)}else i.nsp="/";const o=e.charAt(t+1);if(o!==""&&Number(o)==o){const u=t+1;for(;++t;){const d=e.charAt(t);if(d==null||Number(d)!=d){--t;break}if(t===e.length)break}i.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){const u=this.tryParse(e.substr(t));if(P0.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case lt.CONNECT:return lm(t);case lt.DISCONNECT:return t===void 0;case lt.CONNECT_ERROR:return typeof t=="string"||lm(t);case lt.EVENT:case lt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Q4.indexOf(t[0])===-1);case lt.ACK:case lt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $4{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=X4(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function lm(r){return Object.prototype.toString.call(r)==="[object Object]"}const J4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:P0,Encoder:K4,get PacketType(){return lt}},Symbol.toStringTag,{value:"Module"}));function Ni(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const Z4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class K1 extends hn{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ni(e,"open",this.onopen.bind(this)),Ni(e,"packet",this.onpacket.bind(this)),Ni(e,"error",this.onerror.bind(this)),Ni(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,o,u;if(Z4.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const d={type:lt.EVENT,data:t};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const _=this.ids++,k=t.pop();this._registerAckCallback(_,k),d.id=_}const f=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,g=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!f||(g?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,t){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[e]=t;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===e&&this.sendBuffer.splice(f,1);t.call(this,new Error("operation has timed out"))},o),d=(...f)=>{this.io.clearTimeoutFn(u),t.apply(this,f)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...t){return new Promise((i,o)=>{const u=(d,f)=>d?o(d):i(f);u.withError=!0,t.push(u),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...u)=>(this._queue[0],o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(o)):(this._queue.shift(),t&&t(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:lt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case lt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case lt.EVENT:case lt.BINARY_EVENT:this.onevent(e);break;case lt.ACK:case lt.BINARY_ACK:this.onack(e);break;case lt.DISCONNECT:this.ondisconnect();break;case lt.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...o){i||(i=!0,t.packet({type:lt.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:lt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function cu(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}cu.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};cu.prototype.reset=function(){this.attempts=0};cu.prototype.setMin=function(r){this.ms=r};cu.prototype.setMax=function(r){this.max=r};cu.prototype.setJitter=function(r){this.jitter=r};class Gp extends hn{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Kh(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new cu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const o=t.parser||J4;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new G4(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=Ni(t,"open",function(){i.onopen(),e&&e()}),u=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),e?e(f):this.maybeReconnectOnOpen()},d=Ni(t,"error",u);if(this._timeout!==!1){const f=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),t.close()},f);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ni(e,"ping",this.onping.bind(this)),Ni(e,"data",this.ondata.bind(this)),Ni(e,"error",this.onerror.bind(this)),Ni(e,"close",this.onclose.bind(this)),Ni(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Qh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new K1(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const vc={};function bh(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=U4(r,e.path||"/socket.io"),i=t.source,o=t.id,u=t.path,d=vc[o]&&u in vc[o].nsps,f=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let g;return f?g=new Gp(i,e):(vc[o]||(vc[o]=new Gp(i,e)),g=vc[o]),t.query&&!e.query&&(e.query=t.queryKey),g.socket(t.path,e)}Object.assign(bh,{Manager:Gp,Socket:K1,io:bh,connect:bh});class $1 extends n4{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(e,t){this.initial.set(e,t.initialState),this.setState(e,t.initialState),this.setMetadata(e,t.metadata)}setMetadata(e,t){this.metadata.set(e,t)}setState(e,t,i){if(i&&i.length>0){const o=this.log.get(e)||[];this.log.set(e,[...o,...i])}this.state.set(e,t)}fetch(e,t){const i={};return t.state&&(i.state=this.state.get(e)),t.metadata&&(i.metadata=this.metadata.get(e)),t.log&&(i.log=this.log.get(e)||[]),t.initialState&&(i.initialState=this.initial.get(e)),i}wipe(e){this.state.delete(e),this.metadata.delete(e)}listMatches(e){return[...this.metadata.entries()].filter(([,t])=>e?!(e.gameName!==void 0&&t.gameName!==e.gameName||e.where!==void 0&&(e.where.isGameover!==void 0&&t.gameover!==void 0!==e.where.isGameover||e.where.updatedBefore!==void 0&&t.updatedAt>=e.where.updatedBefore||e.where.updatedAfter!==void 0&&t.updatedAt<=e.where.updatedAfter)):!0).map(([t])=>t)}}class e3 extends Map{constructor(e){super(),this.key=e,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(i=>this.set(...i))}sync(){const e=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(e))}set(e,t){return super.set(e,t),this.sync(),this}delete(e){const t=super.delete(e);return this.sync(),t}}class t3 extends $1{constructor(e="bgio"){super();const t=i=>new e3(`${e}_${i}`);this.state=t("state"),this.initial=t("initial"),this.metadata=t("metadata"),this.log=t("log")}}function n3(r,e){if(r.ctx.gameover!==void 0)return null;if(r.ctx.activePlayers){for(const t of Object.keys(e))if(t in r.ctx.activePlayers)return t}else if(r.ctx.currentPlayer in e)return r.ctx.currentPlayer;return null}class r3 extends o4{constructor({game:e,bots:t,storageKey:i,persist:o}){const u={},d={};if(e&&e.ai&&t)for(const k in t){const S=t[k];d[k]=new S({game:e,enumerate:e.ai.enumerate,seed:e.seed})}const f=({playerID:k,...S})=>{const N=u[k];N!==void 0&&N(g(k,S))},g=a4(e),x={send:f,sendAll:k=>{for(const S in u)f({playerID:S,...k})}},_=o?new t3(i):new $1;super(e,_,x),this.connect=(k,S)=>{u[k]=S},this.subscribe(({state:k,matchID:S})=>{if(!t)return;const N=n3(k,d);N!==null&&setTimeout(async()=>{const P=await d[N].play(k,N);await this.onUpdate(P.action,k._stateID,S,P.action.payload.playerID)},100)})}}class i3 extends _0{constructor({master:e,...t}){super(t),this.master=e}sendChatMessage(e,t){const i=[e,t,this.credentials];this.master.onChatMessage(...i)}sendAction(e,t){this.master.onUpdate(t,e._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,e=>this.notifyClient(e)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(e){this.matchID=e,this.connect()}updatePlayerID(e){this.playerID=e,this.connect()}updateCredentials(e){this.credentials=e,this.connect()}}const um=new Map;function s3({bots:r,persist:e,storageKey:t}={}){return i=>{const{gameKey:o,game:u}=i;let d;const f=um.get(o);return f&&f.bots===r&&f.storageKey===t&&f.persist===e&&(d=f.master),d||(d=new r3({game:u,bots:r,persist:e,storageKey:t}),um.set(o,{master:d,bots:r,persist:e,storageKey:t})),new i3({master:d,...i})}}const cm=bh;class o3 extends _0{constructor({socket:e,socketOpts:t,server:i,...o}){super(o),this.server=i,this.socket=e,this.socketOpts=t}sendAction(e,t){const i=[t,e._stateID,this.matchID,this.playerID];this.socket.emit("update",...i)}sendChatMessage(e,t){const i=[e,t,this.credentials];this.socket.emit("chat",...i)}connect(){if(!this.socket)if(this.server){let e=this.server;e.search(/^https?:\/\//)==-1&&(e="http://"+this.server),e.slice(-1)!="/"&&(e=e+"/"),this.socket=cm(e+this.gameName,this.socketOpts)}else this.socket=cm("/"+this.gameName,this.socketOpts);this.socket.on("patch",(e,t,i,o,u)=>{this.notifyClient({type:"patch",args:[e,t,i,o,u]})}),this.socket.on("update",(e,t,i)=>{this.notifyClient({type:"update",args:[e,t,i]})}),this.socket.on("sync",(e,t)=>{this.notifyClient({type:"sync",args:[e,t]})}),this.socket.on("matchData",(e,t)=>{this.notifyClient({type:"matchData",args:[e,t]})}),this.socket.on("chat",(e,t)=>{this.notifyClient({type:"chat",args:[e,t]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const e=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...e)}}updateMatchID(e){this.matchID=e,this.requestSync()}updatePlayerID(e){this.playerID=e,this.requestSync()}updateCredentials(e){this.credentials=e,this.requestSync()}}function Up({server:r,socketOpts:e}={}){return t=>new o3({server:r,socketOpts:e,...t})}function J1(r){var e;const{game:t,numPlayers:i,board:o,multiplayer:u,enhancer:d}=r;let{loading:f,debug:g}=r;return f===void 0&&(f=()=>Pe.createElement("div",{className:"bgio-loading"},"connecting...")),e=class extends Pe.Component{constructor(_){super(_),g===void 0&&(g=_.debug),this.client=qv({game:t,debug:g,numPlayers:i,multiplayer:u,matchID:_.matchID,playerID:_.playerID,credentials:_.credentials,enhancer:d})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(_){this.props.matchID!=_.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=_.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=_.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const _=this.client.getState();if(_===null)return Pe.createElement(f);let k=null;return o&&(k=Pe.createElement(o,{..._,...this.props,isMultiplayer:!!u,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),Pe.createElement("div",{className:"bgio-client"},k)}},e.propTypes={matchID:rs.string,playerID:rs.string,credentials:rs.string,debug:rs.any},e.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},e}class a3{constructor({server:e,gameComponents:t,playerName:i,playerCredentials:o}){this.client=new j1({server:e}),this.gameComponents=t,this.playerName=i||"Visitor",this.playerCredentials=o,this.matches=[]}async refresh(){try{this.matches=[];const e=await this.client.listGames();for(const t of e){if(!this._getGameComponents(t))continue;const{matches:i}=await this.client.listMatches(t);this.matches.push(...i)}}catch(e){throw new Error("failed to retrieve list of matches ("+e+")")}}_getMatchInstance(e){for(const t of this.matches)if(t.matchID===e)return t}_getGameComponents(e){for(const t of this.gameComponents)if(t.game.name===e)return t}_findPlayer(e){for(const t of this.matches)if(t.players.some(i=>i.name===e))return t}async join(e,t,i){try{let o=this._findPlayer(this.playerName);if(o)throw new Error("player has already joined "+o.matchID);if(o=this._getMatchInstance(t),!o)throw new Error("game instance "+t+" not found");const u=await this.client.joinMatch(e,t,{playerID:i,playerName:this.playerName});o.players[Number.parseInt(i)].name=this.playerName,this.playerCredentials=u.playerCredentials}catch(o){throw new Error("failed to join match "+t+" ("+o+")")}}async leave(e,t){try{const i=this._getMatchInstance(t);if(!i)throw new Error("match instance not found");for(const o of i.players)if(o.name===this.playerName){await this.client.leaveMatch(e,t,{playerID:o.id.toString(),credentials:this.playerCredentials}),delete o.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(i){throw new Error("failed to leave match "+t+" ("+i+")")}}async disconnect(){const e=this._findPlayer(this.playerName);e&&await this.leave(e.gameName,e.matchID),this.matches=[],this.playerName="Visitor"}async create(e,t){try{const i=this._getGameComponents(e);if(!i)throw new Error("game not found");if(t<i.game.minPlayers||t>i.game.maxPlayers)throw new Error("invalid number of players "+t);await this.client.createMatch(e,{numPlayers:t})}catch(i){throw new Error("failed to create match for "+e+" ("+i+")")}}}function l3(r){return new a3(r)}class Z1 extends Pe.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=e=>{e.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=e=>{const t=e.target.value.trim();this.setState({playerName:t,nameErrorMsg:t.length>0?"":"empty player name"})}}render(){return Pe.createElement("div",null,Pe.createElement("p",{className:"phase-title"},"Choose a player name:"),Pe.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),Pe.createElement("span",{className:"buttons"},Pe.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),Pe.createElement("br",null),Pe.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,Pe.createElement("br",null)))}}Z1.defaultProps={playerName:""};class u3 extends Pe.Component{constructor(){super(...arguments),this._createSeat=e=>e.name||"[free]",this._createButtonJoin=(e,t)=>Pe.createElement("button",{key:"button-join-"+e.matchID,onClick:()=>this.props.onClickJoin(e.gameName,e.matchID,""+t)},"Join"),this._createButtonLeave=e=>Pe.createElement("button",{key:"button-leave-"+e.matchID,onClick:()=>this.props.onClickLeave(e.gameName,e.matchID)},"Leave"),this._createButtonPlay=(e,t)=>Pe.createElement("button",{key:"button-play-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,playerID:""+t,numPlayers:e.players.length})},"Play"),this._createButtonSpectate=e=>Pe.createElement("button",{key:"button-spectate-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,numPlayers:e.players.length})},"Spectate"),this._createInstanceButtons=e=>{const t=e.players.find(o=>o.name===this.props.playerName),i=e.players.find(o=>!o.name);return t&&i?this._createButtonLeave(e):i?this._createButtonJoin(e,i.id):t?Pe.createElement("div",null,[this._createButtonPlay(e,t.id),this._createButtonLeave(e)]):this._createButtonSpectate(e)}}render(){const e=this.props.match;let t="OPEN";return e.players.some(i=>!i.name)||(t="RUNNING"),Pe.createElement("tr",{key:"line-"+e.matchID},Pe.createElement("td",{key:"cell-name-"+e.matchID},e.gameName),Pe.createElement("td",{key:"cell-status-"+e.matchID},t),Pe.createElement("td",{key:"cell-seats-"+e.matchID},e.players.map(i=>this._createSeat(i)).join(", ")),Pe.createElement("td",{key:"cell-buttons-"+e.matchID},this._createInstanceButtons(e)))}}class c3 extends Pe.Component{constructor(e){super(e),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(t,i)=>Pe.createElement("option",{key:"name-option-"+i,value:i},t.game.name),this._createNumPlayersOption=t=>Pe.createElement("option",{key:"num-option-"+t,value:t},t),this._createNumPlayersRange=t=>Array.from({length:t.maxPlayers+1}).map((i,o)=>o).slice(t.minPlayers),this.onChangeNumPlayers=t=>{this.setState({numPlayers:Number.parseInt(t.target.value)})},this.onChangeSelectedGame=t=>{const i=Number.parseInt(t.target.value);this.setState({selectedGame:i,numPlayers:this.props.games[i].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const t of e.games){const i=t.game;i.minPlayers||(i.minPlayers=1),i.maxPlayers||(i.maxPlayers=4),console.assert(i.maxPlayers>=i.minPlayers)}this.state={selectedGame:0,numPlayers:e.games[0].game.minPlayers}}render(){return Pe.createElement("div",null,Pe.createElement("select",{value:this.state.selectedGame,onChange:e=>this.onChangeSelectedGame(e)},this.props.games.map((e,t)=>this._createGameNameOption(e,t))),Pe.createElement("span",null,"Players:"),Pe.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(e=>this._createNumPlayersOption(e))),Pe.createElement("span",{className:"buttons"},Pe.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Pr;(function(r){r.ENTER="enter",r.PLAY="play",r.LIST="list"})(Pr||(Pr={}));let ey=class extends Pe.Component{constructor(e){super(e),this.state={phase:Pr.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=t=>{const i=this.state.playerName;this.connection=l3({server:t.lobbyServer,gameComponents:t.gameComponents,playerName:i,playerCredentials:this.state.credentialStore[i]})},this._updateCredentials=(t,i)=>{this.setState(o=>{const u=Object.assign({},o.credentialStore);return u[t]=i,{credentialStore:u}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=t=>{this._startRefreshInterval(),this.setState({playerName:t,phase:Pr.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Pr.ENTER,errorMsg:""})},this._createMatch=async(t,i)=>{try{await this.connection.create(t,i),await this.connection.refresh(),this.setState({})}catch(o){this.setState({errorMsg:o.message})}},this._joinMatch=async(t,i,o)=>{try{await this.connection.join(t,i,o),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(u){this.setState({errorMsg:u.message})}},this._leaveMatch=async(t,i)=>{try{await this.connection.leave(t,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(o){this.setState({errorMsg:o.message})}},this._startMatch=(t,i)=>{const o=this.connection._getGameComponents(t);if(!o){this.setState({errorMsg:"game "+t+" not supported"});return}let u;if(i.numPlayers>1&&(u=this.props.gameServer?Up({server:this.props.gameServer}):Up()),i.numPlayers==1){const g=o.game.maxPlayers,x={};for(let _=1;_<g;_++)x[_+""]=Av;u=s3({bots:x})}const f={app:this.props.clientFactory({game:o.game,board:o.board,debug:this.props.debug,multiplayer:u}),matchID:i.matchID,playerID:i.numPlayers>1?i.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Pr.PLAY,runningMatch:f})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Pr.LIST,runningMatch:null})},this._getPhaseVisibility=t=>this.state.phase!==t?"hidden":"phase",this.renderMatches=(t,i)=>t.map(o=>{const{matchID:u,gameName:d,players:f}=o;return Pe.createElement(u3,{key:"instance-"+u,match:{matchID:u,gameName:d,players:Object.values(f)},playerName:i,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const e=nm.load("lobbyState")||{};e.phase&&e.phase===Pr.PLAY&&(e.phase=Pr.LIST),e.phase&&e.phase!==Pr.ENTER&&this._startRefreshInterval(),this.setState({phase:e.phase||Pr.ENTER,playerName:e.playerName||"Visitor",credentialStore:e.credentialStore||{}})}componentDidUpdate(e,t){const i=this.state.playerName,o=this.state.credentialStore[i];if(t.phase!==this.state.phase||t.credentialStore[i]!==o||t.playerName!==i){this._createConnection(this.props),this._updateConnection();const u={phase:this.state.phase,playerName:i,credentialStore:this.state.credentialStore};nm.save("lobbyState",u,{path:"/"})}e.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:e,renderer:t}=this.props,{errorMsg:i,playerName:o,phase:u,runningMatch:d}=this.state;return t?t({errorMsg:i,gameComponents:e,matches:this.connection.matches,phase:u,playerName:o,runningMatch:d,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):Pe.createElement("div",{id:"lobby-view",style:{padding:50}},Pe.createElement("div",{className:this._getPhaseVisibility(Pr.ENTER)},Pe.createElement(Z1,{key:o,playerName:o,onEnter:this._enterLobby})),Pe.createElement("div",{className:this._getPhaseVisibility(Pr.LIST)},Pe.createElement("p",null,"Welcome, ",o),Pe.createElement("div",{className:"phase-title",id:"match-creation"},Pe.createElement("span",null,"Create a match:"),Pe.createElement(c3,{games:e,createMatch:this._createMatch})),Pe.createElement("p",{className:"phase-title"},"Join a match:"),Pe.createElement("div",{id:"instances"},Pe.createElement("table",null,Pe.createElement("tbody",null,this.renderMatches(this.connection.matches,o))),Pe.createElement("span",{className:"error-msg"},i,Pe.createElement("br",null))),Pe.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),Pe.createElement("div",{className:this._getPhaseVisibility(Pr.PLAY)},d&&Pe.createElement(d.app,{matchID:d.matchID,playerID:d.playerID,credentials:d.credentials}),Pe.createElement("div",{className:"buttons",id:"match-exit"},Pe.createElement("button",{onClick:this._exitMatch},"Exit match"))),Pe.createElement("div",{className:"buttons",id:"lobby-exit"},Pe.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}};ey.propTypes={gameComponents:rs.array.isRequired,lobbyServer:rs.string,gameServer:rs.string,debug:rs.bool,clientFactory:rs.func,refreshInterval:rs.number};ey.defaultProps={debug:!1,clientFactory:J1,refreshInterval:2e3};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),h3=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),dm=r=>{const e=h3(r);return e.charAt(0).toUpperCase()+e.slice(1)},ty=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),f3=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=Le.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:d,...f},g)=>Le.createElement("svg",{ref:g,...p3,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:ty("lucide",o),...!u&&!f3(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,_])=>Le.createElement(x,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=(r,e)=>{const t=Le.forwardRef(({className:i,...o},u)=>Le.createElement(g3,{ref:u,iconNode:e,className:ty(`lucide-${d3(dm(r))}`,`lucide-${r}`,i),...o}));return t.displayName=dm(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],y3=Ys("loader-circle",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],x3=Ys("log-in",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w3=Ys("log-out",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],k3=Ys("plus",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],E3=Ys("refresh-cw",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hm=Ys("users",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ny=Ys("wifi-off",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ry=Ys("wifi",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],R3=Ys("zap",b3),Wp=10,M3=3,fm=12,iy={alloy:1,organic:1},I3=1,pm=1,gm=1,sy={windTurbine:{metal:2,organic:1},factory:{metal:2},orbitalForge:{metal:2},bioLab:{organic:2},condenser:{energy:3},chipEngraver:{alloy:1,biomass:1},biomassFactory:{metal:1,biomass:1},turret:{metal:1,energy:1}},A3=2,O3={orbitalForge:{input:{metal:2},output:{alloy:1}},bioLab:{input:{organic:2},output:{biomass:1}},condenser:{input:{energy:3},output:{plasma:1}},chipEngraver:{input:{alloy:1,biomass:1},output:{intelligence:1}},biomassFactory:{input:{biomass:1},output:{energy:2}}},mm={2:{tileCount:12,tilesPerValue:[2,2,2,2,2,2],minResourcesPerType:3},3:{tileCount:12,tilesPerValue:[2,2,2,2,2,2],minResourcesPerType:3},4:{tileCount:16,tilesPerValue:[3,3,3,3,2,2],minResourcesPerType:4},5:{tileCount:16,tilesPerValue:[3,3,3,3,2,2],minResourcesPerType:4}},L3={metal:0,organic:0,energy:3,alloy:0,biomass:0,plasma:0,intelligence:0},D3=["factory","windTurbine"];function j3(r,e){const t=mm[String(r)]||mm[2],i=[];let o=0;for(let _=1;_<=6;_++){const k=t.tilesPerValue[_-1];for(let S=0;S<k;S++)i.push({id:o++,value:_,resourceType:"metal",resourceCount:0,probes:[],buildings:[]})}const u=e.Shuffle(i),d=Math.ceil(u.length/2),f=u.length-d,g=[...Array(d).fill("metal"),...Array(f).fill("organic")],x=e.Shuffle(g);return u.forEach((_,k)=>{_.resourceType=x[k],_.resourceCount=e.Die(4)+4}),u}function N0(r,e){return r.find(t=>t.id===e)}function z3(r){return Array.from({length:M3},(e,t)=>({id:`${r}-probe-${t}`,value:null,tileId:null}))}function F3(r){return D3.map((e,t)=>({id:`${r}-${e}-${t}`,type:e,owner:r,tileId:null,activated:!1}))}function B3(r){return{resources:{...L3},probes:z3(r),buildings:F3(r)}}function G3({ctx:r,random:e}){const t=r.numPlayers,i=j3(t,e),o={};for(let u=0;u<t;u++){const d=String(u);o[d]=B3(d)}return{tiles:i,players:o,round:1,rolledDice:!1,diceValues:[],deployedValues:[],deploymentComplete:!1,playersFinishedPhase:[]}}function U3({G:r}){for(const e of Object.keys(r.players)){const t=r.players[e];for(const u of t.buildings)u.activated=!1;const o=t.buildings.filter(u=>u.type==="windTurbine").length*A3;t.resources.energy+=o}}function oy(r,e){for(const t of Object.values(e)){const i=t.buildings.find(o=>o.id===r);if(i)return i}}function du(r,e){const t={};for(const{playerId:_}of r.probes)t[_]=(t[_]||0)+1;for(const _ of r.buildings){const k=oy(_,e);k&&k.type==="turret"&&(t[k.owner]=(t[k.owner]||0)+1)}const i=Object.entries(t).sort((_,k)=>k[1]-_[1]);if(i.length===0)return{controller:null,strengths:t,harvestCount:0};if(i.length>1&&i[0][1]===i[1][1])return{controller:null,strengths:t,harvestCount:0};const o=i[0][0];i[0][1];const u=i.length>1?i[1][1]:0,d=r.probes.filter(_=>_.playerId===o).length,g=Math.max(0,d-u),x=Math.min(g,r.resourceCount);return{controller:o,strengths:t,harvestCount:x}}function W3(r,e,t){const i=[];for(const o of r.buildings){const u=oy(o,t);u&&u.owner!==e&&i.push(u)}return i}function H3(r,e,t){const i=t[r.owner];if(i){const o=i.buildings.findIndex(u=>u.id===r.id);o!==-1&&i.buildings.splice(o,1)}r.owner=e,t[e].buildings.push(r)}function V3({G:r}){for(const e of r.tiles){const t=du(e,r.players);if(!t.controller)continue;const i=t.controller,o=r.players[i],u=W3(e,i,r.players);for(const d of u)H3(d,i,r.players);if(t.harvestCount>0&&e.resourceCount>0){const d=Math.min(t.harvestCount,e.resourceCount);o.resources[e.resourceType]+=d,e.resourceCount-=d}}}function T0(r,e){for(const[t,i]of Object.entries(e))if((r[t]||0)<(i||0))return!1;return!0}function b0(r,e){for(const[t,i]of Object.entries(e))r[t]-=i||0}function q3(r,e){for(const[t,i]of Object.entries(e))r[t]+=i||0}function Y3(r,e,t,i,o){if(du(t,i).controller!==o)return{valid:!1,reason:"You do not control this tile"};const d=sy[e];return T0(r.resources,d)?r.buildings.some(g=>g.type==="factory")?{valid:!0}:{valid:!1,reason:"You need a factory to build"}:{valid:!1,reason:"Not enough resources"}}function X3(r){return r.probes.length>=fm?{valid:!1,reason:`Maximum ${fm} probes reached`}:T0(r.resources,iy)?{valid:!0}:{valid:!1,reason:"Not enough resources"}}function R0(r,e){return r.resources.energy>=e}function Q3({G:r,ctx:e,random:t}){const i=e.currentPlayer,o=r.players[i];if(r.rolledDice)return $t;const u=o.probes.filter(g=>g.tileId===null);if(u.length===0)return $t;const d=t.D6(u.length),f=Array.isArray(d)?d:[d];u.forEach((g,x)=>{g.value=f[x]}),r.rolledDice=!0,r.diceValues=f,r.deployedValues=[]}function K3({G:r,ctx:e},t,i){const o=e.currentPlayer,u=r.players[o];if(!r.rolledDice||r.deployedValues.includes(t)||t<1||t>6)return $t;const d=u.probes.filter(x=>x.value===t&&x.tileId===null);if(d.length===0)return $t;const f=N0(r.tiles,i);if(!f||f.value!==t)return $t;const g=d.length*I3;if(!R0(u,g))return $t;u.resources.energy-=g;for(const x of d)x.tileId=i,f.probes.push({playerId:o,probeId:x.id});r.deployedValues.push(t)}function $3({G:r,ctx:e},t){const i=e.currentPlayer,o=r.players[i],u=o.probes.find(f=>f.id===t);if(!u||u.tileId===null||!R0(o,pm))return $t;const d=N0(r.tiles,u.tileId);if(d){const f=d.probes.findIndex(g=>g.playerId===i&&g.probeId===t);f!==-1&&d.probes.splice(f,1)}o.resources.energy-=pm,u.tileId=null,u.value=null}let J3=0;function Z3({G:r,ctx:e},t,i){const o=e.currentPlayer,u=r.players[o],d=N0(r.tiles,i);if(!d||!Y3(u,t,d,r.players,o).valid)return $t;const g=sy[t];b0(u.resources,g);const x={id:`${o}-${t}-${++J3}`,type:t,owner:o,tileId:i,activated:!1};u.buildings.push(x),d.buildings.push(x.id)}function e5({G:r,ctx:e}){const t=e.currentPlayer,i=r.players[t];if(!X3(i).valid)return $t;b0(i.resources,iy);const u=`${t}-probe-${i.probes.length}`;i.probes.push({id:u,value:null,tileId:null})}function t5({G:r,ctx:e},t){const i=e.currentPlayer,o=r.players[i],u=o.buildings.find(f=>f.id===t);if(!u||u.owner!==i||u.activated)return $t;const d=O3[u.type];if(!d||!R0(o,gm)||!T0(o.resources,d.input))return $t;o.resources.energy-=gm,b0(o.resources,d.input),q3(o.resources,d.output),u.activated=!0}const n5={name:"singularity",setup:G3,turn:{order:Ap.DEFAULT},phases:{main:{start:!0,onBegin:({G:r})=>{U3({G:r}),r.playersFinishedPhase=[]},moves:{rollProbes:Q3,deployProbes:K3,recallProbe:$3,endDeployment:({G:r})=>{r.deploymentComplete=!0},buildBuilding:Z3,buildProbe:e5,activateBuilding:t5,endTurn:({G:r,ctx:e,events:t})=>{const i=e.currentPlayer;r.playersFinishedPhase.includes(i)||r.playersFinishedPhase.push(i),r.rolledDice=!1,r.diceValues=[],r.deployedValues=[],r.deploymentComplete=!1,t.endTurn()}},turn:{order:Ap.DEFAULT,minMoves:0,onBegin:({G:r})=>{r.rolledDice=!1,r.diceValues=[],r.deployedValues=[],r.deploymentComplete=!1}},endIf:({G:r,ctx:e})=>r.playersFinishedPhase.length>=e.numPlayers,onEnd:({G:r})=>{V3({G:r}),r.round+=1,r.playersFinishedPhase=[]},next:"main"}},endIf:({G:r})=>{for(const[e,t]of Object.entries(r.players))if(t.resources.intelligence>=Wp)return{winner:e,intelligence:t.resources.intelligence}},ai:{enumerate:(r,e)=>{const t=[],i=e.currentPlayer,o=r.players[i];if(e.phase==="deployment"){if(r.rolledDice||o.probes.filter(d=>d.tileId===null).length>0&&t.push({move:"rollProbes"}),r.rolledDice){const u=r.diceValues.filter(d=>!r.deployedValues.includes(d));for(const d of[...new Set(u)]){const f=r.tiles.filter(g=>g.value===d);for(const g of f)t.push({move:"deployProbes",args:[d,g.id]})}}t.push({move:"endDeployment"});for(const u of o.probes)u.tileId!==null&&t.push({move:"recallProbe",args:[u.id]})}return e.phase==="construction"&&(t.push({move:"endConstruction"}),t.push({move:"buildProbe"})),t}}},r5=Math.PI/180;function i5(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ua=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},xe={_global:Ua,version:"10.2.0",isBrowser:i5(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return xe.angleDeg?r*r5:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return xe.DD.isDragging},isTransforming(){var r,e;return(e=(r=xe.Transformer)===null||r===void 0?void 0:r.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!xe.DD.node},releaseCanvasOnDestroy:!0,document:Ua.document,_injectGlobal(r){typeof Ua.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Ua.Konva=r}},qt=r=>{xe[r.prototype.getClassName()]=r};xe._injectGlobal(xe);const s5=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ym=()=>{if(typeof document>"u")throw new Error(s5)};class Fr{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Fr(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),o=this.m[0]*t+this.m[2]*i,u=this.m[1]*t+this.m[3]*i,d=this.m[0]*-i+this.m[2]*t,f=this.m[1]*-i+this.m[3]*t;return this.m[0]=o,this.m[1]=u,this.m[2]=d,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const i=this.m[0]+this.m[2]*t,o=this.m[1]+this.m[3]*t,u=this.m[2]+this.m[0]*e,d=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=o,this.m[2]=u,this.m[3]=d,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],o=this.m[0]*e.m[2]+this.m[2]*e.m[3],u=this.m[1]*e.m[2]+this.m[3]*e.m[3],d=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=u,this.m[4]=d,this.m[5]=f,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,o=-this.m[2]*e,u=this.m[0]*e,d=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=u,this.m[4]=d,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],i=this.m[2],o=this.m[3],u=this.m[4],d=this.m[5],f=e*o-t*i,g={x:u,y:d,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){const x=Math.sqrt(e*e+t*t);g.rotation=t>0?Math.acos(e/x):-Math.acos(e/x),g.scaleX=x,g.scaleY=f/x,g.skewX=(e*i+t*o)/f,g.skewY=0}else if(i!=0||o!=0){const x=Math.sqrt(i*i+o*o);g.rotation=Math.PI/2-(o>0?Math.acos(-i/x):-Math.acos(i/x)),g.scaleX=f/x,g.scaleY=x,g.skewX=0,g.skewY=(e*i+t*o)/f}return g.rotation=V._getRotation(g.rotation),g}}const o5="[object Array]",a5="[object Number]",l5="[object String]",u5="[object Boolean]",c5=Math.PI/180,d5=180/Math.PI,xc="#",h5="",f5="0",p5="Konva warning: ",vm="Konva error: ",g5="rgb(",dp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},m5=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let fh=[],_c=null;const y5=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(r){setTimeout(r,16)},V={_isElement(r){return!!(r&&r.nodeType==1)},_isFunction(r){return!!(r&&r.constructor&&r.call&&r.apply)},_isPlainObject(r){return!!r&&r.constructor===Object},_isArray(r){return Object.prototype.toString.call(r)===o5},_isNumber(r){return Object.prototype.toString.call(r)===a5&&!isNaN(r)&&isFinite(r)},_isString(r){return Object.prototype.toString.call(r)===l5},_isBoolean(r){return Object.prototype.toString.call(r)===u5},isObject(r){return r instanceof Object},isValidSelector(r){if(typeof r!="string")return!1;const e=r[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(r){return r===0||r>0?1:-1},requestAnimFrame(r){fh.push(r),fh.length===1&&y5(function(){const e=fh;fh=[],e.forEach(function(t){t()})})},createCanvasElement(){ym();const r=document.createElement("canvas");try{r.style=r.style||{}}catch{}return r},createImageElement(){return ym(),document.createElement("img")},_isInDocument(r){for(;r=r.parentNode;)if(r==document)return!0;return!1},_urlToImage(r,e){const t=V.createImageElement();t.onload=function(){e(t)},t.src=r},_rgbToHex(r,e,t){return((1<<24)+(r<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(r){r=r.replace(xc,h5);const e=parseInt(r,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let r=(Math.random()*16777215<<0).toString(16);for(;r.length<6;)r=f5+r;return xc+r},isCanvasFarblingActive(){if(_c!==null)return _c;if(typeof document>"u")return _c=!1,!1;const r=this.createCanvasElement();r.width=10,r.height=10;const e=r.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let o=0;o<100;o++)if(t[o*4]!==40||t[o*4+1]!==40||t[o*4+2]!==40||t[o*4+3]!==255){i=!0;break}return _c=i,this.releaseCanvas(r),_c},getHitColor(){const r=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(r):r},getHitColorKey(r,e,t){return this.isCanvasFarblingActive()&&(r=Math.round(r/5)*5,e=Math.round(e/5)*5,t=Math.round(t/5)*5),xc+this._rgbToHex(r,e,t)},getSnappedHexColor(r){const e=this._hexToRgb(r);return xc+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(r){let e;return r in dp?(e=dp[r],{r:e[0],g:e[1],b:e[2]}):r[0]===xc?this._hexToRgb(r.substring(1)):r.substr(0,4)===g5?(e=m5.exec(r.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(r){return r=r||"black",V._namedColorToRBA(r)||V._hex3ColorToRGBA(r)||V._hex4ColorToRGBA(r)||V._hex6ColorToRGBA(r)||V._hex8ColorToRGBA(r)||V._rgbColorToRGBA(r)||V._rgbaColorToRGBA(r)||V._hslColorToRGBA(r)},_namedColorToRBA(r){const e=dp[r.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(r){if(r.indexOf("rgb(")===0){r=r.match(/rgb\(([^)]+)\)/)[1];const e=r.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(r){if(r.indexOf("rgba(")===0){r=r.match(/rgba\(([^)]+)\)/)[1];const e=r.split(/ *, */).map((t,i)=>t.slice(-1)==="%"?i===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(r){if(r[0]==="#"&&r.length===9)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:parseInt(r.slice(7,9),16)/255}},_hex6ColorToRGBA(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:1}},_hex4ColorToRGBA(r){if(r[0]==="#"&&r.length===5)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:parseInt(r[4]+r[4],16)/255}},_hex3ColorToRGBA(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:1}},_hslColorToRGBA(r){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(r)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r),i=Number(t[0])/360,o=Number(t[1])/100,u=Number(t[2])/100;let d,f,g;if(o===0)return g=u*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};u<.5?d=u*(1+o):d=u+o-u*o;const x=2*u-d,_=[0,0,0];for(let k=0;k<3;k++)f=i+1/3*-(k-1),f<0&&f++,f>1&&f--,6*f<1?g=x+(d-x)*6*f:2*f<1?g=d:3*f<2?g=x+(d-x)*(2/3-f)*6:g=x,_[k]=g*255;return{r:Math.round(_[0]),g:Math.round(_[1]),b:Math.round(_[2]),a:1}}},haveIntersection(r,e){return!(e.x>r.x+r.width||e.x+e.width<r.x||e.y>r.y+r.height||e.y+e.height<r.y)},cloneObject(r){const e={};for(const t in r)this._isPlainObject(r[t])?e[t]=this.cloneObject(r[t]):this._isArray(r[t])?e[t]=this.cloneArray(r[t]):e[t]=r[t];return e},cloneArray(r){return r.slice(0)},degToRad(r){return r*c5},radToDeg(r){return r*d5},_degToRad(r){return V.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),V.degToRad(r)},_radToDeg(r){return V.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),V.radToDeg(r)},_getRotation(r){return xe.angleDeg?V.radToDeg(r):r},_capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)},throw(r){throw new Error(vm+r)},error(r){console.error(vm+r)},warn(r){xe.showWarnings&&console.warn(p5+r)},each(r,e){for(const t in r)e(t,r[t])},_inRange(r,e,t){return e<=r&&r<t},_getProjectionToSegment(r,e,t,i,o,u){let d,f,g;const x=(r-t)*(r-t)+(e-i)*(e-i);if(x==0)d=r,f=e,g=(o-t)*(o-t)+(u-i)*(u-i);else{const _=((o-r)*(t-r)+(u-e)*(i-e))/x;_<0?(d=r,f=e,g=(r-o)*(r-o)+(e-u)*(e-u)):_>1?(d=t,f=i,g=(t-o)*(t-o)+(i-u)*(i-u)):(d=r+_*(t-r),f=e+_*(i-e),g=(d-o)*(d-o)+(f-u)*(f-u))}return[d,f,g]},_getProjectionToLine(r,e,t){const i=V.cloneObject(r);let o=Number.MAX_VALUE;return e.forEach(function(u,d){if(!t&&d===e.length-1)return;const f=e[(d+1)%e.length],g=V._getProjectionToSegment(u.x,u.y,f.x,f.y,r.x,r.y),x=g[0],_=g[1],k=g[2];k<o&&(i.x=x,i.y=_,o=k)}),i},_prepareArrayForTween(r,e,t){const i=[],o=[];if(r.length>e.length){const d=e;e=r,r=d}for(let d=0;d<r.length;d+=2)i.push({x:r[d],y:r[d+1]});for(let d=0;d<e.length;d+=2)o.push({x:e[d],y:e[d+1]});const u=[];return o.forEach(function(d){const f=V._getProjectionToLine(d,i,t);u.push(f.x),u.push(f.y)}),u},_prepareToStringify(r){let e;r.visitedByCircularReferenceRemoval=!0;for(const t in r)if(r.hasOwnProperty(t)&&r[t]&&typeof r[t]=="object"){if(e=Object.getOwnPropertyDescriptor(r,t),r[t].visitedByCircularReferenceRemoval||V._isElement(r[t]))if(e.configurable)delete r[t];else return null;else if(V._prepareToStringify(r[t])===null)if(e.configurable)delete r[t];else return null}return delete r.visitedByCircularReferenceRemoval,r},_assign(r,e){for(const t in e)r[t]=e[t];return r},_getFirstPointerId(r){return r.touches?r.changedTouches[0].identifier:r.pointerId||999},releaseCanvas(...r){xe.releaseCanvasOnDestroy&&r.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(r,e,t,i){let o=e<0?e:0,u=t<0?t:0;e=Math.abs(e),t=Math.abs(t);let d=0,f=0,g=0,x=0;typeof i=="number"?d=f=g=x=Math.min(i,e/2,t/2):(d=Math.min(i[0]||0,e/2,t/2),f=Math.min(i[1]||0,e/2,t/2),x=Math.min(i[2]||0,e/2,t/2),g=Math.min(i[3]||0,e/2,t/2)),r.moveTo(o+d,u),r.lineTo(o+e-f,u),r.arc(o+e-f,u+f,f,Math.PI*3/2,0,!1),r.lineTo(o+e,u+t-x),r.arc(o+e-x,u+t-x,x,0,Math.PI/2,!1),r.lineTo(o+g,u+t),r.arc(o+g,u+t-g,g,Math.PI/2,Math.PI,!1),r.lineTo(o,u+d),r.arc(o+d,u+d,d,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(r,e,t,i,o){i=Math.abs(i);for(let u=0;u<t;u++){const d=e[(u-1+t)%t],f=e[u],g=e[(u+1)%t],x={x:f.x-d.x,y:f.y-d.y},_={x:g.x-f.x,y:g.y-f.y},k=Math.hypot(x.x,x.y),S=Math.hypot(_.x,_.y);let N;typeof o=="number"?N=o:N=u<o.length?o[u]:0,N=i*Math.cos(Math.PI/t)*Math.min(1,N/i*2);const A={x:x.x/k,y:x.y/k},M={x:_.x/S,y:_.y/S},I={x:f.x-A.x*N,y:f.y-A.y*N},b={x:f.x+M.x*N,y:f.y+M.y*N};u===0?r.moveTo(I.x,I.y):r.lineTo(I.x,I.y),r.arcTo(f.x,f.y,b.x,b.y,N)}}};function v5(r){const e=[],t=r.length,i=V;for(let o=0;o<t;o++){let u=r[o];i._isNumber(u)?u=Math.round(u*1e3)/1e3:i._isString(u)||(u=u+""),e.push(u)}return e}const xm=",",x5="(",_5=")",w5="([",S5="])",k5=";",C5="()",E5="=",_m=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],P5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],N5=100;let ph=null;function wm(){if(ph!==null)return ph;try{const e=V.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(ph=!1,!1)}catch{return ph=!1,!1}}class $h{constructor(e){this.canvas=e,xe.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,o=i.length,u="",d,f,g,x;for(d=0;d<o;d++)f=i[d],g=f.method,g?(x=f.args,u+=g,e?u+=C5:V._isArray(x[0])?u+=w5+x.join(xm)+S5:(t&&(x=x.map(_=>typeof _=="number"?Math.floor(_):_)),u+=x5+x.join(xm)+_5)):(u+=f.property,e||(u+=E5+f.val)),u+=k5;return u}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=N5&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;t!=null&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,o,u,d){this._context.arc(e,t,i,o,u,d)}arcTo(e,t,i,o,u){this._context.arcTo(e,t,i,o,u)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,o,u,d){this._context.bezierCurveTo(e,t,i,o,u,d)}clearRect(e,t,i,o){this._context.clearRect(e,t,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,o){return this._context.createLinearGradient(e,t,i,o)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,o,u,d){return this._context.createRadialGradient(e,t,i,o,u,d)}drawImage(e,t,i,o,u,d,f,g,x){const _=arguments,k=this._context;_.length===3?k.drawImage(e,t,i):_.length===5?k.drawImage(e,t,i,o,u):_.length===9&&k.drawImage(e,t,i,o,u,d,f,g,x)}ellipse(e,t,i,o,u,d,f,g){this._context.ellipse(e,t,i,o,u,d,f,g)}isPointInPath(e,t,i,o){return i?this._context.isPointInPath(i,e,t,o):this._context.isPointInPath(e,t,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,o){this._context.fillRect(e,t,i,o)}strokeRect(e,t,i,o){this._context.strokeRect(e,t,i,o)}fillText(e,t,i,o){o?this._context.fillText(e,t,i,o):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,o){return this._context.getImageData(e,t,i,o)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,o){this._context.rect(e,t,i,o)}roundRect(e,t,i,o,u){this._context.roundRect(e,t,i,o,u)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,o){this._context.quadraticCurveTo(e,t,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,o,u,d){this._context.setTransform(e,t,i,o,u,d)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,o){this._context.strokeText(e,t,i,o)}transform(e,t,i,o,u,d){this._context.transform(e,t,i,o,u,d)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=_m.length,i=this.setAttr,o,u;const d=function(f){let g=e[f],x;e[f]=function(){return u=v5(Array.prototype.slice.call(arguments,0)),x=g.apply(e,arguments),e._trace({method:f,args:u}),x}};for(o=0;o<t;o++)d(_m[o]);e.setAttr=function(){i.apply(e,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),e._trace({property:f,val:g})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}P5.forEach(function(r){Object.defineProperty($h.prototype,r,{get(){return this._context[r]},set(e){this._context[r]=e}})});class T5 extends $h{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const u=e.getFillLinearGradientColorStops();if(u&&i==="linear-gradient"){this._fillLinearGradient(e);return}const d=e.getFillRadialGradientColorStops();if(d&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):o?this._fillPattern(e):u?this._fillLinearGradient(e):d&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),u=this.createLinearGradient(t.x,t.y,i.x,i.y);if(o){for(let d=0;d<o.length;d+=2)u.addColorStop(o[d],o[d+1]);this.setAttr("strokeStyle",u)}}_stroke(e){const t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,o;const u=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",d=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,f=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},g=e.getAbsoluteScale(),x=this.canvas.getPixelRatio(),_=g.x*x,k=g.y*x;this.setAttr("shadowColor",u),this.setAttr("shadowBlur",d*Math.min(Math.abs(_),Math.abs(k))),this.setAttr("shadowOffsetX",f.x*_),this.setAttr("shadowOffsetY",f.y*k)}}class b5 extends $h{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let gh;function R5(){if(gh)return gh;const r=V.createCanvasElement(),e=r.getContext("2d");return gh=(function(){const t=xe._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i})(),V.releaseCanvas(r),gh}class M0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||xe.pixelRatio||R5();this.pixelRatio=i,this._canvas=V.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(o){return V.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Xo extends M0{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new T5(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class I0 extends M0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new b5(this),this.setSize(e.width,e.height)}}const pt={get isDragging(){let r=!1;return pt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return pt._dragElements.forEach(e=>{r=e.node}),r},_dragElements:new Map,_drag(r){const e=[];pt._dragElements.forEach((t,i)=>{const{node:o}=t,u=o.getStage();u.setPointersPositions(r),t.pointerId===void 0&&(t.pointerId=V._getFirstPointerId(r));const d=u._changedPointerPositions.find(f=>f.id===t.pointerId);if(d){if(t.dragStatus!=="dragging"){const f=o.dragDistance();if(Math.max(Math.abs(d.x-t.startPointerPos.x),Math.abs(d.y-t.startPointerPos.y))<f||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,t),e.push(o)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:r},!0)})},_endDragBefore(r){const e=[];pt._dragElements.forEach(t=>{const{node:i}=t,o=i.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(f=>f.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(pt.justDragged=!0,xe._mouseListenClick=!1,xe._touchListenClick=!1,xe._pointerListenClick=!1,t.dragStatus="stopped");const d=t.node.getLayer()||t.node instanceof xe.Stage&&t.node;d&&e.indexOf(d)===-1&&e.push(d)}),e.forEach(t=>{t.draw()})},_endDragAfter(r){pt._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:r},!0),e.dragStatus!=="dragging"&&pt._dragElements.delete(t)})}};xe.isBrowser&&(window.addEventListener("mouseup",pt._endDragBefore,!0),window.addEventListener("touchend",pt._endDragBefore,!0),window.addEventListener("touchcancel",pt._endDragBefore,!0),window.addEventListener("mousemove",pt._drag),window.addEventListener("touchmove",pt._drag),window.addEventListener("mouseup",pt._endDragAfter,!1),window.addEventListener("touchend",pt._endDragAfter,!1),window.addEventListener("touchcancel",pt._endDragAfter,!1));function $o(r){return V._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||V._isBoolean(r)?r:Object.prototype.toString.call(r)}function ay(r){return r>255?255:r<0?0:Math.round(r)}function me(){if(xe.isUnminified)return function(r,e){return V._isNumber(r)||V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}function Jh(r){if(xe.isUnminified)return function(e,t){let i=V._isNumber(e),o=V._isArray(e)&&e.length==r;return!i&&!o&&V.warn($o(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}function A0(){if(xe.isUnminified)return function(r,e){return V._isNumber(r)||r==="auto"||V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}function qa(){if(xe.isUnminified)return function(r,e){return V._isString(r)||V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}function ly(){if(xe.isUnminified)return function(r,e){const t=V._isString(r),i=Object.prototype.toString.call(r)==="[object CanvasGradient]"||r&&r.addColorStop;return t||i||V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}function M5(){if(xe.isUnminified)return function(r,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&r instanceof t||(V._isArray(r)?r.forEach(function(i){V._isNumber(i)||V.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),r}}function Ii(){if(xe.isUnminified)return function(r,e){return r===!0||r===!1||V.warn($o(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}function I5(r){if(xe.isUnminified)return function(e,t){return e==null||V.isObject(e)||V.warn($o(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}const wc="get",Sc="set",j={addGetterSetter(r,e,t,i,o){j.addGetter(r,e,t),j.addSetter(r,e,i,o),j.addOverloadedGetterSetter(r,e)},addGetter(r,e,t){const i=wc+V._capitalize(e);r.prototype[i]=r.prototype[i]||function(){const o=this.attrs[e];return o===void 0?t:o}},addSetter(r,e,t,i){const o=Sc+V._capitalize(e);r.prototype[o]||j.overWriteSetter(r,e,t,i)},overWriteSetter(r,e,t,i){const o=Sc+V._capitalize(e);r.prototype[o]=function(u){return t&&u!==void 0&&u!==null&&(u=t.call(this,u,e)),this._setAttr(e,u),i&&i.call(this),this}},addComponentsGetterSetter(r,e,t,i,o){const u=t.length,d=V._capitalize,f=wc+d(e),g=Sc+d(e);r.prototype[f]=function(){const _={};for(let k=0;k<u;k++){const S=t[k];_[S]=this.getAttr(e+d(S))}return _};const x=I5(t);r.prototype[g]=function(_){const k=this.attrs[e];i&&(_=i.call(this,_,e)),x&&x.call(this,_,e);for(const S in _)_.hasOwnProperty(S)&&this._setAttr(e+d(S),_[S]);return _||t.forEach(S=>{this._setAttr(e+d(S),void 0)}),this._fireChangeEvent(e,k,_),o&&o.call(this),this},j.addOverloadedGetterSetter(r,e)},addOverloadedGetterSetter(r,e){const t=V._capitalize(e),i=Sc+t,o=wc+t;r.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(r,e,t,i){V.error("Adding deprecated "+e);const o=wc+V._capitalize(e),u=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[o]=function(){V.error(u);const d=this.attrs[e];return d===void 0?t:d},j.addSetter(r,e,i,function(){V.error(u)}),j.addOverloadedGetterSetter(r,e)},backCompat(r,e){V.each(e,function(t,i){const o=r.prototype[i],u=wc+V._capitalize(t),d=Sc+V._capitalize(t);function f(){o.apply(this,arguments),V.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}r.prototype[t]=f,r.prototype[u]=f,r.prototype[d]=f})},afterSetFilter(){this._filterUpToDate=!1}};function A5(r){const e=/(\w+)\(([^)]+)\)/g;let t;for(;(t=e.exec(r))!==null;){const[,i,o]=t;switch(i){case"blur":{const u=parseFloat(o.replace("px",""));return function(d){this.blurRadius(u*.5);const f=xe.Filters;f&&f.Blur&&f.Blur.call(this,d)}}case"brightness":{const u=o.includes("%")?parseFloat(o)/100:parseFloat(o);return function(d){this.brightness(u);const f=xe.Filters;f&&f.Brightness&&f.Brightness.call(this,d)}}case"contrast":{const u=parseFloat(o);return function(d){const f=100*(Math.sqrt(u)-1);this.contrast(f);const g=xe.Filters;g&&g.Contrast&&g.Contrast.call(this,d)}}case"grayscale":return function(u){const d=xe.Filters;d&&d.Grayscale&&d.Grayscale.call(this,u)};case"sepia":return function(u){const d=xe.Filters;d&&d.Sepia&&d.Sepia.call(this,u)};case"invert":return function(u){const d=xe.Filters;d&&d.Invert&&d.Invert.call(this,u)};default:V.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Rh="absoluteOpacity",Sm="allEventListeners",Vs="absoluteTransform",km="absoluteScale",Fa="canvas",O5="Change",L5="children",D5="konva",Hp="listening",j5="mouseenter",z5="mouseleave",F5="pointerenter",B5="pointerleave",G5="touchenter",U5="touchleave",Cm="set",Em="Shape",Mh=" ",Pm="stage",qo="transform",W5="Stage",Vp="visible",H5=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Mh);let V5=1;class pe{constructor(e){this._id=V5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===qo||e===Vs)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===qo||e===Vs)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){const o=t.map(u=>u+"Change.konva").join(Mh);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Fa)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Vs&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Fa)){const{scene:e,filter:t,hit:i}=this._cache.get(Fa);V.releaseCanvas(e._canvas,t._canvas,i._canvas),this._cache.delete(Fa)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(t.width||i.width),u=Math.ceil(t.height||i.height),d=t.pixelRatio,f=t.x===void 0?Math.floor(i.x):t.x,g=t.y===void 0?Math.floor(i.y):t.y,x=t.offset||0,_=t.drawBorder||!1,k=t.hitCanvasPixelRatio||1;if(!o||!u){V.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const S=Math.abs(Math.round(i.x)-f)>.5?1:0,N=Math.abs(Math.round(i.y)-g)>.5?1:0;o+=x*2+S,u+=x*2+N,f-=x,g-=x;const P=new Xo({pixelRatio:d,width:o,height:u}),A=new Xo({pixelRatio:d,width:0,height:0,willReadFrequently:!0}),M=new I0({pixelRatio:k,width:o,height:u}),I=P.getContext(),b=M.getContext(),O=new Xo({width:P.width/P.pixelRatio+Math.abs(f),height:P.height/P.pixelRatio+Math.abs(g),pixelRatio:P.pixelRatio}),L=O.getContext();return M.isCache=!0,P.isCache=!0,this._cache.delete(Fa),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(P.getContext()._context.imageSmoothingEnabled=!1,A.getContext()._context.imageSmoothingEnabled=!1),I.save(),b.save(),L.save(),I.translate(-f,-g),b.translate(-f,-g),L.translate(-f,-g),O.x=f,O.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Rh),this._clearSelfAndDescendantCache(km),this.drawScene(P,this,O),this.drawHit(M,this),this._isUnderCache=!1,I.restore(),b.restore(),_&&(I.save(),I.beginPath(),I.rect(0,0,o,u),I.closePath(),I.setAttr("strokeStyle","red"),I.setAttr("lineWidth",5),I.stroke(),I.restore()),V.releaseCanvas(O._canvas),this._cache.set(Fa,{scene:P,filter:A,hit:M,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(Fa)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let o=1/0,u=1/0,d=-1/0,f=-1/0;const g=this.getAbsoluteTransform(t);return i.forEach(function(x){const _=g.point(x);o===void 0&&(o=d=_.x,u=f=_.y),o=Math.min(o,_.x),u=Math.min(u,_.y),d=Math.max(d,_.x),f=Math.max(f,_.y)}),{x:o,y:u,width:d-o,height:f-u}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,o=t.filter,u=o.getContext(),d,f,g,x;if(!e||e.length===0)return i;if(this._filterUpToDate)return o;let _=!0;for(let S=0;S<e.length;S++)if(typeof e[S]=="string"&&wm(),typeof e[S]!="string"||!wm()){_=!1;break}const k=i.pixelRatio;if(o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),_){const S=e.join(" ");return u.save(),u.setAttr("filter",S),u.drawImage(i._canvas,0,0,i.getWidth()/k,i.getHeight()/k),u.restore(),this._filterUpToDate=!0,o}try{for(d=e.length,u.clear(),u.drawImage(i._canvas,0,0,i.getWidth()/k,i.getHeight()/k),f=u.getImageData(0,0,o.getWidth(),o.getHeight()),g=0;g<d;g++)x=e[g],typeof x=="string"&&(x=A5(x)),x.call(this,f),u.putImageData(f,0,0)}catch(S){V.error("Unable to apply filter. "+S.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,o}on(e,t){if(this._cache&&this._cache.delete(Sm),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(Mh);for(let o=0;o<i.length;o++){const d=i[o].split("."),f=d[0],g=d[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:t})}return this}off(e,t){let i=(e||"").split(Mh),o=i.length,u,d,f,g,x,_;if(this._cache&&this._cache.delete(Sm),!e)for(d in this.eventListeners)this._off(d);for(u=0;u<o;u++)if(f=i[u],g=f.split("."),x=g[0],_=g[1],x)this.eventListeners[x]&&this._off(x,_,t);else for(d in this.eventListeners)this._off(d,_,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){const o=this;this.on(e,function(u){const d=u.target.findAncestors(t,!0,o);for(let f=0;f<d.length;f++)u=V.cloneObject(u),u.currentTarget=d[f],i.call(d[f],u)})}remove(){return this.isDragging()&&this.stopDrag(),pt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Vs),this._clearSelfAndDescendantCache(Rh),this._clearSelfAndDescendantCache(km),this._clearSelfAndDescendantCache(Pm),this._clearSelfAndDescendantCache(Vp),this._clearSelfAndDescendantCache(Hp)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+V._capitalize(e);return V._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==L5&&(i=Cm+V._capitalize(t),V._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(Hp,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(Vp,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let o=!1;pt._dragElements.forEach(d=>{d.dragStatus==="dragging"&&(d.node.nodeType==="Stage"||d.node.getLayer()===i)&&(o=!0)});const u=!t&&!xe.hitOnDragEnabled&&(o||xe.isTransforming());return this.isListening()&&this.isVisible()&&!u}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,o,u,d,f;function g(_){for(o=[],u=_.length,d=0;d<u;d++)f=_[d],i++,f.nodeType!==Em&&(o=o.concat(f.getChildren().slice())),f._id===t._id&&(d=u);o.length>0&&o[0].getDepth()<=e&&g(o)}const x=this.getStage();return t.nodeType!==W5&&x&&g(x.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(qo),this._clearSelfAndDescendantCache(Vs)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);const o=this.getAbsoluteTransform(e).getMatrix(),u=new Fr,d=this.offset();return u.m=o.slice(),u.translate(d.x,d.y),u.getTranslation()}setAbsolutePosition(e){const{x:t,y:i,...o}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(qo);const u=this._getAbsoluteTransform().copy();return u.invert(),u.translate(e.x,e.y),e={x:this.attrs.x+u.getTranslation().x,y:this.attrs.y+u.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(qo),this._clearSelfAndDescendantCache(Vs),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,o=this.x(),u=this.y();return t!==void 0&&(o+=t),i!==void 0&&(u+=i),this.setPosition({x:o,y:u}),this}_eachAncestorReverse(e,t){let i=[],o=this.getParent(),u,d;if(!(t&&t._id===this._id)){for(i.unshift(this);o&&(!t||o._id!==t._id);)i.unshift(o),o=o.parent;for(u=i.length,d=0;d<u;d++)e(i[d])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return V.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return V.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return V.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return V.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return V.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&V.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Rh,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,o,u,d;const f={attrs:{},className:this.getClassName()};for(t in e)i=e[t],d=V.isObject(i)&&!V._isPlainObject(i)&&!V._isArray(i),!d&&(o=typeof this[t]=="function"&&this[t],delete e[t],u=o?o.call(this):null,e[t]=i,u!==i&&(f.attrs[t]=i));return V._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){const o=[];t&&this._isMatch(e)&&o.push(this);let u=this.parent;for(;u;){if(u===i)return o;u._isMatch(e)&&o.push(u),u=u.parent}return o}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,o,u;for(o=0;o<i;o++)if(u=t[o],V.isValidSelector(u)||(V.warn('Selector "'+u+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),V.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),V.warn("Konva is awesome, right?")),u.charAt(0)==="#"){if(this.id()===u.slice(1))return!0}else if(u.charAt(0)==="."){if(this.hasName(u.slice(1)))return!0}else if(this.className===u||this.nodeType===u)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Pm,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Vs,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Fr,this._eachAncestorReverse(function(i){const o=i.transformsEnabled();o==="all"?t.multiply(i.getTransform()):o==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(Vs)||new Fr,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,u=this.attrs.y||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;t.translate(o-d,u-f)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(qo,this._getTransform)}_getTransform(){var e,t;const i=this._cache.get(qo)||new Fr;i.reset();const o=this.x(),u=this.y(),d=xe.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,g=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,x=this.attrs.skewX||0,_=this.attrs.skewY||0,k=this.attrs.offsetX||0,S=this.attrs.offsetY||0;return(o!==0||u!==0)&&i.translate(o,u),d!==0&&i.rotate(d),(x!==0||_!==0)&&i.skew(x,_),(f!==1||g!==1)&&i.scale(f,g),(k!==0||S!==0)&&i.translate(-1*k,-1*S),i.dirty=!1,i}clone(e){let t=V.cloneObject(this.attrs),i,o,u,d,f;for(i in e)t[i]=e[i];const g=new this.constructor(t);for(i in this.eventListeners)for(o=this.eventListeners[i],u=o.length,d=0;d<u;d++)f=o[d],f.name.indexOf(D5)<0&&(g.eventListeners[i]||(g.eventListeners[i]=[]),g.eventListeners[i].push(f));return g}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(t.x),u=e.y!==void 0?e.y:Math.floor(t.y),d=e.pixelRatio||1,f=new Xo({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:d}),g=f.getContext(),x=new Xo({width:f.width/f.pixelRatio+Math.abs(o),height:f.height/f.pixelRatio+Math.abs(u),pixelRatio:f.pixelRatio});return e.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(o||u)&&g.translate(-1*o,-1*u),this.drawScene(f,void 0,x),g.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((t,i)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,V._urlToImage(this.toDataURL(e),function(u){t(u),o==null||o(u)})}catch(o){i(o)}})}toBlob(e){return new Promise((t,i)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,this.toCanvas(e).toBlob(u=>{t(u),o==null||o(u)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():xe.dragDistance}_off(e,t,i){let o=this.eventListeners[e],u,d,f;for(u=0;u<o.length;u++)if(d=o[u].name,f=o[u].handler,(d!=="konva"||t==="konva")&&(!t||d===t)&&(!i||i===f)){if(o.splice(u,1),o.length===0){delete this.eventListeners[e];break}u--}}_fireChangeEvent(e,t,i){this._fire(e+O5,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){const t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){const i=this[Cm+V._capitalize(e)];return V._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(xe.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){const i=this.attrs[e];i===t&&!V.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,t,i){t&&this.nodeType===Em&&(t.target=this);const o=[j5,z5,F5,B5,G5,U5];if(!(o.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);const d=o.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!d&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i;const{nodeType:o}=this,u=pe.protoListenerMap.get(o)||{};let d=u==null?void 0:u[e];if(d===void 0){d=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(i=(t=f.eventListeners)===null||t===void 0?void 0:t[e])!==null&&i!==void 0?i:[];d.push(...g),f=Object.getPrototypeOf(f)}u[e]=d,pe.protoListenerMap.set(o,u)}return d}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const i=this._getProtoListeners(e);if(i)for(let u=0;u<i.length;u++)i[u].handler.call(this,t);const o=this.eventListeners[e];if(o)for(let u=0;u<o.length;u++)o[u].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(!i)return;const u=i._getPointerById(t)||i._changedPointerPositions[0]||o;pt._dragElements.set(this._id,{node:this,startPointerPos:u,offset:{x:u.x-o.x,y:u.y-o.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){pt._dragElements.has(this._id)||this._createDragElement(e);const i=pt._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let o={x:i.x-t.offset.x,y:i.y-t.offset.y};const u=this.dragBoundFunc();if(u!==void 0){const d=u.call(this,o,e);d?o=d:V.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(e){const t=pt._dragElements.get(this._id);t&&(t.dragStatus="stopped"),pt._endDragBefore(e),pt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=pt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||xe.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let o=!1;pt._dragElements.forEach(u=>{this.isAncestorOf(u.node)&&(o=!0)}),o||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=pt._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",o=t&&t.dragStatus==="ready";i?this.stopDrag():o&&pt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return V.haveIntersection(i,this.getClientRect())}static create(e,t){return V._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=pe.prototype.getClassName.call(e),o=e.children,u,d,f;t&&(e.attrs.container=t),xe[i]||(V.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const g=xe[i];if(u=new g(e.attrs),o)for(d=o.length,f=0;f<d;f++)u.add(pe._createNode(o[f]));return u}}pe.protoListenerMap=new Map;pe.prototype.nodeType="Node";pe.prototype._attrsAffectingSize=[];pe.prototype.eventListeners={};pe.prototype.on.call(pe.prototype,H5,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(qo),this._clearSelfAndDescendantCache(Vs)});pe.prototype.on.call(pe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Vp)});pe.prototype.on.call(pe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Hp)});pe.prototype.on.call(pe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Rh)});const Rt=j.addGetterSetter;Rt(pe,"zIndex");Rt(pe,"absolutePosition");Rt(pe,"position");Rt(pe,"x",0,me());Rt(pe,"y",0,me());Rt(pe,"globalCompositeOperation","source-over",qa());Rt(pe,"opacity",1,me());Rt(pe,"name","",qa());Rt(pe,"id","",qa());Rt(pe,"rotation",0,me());j.addComponentsGetterSetter(pe,"scale",["x","y"]);Rt(pe,"scaleX",1,me());Rt(pe,"scaleY",1,me());j.addComponentsGetterSetter(pe,"skew",["x","y"]);Rt(pe,"skewX",0,me());Rt(pe,"skewY",0,me());j.addComponentsGetterSetter(pe,"offset",["x","y"]);Rt(pe,"offsetX",0,me());Rt(pe,"offsetY",0,me());Rt(pe,"dragDistance",void 0,me());Rt(pe,"width",0,me());Rt(pe,"height",0,me());Rt(pe,"listening",!0,Ii());Rt(pe,"preventDefault",!0,Ii());Rt(pe,"filters",void 0,function(r){return this._filterUpToDate=!1,r});Rt(pe,"visible",!0,Ii());Rt(pe,"transformsEnabled","all",qa());Rt(pe,"size");Rt(pe,"dragBoundFunc");Rt(pe,"draggable",!1,Ii());j.backCompat(pe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Gr extends pe{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const i=[];return this._descendants(o=>{const u=o._isMatch(e);return u&&i.push(o),!!(u&&t)}),i}_descendants(e){let t=!1;const i=this.getChildren();for(const o of i){if(t=e(o),t)return!0;if(o.hasChildren()&&(t=o._descendants(e),t))return!0}return!1}toObject(){const e=pe.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=pe.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){const o=this.getLayer(),u=e||o&&o.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),g=f&&f.scene,x=u&&u.isCache;if(!this.isVisible()&&!x)return this;if(g){d.save();const _=this.getAbsoluteTransform(t).getMatrix();d.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const i=this.getLayer(),o=e||i&&i.hitCanvas,u=o&&o.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const g=this.getAbsoluteTransform(t).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",o,t);return this}_drawChildren(e,t,i,o){var u;const d=t&&t.getContext(),f=this.clipWidth(),g=this.clipHeight(),x=this.clipFunc(),_=typeof f=="number"&&typeof g=="number"||x,k=i===this;if(_){d.save();const N=this.getAbsoluteTransform(i);let P=N.getMatrix();d.transform(P[0],P[1],P[2],P[3],P[4],P[5]),d.beginPath();let A;if(x)A=x.call(this,d,this);else{const M=this.clipX(),I=this.clipY();d.rect(M||0,I||0,f,g)}d.clip.apply(d,A),P=N.copy().invert().getMatrix(),d.transform(P[0],P[1],P[2],P[3],P[4],P[5])}const S=!k&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";S&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(N){N[e](t,i,o)}),S&&d.restore(),_&&d.restore()}getClientRect(e={}){var t;const i=e.skipTransform,o=e.relativeTo;let u,d,f,g,x={x:1/0,y:1/0,width:0,height:0};const _=this;(t=this.children)===null||t===void 0||t.forEach(function(N){if(!N.visible())return;const P=N.getClientRect({relativeTo:_,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(u===void 0?(u=P.x,d=P.y,f=P.x+P.width,g=P.y+P.height):(u=Math.min(u,P.x),d=Math.min(d,P.y),f=Math.max(f,P.x+P.width),g=Math.max(g,P.y+P.height)))});const k=this.find("Shape");let S=!1;for(let N=0;N<k.length;N++)if(k[N]._isVisible(this)){S=!0;break}return S&&u!==void 0?x={x:u,y:d,width:f-u,height:g-d}:x={x:0,y:0,width:0,height:0},i?x:this._transformedRect(x,o)}}j.addComponentsGetterSetter(Gr,"clip",["x","y","width","height"]);j.addGetterSetter(Gr,"clipX",void 0,me());j.addGetterSetter(Gr,"clipY",void 0,me());j.addGetterSetter(Gr,"clipWidth",void 0,me());j.addGetterSetter(Gr,"clipHeight",void 0,me());j.addGetterSetter(Gr,"clipFunc");const Wc=new Map,uy=xe._global.PointerEvent!==void 0;function hp(r){return Wc.get(r)}function O0(r){return{evt:r,pointerId:r.pointerId}}function cy(r,e){return Wc.get(r)===e}function dy(r,e){Lc(r),e.getStage()&&(Wc.set(r,e),uy&&e._fire("gotpointercapture",O0(new PointerEvent("gotpointercapture"))))}function Lc(r,e){const t=Wc.get(r);if(!t)return;const i=t.getStage();i&&i.content,Wc.delete(r),uy&&t._fire("lostpointercapture",O0(new PointerEvent("lostpointercapture")))}const q5="Stage",Y5="string",Nm="px",X5="mouseout",hy="mouseleave",fy="mouseover",py="mouseenter",gy="mousemove",my="mousedown",yy="mouseup",Tc="pointermove",bc="pointerdown",su="pointerup",Rc="pointercancel",Q5="lostpointercapture",mh="pointerout",Mc="pointerleave",yh="pointerover",vh="pointerenter",qp="contextmenu",vy="touchstart",xy="touchend",_y="touchmove",wy="touchcancel",Yp="wheel",K5=5,$5=[[py,"_pointerenter"],[my,"_pointerdown"],[gy,"_pointermove"],[yy,"_pointerup"],[hy,"_pointerleave"],[vy,"_pointerdown"],[_y,"_pointermove"],[xy,"_pointerup"],[wy,"_pointercancel"],[fy,"_pointerover"],[Yp,"_wheel"],[qp,"_contextmenu"],[bc,"_pointerdown"],[Tc,"_pointermove"],[su,"_pointerup"],[Rc,"_pointercancel"],[Mc,"_pointerleave"],[Q5,"_lostpointercapture"]],fp={mouse:{[mh]:X5,[Mc]:hy,[yh]:fy,[vh]:py,[Tc]:gy,[bc]:my,[su]:yy,[Rc]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[mh]:"touchout",[Mc]:"touchleave",[yh]:"touchover",[vh]:"touchenter",[Tc]:_y,[bc]:vy,[su]:xy,[Rc]:wy,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[mh]:mh,[Mc]:Mc,[yh]:yh,[vh]:vh,[Tc]:Tc,[bc]:bc,[su]:su,[Rc]:Rc,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Ic=r=>r.indexOf("pointer")>=0?"pointer":r.indexOf("touch")>=0?"touch":"mouse",tu=r=>{const e=Ic(r);if(e==="pointer")return xe.pointerEventsEnabled&&fp.pointer;if(e==="touch")return fp.touch;if(e==="mouse")return fp.mouse};function Tm(r={}){return(r.clipFunc||r.clipWidth||r.clipHeight)&&V.warn("Stage does not support clipping. Please use clip for Layers or Groups."),r}const J5="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Dc=[];let Zh=class extends Gr{constructor(e){super(Tm(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Dc.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Tm(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",i=e.getType()==="FastLayer";t||i||V.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Y5){let t;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let i=0;i<t;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Gr.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&V._isInDocument(e)&&this.container().removeChild(e);const t=Dc.indexOf(this);return t>-1&&Dc.splice(t,1),V.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(V.warn(J5),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Xo({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,o=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),o.forEach(function(u){if(!u.isVisible())return;const d=u._toKonvaCanvas(e);i.drawImage(d._canvas,e.x,e.y,d.getWidth()/d.getPixelRatio(),d.getHeight()/d.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children,i=t.length,o=i-1;for(let u=o;u>=0;u--){const d=t[u].getIntersection(e);if(d)return d}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+Nm,this.content.style.height=t+Nm),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e,...t){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(e);const i=this.children.length;return i>K5&&V.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),xe.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return cy(e,this)}setPointerCapture(e){dy(e,this)}releaseCapture(e){Lc(e)}getLayers(){return this.children}_bindContentEvents(){xe.isBrowser&&$5.forEach(([e,t])=>{this.content.addEventListener(e,i=>{this[t](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=tu(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=tu(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=tu(e.type),i=Ic(e.type);if(!t)return;this.setPointersPositions(e);const o=this._getTargetShape(i),u=!(xe.isDragging()||xe.isTransforming())||xe.hitOnDragEnabled;o&&u?(o._fireAndBubble(t.pointerout,{evt:e}),o._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):u&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=tu(e.type),i=Ic(e.type);if(!t)return;this.setPointersPositions(e);let o=!1;this._changedPointerPositions.forEach(u=>{const d=this.getIntersection(u);if(pt.justDragged=!1,xe["_"+i+"ListenClick"]=!0,!d||!d.isListening()){this[i+"ClickStartShape"]=void 0;return}xe.capturePointerEventsEnabled&&d.setPointerCapture(u.id),this[i+"ClickStartShape"]=d,d._fireAndBubble(t.pointerdown,{evt:e,pointerId:u.id}),o=!0;const f=e.type.indexOf("touch")>=0;d.preventDefault()&&e.cancelable&&f&&e.preventDefault()}),o||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=tu(e.type),i=Ic(e.type);if(!t)return;const o=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(xe.isDragging()&&pt.node.preventDefault()&&e.cancelable&&o&&e.preventDefault(),this.setPointersPositions(e),!(!(xe.isDragging()||xe.isTransforming())||xe.hitOnDragEnabled))return;const d={};let f=!1;const g=this._getTargetShape(i);this._changedPointerPositions.forEach(x=>{const _=hp(x.id)||this.getIntersection(x),k=x.id,S={evt:e,pointerId:k},N=g!==_;if(N&&g&&(g._fireAndBubble(t.pointerout,{...S},_),g._fireAndBubble(t.pointerleave,{...S},_)),_){if(d[_._id])return;d[_._id]=!0}_&&_.isListening()?(f=!0,N&&(_._fireAndBubble(t.pointerover,{...S},g),_._fireAndBubble(t.pointerenter,{...S},g),this[i+"targetShape"]=_),_._fireAndBubble(t.pointermove,{...S})):g&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:k}),this[i+"targetShape"]=null)}),f||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=tu(e.type),i=Ic(e.type);if(!t)return;this.setPointersPositions(e);const o=this[i+"ClickStartShape"],u=this[i+"ClickEndShape"],d={};let f=!1;this._changedPointerPositions.forEach(g=>{const x=hp(g.id)||this.getIntersection(g);if(x){if(x.releaseCapture(g.id),d[x._id])return;d[x._id]=!0}const _=g.id,k={evt:e,pointerId:_};let S=!1;xe["_"+i+"InDblClickWindow"]?(S=!0,clearTimeout(this[i+"DblTimeout"])):pt.justDragged||(xe["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){xe["_"+i+"InDblClickWindow"]=!1},xe.dblClickWindow),x&&x.isListening()?(f=!0,this[i+"ClickEndShape"]=x,x._fireAndBubble(t.pointerup,{...k}),xe["_"+i+"ListenClick"]&&o&&o===x&&(x._fireAndBubble(t.pointerclick,{...k}),S&&u&&u===x&&x._fireAndBubble(t.pointerdblclick,{...k}))):(this[i+"ClickEndShape"]=null,f||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),xe["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:_}),S&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:_}))}),f||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),xe["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(qp,{evt:e}):this._fire(qp,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Yp,{evt:e}):this._fire(Yp,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=hp(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(su,O0(e)),Lc(e.pointerId)}_lostpointercapture(e){Lc(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let i=null,o=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,u=>{this._pointerPositions.push({id:u.identifier,x:(u.clientX-t.left)/t.scaleX,y:(u.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,u=>{this._changedPointerPositions.push({id:u.identifier,x:(u.clientX-t.left)/t.scaleX,y:(u.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,o=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:o},this._pointerPositions=[{x:i,y:o,id:V._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:o,id:V._getFirstPointerId(e)}])}_setPointerPosition(e){V.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Xo({width:this.width(),height:this.height()}),this.bufferHitCanvas=new I0({pixelRatio:1,width:this.width(),height:this.height()}),!xe.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return V.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Zh.prototype.nodeType=q5;qt(Zh);j.addGetterSetter(Zh,"container");xe.isBrowser&&document.addEventListener("visibilitychange",()=>{Dc.forEach(r=>{r.batchDraw()})});const Sy="hasShadow",ky="shadowRGBA",Cy="patternImage",Ey="linearGradient",Py="radialGradient";let xh;function pp(){return xh||(xh=V.createCanvasElement().getContext("2d"),xh)}const jc={};function Z5(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function e6(r){r.stroke()}function t6(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function n6(r){r.stroke()}function r6(){this._clearCache(Sy)}function i6(){this._clearCache(ky)}function s6(){this._clearCache(Cy)}function o6(){this._clearCache(Ey)}function a6(){this._clearCache(Py)}class ce extends pe{constructor(e){super(e);let t,i=0;for(;t=V.getHitColor(),!(t&&!(t in jc));)if(i++,i>=1e4){V.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=V.getRandomColor();break}this.colorKey=t,jc[t]=this}getContext(){return V.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return V.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Sy,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Cy,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=pp().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const i=new Fr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(xe.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=i.getMatrix(),u=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);t.setTransform(u)}return t}}_getLinearGradient(){return this._getCache(Ey,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=pp(),i=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),u=t.createLinearGradient(i.x,i.y,o.x,o.y);for(let d=0;d<e.length;d+=2)u.addColorStop(e[d],e[d+1]);return u}}_getRadialGradient(){return this._getCache(Py,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=pp(),i=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),u=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let d=0;d<e.length;d+=2)u.addColorStop(e[d],e[d+1]);return u}}getShadowRGBA(){return this._getCache(ky,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=V.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return pe.prototype.destroy.call(this),delete jc[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const o=e||this.hasFill(),u=this.hasStroke(),d=this.getAbsoluteOpacity()!==1;if(o&&u&&d)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(o&&u&&f&&g)}setStrokeHitEnabled(e){V.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,i=this.getParent();for(;i;){if(i.isCached()){t=!0;break}i=i.getParent()}const o=e.skipTransform,u=e.relativeTo||t&&this.getStage()||void 0,d=this.getSelfRect(),g=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,x=d.width+g,_=d.height+g,k=!e.skipShadow&&this.hasShadow(),S=k?this.shadowOffsetX():0,N=k?this.shadowOffsetY():0,P=x+Math.abs(S),A=_+Math.abs(N),M=k&&this.shadowBlur()||0,I=P+M*2,b=A+M*2,O={width:I,height:b,x:-(g/2+M)+Math.min(S,0)+d.x,y:-(g/2+M)+Math.min(N,0)+d.y};return o?O:this._transformedRect(O,u)}drawScene(e,t,i){const o=this.getLayer(),u=e||o.getCanvas(),d=u.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),x=this.hasShadow();let _;const k=t===this;if(!this.isVisible()&&!k)return this;if(f){d.save();const S=this.getAbsoluteTransform(t).getMatrix();return d.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(d),d.restore(),this}if(!g)return this;if(d.save(),this._useBufferCanvas()){_=this.getStage();const S=i||_.bufferCanvas,N=S.getContext();i?(N.save(),N.setTransform(1,0,0,1,0,0),N.clearRect(0,0,S.width,S.height),N.restore()):N.clear(),N.save(),N._applyLineJoin(this),N._applyMiterLimit(this);const P=this.getAbsoluteTransform(t).getMatrix();N.transform(P[0],P[1],P[2],P[3],P[4],P[5]),g.call(this,N,this),N.restore();const A=S.pixelRatio;x&&d._applyShadow(this),k||(d._applyOpacity(this),d._applyGlobalCompositeOperation(this)),d.drawImage(S._canvas,S.x||0,S.y||0,S.width/A,S.height/A)}else{if(d._applyLineJoin(this),d._applyMiterLimit(this),!k){const S=this.getAbsoluteTransform(t).getMatrix();d.transform(S[0],S[1],S[2],S[3],S[4],S[5]),d._applyOpacity(this),d._applyGlobalCompositeOperation(this)}x&&d._applyShadow(this),g.call(this,d,this)}return d.restore(),this}drawHit(e,t,i=!1){if(!this.shouldDrawHit(t,i))return this;const o=this.getLayer(),u=e||o.hitCanvas,d=u&&u.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),x=g&&g.hit;if(this.colorKey||V.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),x){d.save();const k=this.getAbsoluteTransform(t).getMatrix();return d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),this._drawCachedHitCanvas(d),d.restore(),this}if(!f)return this;if(d.save(),d._applyLineJoin(this),d._applyMiterLimit(this),!(this===t)){const k=this.getAbsoluteTransform(t).getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}return f.call(this,d,this),d.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),i=this._getCachedSceneCanvas(),o=t.hit,u=o.getContext(),d=o.getWidth(),f=o.getHeight();u.clear(),u.drawImage(i._canvas,0,0,d,f);try{const g=u.getImageData(0,0,d,f),x=g.data,_=x.length,k=V._hexToRgb(this.colorKey);for(let S=0;S<_;S+=4)x[S+3]>e?(x[S]=k.r,x[S+1]=k.g,x[S+2]=k.b,x[S+3]=255):x[S+3]=0;u.putImageData(g,0,0)}catch(g){V.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return cy(e,this)}setPointerCapture(e){dy(e,this)}releaseCapture(e){Lc(e)}}ce.prototype._fillFunc=Z5;ce.prototype._strokeFunc=e6;ce.prototype._fillFuncHit=t6;ce.prototype._strokeFuncHit=n6;ce.prototype._centroid=!1;ce.prototype.nodeType="Shape";qt(ce);ce.prototype.eventListeners={};ce.prototype.on.call(ce.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",r6);ce.prototype.on.call(ce.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",i6);ce.prototype.on.call(ce.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",s6);ce.prototype.on.call(ce.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",o6);ce.prototype.on.call(ce.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",a6);j.addGetterSetter(ce,"stroke",void 0,ly());j.addGetterSetter(ce,"strokeWidth",2,me());j.addGetterSetter(ce,"fillAfterStrokeEnabled",!1);j.addGetterSetter(ce,"hitStrokeWidth","auto",A0());j.addGetterSetter(ce,"strokeHitEnabled",!0,Ii());j.addGetterSetter(ce,"perfectDrawEnabled",!0,Ii());j.addGetterSetter(ce,"shadowForStrokeEnabled",!0,Ii());j.addGetterSetter(ce,"lineJoin");j.addGetterSetter(ce,"lineCap");j.addGetterSetter(ce,"miterLimit");j.addGetterSetter(ce,"sceneFunc");j.addGetterSetter(ce,"hitFunc");j.addGetterSetter(ce,"dash");j.addGetterSetter(ce,"dashOffset",0,me());j.addGetterSetter(ce,"shadowColor",void 0,qa());j.addGetterSetter(ce,"shadowBlur",0,me());j.addGetterSetter(ce,"shadowOpacity",1,me());j.addComponentsGetterSetter(ce,"shadowOffset",["x","y"]);j.addGetterSetter(ce,"shadowOffsetX",0,me());j.addGetterSetter(ce,"shadowOffsetY",0,me());j.addGetterSetter(ce,"fillPatternImage");j.addGetterSetter(ce,"fill",void 0,ly());j.addGetterSetter(ce,"fillPatternX",0,me());j.addGetterSetter(ce,"fillPatternY",0,me());j.addGetterSetter(ce,"fillLinearGradientColorStops");j.addGetterSetter(ce,"strokeLinearGradientColorStops");j.addGetterSetter(ce,"fillRadialGradientStartRadius",0);j.addGetterSetter(ce,"fillRadialGradientEndRadius",0);j.addGetterSetter(ce,"fillRadialGradientColorStops");j.addGetterSetter(ce,"fillPatternRepeat","repeat");j.addGetterSetter(ce,"fillEnabled",!0);j.addGetterSetter(ce,"strokeEnabled",!0);j.addGetterSetter(ce,"shadowEnabled",!0);j.addGetterSetter(ce,"dashEnabled",!0);j.addGetterSetter(ce,"strokeScaleEnabled",!0);j.addGetterSetter(ce,"fillPriority","color");j.addComponentsGetterSetter(ce,"fillPatternOffset",["x","y"]);j.addGetterSetter(ce,"fillPatternOffsetX",0,me());j.addGetterSetter(ce,"fillPatternOffsetY",0,me());j.addComponentsGetterSetter(ce,"fillPatternScale",["x","y"]);j.addGetterSetter(ce,"fillPatternScaleX",1,me());j.addGetterSetter(ce,"fillPatternScaleY",1,me());j.addComponentsGetterSetter(ce,"fillLinearGradientStartPoint",["x","y"]);j.addComponentsGetterSetter(ce,"strokeLinearGradientStartPoint",["x","y"]);j.addGetterSetter(ce,"fillLinearGradientStartPointX",0);j.addGetterSetter(ce,"strokeLinearGradientStartPointX",0);j.addGetterSetter(ce,"fillLinearGradientStartPointY",0);j.addGetterSetter(ce,"strokeLinearGradientStartPointY",0);j.addComponentsGetterSetter(ce,"fillLinearGradientEndPoint",["x","y"]);j.addComponentsGetterSetter(ce,"strokeLinearGradientEndPoint",["x","y"]);j.addGetterSetter(ce,"fillLinearGradientEndPointX",0);j.addGetterSetter(ce,"strokeLinearGradientEndPointX",0);j.addGetterSetter(ce,"fillLinearGradientEndPointY",0);j.addGetterSetter(ce,"strokeLinearGradientEndPointY",0);j.addComponentsGetterSetter(ce,"fillRadialGradientStartPoint",["x","y"]);j.addGetterSetter(ce,"fillRadialGradientStartPointX",0);j.addGetterSetter(ce,"fillRadialGradientStartPointY",0);j.addComponentsGetterSetter(ce,"fillRadialGradientEndPoint",["x","y"]);j.addGetterSetter(ce,"fillRadialGradientEndPointX",0);j.addGetterSetter(ce,"fillRadialGradientEndPointY",0);j.addGetterSetter(ce,"fillPatternRotation",0);j.addGetterSetter(ce,"fillRule",void 0,qa());j.backCompat(ce,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const l6="beforeDraw",u6="draw",Ny=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],c6=Ny.length;let Ya=class extends Gr{constructor(e){super(e),this.canvas=new Xo,this.hitCanvas=new I0({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){pe.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!pe.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(pe.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(pe.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return pe.prototype.remove.call(this),e&&e.parentNode&&V._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&V.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),pe.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){V.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){V.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,V.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let o=0;o<c6;o++){const u=Ny[o],d=this._getIntersection({x:e.x+u.x*t,y:e.y+u.y*t}),f=d.shape;if(f)return f;if(i=!!d.antialiased,!d.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,o=i[3];if(o===255){const u=V.getHitColorKey(i[0],i[1],i[2]),d=jc[u];return d?{shape:d}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,t,i){const o=this.getLayer(),u=e||o&&o.getCanvas();return this._fire(l6,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),Gr.prototype.drawScene.call(this,u,t,i),this._fire(u6,{node:this}),this}drawHit(e,t){const i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Gr.prototype.drawHit.call(this,o,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){V.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return V.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return V.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ya.prototype.nodeType="Layer";qt(Ya);j.addGetterSetter(Ya,"imageSmoothingEnabled",!0);j.addGetterSetter(Ya,"clearBeforeDraw",!0);j.addGetterSetter(Ya,"hitGraphEnabled",!0,Ii());class L0 extends Ya{constructor(e){super(e),this.listening(!1),V.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}L0.prototype.nodeType="FastLayer";qt(L0);let lu=class extends Gr{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&V.throw("You may only add groups and shapes to groups.")}};lu.prototype.nodeType="Group";qt(lu);const gp=(function(){return Ua.performance&&Ua.performance.now?function(){return Ua.performance.now()}:function(){return new Date().getTime()}})();class li{constructor(e,t){this.id=li.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gp(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,i=t.length;for(let o=0;o<i;o++)if(t[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=li.animations,i=t.length;for(let o=0;o<i;o++)if(t[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gp(),li._addAnimation(this),this}stop(){return li._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,i=this.animations,o=i.length;for(let u=0;u<o;u++)if(i[u].id===t){this.animations.splice(u,1);break}}static _runFrames(){const e={},t=this.animations;for(let i=0;i<t.length;i++){const o=t[i],u=o.layers,d=o.func;o._updateFrameObject(gp());const f=u.length;let g;if(d?g=d.call(o,o.frame)!==!1:g=!0,!!g)for(let x=0;x<f;x++){const _=u[x];_._id!==void 0&&(e[_._id]=_)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=li;e.animations.length?(e._runFrames(),V.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,V.requestAnimFrame(this._animationLoop))}}li.animations=[];li.animIdCounter=0;li.animRunning=!1;const d6={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h6=1,bm=2,Rm=3,Mm=["fill","stroke","shadowColor"];let f6=0;class p6{constructor(e,t,i,o,u,d,f){this.prop=e,this.propFunc=t,this.begin=o,this._pos=o,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=u-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=bm,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Rm,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===bm?this.setTime(e):this.state===Rm&&this.setTime(this.duration-e)}pause(){this.state=h6,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Lt{constructor(e){const t=this,i=e.node,o=i._id,u=e.easing||zc.Linear,d=!!e.yoyo;let f,g;typeof e.duration>"u"?f=.3:e.duration===0?f=.001:f=e.duration,this.node=i,this._id=f6++;const x=i.getLayer()||(i instanceof xe.Stage?i.getLayers():null);x||V.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new li(function(){t.tween.onEnterFrame()},x),this.tween=new p6(g,function(_){t._tweenFunc(_)},u,0,1,f*1e3,d),this._addListeners(),Lt.attrs[o]||(Lt.attrs[o]={}),Lt.attrs[o][this._id]||(Lt.attrs[o][this._id]={}),Lt.tweens[o]||(Lt.tweens[o]={});for(g in e)d6[g]===void 0&&this._addAttr(g,e[g]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const i=this.node,o=i._id;let u,d,f,g,x;const _=Lt.tweens[o][e];_&&delete Lt.attrs[o][_][e];let k=i.getAttr(e);if(V._isArray(t))if(u=[],d=Math.max(t.length,k.length),e==="points"&&t.length!==k.length&&(t.length>k.length?(g=k,k=V._prepareArrayForTween(k,t,i.closed())):(f=t,t=V._prepareArrayForTween(t,k,i.closed()))),e.indexOf("fill")===0)for(let S=0;S<d;S++)if(S%2===0)u.push(t[S]-k[S]);else{const N=V.colorToRGBA(k[S]);x=V.colorToRGBA(t[S]),k[S]=N,u.push({r:x.r-N.r,g:x.g-N.g,b:x.b-N.b,a:x.a-N.a})}else for(let S=0;S<d;S++)u.push(t[S]-k[S]);else Mm.indexOf(e)!==-1?(k=V.colorToRGBA(k),x=V.colorToRGBA(t),u={r:x.r-k.r,g:x.g-k.g,b:x.b-k.b,a:x.a-k.a}):u=t-k;Lt.attrs[o][this._id][e]={start:k,diff:u,end:t,trueEnd:f,trueStart:g},Lt.tweens[o][e]=this._id}_tweenFunc(e){const t=this.node,i=Lt.attrs[t._id][this._id];let o,u,d,f,g,x,_,k;for(o in i){if(u=i[o],d=u.start,f=u.diff,k=u.end,V._isArray(d))if(g=[],_=Math.max(d.length,k.length),o.indexOf("fill")===0)for(x=0;x<_;x++)x%2===0?g.push((d[x]||0)+f[x]*e):g.push("rgba("+Math.round(d[x].r+f[x].r*e)+","+Math.round(d[x].g+f[x].g*e)+","+Math.round(d[x].b+f[x].b*e)+","+(d[x].a+f[x].a*e)+")");else for(x=0;x<_;x++)g.push((d[x]||0)+f[x]*e);else Mm.indexOf(o)!==-1?g="rgba("+Math.round(d.r+f.r*e)+","+Math.round(d.g+f.g*e)+","+Math.round(d.b+f.b*e)+","+(d.a+f.a*e)+")":g=d+f*e;t.setAttr(o,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=Lt.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=Lt.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,i=Lt.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const o in i)delete Lt.tweens[e][o];delete Lt.attrs[e][t],Lt.tweens[e]&&(Object.keys(Lt.tweens[e]).length===0&&delete Lt.tweens[e],Object.keys(Lt.attrs[e]).length===0&&delete Lt.attrs[e])}}Lt.attrs={};Lt.tweens={};pe.prototype.to=function(r){const e=r.onFinish;r.node=this,r.onFinish=function(){this.destroy(),e&&e()},new Lt(r).play()};const zc={BackEaseIn(r,e,t,i){return t*(r/=i)*r*((1.70158+1)*r-1.70158)+e},BackEaseOut(r,e,t,i){return t*((r=r/i-1)*r*((1.70158+1)*r+1.70158)+1)+e},BackEaseInOut(r,e,t,i){let o=1.70158;return(r/=i/2)<1?t/2*(r*r*(((o*=1.525)+1)*r-o))+e:t/2*((r-=2)*r*(((o*=1.525)+1)*r+o)+2)+e},ElasticEaseIn(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i)===1?e+t:(u||(u=i*.3),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),-(o*Math.pow(2,10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u))+e)},ElasticEaseOut(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i)===1?e+t:(u||(u=i*.3),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),o*Math.pow(2,-10*r)*Math.sin((r*i-d)*(2*Math.PI)/u)+t+e)},ElasticEaseInOut(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i/2)===2?e+t:(u||(u=i*(.3*1.5)),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),r<1?-.5*(o*Math.pow(2,10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u))+e:o*Math.pow(2,-10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u)*.5+t+e)},BounceEaseOut(r,e,t,i){return(r/=i)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e},BounceEaseIn(r,e,t,i){return t-zc.BounceEaseOut(i-r,0,t,i)+e},BounceEaseInOut(r,e,t,i){return r<i/2?zc.BounceEaseIn(r*2,0,t,i)*.5+e:zc.BounceEaseOut(r*2-i,0,t,i)*.5+t*.5+e},EaseIn(r,e,t,i){return t*(r/=i)*r+e},EaseOut(r,e,t,i){return-t*(r/=i)*(r-2)+e},EaseInOut(r,e,t,i){return(r/=i/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e},StrongEaseIn(r,e,t,i){return t*(r/=i)*r*r*r*r+e},StrongEaseOut(r,e,t,i){return t*((r=r/i-1)*r*r*r*r+1)+e},StrongEaseInOut(r,e,t,i){return(r/=i/2)<1?t/2*r*r*r*r*r+e:t/2*((r-=2)*r*r*r*r+2)+e},Linear(r,e,t,i){return t*r/i+e}},Ha=V._assign(xe,{Util:V,Transform:Fr,Node:pe,Container:Gr,Stage:Zh,stages:Dc,Layer:Ya,FastLayer:L0,Group:lu,DD:pt,Shape:ce,shapes:jc,Animation:li,Tween:Lt,Easings:zc,Context:$h,Canvas:M0});class Xs extends ce{_sceneFunc(e){const t=xe.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),o=xe.getAngle(i?360-this.angle():this.angle()),u=Math.cos(Math.min(o,Math.PI)),d=1,f=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),g=Math.sin(Math.min(o,Math.PI/2)),x=u*(u>0?e:t),_=d*t,k=f*(f>0?e:t),S=g*(g>0?t:e);return{x,y:i?-1*S:k,width:_-x,height:S-k}}}Xs.prototype._centroid=!0;Xs.prototype.className="Arc";Xs.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];qt(Xs);j.addGetterSetter(Xs,"innerRadius",0,me());j.addGetterSetter(Xs,"outerRadius",0,me());j.addGetterSetter(Xs,"angle",0,me());j.addGetterSetter(Xs,"clockwise",!1,Ii());function Xp(r,e,t,i,o,u,d){const f=Math.sqrt(Math.pow(t-r,2)+Math.pow(i-e,2)),g=Math.sqrt(Math.pow(o-t,2)+Math.pow(u-i,2)),x=d*f/(f+g),_=d*g/(f+g),k=t-x*(o-r),S=i-x*(u-e),N=t+_*(o-r),P=i+_*(u-e);return[k,S,N,P]}function Im(r,e){const t=r.length,i=[];for(let o=2;o<t-2;o+=2){const u=Xp(r[o-2],r[o-1],r[o],r[o+1],r[o+2],r[o+3],e);isNaN(u[0])||(i.push(u[0]),i.push(u[1]),i.push(r[o]),i.push(r[o+1]),i.push(u[2]),i.push(u[3]))}return i}function g6(r){const e=[[r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]]],t=[];for(const i of e){const o=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(o!==0){const u=6*i[0]-12*i[1]+6*i[2],d=-3*i[0]+3*i[1],f=u*u-4*o*d;if(f>=0){const g=Math.sqrt(f);t.push((-u+g)/(2*o)),t.push((-u-g)/(2*o))}}}return t.filter(i=>i>0&&i<1).flatMap(i=>e.map(o=>{const u=1-i;return u*u*u*o[0]+3*u*u*i*o[1]+3*u*i*i*o[2]+i*i*i*o[3]}))}let Qs=class extends ce{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),i=t.length,o=this.tension(),u=this.closed(),d=this.bezier();if(!i)return;let f=0;if(e.beginPath(),e.moveTo(t[0],t[1]),o!==0&&i>4){const g=this.getTensionPoints(),x=g.length;for(f=u?0:4,u||e.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<x-2;)e.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);u||e.quadraticCurveTo(g[x-2],g[x-1],t[i-2],t[i-1])}else if(d)for(f=2;f<i;)e.bezierCurveTo(t[f++],t[f++],t[f++],t[f++],t[f++],t[f++]);else for(f=2;f<i;f+=2)e.lineTo(t[f],t[f+1]);u?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Im(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,i=this.tension(),o=Xp(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),u=Xp(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),d=Im(e,i);return[o[2],o[3]].concat(d).concat([u[0],u[1],e[t-2],e[t-1],u[2],u[3],o[0],o[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...g6(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],i=e[0],o=e[1],u=e[1],d,f;for(let g=0;g<e.length/2;g++)d=e[g*2],f=e[g*2+1],t=Math.min(t,d),i=Math.max(i,d),o=Math.min(o,f),u=Math.max(u,f);return{x:t,y:o,width:i-t,height:u-o}}};Qs.prototype.className="Line";Qs.prototype._attrsAffectingSize=["points","bezier","tension"];qt(Qs);j.addGetterSetter(Qs,"closed",!1);j.addGetterSetter(Qs,"bezier",!1);j.addGetterSetter(Qs,"tension",0,me());j.addGetterSetter(Qs,"points",[],M5());const m6=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],y6=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],v6=[[1],[1,1],[1,2,1],[1,3,3,1]],Am=(r,e,t)=>{let i,o;const d=t/2;i=0;for(let f=0;f<20;f++)o=d*m6[20][f]+d,i+=y6[20][f]*x6(r,e,o);return d*i},Om=(r,e,t)=>{t===void 0&&(t=1);const i=r[0]-2*r[1]+r[2],o=e[0]-2*e[1]+e[2],u=2*r[1]-2*r[0],d=2*e[1]-2*e[0],f=4*(i*i+o*o),g=4*(i*u+o*d),x=u*u+d*d;if(f===0)return t*Math.sqrt(Math.pow(r[2]-r[0],2)+Math.pow(e[2]-e[0],2));const _=g/(2*f),k=x/f,S=t+_,N=k-_*_,P=S*S+N>0?Math.sqrt(S*S+N):0,A=_*_+N>0?Math.sqrt(_*_+N):0,M=_+Math.sqrt(_*_+N)!==0?N*Math.log(Math.abs((S+P)/(_+A))):0;return Math.sqrt(f)/2*(S*P-_*A+M)};function x6(r,e,t){const i=Qp(1,t,r),o=Qp(1,t,e),u=i*i+o*o;return Math.sqrt(u)}const Qp=(r,e,t)=>{const i=t.length-1;let o,u;if(i===0)return 0;if(r===0){u=0;for(let d=0;d<=i;d++)u+=v6[i][d]*Math.pow(1-e,i-d)*Math.pow(e,d)*t[d];return u}else{o=new Array(i);for(let d=0;d<i;d++)o[d]=i*(t[d+1]-t[d]);return Qp(r-1,e,o)}},Lm=(r,e,t)=>{let i=1,o=r/e,u=(r-t(o))/e,d=0;for(;i>.001;){const f=t(o+u),g=Math.abs(r-f)/e;if(g<i)i=g,o+=u;else{const x=t(o-u),_=Math.abs(r-x)/e;_<i?(i=_,o-=u):u/=2}if(d++,d>500)break}return o};let ui=class Er extends ce{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Er.parsePathData(this.data()),this.pathLength=Er.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let i=!1;for(let o=0;o<t.length;o++){const u=t[o].command,d=t[o].points;switch(u){case"L":e.lineTo(d[0],d[1]);break;case"M":e.moveTo(d[0],d[1]);break;case"C":e.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case"Q":e.quadraticCurveTo(d[0],d[1],d[2],d[3]);break;case"A":const f=d[0],g=d[1],x=d[2],_=d[3],k=d[4],S=d[5],N=d[6],P=d[7],A=x>_?x:_,M=x>_?1:x/_,I=x>_?_/x:1;e.translate(f,g),e.rotate(N),e.scale(M,I),e.arc(0,0,A,k,k+S,1-P),e.scale(1/M,1/I),e.rotate(-N),e.translate(-f,-g);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],_=g.points[5],k=g.points[4]+_;let S=Math.PI/180;if(Math.abs(x-k)<S&&(S=Math.abs(x-k)),_<0)for(let N=x-S;N>k;N-=S){const P=Er.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],N,0);e.push(P.x,P.y)}else for(let N=x+S;N<k;N+=S){const P=Er.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],N,0);e.push(P.x,P.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const _=Er.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);e.push(_.x,_.y)}else e=e.concat(g.points)});let t=e[0],i=e[0],o=e[1],u=e[1],d,f;for(let g=0;g<e.length/2;g++)d=e[g*2],f=e[g*2+1],isNaN(d)||(t=Math.min(t,d),i=Math.max(i,d)),isNaN(f)||(o=Math.min(o,f),u=Math.max(u,f));return{x:t,y:o,width:i-t,height:u-o}}getLength(){return this.pathLength}getPointAtLength(e){return Er.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,o){return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}static getPathLength(e){let t=0;for(let i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let i,o=0,u=t.length;if(!u)return null;for(;o<u&&e>t[o].pathLength;)e-=t[o].pathLength,++o;if(o===u)return i=t[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return t[o].command==="M"?(i=t[o].points.slice(0,2),{x:i[0],y:i[1]}):{x:t[o].start.x,y:t[o].start.y};const d=t[o],f=d.points;switch(d.command){case"L":return Er.getPointOnLine(e,d.start.x,d.start.y,f[0],f[1]);case"C":return Er.getPointOnCubicBezier(Lm(e,Er.getPathLength(t),A=>Am([d.start.x,f[0],f[2],f[4]],[d.start.y,f[1],f[3],f[5]],A)),d.start.x,d.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Er.getPointOnQuadraticBezier(Lm(e,Er.getPathLength(t),A=>Om([d.start.x,f[0],f[2]],[d.start.y,f[1],f[3]],A)),d.start.x,d.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],x=f[1],_=f[2],k=f[3],S=f[5],N=f[6];let P=f[4];return P+=S*e/d.pathLength,Er.getPointOnEllipticalArc(g,x,_,k,P,N)}return null}static getPointOnLine(e,t,i,o,u,d,f){d=d??t,f=f??i;const g=this.getLineLength(t,i,o,u);if(g<1e-10)return{x:t,y:i};if(o===t)return{x:d,y:f+(u>i?e:-e)};const x=(u-i)/(o-t),_=Math.sqrt(e*e/(1+x*x))*(o<t?-1:1),k=x*_;if(Math.abs(f-i-x*(d-t))<1e-10)return{x:d+_,y:f+k};const S=((d-t)*(o-t)+(f-i)*(u-i))/(g*g),N=t+S*(o-t),P=i+S*(u-i),A=this.getLineLength(d,f,N,P),M=Math.sqrt(e*e-A*A),I=Math.sqrt(M*M/(1+x*x))*(o<t?-1:1),b=x*I;return{x:N+I,y:P+b}}static getPointOnCubicBezier(e,t,i,o,u,d,f,g,x){function _(M){return M*M*M}function k(M){return 3*M*M*(1-M)}function S(M){return 3*M*(1-M)*(1-M)}function N(M){return(1-M)*(1-M)*(1-M)}const P=g*_(e)+d*k(e)+o*S(e)+t*N(e),A=x*_(e)+f*k(e)+u*S(e)+i*N(e);return{x:P,y:A}}static getPointOnQuadraticBezier(e,t,i,o,u,d,f){function g(N){return N*N}function x(N){return 2*N*(1-N)}function _(N){return(1-N)*(1-N)}const k=d*g(e)+o*x(e)+t*_(e),S=f*g(e)+u*x(e)+i*_(e);return{x:k,y:S}}static getPointOnEllipticalArc(e,t,i,o,u,d){const f=Math.cos(d),g=Math.sin(d),x={x:i*Math.cos(u),y:o*Math.sin(u)};return{x:e+(x.x*f-x.y*g),y:t+(x.x*g+x.y*f)}}static parsePathData(e){if(!e)return[];let t=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let k=0;k<i.length;k++)t=t.replace(new RegExp(i[k],"g"),"|"+i[k]);const o=t.split("|"),u=[],d=[];let f=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let _;for(let k=1;k<o.length;k++){let S=o[k],N=S.charAt(0);for(S=S.slice(1),d.length=0;_=x.exec(S);)d.push(_[0]);let P=[],A=N==="A"||N==="a"?0:-1;for(let M=0,I=d.length;M<I;M++){const b=d[M];if(b==="00"){P.push(0,0),A>=0&&(A+=2,A>=7&&(A-=7));continue}if(A>=0){if(A===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(b)){P.push(parseInt(b[0],10)),P.push(parseInt(b[1],10)),P.push(parseFloat(b.slice(2))),A+=3,A>=7&&(A-=7);continue}if(b==="11"||b==="10"||b==="01"){P.push(parseInt(b[0],10)),P.push(parseInt(b[1],10)),A+=2,A>=7&&(A-=7);continue}if(b==="0"||b==="1"){P.push(parseInt(b,10)),A+=1,A>=7&&(A-=7);continue}}else if(A===4){if(/^[01]\d+(?:\.\d+)?$/.test(b)){P.push(parseInt(b[0],10)),P.push(parseFloat(b.slice(1))),A+=2,A>=7&&(A-=7);continue}if(b==="0"||b==="1"){P.push(parseInt(b,10)),A+=1,A>=7&&(A-=7);continue}}const O=parseFloat(b);isNaN(O)?P.push(0):P.push(O),A+=1,A>=7&&(A-=7)}else{const O=parseFloat(b);isNaN(O)?P.push(0):P.push(O)}}for(;P.length>0&&!isNaN(P[0]);){let M="",I=[];const b=f,O=g;let L,X,te,ie,K,ye,ke,Ge,ve,De;switch(N){case"l":f+=P.shift(),g+=P.shift(),M="L",I.push(f,g);break;case"L":f=P.shift(),g=P.shift(),I.push(f,g);break;case"m":const Me=P.shift(),_e=P.shift();if(f+=Me,g+=_e,M="M",u.length>2&&u[u.length-1].command==="z"){for(let le=u.length-2;le>=0;le--)if(u[le].command==="M"){f=u[le].points[0]+Me,g=u[le].points[1]+_e;break}}I.push(f,g),N="l";break;case"M":f=P.shift(),g=P.shift(),M="M",I.push(f,g),N="L";break;case"h":f+=P.shift(),M="L",I.push(f,g);break;case"H":f=P.shift(),M="L",I.push(f,g);break;case"v":g+=P.shift(),M="L",I.push(f,g);break;case"V":g=P.shift(),M="L",I.push(f,g);break;case"C":I.push(P.shift(),P.shift(),P.shift(),P.shift()),f=P.shift(),g=P.shift(),I.push(f,g);break;case"c":I.push(f+P.shift(),g+P.shift(),f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),M="C",I.push(f,g);break;case"S":X=f,te=g,L=u[u.length-1],L.command==="C"&&(X=f+(f-L.points[2]),te=g+(g-L.points[3])),I.push(X,te,P.shift(),P.shift()),f=P.shift(),g=P.shift(),M="C",I.push(f,g);break;case"s":X=f,te=g,L=u[u.length-1],L.command==="C"&&(X=f+(f-L.points[2]),te=g+(g-L.points[3])),I.push(X,te,f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),M="C",I.push(f,g);break;case"Q":I.push(P.shift(),P.shift()),f=P.shift(),g=P.shift(),I.push(f,g);break;case"q":I.push(f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),M="Q",I.push(f,g);break;case"T":X=f,te=g,L=u[u.length-1],L.command==="Q"&&(X=f+(f-L.points[0]),te=g+(g-L.points[1])),f=P.shift(),g=P.shift(),M="Q",I.push(X,te,f,g);break;case"t":X=f,te=g,L=u[u.length-1],L.command==="Q"&&(X=f+(f-L.points[0]),te=g+(g-L.points[1])),f+=P.shift(),g+=P.shift(),M="Q",I.push(X,te,f,g);break;case"A":ie=P.shift(),K=P.shift(),ye=P.shift(),ke=P.shift(),Ge=P.shift(),ve=f,De=g,f=P.shift(),g=P.shift(),M="A",I=this.convertEndpointToCenterParameterization(ve,De,f,g,ke,Ge,ie,K,ye);break;case"a":ie=P.shift(),K=P.shift(),ye=P.shift(),ke=P.shift(),Ge=P.shift(),ve=f,De=g,f+=P.shift(),g+=P.shift(),M="A",I=this.convertEndpointToCenterParameterization(ve,De,f,g,ke,Ge,ie,K,ye);break}u.push({command:M||N,points:I,start:{x:b,y:O},pathLength:this.calcLength(b,O,M||N,I)})}(N==="z"||N==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(e,t,i,o){let u,d,f,g;const x=Er;switch(i){case"L":return x.getLineLength(e,t,o[0],o[1]);case"C":return Am([e,o[0],o[2],o[4]],[t,o[1],o[3],o[5]],1);case"Q":return Om([e,o[0],o[2]],[t,o[1],o[3]],1);case"A":u=0;const _=o[4],k=o[5],S=o[4]+k;let N=Math.PI/180;if(Math.abs(_-S)<N&&(N=Math.abs(_-S)),d=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],_,0),k<0)for(g=_-N;g>S;g-=N)f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),d=f;else for(g=_+N;g<S;g+=N)f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),d=f;return f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],S,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),u}return 0}static convertEndpointToCenterParameterization(e,t,i,o,u,d,f,g,x){const _=x*(Math.PI/180),k=Math.cos(_)*(e-i)/2+Math.sin(_)*(t-o)/2,S=-1*Math.sin(_)*(e-i)/2+Math.cos(_)*(t-o)/2,N=k*k/(f*f)+S*S/(g*g);N>1&&(f*=Math.sqrt(N),g*=Math.sqrt(N));let P=Math.sqrt((f*f*(g*g)-f*f*(S*S)-g*g*(k*k))/(f*f*(S*S)+g*g*(k*k)));u===d&&(P*=-1),isNaN(P)&&(P=0);const A=P*f*S/g,M=P*-g*k/f,I=(e+i)/2+Math.cos(_)*A-Math.sin(_)*M,b=(t+o)/2+Math.sin(_)*A+Math.cos(_)*M,O=function(ke){return Math.sqrt(ke[0]*ke[0]+ke[1]*ke[1])},L=function(ke,Ge){return(ke[0]*Ge[0]+ke[1]*Ge[1])/(O(ke)*O(Ge))},X=function(ke,Ge){return(ke[0]*Ge[1]<ke[1]*Ge[0]?-1:1)*Math.acos(L(ke,Ge))},te=X([1,0],[(k-A)/f,(S-M)/g]),ie=[(k-A)/f,(S-M)/g],K=[(-1*k-A)/f,(-1*S-M)/g];let ye=X(ie,K);return L(ie,K)<=-1&&(ye=Math.PI),L(ie,K)>=1&&(ye=0),d===0&&ye>0&&(ye=ye-2*Math.PI),d===1&&ye<0&&(ye=ye+2*Math.PI),[I,b,f,g,te,ye,_,d]}};ui.prototype.className="Path";ui.prototype._attrsAffectingSize=["data"];qt(ui);j.addGetterSetter(ui,"data");class Xa extends Qs{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,i=this.points();let o=i;const u=this.tension()!==0&&i.length>4;u&&(o=this.getTensionPoints());const d=this.pointerLength(),f=i.length;let g,x;if(u){const S=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[f-2],i[f-1]],N=ui.calcLength(o[o.length-4],o[o.length-3],"C",S),P=ui.getPointOnQuadraticBezier(Math.min(1,1-d/N),S[0],S[1],S[2],S[3],S[4],S[5]);g=i[f-2]-P.x,x=i[f-1]-P.y}else g=i[f-2]-i[f-4],x=i[f-1]-i[f-3];const _=(Math.atan2(x,g)+t)%t,k=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[f-2],i[f-1]),e.rotate(_),e.moveTo(0,0),e.lineTo(-d,k/2),e.lineTo(-d,-k/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),u?(g=(o[0]+o[2])/2-i[0],x=(o[1]+o[3])/2-i[1]):(g=i[2]-i[0],x=i[3]-i[1]),e.rotate((Math.atan2(-x,-g)+t)%t),e.moveTo(0,0),e.lineTo(-d,k/2),e.lineTo(-d,-k/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}Xa.prototype.className="Arrow";qt(Xa);j.addGetterSetter(Xa,"pointerLength",10,me());j.addGetterSetter(Xa,"pointerWidth",10,me());j.addGetterSetter(Xa,"pointerAtBeginning",!1);j.addGetterSetter(Xa,"pointerAtEnding",!0);let hu=class extends ce{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};hu.prototype._centroid=!0;hu.prototype.className="Circle";hu.prototype._attrsAffectingSize=["radius"];qt(hu);j.addGetterSetter(hu,"radius",0,me());class Jo extends ce{_sceneFunc(e){const t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Jo.prototype.className="Ellipse";Jo.prototype._centroid=!0;Jo.prototype._attrsAffectingSize=["radiusX","radiusY"];qt(Jo);j.addComponentsGetterSetter(Jo,"radius",["x","y"]);j.addGetterSetter(Jo,"radiusX",0,me());j.addGetterSetter(Jo,"radiusY",0,me());class Hr extends ce{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),u=this.attrs.image;let d;if(u){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?d=[u,this.cropX(),this.cropY(),f,g,0,0,t,i]:d=[u,0,0,t,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?V.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),u&&(o&&e.clip(),e.drawImage.apply(e,d))}_hitFunc(e){const t=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?V.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width)!==null&&i!==void 0?i:0}getHeight(){var e,t,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}static fromURL(e,t,i=null){const o=V.createImageElement();o.onload=function(){const u=new Hr({image:o});t(u)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}}Hr.prototype.className="Image";Hr.prototype._attrsAffectingSize=["image"];qt(Hr);j.addGetterSetter(Hr,"cornerRadius",0,Jh(4));j.addGetterSetter(Hr,"image");j.addComponentsGetterSetter(Hr,"crop",["x","y","width","height"]);j.addGetterSetter(Hr,"cropX",0,me());j.addGetterSetter(Hr,"cropY",0,me());j.addGetterSetter(Hr,"cropWidth",0,me());j.addGetterSetter(Hr,"cropHeight",0,me());const Ty=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],_6="Change.konva",w6="none",Kp="up",$p="right",Jp="down",Zp="left",S6=Ty.length;class D0 extends lu{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,i;const o=function(){t._sync()};for(i=0;i<S6;i++)e.on(Ty[i]+_6,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),i,o,u,d,f,g,x;if(e&&t){switch(i=e.width(),o=e.height(),u=t.pointerDirection(),d=t.pointerWidth(),x=t.pointerHeight(),f=0,g=0,u){case Kp:f=i/2,g=-1*x;break;case $p:f=i+d,g=o/2;break;case Jp:f=i/2,g=o+x;break;case Zp:f=-1*d,g=o/2;break}t.setAttrs({x:-1*f,y:-1*g,width:i,height:o}),e.setAttrs({x:-1*f,y:-1*g})}}}D0.prototype.className="Label";qt(D0);class Qa extends ce{_sceneFunc(e){const t=this.width(),i=this.height(),o=this.pointerDirection(),u=this.pointerWidth(),d=this.pointerHeight(),f=this.cornerRadius();let g=0,x=0,_=0,k=0;typeof f=="number"?g=x=_=k=Math.min(f,t/2,i/2):(g=Math.min(f[0]||0,t/2,i/2),x=Math.min(f[1]||0,t/2,i/2),k=Math.min(f[2]||0,t/2,i/2),_=Math.min(f[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(g,0),o===Kp&&(e.lineTo((t-u)/2,0),e.lineTo(t/2,-1*d),e.lineTo((t+u)/2,0)),e.lineTo(t-x,0),e.arc(t-x,x,x,Math.PI*3/2,0,!1),o===$p&&(e.lineTo(t,(i-d)/2),e.lineTo(t+u,i/2),e.lineTo(t,(i+d)/2)),e.lineTo(t,i-k),e.arc(t-k,i-k,k,0,Math.PI/2,!1),o===Jp&&(e.lineTo((t+u)/2,i),e.lineTo(t/2,i+d),e.lineTo((t-u)/2,i)),e.lineTo(_,i),e.arc(_,i-_,_,Math.PI/2,Math.PI,!1),o===Zp&&(e.lineTo(0,(i+d)/2),e.lineTo(-1*u,i/2),e.lineTo(0,(i-d)/2)),e.lineTo(0,g),e.arc(g,g,g,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,i=this.pointerWidth(),o=this.pointerHeight(),u=this.pointerDirection(),d=this.width(),f=this.height();return u===Kp?(t-=o,f+=o):u===Jp?f+=o:u===Zp?(e-=i*1.5,d+=i):u===$p&&(d+=i*1.5),{x:e,y:t,width:d,height:f}}}Qa.prototype.className="Tag";qt(Qa);j.addGetterSetter(Qa,"pointerDirection",w6);j.addGetterSetter(Qa,"pointerWidth",0,me());j.addGetterSetter(Qa,"pointerHeight",0,me());j.addGetterSetter(Qa,"cornerRadius",0,Jh(4));let qc=class extends ce{_sceneFunc(e){const t=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),t?V.drawRoundedRectPath(e,i,o,t):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};qc.prototype.className="Rect";qt(qc);j.addGetterSetter(qc,"cornerRadius",0,Jh(4));let Zo=class extends ce{_sceneFunc(e){const t=this._getPoints(),i=this.radius(),o=this.sides(),u=this.cornerRadius();if(e.beginPath(),u)V.drawRoundedPolygonPath(e,t,o,i,u);else{e.moveTo(t[0].x,t[0].y);for(let d=1;d<t.length;d++)e.lineTo(t[d].x,t[d].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(let o=0;o<e;o++)i.push({x:t*Math.sin(o*2*Math.PI/e),y:-1*t*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let t=e[0].x,i=e[0].x,o=e[0].y,u=e[0].y;return e.forEach(d=>{t=Math.min(t,d.x),i=Math.max(i,d.x),o=Math.min(o,d.y),u=Math.max(u,d.y)}),{x:t,y:o,width:i-t,height:u-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Zo.prototype.className="RegularPolygon";Zo.prototype._centroid=!0;Zo.prototype._attrsAffectingSize=["radius"];qt(Zo);j.addGetterSetter(Zo,"radius",0,me());j.addGetterSetter(Zo,"sides",0,me());j.addGetterSetter(Zo,"cornerRadius",0,Jh(4));const Dm=Math.PI*2;class Ka extends ce{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Dm,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Dm,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ka.prototype.className="Ring";Ka.prototype._centroid=!0;Ka.prototype._attrsAffectingSize=["innerRadius","outerRadius"];qt(Ka);j.addGetterSetter(Ka,"innerRadius",0,me());j.addGetterSetter(Ka,"outerRadius",0,me());class cs extends ce{constructor(e){super(e),this._updated=!0,this.anim=new li(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),i=this.frameIndex(),o=i*4,u=this.animations()[t],d=this.frameOffsets(),f=u[o+0],g=u[o+1],x=u[o+2],_=u[o+3],k=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,x,_),e.closePath(),e.fillStrokeShape(this)),k)if(d){const S=d[t],N=i*2;e.drawImage(k,f,g,x,_,S[N+0],S[N+1],x,_)}else e.drawImage(k,f,g,x,_,0,0,x,_)}_hitFunc(e){const t=this.animation(),i=this.frameIndex(),o=i*4,u=this.animations()[t],d=this.frameOffsets(),f=u[o+2],g=u[o+3];if(e.beginPath(),d){const x=d[t],_=i*2;e.rect(x[_+0],x[_+1],f,g)}else e.rect(0,0,f,g);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),i=this.animations(),o=i[t],u=o.length/4;e<u-1?this.frameIndex(e+1):this.frameIndex(0)}}cs.prototype.className="Sprite";qt(cs);j.addGetterSetter(cs,"animation");j.addGetterSetter(cs,"animations");j.addGetterSetter(cs,"frameOffsets");j.addGetterSetter(cs,"image");j.addGetterSetter(cs,"frameIndex",0,me());j.addGetterSetter(cs,"frameRate",17,me());j.backCompat(cs,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ea extends ce{_sceneFunc(e){const t=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let u=1;u<o*2;u++){const d=u%2===0?i:t,f=d*Math.sin(u*Math.PI/o),g=-1*d*Math.cos(u*Math.PI/o);e.lineTo(f,g)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}ea.prototype.className="Star";ea.prototype._centroid=!0;ea.prototype._attrsAffectingSize=["innerRadius","outerRadius"];qt(ea);j.addGetterSetter(ea,"numPoints",5,me());j.addGetterSetter(ea,"innerRadius",0,me());j.addGetterSetter(ea,"outerRadius",0,me());function Yo(r){return[...r].reduce((e,t,i,o)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const u=o[i+1];u&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(u)?(e.push(t+u),o[i+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(o[i+1]||""))?e.push(t+o[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const nu="auto",k6="center",by="inherit",kc="justify",C6="Change.konva",E6="2d",jm="-",Ry="left",P6="text",N6="Text",T6="top",b6="bottom",zm="middle",My="normal",R6="px ",_h=" ",M6="right",Fm="rtl",I6="word",A6="char",Bm="none",mp="",Iy=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],O6=Iy.length;function L6(r){return r.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}let wh;function yp(){return wh||(wh=V.createCanvasElement().getContext(E6),wh)}function D6(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function j6(r){r.setAttr("miterLimit",2),r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function z6(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}let Dt=class extends ce{constructor(e){super(z6(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<O6;t++)this.on(Iy[t]+C6,this._setTextData);this._setTextData()}_sceneFunc(e){var t,i;const o=this.textArr,u=o.length;if(!this.text())return;let d=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,x=this.verticalAlign(),_=this.direction(),k=0,S=this.align(),N=this.getWidth(),P=this.letterSpacing(),A=this.charRenderFunc(),M=this.fill(),I=this.textDecoration(),b=this.underlineOffset(),O=I.indexOf("underline")!==-1,L=I.indexOf("line-through")!==-1,X;_=_===by?e.direction:_;let te=g/2,ie=zm;if(!xe.legacyTextRendering){const K=this.measureSize("M");ie="alphabetic";const ye=(t=K.fontBoundingBoxAscent)!==null&&t!==void 0?t:K.actualBoundingBoxAscent,ke=(i=K.fontBoundingBoxDescent)!==null&&i!==void 0?i:K.actualBoundingBoxDescent;te=(ye-ke)/2+g/2}for(_===Fm&&e.setAttr("direction",_),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",ie),e.setAttr("textAlign",Ry),x===zm?k=(this.getHeight()-u*g-d*2)/2:x===b6&&(k=this.getHeight()-u*g-d*2),e.translate(d,k+d),X=0;X<u;X++){let K=0,ye=0;const ke=o[X],Ge=ke.text,ve=ke.width,De=ke.lastInParagraph;if(e.save(),S===M6?K+=N-ve-d*2:S===k6&&(K+=(N-ve-d*2)/2),O){e.save(),e.beginPath();const _e=b??(xe.legacyTextRendering?Math.round(f/2):Math.round(f/4)),le=K,ue=te+ye+_e;e.moveTo(le,ue);const G=S===kc&&!De?N-d*2:ve;e.lineTo(le+Math.round(G),ue),e.lineWidth=f/15;const he=this._getLinearGradient();e.strokeStyle=he||M,e.stroke(),e.restore()}const Me=K;if(_!==Fm&&(P!==0||S===kc||A)){const _e=Ge.split(" ").length-1,le=Yo(Ge);for(let ue=0;ue<le.length;ue++){const G=le[ue];if(G===" "&&!De&&S===kc&&(K+=(N-d*2-ve)/_e),this._partialTextX=K,this._partialTextY=te+ye,this._partialText=G,A){e.save();const oe=o.slice(0,X).reduce((ee,Se)=>ee+Yo(Se.text).length,0),z=ue+oe;A({char:G,index:z,x:K,y:te+ye,lineIndex:X,column:ue,isLastInLine:De,width:this.measureSize(G).width,context:e})}e.fillStrokeShape(this),A&&e.restore(),K+=this.measureSize(G).width+P}}else P!==0&&e.setAttr("letterSpacing",`${P}px`),this._partialTextX=K,this._partialTextY=te+ye,this._partialText=Ge,e.fillStrokeShape(this);if(L){e.save(),e.beginPath();const _e=xe.legacyTextRendering?0:-Math.round(f/4),le=Me;e.moveTo(le,te+ye+_e);const ue=S===kc&&!De?N-d*2:ve;e.lineTo(le+Math.round(ue),te+ye+_e),e.lineWidth=f/15;const G=this._getLinearGradient();e.strokeStyle=G||M,e.stroke(),e.restore()}e.restore(),u>1&&(te+=g)}}_hitFunc(e){const t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=V._isString(e)?e:e==null?"":e+"";return this._setAttr(P6,t),this}getWidth(){return this.attrs.width===nu||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===nu||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return V.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,o,u,d,f,g,x,_,k,S;let N=yp(),P=this.fontSize(),A;N.save(),N.font=this._getContextFont(),A=N.measureText(e),N.restore();const M=P/100;return{actualBoundingBoxAscent:(t=A.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*M,actualBoundingBoxDescent:(i=A.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(o=A.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*M,actualBoundingBoxRight:(u=A.actualBoundingBoxRight)!==null&&u!==void 0?u:75.732421875*M,alphabeticBaseline:(d=A.alphabeticBaseline)!==null&&d!==void 0?d:0,emHeightAscent:(f=A.emHeightAscent)!==null&&f!==void 0?f:100*M,emHeightDescent:(g=A.emHeightDescent)!==null&&g!==void 0?g:-20*M,fontBoundingBoxAscent:(x=A.fontBoundingBoxAscent)!==null&&x!==void 0?x:91*M,fontBoundingBoxDescent:(_=A.fontBoundingBoxDescent)!==null&&_!==void 0?_:21*M,hangingBaseline:(k=A.hangingBaseline)!==null&&k!==void 0?k:72.80000305175781*M,ideographicBaseline:(S=A.ideographicBaseline)!==null&&S!==void 0?S:-21*M,width:A.width,height:P}}_getContextFont(){return this.fontStyle()+_h+this.fontVariant()+_h+(this.fontSize()+R6)+L6(this.fontFamily())}_addTextLine(e){this.align()===kc&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),i=e.length;return yp().measureText(e).width+t*i}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,o=this.lineHeight()*t,u=this.attrs.width,d=this.attrs.height,f=u!==nu&&u!==void 0,g=d!==nu&&d!==void 0,x=this.padding(),_=u-x*2,k=d-x*2,S=0,N=this.wrap(),P=N!==Bm,A=N!==A6&&P,M=this.ellipsis();this.textArr=[],yp().font=this._getContextFont();const I=M?this._getTextWidth(mp):0;for(let b=0,O=e.length;b<O;++b){let L=e[b],X=this._getTextWidth(L);if(f&&X>_)for(;L.length>0;){let te=0,ie=Yo(L).length,K="",ye=0;for(;te<ie;){const ke=te+ie>>>1,Ge=Yo(L),ve=Ge.slice(0,ke+1).join(""),De=this._getTextWidth(ve);(M&&g&&S+o>k?De+I:De)<=_?(te=ke+1,K=ve,ye=De):ie=ke}if(K){if(A){const ve=Yo(L),De=Yo(K),Me=ve[De.length],_e=Me===_h||Me===jm;let le;if(_e&&ye<=_)le=De.length;else{const ue=De.lastIndexOf(_h),G=De.lastIndexOf(jm);le=Math.max(ue,G)+1}le>0&&(te=le,K=ve.slice(0,te).join(""),ye=this._getTextWidth(K))}if(K=K.trimRight(),this._addTextLine(K),i=Math.max(i,ye),S+=o,this._shouldHandleEllipsis(S)){this._tryToAddEllipsisToLastLine();break}if(L=Yo(L).slice(te).join("").trimLeft(),L.length>0&&(X=this._getTextWidth(L),X<=_)){this._addTextLine(L),S+=o,i=Math.max(i,X);break}}else break}else this._addTextLine(L),S+=o,i=Math.max(i,X),this._shouldHandleEllipsis(S)&&b<O-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&S+o>k)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){const t=+this.fontSize(),i=this.lineHeight()*t,o=this.attrs.height,u=o!==nu&&o!==void 0,d=this.padding(),f=o-d*2;return!(this.wrap()!==Bm)||u&&e+i>f}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==nu&&e!==void 0,i=this.padding(),o=e-i*2,u=this.ellipsis(),d=this.textArr[this.textArr.length-1];!d||!u||(t&&(this._getTextWidth(d.text+mp)<o||(d.text=d.text.slice(0,d.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(d.text+mp))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};Dt.prototype._fillFunc=D6;Dt.prototype._strokeFunc=j6;Dt.prototype.className=N6;Dt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];qt(Dt);j.overWriteSetter(Dt,"width",A0());j.overWriteSetter(Dt,"height",A0());j.addGetterSetter(Dt,"direction",by);j.addGetterSetter(Dt,"fontFamily","Arial");j.addGetterSetter(Dt,"fontSize",12,me());j.addGetterSetter(Dt,"fontStyle",My);j.addGetterSetter(Dt,"fontVariant",My);j.addGetterSetter(Dt,"padding",0,me());j.addGetterSetter(Dt,"align",Ry);j.addGetterSetter(Dt,"verticalAlign",T6);j.addGetterSetter(Dt,"lineHeight",1,me());j.addGetterSetter(Dt,"wrap",I6);j.addGetterSetter(Dt,"ellipsis",!1,Ii());j.addGetterSetter(Dt,"letterSpacing",0,me());j.addGetterSetter(Dt,"text","",qa());j.addGetterSetter(Dt,"textDecoration","");j.addGetterSetter(Dt,"underlineOffset",void 0,me());j.addGetterSetter(Dt,"charRenderFunc",void 0);const F6="",Ay="normal";function Oy(r){r.fillText(this.partialText,0,0)}function Ly(r){r.strokeText(this.partialText,0,0)}class kn extends ce{constructor(e){super(e),this.dummyCanvas=V.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ui.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e>t?null:ui.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ui.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),i=this.fill(),o=this.fontSize(),u=this.glyphInfo,d=t.indexOf("underline")!==-1,f=t.indexOf("line-through")!==-1;d&&e.beginPath();for(let g=0;g<u.length;g++){e.save();const x=u[g].p0;e.translate(x.x,x.y),e.rotate(u[g].rotation),this.partialText=u[g].text,e.fillStrokeShape(this),d&&(g===0&&e.moveTo(0,o/2+1),e.lineTo(u[g].width,o/2+1)),e.restore()}if(d&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),f){e.beginPath();for(let g=0;g<u.length;g++){e.save();const x=u[g].p0;e.translate(x.x,x.y),e.rotate(u[g].rotation),g===0&&e.moveTo(0,0),e.lineTo(u[g].width,0),e.restore()}e.strokeStyle=i,e.lineWidth=o/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const i=t[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<t.length;i++){const o=t[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return V.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Dt.prototype.setText.call(this,e)}_getContextFont(){return Dt.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=Yo(this.text()),t=[];let i=0;for(let k=0;k<e.length;k++)t.push({char:e[k],width:this._getTextSize(e[k]).width}),i+=t[k].width;const{height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const u=this.letterSpacing(),d=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*u,0);let x=0;d==="center"&&(x=Math.max(0,this.pathLength/2-g/2)),d==="right"&&(x=Math.max(0,this.pathLength-g));let _=x;for(let k=0;k<t.length;k++){const S=this._getPointAtLength(_);if(!S)return;const N=t[k].char;let P=t[k].width+u;if(N===" "&&d==="justify"){const L=this.text().split(" ").length-1;P+=(this.pathLength-g)/L}const A=this._getPointAtLength(_+P);if(!A)return;const M=ui.getLineLength(S.x,S.y,A.x,A.y);let I=0;if(f)try{I=f(t[k-1].char,N)*this.fontSize()}catch{I=0}S.x+=I,A.x+=I,this.textWidth+=I;const b=ui.getPointOnLine(I+M/2,S.x,S.y,A.x,A.y),O=Math.atan2(A.y-S.y,A.x-S.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:e[k],rotation:O,p0:S,p1:A,width:M}),_+=P}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(x){e.push(x.p0.x),e.push(x.p0.y),e.push(x.p1.x),e.push(x.p1.y)});let t=e[0]||0,i=e[0]||0,o=e[1]||0,u=e[1]||0,d,f;for(let x=0;x<e.length/2;x++)d=e[x*2],f=e[x*2+1],t=Math.min(t,d),i=Math.max(i,d),o=Math.min(o,f),u=Math.max(u,f);const g=this.fontSize();return{x:t-g/2,y:o-g/2,width:i-t+g,height:u-o+g}}destroy(){return V.releaseCanvas(this.dummyCanvas),super.destroy()}}kn.prototype._fillFunc=Oy;kn.prototype._strokeFunc=Ly;kn.prototype._fillFuncHit=Oy;kn.prototype._strokeFuncHit=Ly;kn.prototype.className="TextPath";kn.prototype._attrsAffectingSize=["text","fontSize","data"];qt(kn);j.addGetterSetter(kn,"data");j.addGetterSetter(kn,"fontFamily","Arial");j.addGetterSetter(kn,"fontSize",12,me());j.addGetterSetter(kn,"fontStyle",Ay);j.addGetterSetter(kn,"align","left");j.addGetterSetter(kn,"letterSpacing",0,me());j.addGetterSetter(kn,"textBaseline","middle");j.addGetterSetter(kn,"fontVariant",Ay);j.addGetterSetter(kn,"text",F6);j.addGetterSetter(kn,"textDecoration","");j.addGetterSetter(kn,"kerningFunc",void 0);const Dy="tr-konva",B6=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(r=>r+`.${Dy}`).join(" "),Gm="nodesRect",G6=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],U6={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},W6="ontouchstart"in xe._global;function H6(r,e,t){if(r==="rotater")return t;e+=V.degToRad(U6[r]||0);const i=(V.radToDeg(e)%360+360)%360;return V._inRange(i,315+22.5,360)||V._inRange(i,0,22.5)?"ns-resize":V._inRange(i,45-22.5,45+22.5)?"nesw-resize":V._inRange(i,90-22.5,90+22.5)?"ew-resize":V._inRange(i,135-22.5,135+22.5)?"nwse-resize":V._inRange(i,180-22.5,180+22.5)?"ns-resize":V._inRange(i,225-22.5,225+22.5)?"nesw-resize":V._inRange(i,270-22.5,270+22.5)?"ew-resize":V._inRange(i,315-22.5,315+22.5)?"nwse-resize":(V.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const Fh=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function V6(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function jy(r,e,t){const i=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),o=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return{...r,rotation:r.rotation+e,x:i,y:o}}function q6(r,e){const t=V6(r);return jy(r,e,t)}function Y6(r,e,t){let i=e;for(let o=0;o<r.length;o++){const u=xe.getAngle(r[o]),d=Math.abs(u-e)%(Math.PI*2);Math.min(d,Math.PI*2-d)<t&&(i=u)}return i}let e0=0;class at extends lu{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(B6,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return V.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Dy+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(o=>o.isAncestorOf(this)?(V.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const u=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(o._attrsAffectingSize.length){const d=o._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");o.on(d,u)}o.on(G6.map(d=>d+`.${this._getEventNamespace()}`).join(" "),u),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,u),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,i=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!t)return;const o=e.getAbsolutePosition(),u=o.x-t.x,d=o.y-t.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+u,y:g.y+d}),f.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Gm),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Gm,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),i){const o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=e.getAbsoluteScale(i),d=e.getAbsolutePosition(i),f=o.x*u.x-e.offsetX()*u.x,g=o.y*u.y-e.offsetY()*u.y,x=(xe.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),_={x:d.x+f*Math.cos(x)+g*Math.sin(-x),y:d.y+g*Math.cos(x)+f*Math.sin(x),width:o.width*u.x,height:o.height*u.y,rotation:x};return jy(_,-xe.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(x=>{const _=x.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),k=[{x:_.x,y:_.y},{x:_.x+_.width,y:_.y},{x:_.x+_.width,y:_.y+_.height},{x:_.x,y:_.y+_.height}],S=x.getAbsoluteTransform();k.forEach(function(N){const P=S.point(N);t.push(P)})});const i=new Fr;i.rotate(-xe.getAngle(this.rotation()));let o=1/0,u=1/0,d=-1/0,f=-1/0;t.forEach(function(x){const _=i.point(x);o===void 0&&(o=d=_.x,u=f=_.y),o=Math.min(o,_.x),u=Math.min(u,_.y),d=Math.max(d,_.x),f=Math.max(f,_.y)}),i.invert();const g=i.point({x:o,y:u});return{x:g.x,y:g.y,width:d-o,height:f-u,rotation:xe.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Fh.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new qc({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:W6?10:"auto"}),i=this;t.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),t.on("dragstart",o=>{t.stopDrag(),o.cancelBubble=!0}),t.on("dragend",o=>{o.cancelBubble=!0}),t.on("mouseenter",()=>{const o=xe.getAngle(this.rotation()),u=this.rotateAnchorCursor(),d=H6(e,o,u);t.getStage().content&&(t.getStage().content.style.cursor=d),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new ce({name:"back",width:0,height:0,sceneFunc(t,i){const o=i.getParent(),u=o.padding(),d=i.width(),f=i.height();if(t.beginPath(),t.rect(-u,-u,d+u*2,f+u*2),o.rotateEnabled()&&o.rotateLineVisible()){const g=o.rotateAnchorAngle(),x=o.rotateAnchorOffset(),_=V.degToRad(g),k=Math.sin(_),S=-Math.cos(_),N=d/2,P=f/2;let A=1/0;S<0?A=Math.min(A,-P/S):S>0&&(A=Math.min(A,(f-P)/S)),k<0?A=Math.min(A,-N/k):k>0&&(A=Math.min(A,(d-N)/k));const M=N+k*A,I=P+S*A,b=V._sign(f),O=M+k*x*b,L=I+S*x*b;t.moveTo(M,I),t.lineTo(O,L)}t.fillStrokeShape(i)},hitFunc:(t,i)=>{if(!this.shouldOverdrawWholeArea())return;const o=this.padding();t.beginPath(),t.rect(-o,-o,i.width()+o*2,i.height()+o*2),t.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),i=t.width,o=t.height,u=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/u),this.cos=Math.abs(i/u),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const d=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-d.x,y:f.y-d.y},e0++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:e.evt,target:g})})}_handleMouseMove(e){let t,i,o;const u=this.findOne("."+this._movingAnchorName),d=u.getStage();d.setPointersPositions(e);const f=d.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const x=u.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(x,g,e)),u.setAbsolutePosition(g);const _=u.getAbsolutePosition();if(x.x===_.x&&x.y===_.y)return;if(this._movingAnchorName==="rotater"){const b=this._getNodeRect();t=u.x()-b.width/2,i=-u.y()+b.height/2;const O=xe.getAngle(this.rotateAnchorAngle());let L=Math.atan2(-i,t)+Math.PI/2-O;b.height<0&&(L-=Math.PI);const te=xe.getAngle(this.rotation())+L,ie=xe.getAngle(this.rotationSnapTolerance()),ye=Y6(this.rotationSnaps(),te,ie)-b.rotation,ke=q6(b,ye);this._fitNodesInto(ke,e);return}const k=this.shiftBehavior();let S;k==="inverted"?S=this.keepRatio()&&!e.shiftKey:k==="none"?S=this.keepRatio():S=this.keepRatio()||e.shiftKey;let N=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(S){const b=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(b.x-u.x(),2)+Math.pow(b.y-u.y(),2));const O=this.findOne(".top-left").x()>b.x?-1:1,L=this.findOne(".top-left").y()>b.y?-1:1;t=o*this.cos*O,i=o*this.sin*L,this.findOne(".top-left").x(b.x-t),this.findOne(".top-left").y(b.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(u.y());else if(this._movingAnchorName==="top-right"){if(S){const b=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(u.x()-b.x,2)+Math.pow(b.y-u.y(),2));const O=this.findOne(".top-right").x()<b.x?-1:1,L=this.findOne(".top-right").y()>b.y?-1:1;t=o*this.cos*O,i=o*this.sin*L,this.findOne(".top-right").x(b.x+t),this.findOne(".top-right").y(b.y-i)}var P=u.position();this.findOne(".top-left").y(P.y),this.findOne(".bottom-right").x(P.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(u.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(u.x());else if(this._movingAnchorName==="bottom-left"){if(S){const b=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(b.x-u.x(),2)+Math.pow(u.y()-b.y,2));const O=b.x<u.x()?-1:1,L=u.y()<b.y?-1:1;t=o*this.cos*O,i=o*this.sin*L,u.x(b.x-t),u.y(b.y+i)}P=u.position(),this.findOne(".top-left").x(P.x),this.findOne(".bottom-right").y(P.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(u.y());else if(this._movingAnchorName==="bottom-right"){if(S){const b=N?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(u.x()-b.x,2)+Math.pow(u.y()-b.y,2));const O=this.findOne(".bottom-right").x()<b.x?-1:1,L=this.findOne(".bottom-right").y()<b.y?-1:1;t=o*this.cos*O,i=o*this.sin*L,this.findOne(".bottom-right").x(b.x+t),this.findOne(".bottom-right").y(b.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(N=this.centeredScaling()||e.altKey,N){const b=this.findOne(".top-left"),O=this.findOne(".bottom-right"),L=b.x(),X=b.y(),te=this.getWidth()-O.x(),ie=this.getHeight()-O.y();O.move({x:-L,y:-X}),b.move({x:te,y:ie})}const A=this.findOne(".top-left").getAbsolutePosition();t=A.x,i=A.y;const M=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:M,height:I,rotation:xe.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();e0--,this._fire("transformend",{evt:e,target:i}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),i&&this._nodes.forEach(o=>{var u;o._fire("transformend",{evt:e,target:o}),(u=o.getLayer())===null||u===void 0||u.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const i=this._getNodeRect(),o=1;if(V._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(V._inRange(e.height,-this.padding()*2-o,o)){this.update();return}const u=new Fr;if(u.rotate(xe.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const S=u.point({x:-this.padding()*2,y:0});e.x+=S.x,e.y+=S.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const S=u.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const S=u.point({x:0,y:-this.padding()*2});e.x+=S.x,e.y+=S.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const S=u.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const S=this.boundBoxFunc()(i,e);S?e=S:V.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const d=1e7,f=new Fr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/d,i.height/d);const g=new Fr,x=e.width/d,_=e.height/d;this.flipEnabled()===!1?(g.translate(e.x,e.y),g.rotate(e.rotation),g.translate(e.width<0?e.width:0,e.height<0?e.height:0),g.scale(Math.abs(x),Math.abs(_))):(g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(x,_));const k=g.multiply(f.invert());this._nodes.forEach(S=>{var N;if(!S.getStage())return;const P=S.getParent().getAbsoluteTransform(),A=S.getTransform().copy();A.translate(S.offsetX(),S.offsetY());const M=new Fr;M.multiply(P.copy().invert()).multiply(k).multiply(P).multiply(A);const I=M.decompose();S.setAttrs(I),(N=S.getLayer())===null||N===void 0||N.batchDraw()}),this.rotation(V._getRotation(e.rotation)),this._nodes.forEach(S=>{this._fire("transform",{evt:t,target:S}),S._fire("transform",{evt:t,target:S})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(V._getRotation(t.rotation));const i=t.width,o=t.height,u=this.enabledAnchors(),d=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),x=this.find("._anchor");x.forEach(te=>{te.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:d&&u.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:g/2+f,visible:d&&u.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:d&&u.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:g/2+f,visible:d&&u.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:g/2-f,visible:d&&u.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:g/2+f,offsetY:g/2-f,visible:d&&u.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:g/2-f,visible:d&&u.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:g/2-f,offsetY:g/2-f,visible:d&&u.indexOf("bottom-right")>=0});const _=this.rotateAnchorAngle(),k=this.rotateAnchorOffset(),S=V.degToRad(_),N=Math.sin(S),P=-Math.cos(S),A=i/2,M=o/2;let I=1/0;P<0?I=Math.min(I,-M/P):P>0&&(I=Math.min(I,(o-M)/P)),N<0?I=Math.min(I,-A/N):N>0&&(I=Math.min(I,(i-A)/N));const b=A+N*I,O=M+P*I,L=V._sign(o);this._batchChangeChild(".rotater",{x:b+N*k*L,y:O+P*k*L-f*P,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(te=>te.draggable()),x:0,y:0});const X=this.anchorStyleFunc();X&&x.forEach(te=>{X(te)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),lu.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return pe.prototype.toObject.call(this)}clone(e){return pe.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}at.isTransforming=()=>e0>0;function X6(r){return r instanceof Array||V.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){Fh.indexOf(e)===-1&&V.warn("Unknown anchor name: "+e+". Available names are: "+Fh.join(", "))}),r||[]}at.prototype.className="Transformer";qt(at);j.addGetterSetter(at,"enabledAnchors",Fh,X6);j.addGetterSetter(at,"flipEnabled",!0,Ii());j.addGetterSetter(at,"resizeEnabled",!0);j.addGetterSetter(at,"anchorSize",10,me());j.addGetterSetter(at,"rotateEnabled",!0);j.addGetterSetter(at,"rotateLineVisible",!0);j.addGetterSetter(at,"rotationSnaps",[]);j.addGetterSetter(at,"rotateAnchorOffset",50,me());j.addGetterSetter(at,"rotateAnchorAngle",0,me());j.addGetterSetter(at,"rotateAnchorCursor","crosshair");j.addGetterSetter(at,"rotationSnapTolerance",5,me());j.addGetterSetter(at,"borderEnabled",!0);j.addGetterSetter(at,"anchorStroke","rgb(0, 161, 255)");j.addGetterSetter(at,"anchorStrokeWidth",1,me());j.addGetterSetter(at,"anchorFill","white");j.addGetterSetter(at,"anchorCornerRadius",0,me());j.addGetterSetter(at,"borderStroke","rgb(0, 161, 255)");j.addGetterSetter(at,"borderStrokeWidth",1,me());j.addGetterSetter(at,"borderDash");j.addGetterSetter(at,"keepRatio",!0);j.addGetterSetter(at,"shiftBehavior","default");j.addGetterSetter(at,"centeredScaling",!1);j.addGetterSetter(at,"ignoreStroke",!1);j.addGetterSetter(at,"padding",0,me());j.addGetterSetter(at,"nodes");j.addGetterSetter(at,"node");j.addGetterSetter(at,"boundBoxFunc");j.addGetterSetter(at,"anchorDragBoundFunc");j.addGetterSetter(at,"anchorStyleFunc");j.addGetterSetter(at,"shouldOverdrawWholeArea",!1);j.addGetterSetter(at,"useSingleNodeRotation",!0);j.backCompat(at,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Ks extends ce{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,xe.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Ks.prototype.className="Wedge";Ks.prototype._centroid=!0;Ks.prototype._attrsAffectingSize=["radius"];qt(Ks);j.addGetterSetter(Ks,"radius",0,me());j.addGetterSetter(Ks,"angle",0,me());j.addGetterSetter(Ks,"clockwise",!1);j.backCompat(Ks,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Um(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Q6=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],K6=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function $6(r,e){const t=r.data,i=r.width,o=r.height;let u,d,f,g,x,_,k,S,N,P,A,M,I,b,O,L,X,te,ie,K;const ye=e+e+1,ke=i-1,Ge=o-1,ve=e+1,De=ve*(ve+1)/2,Me=new Um,_e=Q6[e],le=K6[e];let ue=null,G=Me,he=null,oe=null;for(let z=1;z<ye;z++)G=G.next=new Um,z===ve&&(ue=G);G.next=Me,f=d=0;for(let z=0;z<o;z++){M=I=b=O=g=x=_=k=0,S=ve*(L=t[d]),N=ve*(X=t[d+1]),P=ve*(te=t[d+2]),A=ve*(ie=t[d+3]),g+=De*L,x+=De*X,_+=De*te,k+=De*ie,G=Me;for(let ee=0;ee<ve;ee++)G.r=L,G.g=X,G.b=te,G.a=ie,G=G.next;for(let ee=1;ee<ve;ee++)u=d+((ke<ee?ke:ee)<<2),g+=(G.r=L=t[u])*(K=ve-ee),x+=(G.g=X=t[u+1])*K,_+=(G.b=te=t[u+2])*K,k+=(G.a=ie=t[u+3])*K,M+=L,I+=X,b+=te,O+=ie,G=G.next;he=Me,oe=ue;for(let ee=0;ee<i;ee++)t[d+3]=ie=k*_e>>le,ie!==0?(ie=255/ie,t[d]=(g*_e>>le)*ie,t[d+1]=(x*_e>>le)*ie,t[d+2]=(_*_e>>le)*ie):t[d]=t[d+1]=t[d+2]=0,g-=S,x-=N,_-=P,k-=A,S-=he.r,N-=he.g,P-=he.b,A-=he.a,u=f+((u=ee+e+1)<ke?u:ke)<<2,M+=he.r=t[u],I+=he.g=t[u+1],b+=he.b=t[u+2],O+=he.a=t[u+3],g+=M,x+=I,_+=b,k+=O,he=he.next,S+=L=oe.r,N+=X=oe.g,P+=te=oe.b,A+=ie=oe.a,M-=L,I-=X,b-=te,O-=ie,oe=oe.next,d+=4;f+=i}for(let z=0;z<i;z++){I=b=O=M=x=_=k=g=0,d=z<<2,S=ve*(L=t[d]),N=ve*(X=t[d+1]),P=ve*(te=t[d+2]),A=ve*(ie=t[d+3]),g+=De*L,x+=De*X,_+=De*te,k+=De*ie,G=Me;for(let Se=0;Se<ve;Se++)G.r=L,G.g=X,G.b=te,G.a=ie,G=G.next;let ee=i;for(let Se=1;Se<=e;Se++)d=ee+z<<2,g+=(G.r=L=t[d])*(K=ve-Se),x+=(G.g=X=t[d+1])*K,_+=(G.b=te=t[d+2])*K,k+=(G.a=ie=t[d+3])*K,M+=L,I+=X,b+=te,O+=ie,G=G.next,Se<Ge&&(ee+=i);d=z,he=Me,oe=ue;for(let Se=0;Se<o;Se++)u=d<<2,t[u+3]=ie=k*_e>>le,ie>0?(ie=255/ie,t[u]=(g*_e>>le)*ie,t[u+1]=(x*_e>>le)*ie,t[u+2]=(_*_e>>le)*ie):t[u]=t[u+1]=t[u+2]=0,g-=S,x-=N,_-=P,k-=A,S-=he.r,N-=he.g,P-=he.b,A-=he.a,u=z+((u=Se+ve)<Ge?u:Ge)*i<<2,g+=M+=he.r=t[u],x+=I+=he.g=t[u+1],_+=b+=he.b=t[u+2],k+=O+=he.a=t[u+3],he=he.next,S+=L=oe.r,N+=X=oe.g,P+=te=oe.b,A+=ie=oe.a,M-=L,I-=X,b-=te,O-=ie,oe=oe.next,d+=i}}const J6=function(e){const t=Math.round(this.blurRadius());t>0&&$6(e,t)};j.addGetterSetter(pe,"blurRadius",0,me(),j.afterSetFilter);const Z6=function(r){const e=this.brightness()*255,t=r.data,i=t.length;for(let o=0;o<i;o+=4)t[o]+=e,t[o+1]+=e,t[o+2]+=e};j.addGetterSetter(pe,"brightness",0,me(),j.afterSetFilter);const e8=function(r){const e=this.brightness(),t=r.data,i=t.length;for(let o=0;o<i;o+=4)t[o]=Math.min(255,t[o]*e),t[o+1]=Math.min(255,t[o+1]*e),t[o+2]=Math.min(255,t[o+2]*e)},t8=function(r){const e=Math.pow((this.contrast()+100)/100,2),t=r.data,i=t.length;let o=150,u=150,d=150;for(let f=0;f<i;f+=4)o=t[f],u=t[f+1],d=t[f+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,u/=255,u-=.5,u*=e,u+=.5,u*=255,d/=255,d-=.5,d*=e,d+=.5,d*=255,o=o<0?0:o>255?255:o,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,t[f]=o,t[f+1]=u,t[f+2]=d};j.addGetterSetter(pe,"contrast",0,me(),j.afterSetFilter);const n8=function(r){var e,t,i,o,u,d,f,g,x;const _=r.data,k=r.width,S=r.height,N=Math.min(1,Math.max(0,(t=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:.5)),P=Math.min(1,Math.max(0,(o=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&o!==void 0?o:.5)),M=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(d=(u=this.embossDirection)===null||u===void 0?void 0:u.call(this))!==null&&d!==void 0?d:"top-left"])!==null&&f!==void 0?f:315,I=!!((x=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&x!==void 0&&x),b=N*10,O=P*255,L=M*Math.PI/180,X=Math.cos(L),te=Math.sin(L),ie=128/1020*b,K=new Uint8ClampedArray(_),ye=new Float32Array(k*S);for(let Me=0,_e=0;_e<_.length;_e+=4,Me++)ye[Me]=.2126*K[_e]+.7152*K[_e+1]+.0722*K[_e+2];const ke=[-1,0,1,-2,0,2,-1,0,1],Ge=[-1,-2,-1,0,0,0,1,2,1],ve=[-k-1,-k,-k+1,-1,0,1,k-1,k,k+1],De=Me=>Me<0?0:Me>255?255:Me;for(let Me=1;Me<S-1;Me++)for(let _e=1;_e<k-1;_e++){const le=Me*k+_e;let ue=0,G=0;ue+=ye[le+ve[0]]*ke[0],G+=ye[le+ve[0]]*Ge[0],ue+=ye[le+ve[1]]*ke[1],G+=ye[le+ve[1]]*Ge[1],ue+=ye[le+ve[2]]*ke[2],G+=ye[le+ve[2]]*Ge[2],ue+=ye[le+ve[3]]*ke[3],G+=ye[le+ve[3]]*Ge[3],ue+=ye[le+ve[5]]*ke[5],G+=ye[le+ve[5]]*Ge[5],ue+=ye[le+ve[6]]*ke[6],G+=ye[le+ve[6]]*Ge[6],ue+=ye[le+ve[7]]*ke[7],G+=ye[le+ve[7]]*Ge[7],ue+=ye[le+ve[8]]*ke[8],G+=ye[le+ve[8]]*Ge[8];const he=X*ue+te*G,oe=De(O+he*ie),z=le*4;if(I){const ee=oe-O;_[z]=De(K[z]+ee),_[z+1]=De(K[z+1]+ee),_[z+2]=De(K[z+2]+ee),_[z+3]=K[z+3]}else _[z]=_[z+1]=_[z+2]=oe,_[z+3]=K[z+3]}for(let Me=0;Me<k;Me++){let _e=Me*4,le=((S-1)*k+Me)*4;_[_e]=K[_e],_[_e+1]=K[_e+1],_[_e+2]=K[_e+2],_[_e+3]=K[_e+3],_[le]=K[le],_[le+1]=K[le+1],_[le+2]=K[le+2],_[le+3]=K[le+3]}for(let Me=1;Me<S-1;Me++){let _e=Me*k*4,le=(Me*k+(k-1))*4;_[_e]=K[_e],_[_e+1]=K[_e+1],_[_e+2]=K[_e+2],_[_e+3]=K[_e+3],_[le]=K[le],_[le+1]=K[le+1],_[le+2]=K[le+2],_[le+3]=K[le+3]}return r};j.addGetterSetter(pe,"embossStrength",.5,me(),j.afterSetFilter);j.addGetterSetter(pe,"embossWhiteLevel",.5,me(),j.afterSetFilter);j.addGetterSetter(pe,"embossDirection","top-left",void 0,j.afterSetFilter);j.addGetterSetter(pe,"embossBlend",!1,void 0,j.afterSetFilter);function vp(r,e,t,i,o){const u=t-e,d=o-i;if(u===0)return i+d/2;if(d===0)return i;let f=(r-e)/u;return f=d*f+i,f}const r8=function(r){const e=r.data,t=e.length;let i=e[0],o=i,u,d=e[1],f=d,g,x=e[2],_=x,k;const S=this.enhance();if(S===0)return;for(let O=0;O<t;O+=4)u=e[O+0],u<i?i=u:u>o&&(o=u),g=e[O+1],g<d?d=g:g>f&&(f=g),k=e[O+2],k<x?x=k:k>_&&(_=k);o===i&&(o=255,i=0),f===d&&(f=255,d=0),_===x&&(_=255,x=0);let N,P,A,M,I,b;if(S>0)N=o+S*(255-o),P=i-S*(i-0),A=f+S*(255-f),M=d-S*(d-0),I=_+S*(255-_),b=x-S*(x-0);else{const O=(o+i)*.5;N=o+S*(o-O),P=i+S*(i-O);const L=(f+d)*.5;A=f+S*(f-L),M=d+S*(d-L);const X=(_+x)*.5;I=_+S*(_-X),b=x+S*(x-X)}for(let O=0;O<t;O+=4)e[O+0]=vp(e[O+0],i,o,P,N),e[O+1]=vp(e[O+1],d,f,M,A),e[O+2]=vp(e[O+2],x,_,b,I)};j.addGetterSetter(pe,"enhance",0,me(),j.afterSetFilter);const i8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4){const o=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=o,e[i+1]=o,e[i+2]=o}};j.addGetterSetter(pe,"hue",0,me(),j.afterSetFilter);j.addGetterSetter(pe,"saturation",0,me(),j.afterSetFilter);j.addGetterSetter(pe,"luminance",0,me(),j.afterSetFilter);const s8=function(r){const e=r.data,t=e.length,i=1,o=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=i*o*Math.cos(u*Math.PI/180),g=i*o*Math.sin(u*Math.PI/180),x=.299*i+.701*f+.167*g,_=.587*i-.587*f+.33*g,k=.114*i-.114*f-.497*g,S=.299*i-.299*f-.328*g,N=.587*i+.413*f+.035*g,P=.114*i-.114*f+.293*g,A=.299*i-.3*f+1.25*g,M=.587*i-.586*f-1.05*g,I=.114*i+.886*f-.2*g;let b,O,L,X;for(let te=0;te<t;te+=4)b=e[te+0],O=e[te+1],L=e[te+2],X=e[te+3],e[te+0]=x*b+_*O+k*L+d,e[te+1]=S*b+N*O+P*L+d,e[te+2]=A*b+M*O+I*L+d,e[te+3]=X},o8=function(r){const e=r.data,t=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=i*o*Math.cos(u*Math.PI/180),f=i*o*Math.sin(u*Math.PI/180),g=.299*i+.701*d+.167*f,x=.587*i-.587*d+.33*f,_=.114*i-.114*d-.497*f,k=.299*i-.299*d-.328*f,S=.587*i+.413*d+.035*f,N=.114*i-.114*d+.293*f,P=.299*i-.3*d+1.25*f,A=.587*i-.586*d-1.05*f,M=.114*i+.886*d-.2*f;for(let I=0;I<t;I+=4){const b=e[I+0],O=e[I+1],L=e[I+2],X=e[I+3];e[I+0]=g*b+x*O+_*L,e[I+1]=k*b+S*O+N*L,e[I+2]=P*b+A*O+M*L,e[I+3]=X}};j.addGetterSetter(pe,"hue",0,me(),j.afterSetFilter);j.addGetterSetter(pe,"saturation",0,me(),j.afterSetFilter);j.addGetterSetter(pe,"value",0,me(),j.afterSetFilter);const a8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},l8=function(r,e,t){const i=r.data,o=e.data,u=r.width,d=r.height,f=t.polarCenterX||u/2,g=t.polarCenterY||d/2;let x=Math.sqrt(f*f+g*g),_=u-f,k=d-g;const S=Math.sqrt(_*_+k*k);x=S>x?S:x;const N=d,P=u,A=360/P*Math.PI/180;for(let M=0;M<P;M+=1){const I=Math.sin(M*A),b=Math.cos(M*A);for(let O=0;O<N;O+=1){_=Math.floor(f+x*O/N*b),k=Math.floor(g+x*O/N*I);let L=(k*u+_)*4;const X=i[L+0],te=i[L+1],ie=i[L+2],K=i[L+3];L=(M+O*u)*4,o[L+0]=X,o[L+1]=te,o[L+2]=ie,o[L+3]=K}}},u8=function(r,e,t){const i=r.data,o=e.data,u=r.width,d=r.height,f=t.polarCenterX||u/2,g=t.polarCenterY||d/2;let x=Math.sqrt(f*f+g*g),_=u-f,k=d-g;const S=Math.sqrt(_*_+k*k);x=S>x?S:x;const N=d,P=u,A=0;let M,I;for(_=0;_<u;_+=1)for(k=0;k<d;k+=1){const b=_-f,O=k-g,L=Math.sqrt(b*b+O*O)*N/x;let X=(Math.atan2(O,b)*180/Math.PI+360+A)%360;X=X*P/360,M=Math.floor(X),I=Math.floor(L);let te=(I*u+M)*4;const ie=i[te+0],K=i[te+1],ye=i[te+2],ke=i[te+3];te=(k*u+_)*4,o[te+0]=ie,o[te+1]=K,o[te+2]=ye,o[te+3]=ke}},c8=function(r){const e=r.width,t=r.height;let i,o,u,d,f,g,x,_,k,S,N=Math.round(this.kaleidoscopePower());const P=Math.round(this.kaleidoscopeAngle()),A=Math.floor(e*(P%360)/360);if(N<1)return;const M=V.createCanvasElement();M.width=e,M.height=t;const I=M.getContext("2d").getImageData(0,0,e,t);V.releaseCanvas(M),l8(r,I,{polarCenterX:e/2,polarCenterY:t/2});let b=e/Math.pow(2,N);for(;b<=8;)b=b*2,N-=1;b=Math.ceil(b);let O=b,L=0,X=O,te=1;for(A+b>e&&(L=O,X=0,te=-1),o=0;o<t;o+=1)for(i=L;i!==X;i+=te)u=Math.round(i+A)%e,k=(e*o+u)*4,f=I.data[k+0],g=I.data[k+1],x=I.data[k+2],_=I.data[k+3],S=(e*o+i)*4,I.data[S+0]=f,I.data[S+1]=g,I.data[S+2]=x,I.data[S+3]=_;for(o=0;o<t;o+=1)for(O=Math.floor(b),d=0;d<N;d+=1){for(i=0;i<O+1;i+=1)k=(e*o+i)*4,f=I.data[k+0],g=I.data[k+1],x=I.data[k+2],_=I.data[k+3],S=(e*o+O*2-i-1)*4,I.data[S+0]=f,I.data[S+1]=g,I.data[S+2]=x,I.data[S+3]=_;O*=2}u8(I,r,{})};j.addGetterSetter(pe,"kaleidoscopePower",2,me(),j.afterSetFilter);j.addGetterSetter(pe,"kaleidoscopeAngle",0,me(),j.afterSetFilter);function Sh(r,e,t){let i=(t*r.width+e)*4;const o=[];return o.push(r.data[i++],r.data[i++],r.data[i++],r.data[i++]),o}function Cc(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function d8(r){const e=[0,0,0];for(let t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function h8(r,e){const t=Sh(r,0,0),i=Sh(r,r.width-1,0),o=Sh(r,0,r.height-1),u=Sh(r,r.width-1,r.height-1),d=e||10;if(Cc(t,i)<d&&Cc(i,u)<d&&Cc(u,o)<d&&Cc(o,t)<d){const f=d8([i,t,u,o]),g=[];for(let x=0;x<r.width*r.height;x++){const _=Cc(f,[r.data[x*4],r.data[x*4+1],r.data[x*4+2]]);g[x]=_<d?0:255}return g}}function f8(r,e){for(let t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function p8(r,e,t){const i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let _=0;for(let k=0;k<o;k++)for(let S=0;S<o;S++){const N=f+k-u,P=g+S-u;if(N>=0&&N<t&&P>=0&&P<e){const A=N*e+P,M=i[k*o+S];_+=r[A]*M}}d[x]=_===2040?255:0}return d}function g8(r,e,t){const i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let _=0;for(let k=0;k<o;k++)for(let S=0;S<o;S++){const N=f+k-u,P=g+S-u;if(N>=0&&N<t&&P>=0&&P<e){const A=N*e+P,M=i[k*o+S];_+=r[A]*M}}d[x]=_>=1020?255:0}return d}function m8(r,e,t){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let _=0;for(let k=0;k<o;k++)for(let S=0;S<o;S++){const N=f+k-u,P=g+S-u;if(N>=0&&N<t&&P>=0&&P<e){const A=N*e+P,M=i[k*o+S];_+=r[A]*M}}d[x]=_}return d}const y8=function(r){const e=this.threshold();let t=h8(r,e);return t&&(t=p8(t,r.width,r.height),t=g8(t,r.width,r.height),t=m8(t,r.width,r.height),f8(r,t)),r};j.addGetterSetter(pe,"threshold",0,me(),j.afterSetFilter);const v8=function(r){const e=this.noise()*255,t=r.data,i=t.length,o=e/2;for(let u=0;u<i;u+=4)t[u+0]+=o-2*o*Math.random(),t[u+1]+=o-2*o*Math.random(),t[u+2]+=o-2*o*Math.random()};j.addGetterSetter(pe,"noise",.2,me(),j.afterSetFilter);const x8=function(r){let e=Math.ceil(this.pixelSize()),t=r.width,i=r.height,o=Math.ceil(t/e),u=Math.ceil(i/e),d=r.data;if(e<=0){V.error("pixelSize value can not be <= 0");return}for(let f=0;f<o;f+=1)for(let g=0;g<u;g+=1){let x=0,_=0,k=0,S=0;const N=f*e,P=N+e,A=g*e,M=A+e;let I=0;for(let b=N;b<P;b+=1)if(!(b>=t))for(let O=A;O<M;O+=1){if(O>=i)continue;const L=(t*O+b)*4;x+=d[L+0],_+=d[L+1],k+=d[L+2],S+=d[L+3],I+=1}x=x/I,_=_/I,k=k/I,S=S/I;for(let b=N;b<P;b+=1)if(!(b>=t))for(let O=A;O<M;O+=1){if(O>=i)continue;const L=(t*O+b)*4;d[L+0]=x,d[L+1]=_,d[L+2]=k,d[L+3]=S}}};j.addGetterSetter(pe,"pixelSize",8,me(),j.afterSetFilter);const _8=function(r){const e=Math.round(this.levels()*254)+1,t=r.data,i=t.length,o=255/e;for(let u=0;u<i;u+=1)t[u]=Math.floor(t[u]/o)*o};j.addGetterSetter(pe,"levels",.5,me(),j.afterSetFilter);const w8=function(r){const e=r.data,t=e.length,i=this.red(),o=this.green(),u=this.blue();for(let d=0;d<t;d+=4){const f=(.34*e[d]+.5*e[d+1]+.16*e[d+2])/255;e[d]=f*i,e[d+1]=f*o,e[d+2]=f*u,e[d+3]=e[d+3]}};j.addGetterSetter(pe,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});j.addGetterSetter(pe,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});j.addGetterSetter(pe,"blue",0,ay,j.afterSetFilter);const S8=function(r){const e=r.data,t=e.length,i=this.red(),o=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<t;f+=4){const g=1-d;e[f]=i*d+e[f]*g,e[f+1]=o*d+e[f+1]*g,e[f+2]=u*d+e[f+2]*g}};j.addGetterSetter(pe,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});j.addGetterSetter(pe,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});j.addGetterSetter(pe,"blue",0,ay,j.afterSetFilter);j.addGetterSetter(pe,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});const k8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4){const o=e[i+0],u=e[i+1],d=e[i+2];e[i+0]=Math.min(255,o*.393+u*.769+d*.189),e[i+1]=Math.min(255,o*.349+u*.686+d*.168),e[i+2]=Math.min(255,o*.272+u*.534+d*.131)}},C8=function(r){const t=r.data;for(let i=0;i<t.length;i+=4){const o=t[i],u=t[i+1],d=t[i+2];.2126*o+.7152*u+.0722*d>=128&&(t[i]=255-o,t[i+1]=255-u,t[i+2]=255-d)}return r},E8=function(r){const e=this.threshold()*255,t=r.data,i=t.length;for(let o=0;o<i;o+=1)t[o]=t[o]<e?0:255};j.addGetterSetter(pe,"threshold",.5,me(),j.afterSetFilter);Ha.Util._assign(Ha,{Arc:Xs,Arrow:Xa,Circle:hu,Ellipse:Jo,Image:Hr,Label:D0,Tag:Qa,Line:Qs,Path:ui,Rect:qc,RegularPolygon:Zo,Ring:Ka,Sprite:cs,Star:ea,Text:Dt,TextPath:kn,Transformer:at,Wedge:Ks,Filters:{Blur:J6,Brightness:e8,Brighten:Z6,Contrast:t8,Emboss:n8,Enhance:r8,Grayscale:i8,HSL:s8,HSV:o8,Invert:a8,Kaleidoscope:c8,Mask:y8,Noise:v8,Pixelate:x8,Posterize:_8,RGB:w8,RGBA:S8,Sepia:k8,Solarize:C8,Threshold:E8}});var xp={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p,Wm;function P8(){return Wm||(Wm=1,_p=function(e){var t={},i=Wh(),o=i0(),u=Object.assign;function d(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),P=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),X=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}function ie(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case I:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case P:return(a.displayName||"Context")+".Consumer";case N:return(a._context.displayName||"Context")+".Provider";case A:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case b:return l=a.displayName||null,l!==null?l:ie(a.type)||"Memo";case O:l=a._payload,a=a._init;try{return ie(a(l))}catch{}}return null}function K(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(l);case 8:return l===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ye(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function ke(a){if(ye(a)!==a)throw Error(d(188))}function Ge(a){var l=a.alternate;if(!l){if(l=ye(a),l===null)throw Error(d(188));return l!==a?null:a}for(var h=a,m=l;;){var v=h.return;if(v===null)break;var C=v.alternate;if(C===null){if(m=v.return,m!==null){h=m;continue}break}if(v.child===C.child){for(C=v.child;C;){if(C===h)return ke(v),a;if(C===m)return ke(v),l;C=C.sibling}throw Error(d(188))}if(h.return!==m.return)h=v,m=C;else{for(var R=!1,W=v.child;W;){if(W===h){R=!0,h=v,m=C;break}if(W===m){R=!0,m=v,h=C;break}W=W.sibling}if(!R){for(W=C.child;W;){if(W===h){R=!0,h=C,m=v;break}if(W===m){R=!0,m=C,h=v;break}W=W.sibling}if(!R)throw Error(d(189))}}if(h.alternate!==m)throw Error(d(190))}if(h.tag!==3)throw Error(d(188));return h.stateNode.current===h?a:l}function ve(a){return a=Ge(a),a!==null?De(a):null}function De(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=De(a);if(l!==null)return l;a=a.sibling}return null}function Me(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var l=Me(a);if(l!==null)return l}a=a.sibling}return null}var _e=Array.isArray,le=e.getPublicInstance,ue=e.getRootHostContext,G=e.getChildHostContext,he=e.prepareForCommit,oe=e.resetAfterCommit,z=e.createInstance,ee=e.appendInitialChild,Se=e.finalizeInitialChildren,je=e.prepareUpdate,Ye=e.shouldSetTextContent,Xe=e.createTextInstance,Ue=e.scheduleTimeout,et=e.cancelTimeout,B=e.noTimeout,Y=e.isPrimaryRenderer,re=e.supportsMutation,We=e.supportsPersistence,Re=e.supportsHydration,He=e.getInstanceFromNode,Ct=e.preparePortalMount,gt=e.getCurrentEventPriority,Cn=e.detachDeletedInstance,jt=e.supportsMicrotasks,Ut=e.scheduleMicrotask,Et=e.supportsTestSelectors,fn=e.findFiberRoot,Nr=e.getBoundingRect,Tr=e.getTextContent,Vr=e.isHiddenSubtree,na=e.matchAccessibilityRole,Ai=e.setFocusIfFocusable,ds=e.setupIntersectionObserver,gr=e.appendChild,$a=e.appendChildToContainer,hs=e.commitTextUpdate,ra=e.commitMount,tf=e.commitUpdate,Yc=e.insertBefore,Xc=e.insertInContainerBefore,nf=e.removeChild,gu=e.removeChildFromContainer,Ja=e.resetTextContent,mu=e.hideInstance,yu=e.hideTextInstance,vu=e.unhideInstance,Js=e.unhideTextInstance,Zs=e.clearContainer,Qc=e.cloneInstance,xu=e.createContainerChildSet,_u=e.appendChildToContainerChildSet,Kc=e.finalizeContainerChildren,Za=e.replaceContainerChildren,el=e.cloneHiddenInstance,wu=e.cloneHiddenTextInstance,ia=e.canHydrateInstance,Su=e.canHydrateTextInstance,sa=e.canHydrateSuspenseInstance,$c=e.isSuspenseInstancePending,fs=e.isSuspenseInstanceFallback,tl=e.getSuspenseInstanceFallbackErrorDetails,nl=e.registerSuspenseInstanceRetry,eo=e.getNextHydratableSibling,rf=e.getFirstHydratableChild,sf=e.getFirstHydratableChildWithinContainer,of=e.getFirstHydratableChildWithinSuspenseInstance,ps=e.hydrateInstance,Jc=e.hydrateTextInstance,Zc=e.hydrateSuspenseInstance,af=e.getNextHydratableInstanceAfterSuspenseInstance,ed=e.commitHydratedContainer,td=e.commitHydratedSuspenseInstance,nd=e.clearSuspenseBoundary,rd=e.clearSuspenseBoundaryFromContainer,lf=e.shouldDeleteUnhydratedTailInstances,uf=e.didNotMatchHydratedContainerTextInstance,Wt=e.didNotMatchHydratedTextInstance,ku;function gs(a){if(ku===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);ku=l&&l[1]||""}return`
`+ku+a}var rl=!1;function to(a,l){if(!a||rl)return"";rl=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var m=fe}Reflect.construct(a,[],l)}else{try{l.call()}catch(fe){m=fe}a.call(l.prototype)}else{try{throw Error()}catch(fe){m=fe}a()}}catch(fe){if(fe&&m&&typeof fe.stack=="string"){for(var v=fe.stack.split(`
`),C=m.stack.split(`
`),R=v.length-1,W=C.length-1;1<=R&&0<=W&&v[R]!==C[W];)W--;for(;1<=R&&0<=W;R--,W--)if(v[R]!==C[W]){if(R!==1||W!==1)do if(R--,W--,0>W||v[R]!==C[W]){var Z=`
`+v[R].replace(" at new "," at ");return a.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",a.displayName)),Z}while(1<=R&&0<=W);break}}}finally{rl=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?gs(a):""}var cf=Object.prototype.hasOwnProperty,il=[],ci=-1;function pn(a){return{current:a}}function Pt(a){0>ci||(a.current=il[ci],il[ci]=null,ci--)}function nt(a,l){ci++,il[ci]=a.current,a.current=l}var Oi={},En=pn(Oi),Vn=pn(!1),qr=Oi;function di(a,l){var h=a.type.contextTypes;if(!h)return Oi;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var v={},C;for(C in h)v[C]=l[C];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function on(a){return a=a.childContextTypes,a!=null}function ms(){Pt(Vn),Pt(En)}function id(a,l,h){if(En.current!==Oi)throw Error(d(168));nt(En,l),nt(Vn,h)}function sd(a,l,h){var m=a.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var v in m)if(!(v in l))throw Error(d(108,K(a)||"Unknown",v));return u({},h,m)}function no(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Oi,qr=En.current,nt(En,a),nt(Vn,Vn.current),!0}function Cu(a,l,h){var m=a.stateNode;if(!m)throw Error(d(169));h?(a=sd(a,l,qr),m.__reactInternalMemoizedMergedChildContext=a,Pt(Vn),Pt(En),nt(En,a)):Pt(Vn),nt(Vn,h)}var er=Math.clz32?Math.clz32:Eu,oa=Math.log,df=Math.LN2;function Eu(a){return a>>>=0,a===0?32:31-(oa(a)/df|0)|0}var ut=64,aa=4194304;function ro(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function io(a,l){var h=a.pendingLanes;if(h===0)return 0;var m=0,v=a.suspendedLanes,C=a.pingedLanes,R=h&268435455;if(R!==0){var W=R&~v;W!==0?m=ro(W):(C&=R,C!==0&&(m=ro(C)))}else R=h&~v,R!==0?m=ro(R):C!==0&&(m=ro(C));if(m===0)return 0;if(l!==0&&l!==m&&(l&v)===0&&(v=m&-m,C=l&-l,v>=C||v===16&&(C&4194240)!==0))return l;if((m&4)!==0&&(m|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=m;0<l;)h=31-er(l),v=1<<h,m|=a[h],l&=~v;return m}function od(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ad(a,l){for(var h=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,C=a.pendingLanes;0<C;){var R=31-er(C),W=1<<R,Z=v[R];Z===-1?((W&h)===0||(W&m)!==0)&&(v[R]=od(W,l)):Z<=l&&(a.expiredLanes|=W),C&=~W}}function sl(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function ol(){var a=ut;return ut<<=1,(ut&4194240)===0&&(ut=64),a}function so(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function mr(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-er(l),a[l]=h}function Li(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<h;){var v=31-er(h),C=1<<v;l[v]=0,m[v]=-1,a[v]=-1,h&=~C}}function Yr(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var m=31-er(h),v=1<<m;v&l|a[m]&l&&(a[m]|=l),h&=~v}}var rt=0;function oo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Xr=o.unstable_scheduleCallback,ld=o.unstable_cancelCallback,ud=o.unstable_shouldYield,la=o.unstable_requestPaint,an=o.unstable_now,al=o.unstable_ImmediatePriority,ll=o.unstable_UserBlockingPriority,ul=o.unstable_NormalPriority,hf=o.unstable_IdlePriority,Di=null,qn=null;function ao(a){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Di,a,void 0,(a.current.flags&128)===128)}catch{}}function cl(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var br=typeof Object.is=="function"?Object.is:cl,hi=null,lo=!1,uo=!1;function dl(a){hi===null?hi=[a]:hi.push(a)}function cd(a){lo=!0,dl(a)}function gn(){if(!uo&&hi!==null){uo=!0;var a=0,l=rt;try{var h=hi;for(rt=1;a<h.length;a++){var m=h[a];do m=m(!0);while(m!==null)}hi=null,lo=!1}catch(v){throw hi!==null&&(hi=hi.slice(a+1)),Xr(al,gn),v}finally{rt=l,uo=!1}}return null}var ji=[],fi=0,ua=null,ys=0,On=[],tr=0,Jt=null,Yn=1,Rr="";function Mr(a,l){ji[fi++]=ys,ji[fi++]=ua,ua=a,ys=l}function dd(a,l,h){On[tr++]=Yn,On[tr++]=Rr,On[tr++]=Jt,Jt=a;var m=Yn;a=Rr;var v=32-er(m)-1;m&=~(1<<v),h+=1;var C=32-er(l)+v;if(30<C){var R=v-v%5;C=(m&(1<<R)-1).toString(32),m>>=R,v-=R,Yn=1<<32-er(l)+v|h<<v|m,Rr=C+a}else Yn=1<<C|h<<v|m,Rr=a}function ca(a){a.return!==null&&(Mr(a,1),dd(a,1,0))}function da(a){for(;a===ua;)ua=ji[--fi],ji[fi]=null,ys=ji[--fi],ji[fi]=null;for(;a===Jt;)Jt=On[--tr],On[tr]=null,Rr=On[--tr],On[tr]=null,Yn=On[--tr],On[tr]=null}var mn=null,Ln=null,Nt=!1,ha=!1,Ir=null;function hd(a,l){var h=dr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function hl(a,l){switch(a.tag){case 5:return l=ia(l,a.type,a.pendingProps),l!==null?(a.stateNode=l,mn=a,Ln=rf(l),!0):!1;case 6:return l=Su(l,a.pendingProps),l!==null?(a.stateNode=l,mn=a,Ln=null,!0):!1;case 13:if(l=sa(l),l!==null){var h=Jt!==null?{id:Yn,overflow:Rr}:null;return a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=dr(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,mn=a,Ln=null,!0}return!1;default:return!1}}function Pu(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Nu(a){if(Nt){var l=Ln;if(l){var h=l;if(!hl(a,l)){if(Pu(a))throw Error(d(418));l=eo(h);var m=mn;l&&hl(a,l)?hd(m,h):(a.flags=a.flags&-4097|2,Nt=!1,mn=a)}}else{if(Pu(a))throw Error(d(418));a.flags=a.flags&-4097|2,Nt=!1,mn=a}}}function fd(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;mn=a}function fl(a){if(!Re||a!==mn)return!1;if(!Nt)return fd(a),Nt=!0,!1;if(a.tag!==3&&(a.tag!==5||lf(a.type)&&!Ye(a.type,a.memoizedProps))){var l=Ln;if(l){if(Pu(a))throw pd(),Error(d(418));for(;l;)hd(a,l),l=eo(l)}}if(fd(a),a.tag===13){if(!Re)throw Error(d(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(d(317));Ln=af(a)}else Ln=mn?eo(a.stateNode):null;return!0}function pd(){for(var a=Ln;a;)a=eo(a)}function vs(){Re&&(Ln=mn=null,ha=Nt=!1)}function Tu(a){Ir===null?Ir=[a]:Ir.push(a)}var ff=f.ReactCurrentBatchConfig;function pl(a,l){if(br(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var v=h[m];if(!cf.call(l,v)||!br(a[v],l[v]))return!1}return!0}function pf(a){switch(a.tag){case 5:return gs(a.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return a=to(a.type,!1),a;case 11:return a=to(a.type.render,!1),a;case 1:return a=to(a.type,!0),a;default:return""}}function xs(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(d(309));var m=h.stateNode}if(!m)throw Error(d(147,a));var v=m,C=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===C?l.ref:(l=function(R){var W=v.refs;R===null?delete W[C]:W[C]=R},l._stringRef=C,l)}if(typeof a!="string")throw Error(d(284));if(!h._owner)throw Error(d(290,a))}return a}function gl(a,l){throw a=Object.prototype.toString.call(l),Error(d(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function gd(a){var l=a._init;return l(a._payload)}function md(a){function l($,H){if(a){var ne=$.deletions;ne===null?($.deletions=[H],$.flags|=16):ne.push(H)}}function h($,H){if(!a)return null;for(;H!==null;)l($,H),H=H.sibling;return null}function m($,H){for($=new Map;H!==null;)H.key!==null?$.set(H.key,H):$.set(H.index,H),H=H.sibling;return $}function v($,H){return $=ts($,H),$.index=0,$.sibling=null,$}function C($,H,ne){return $.index=ne,a?(ne=$.alternate,ne!==null?(ne=ne.index,ne<H?($.flags|=2,H):ne):($.flags|=2,H)):($.flags|=1048576,H)}function R($){return a&&$.alternate===null&&($.flags|=2),$}function W($,H,ne,Ee){return H===null||H.tag!==6?(H=Lo(ne,$.mode,Ee),H.return=$,H):(H=v(H,ne),H.return=$,H)}function Z($,H,ne,Ee){var Be=ne.type;return Be===_?Te($,H,ne.props.children,Ee,ne.key):H!==null&&(H.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&gd(Be)===H.type)?(Ee=v(H,ne.props),Ee.ref=xs($,H,ne),Ee.return=$,Ee):(Ee=Yl(ne.type,ne.key,ne.props,null,$.mode,Ee),Ee.ref=xs($,H,ne),Ee.return=$,Ee)}function fe($,H,ne,Ee){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=Xl(ne,$.mode,Ee),H.return=$,H):(H=v(H,ne.children||[]),H.return=$,H)}function Te($,H,ne,Ee,Be){return H===null||H.tag!==7?(H=xn(ne,$.mode,Ee,Be),H.return=$,H):(H=v(H,ne),H.return=$,H)}function Ke($,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Lo(""+H,$.mode,ne),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case g:return ne=Yl(H.type,H.key,H.props,null,$.mode,ne),ne.ref=xs($,null,H),ne.return=$,ne;case x:return H=Xl(H,$.mode,ne),H.return=$,H;case O:var Ee=H._init;return Ke($,Ee(H._payload),ne)}if(_e(H)||te(H))return H=xn(H,$.mode,ne,null),H.return=$,H;gl($,H)}return null}function Ce($,H,ne,Ee){var Be=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return Be!==null?null:W($,H,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===Be?Z($,H,ne,Ee):null;case x:return ne.key===Be?fe($,H,ne,Ee):null;case O:return Be=ne._init,Ce($,H,Be(ne._payload),Ee)}if(_e(ne)||te(ne))return Be!==null?null:Te($,H,ne,Ee,null);gl($,ne)}return null}function kt($,H,ne,Ee,Be){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return $=$.get(ne)||null,W(H,$,""+Ee,Be);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case g:return $=$.get(Ee.key===null?ne:Ee.key)||null,Z(H,$,Ee,Be);case x:return $=$.get(Ee.key===null?ne:Ee.key)||null,fe(H,$,Ee,Be);case O:var Ze=Ee._init;return kt($,H,ne,Ze(Ee._payload),Be)}if(_e(Ee)||te(Ee))return $=$.get(ne)||null,Te(H,$,Ee,Be,null);gl(H,Ee)}return null}function ft($,H,ne,Ee){for(var Be=null,Ze=null,$e=H,ot=H=0,rn=null;$e!==null&&ot<ne.length;ot++){$e.index>ot?(rn=$e,$e=null):rn=$e.sibling;var st=Ce($,$e,ne[ot],Ee);if(st===null){$e===null&&($e=rn);break}a&&$e&&st.alternate===null&&l($,$e),H=C(st,H,ot),Ze===null?Be=st:Ze.sibling=st,Ze=st,$e=rn}if(ot===ne.length)return h($,$e),Nt&&Mr($,ot),Be;if($e===null){for(;ot<ne.length;ot++)$e=Ke($,ne[ot],Ee),$e!==null&&(H=C($e,H,ot),Ze===null?Be=$e:Ze.sibling=$e,Ze=$e);return Nt&&Mr($,ot),Be}for($e=m($,$e);ot<ne.length;ot++)rn=kt($e,$,ot,ne[ot],Ee),rn!==null&&(a&&rn.alternate!==null&&$e.delete(rn.key===null?ot:rn.key),H=C(rn,H,ot),Ze===null?Be=rn:Ze.sibling=rn,Ze=rn);return a&&$e.forEach(function(Mn){return l($,Mn)}),Nt&&Mr($,ot),Be}function Gn($,H,ne,Ee){var Be=te(ne);if(typeof Be!="function")throw Error(d(150));if(ne=Be.call(ne),ne==null)throw Error(d(151));for(var Ze=Be=null,$e=H,ot=H=0,rn=null,st=ne.next();$e!==null&&!st.done;ot++,st=ne.next()){$e.index>ot?(rn=$e,$e=null):rn=$e.sibling;var Mn=Ce($,$e,st.value,Ee);if(Mn===null){$e===null&&($e=rn);break}a&&$e&&Mn.alternate===null&&l($,$e),H=C(Mn,H,ot),Ze===null?Be=Mn:Ze.sibling=Mn,Ze=Mn,$e=rn}if(st.done)return h($,$e),Nt&&Mr($,ot),Be;if($e===null){for(;!st.done;ot++,st=ne.next())st=Ke($,st.value,Ee),st!==null&&(H=C(st,H,ot),Ze===null?Be=st:Ze.sibling=st,Ze=st);return Nt&&Mr($,ot),Be}for($e=m($,$e);!st.done;ot++,st=ne.next())st=kt($e,$,ot,st.value,Ee),st!==null&&(a&&st.alternate!==null&&$e.delete(st.key===null?ot:st.key),H=C(st,H,ot),Ze===null?Be=st:Ze.sibling=st,Ze=st);return a&&$e.forEach(function(xf){return l($,xf)}),Nt&&Mr($,ot),Be}function ri($,H,ne,Ee){if(typeof ne=="object"&&ne!==null&&ne.type===_&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var Be=ne.key,Ze=H;Ze!==null;){if(Ze.key===Be){if(Be=ne.type,Be===_){if(Ze.tag===7){h($,Ze.sibling),H=v(Ze,ne.props.children),H.return=$,$=H;break e}}else if(Ze.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&gd(Be)===Ze.type){h($,Ze.sibling),H=v(Ze,ne.props),H.ref=xs($,Ze,ne),H.return=$,$=H;break e}h($,Ze);break}else l($,Ze);Ze=Ze.sibling}ne.type===_?(H=xn(ne.props.children,$.mode,Ee,ne.key),H.return=$,$=H):(Ee=Yl(ne.type,ne.key,ne.props,null,$.mode,Ee),Ee.ref=xs($,H,ne),Ee.return=$,$=Ee)}return R($);case x:e:{for(Ze=ne.key;H!==null;){if(H.key===Ze)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){h($,H.sibling),H=v(H,ne.children||[]),H.return=$,$=H;break e}else{h($,H);break}else l($,H);H=H.sibling}H=Xl(ne,$.mode,Ee),H.return=$,$=H}return R($);case O:return Ze=ne._init,ri($,H,Ze(ne._payload),Ee)}if(_e(ne))return ft($,H,ne,Ee);if(te(ne))return Gn($,H,ne,Ee);gl($,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,H!==null&&H.tag===6?(h($,H.sibling),H=v(H,ne),H.return=$,$=H):(h($,H),H=Lo(ne,$.mode,Ee),H.return=$,$=H),R($)):h($,H)}return ri}var _s=md(!0),yd=md(!1),ml=pn(null),yl=null,co=null,bu=null;function Ru(){bu=co=yl=null}function vd(a,l,h){Y?(nt(ml,l._currentValue),l._currentValue=h):(nt(ml,l._currentValue2),l._currentValue2=h)}function fa(a){var l=ml.current;Pt(ml),Y?a._currentValue=l:a._currentValue2=l}function ws(a,l,h){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===h)break;a=a.return}}function ho(a,l){yl=a,bu=co=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(en=!0),a.firstContext=null)}function nr(a){var l=Y?a._currentValue:a._currentValue2;if(bu!==a)if(a={context:a,memoizedValue:l,next:null},co===null){if(yl===null)throw Error(d(308));co=a,yl.dependencies={lanes:0,firstContext:a}}else co=co.next=a;return l}var zi=null;function vl(a){zi===null?zi=[a]:zi.push(a)}function Mu(a,l,h,m){var v=l.interleaved;return v===null?(h.next=h,vl(l)):(h.next=v.next,v.next=h),l.interleaved=h,Ar(a,m)}function Ar(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var rr=!1;function Iu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xd(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function pi(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function gi(a,l,h){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Je&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,Ar(a,h)}return v=m.interleaved,v===null?(l.next=l,vl(m)):(l.next=v.next,v.next=l),m.interleaved=l,Ar(a,h)}function pa(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,Yr(a,h)}}function fo(a,l){var h=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var v=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var R={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};C===null?v=C=R:C=C.next=R,h=h.next}while(h!==null);C===null?v=C=l:C=C.next=l}else v=C=l;h={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:C,shared:m.shared,effects:m.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function Fi(a,l,h,m){var v=a.updateQueue;rr=!1;var C=v.firstBaseUpdate,R=v.lastBaseUpdate,W=v.shared.pending;if(W!==null){v.shared.pending=null;var Z=W,fe=Z.next;Z.next=null,R===null?C=fe:R.next=fe,R=Z;var Te=a.alternate;Te!==null&&(Te=Te.updateQueue,W=Te.lastBaseUpdate,W!==R&&(W===null?Te.firstBaseUpdate=fe:W.next=fe,Te.lastBaseUpdate=Z))}if(C!==null){var Ke=v.baseState;R=0,Te=fe=Z=null,W=C;do{var Ce=W.lane,kt=W.eventTime;if((m&Ce)===Ce){Te!==null&&(Te=Te.next={eventTime:kt,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ft=a,Gn=W;switch(Ce=l,kt=h,Gn.tag){case 1:if(ft=Gn.payload,typeof ft=="function"){Ke=ft.call(kt,Ke,Ce);break e}Ke=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=Gn.payload,Ce=typeof ft=="function"?ft.call(kt,Ke,Ce):ft,Ce==null)break e;Ke=u({},Ke,Ce);break e;case 2:rr=!0}}W.callback!==null&&W.lane!==0&&(a.flags|=64,Ce=v.effects,Ce===null?v.effects=[W]:Ce.push(W))}else kt={eventTime:kt,lane:Ce,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Te===null?(fe=Te=kt,Z=Ke):Te=Te.next=kt,R|=Ce;if(W=W.next,W===null){if(W=v.shared.pending,W===null)break;Ce=W,W=Ce.next,Ce.next=null,v.lastBaseUpdate=Ce,v.shared.pending=null}}while(!0);if(Te===null&&(Z=Ke),v.baseState=Z,v.firstBaseUpdate=fe,v.lastBaseUpdate=Te,l=v.shared.interleaved,l!==null){v=l;do R|=v.lane,v=v.next;while(v!==l)}else C===null&&(v.shared.lanes=0);_i|=R,a.lanes=R,a.memoizedState=Ke}}function _d(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],v=m.callback;if(v!==null){if(m.callback=null,m=h,typeof v!="function")throw Error(d(191,v));v.call(m)}}}var Bi={},yr=pn(Bi),po=pn(Bi),Gi=pn(Bi);function vr(a){if(a===Bi)throw Error(d(174));return a}function xl(a,l){nt(Gi,l),nt(po,a),nt(yr,Bi),a=ue(l),Pt(yr),nt(yr,a)}function Ss(){Pt(yr),Pt(po),Pt(Gi)}function Au(a){var l=vr(Gi.current),h=vr(yr.current);l=G(h,a.type,l),h!==l&&(nt(po,a),nt(yr,l))}function Ou(a){po.current===a&&(Pt(yr),Pt(po))}var zt=pn(0);function _l(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||$c(h)||fs(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Lu=[];function Du(){for(var a=0;a<Lu.length;a++){var l=Lu[a];Y?l._workInProgressVersionPrimary=null:l._workInProgressVersionSecondary=null}Lu.length=0}var Xn=f.ReactCurrentDispatcher,ks=f.ReactCurrentBatchConfig,Ui=0,Mt=null,Yt=null,Zt=null,go=!1,ga=!1,ma=0,mo=0;function ln(){throw Error(d(321))}function Cs(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!br(a[h],l[h]))return!1;return!0}function ya(a,l,h,m,v,C){if(Ui=C,Mt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Xn.current=a===null||a.memoizedState===null?qu:Yu,a=h(m,v),ga){C=0;do{if(ga=!1,ma=0,25<=C)throw Error(d(301));C+=1,Zt=Yt=null,l.updateQueue=null,Xn.current=Xu,a=h(m,v)}while(ga)}if(Xn.current=bs,l=Yt!==null&&Yt.next!==null,Ui=0,Zt=Yt=Mt=null,go=!1,l)throw Error(d(300));return a}function wl(){var a=ma!==0;return ma=0,a}function ir(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Mt.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function yn(){if(Yt===null){var a=Mt.alternate;a=a!==null?a.memoizedState:null}else a=Yt.next;var l=Zt===null?Mt.memoizedState:Zt.next;if(l!==null)Zt=l,Yt=a;else{if(a===null)throw Error(d(310));Yt=a,a={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Zt===null?Mt.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function Es(a,l){return typeof l=="function"?l(a):l}function Sl(a){var l=yn(),h=l.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=a;var m=Yt,v=m.baseQueue,C=h.pending;if(C!==null){if(v!==null){var R=v.next;v.next=C.next,C.next=R}m.baseQueue=v=C,h.pending=null}if(v!==null){C=v.next,m=m.baseState;var W=R=null,Z=null,fe=C;do{var Te=fe.lane;if((Ui&Te)===Te)Z!==null&&(Z=Z.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),m=fe.hasEagerState?fe.eagerState:a(m,fe.action);else{var Ke={lane:Te,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};Z===null?(W=Z=Ke,R=m):Z=Z.next=Ke,Mt.lanes|=Te,_i|=Te}fe=fe.next}while(fe!==null&&fe!==C);Z===null?R=m:Z.next=W,br(m,l.memoizedState)||(en=!0),l.memoizedState=m,l.baseState=R,l.baseQueue=Z,h.lastRenderedState=m}if(a=h.interleaved,a!==null){v=a;do C=v.lane,Mt.lanes|=C,_i|=C,v=v.next;while(v!==a)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function yo(a){var l=yn(),h=l.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=a;var m=h.dispatch,v=h.pending,C=l.memoizedState;if(v!==null){h.pending=null;var R=v=v.next;do C=a(C,R.action),R=R.next;while(R!==v);br(C,l.memoizedState)||(en=!0),l.memoizedState=C,l.baseQueue===null&&(l.baseState=C),h.lastRenderedState=C}return[C,m]}function ju(){}function zu(a,l){var h=Mt,m=yn(),v=l(),C=!br(m.memoizedState,v);if(C&&(m.memoizedState=v,en=!0),m=m.queue,El(Gu.bind(null,h,m,a),[a]),m.getSnapshot!==l||C||Zt!==null&&Zt.memoizedState.tag&1){if(h.flags|=2048,Ps(9,Bu.bind(null,h,m,v,l),void 0,null),xt===null)throw Error(d(349));(Ui&30)!==0||Fu(h,l,v)}return v}function Fu(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function Bu(a,l,h,m){l.value=h,l.getSnapshot=m,Uu(l)&&mi(a)}function Gu(a,l,h){return h(function(){Uu(l)&&mi(a)})}function Uu(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!br(a,h)}catch{return!0}}function mi(a){var l=Ar(a,1);l!==null&&bn(l,a,1,-1)}function kl(a){var l=ir();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:a},l.queue=a,a=a.dispatch=gf.bind(null,Mt,a),[l.memoizedState,a]}function Ps(a,l,h,m){return a={tag:a,create:l,destroy:h,deps:m,next:null},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(m=h.next,h.next=a,a.next=m,l.lastEffect=a)),a}function wd(){return yn().memoizedState}function Cl(a,l,h,m){var v=ir();Mt.flags|=a,v.memoizedState=Ps(1|l,h,void 0,m===void 0?null:m)}function Wi(a,l,h,m){var v=yn();m=m===void 0?null:m;var C=void 0;if(Yt!==null){var R=Yt.memoizedState;if(C=R.destroy,m!==null&&Cs(m,R.deps)){v.memoizedState=Ps(l,h,C,m);return}}Mt.flags|=a,v.memoizedState=Ps(1|l,h,C,m)}function Sd(a,l){return Cl(8390656,8,a,l)}function El(a,l){return Wi(2048,8,a,l)}function Wu(a,l){return Wi(4,2,a,l)}function _t(a,l){return Wi(4,4,a,l)}function Pl(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function va(a,l,h){return h=h!=null?h.concat([a]):null,Wi(4,4,Pl.bind(null,l,a),h)}function Ns(){}function Hu(a,l){var h=yn();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&Cs(l,m[1])?m[0]:(h.memoizedState=[a,l],a)}function Nl(a,l){var h=yn();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&Cs(l,m[1])?m[0]:(a=a(),h.memoizedState=[a,l],a)}function vo(a,l,h){return(Ui&21)===0?(a.baseState&&(a.baseState=!1,en=!0),a.memoizedState=h):(br(h,l)||(h=ol(),Mt.lanes|=h,_i|=h,a.baseState=!0),l)}function Tl(a,l){var h=rt;rt=h!==0&&4>h?h:4,a(!0);var m=ks.transition;ks.transition={};try{a(!1),l()}finally{rt=h,ks.transition=m}}function Ts(){return yn().memoizedState}function kd(a,l,h){var m=nn(a);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},Cd(a))Vu(l,h);else if(h=Mu(a,l,h,m),h!==null){var v=Tt();bn(h,a,m,v),xa(h,l,m)}}function gf(a,l,h){var m=nn(a),v={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(Cd(a))Vu(l,v);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=l.lastRenderedReducer,C!==null))try{var R=l.lastRenderedState,W=C(R,h);if(v.hasEagerState=!0,v.eagerState=W,br(W,R)){var Z=l.interleaved;Z===null?(v.next=v,vl(l)):(v.next=Z.next,Z.next=v),l.interleaved=v;return}}catch{}finally{}h=Mu(a,l,v,m),h!==null&&(v=Tt(),bn(h,a,m,v),xa(h,l,m))}}function Cd(a){var l=a.alternate;return a===Mt||l!==null&&l===Mt}function Vu(a,l){ga=go=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function xa(a,l,h){if((h&4194240)!==0){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,Yr(a,h)}}var bs={readContext:nr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},qu={readContext:nr,useCallback:function(a,l){return ir().memoizedState=[a,l===void 0?null:l],a},useContext:nr,useEffect:Sd,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,Cl(4194308,4,Pl.bind(null,l,a),h)},useLayoutEffect:function(a,l){return Cl(4194308,4,a,l)},useInsertionEffect:function(a,l){return Cl(4,2,a,l)},useMemo:function(a,l){var h=ir();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var m=ir();return l=h!==void 0?h(l):l,m.memoizedState=m.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},m.queue=a,a=a.dispatch=kd.bind(null,Mt,a),[m.memoizedState,a]},useRef:function(a){var l=ir();return a={current:a},l.memoizedState=a},useState:kl,useDebugValue:Ns,useDeferredValue:function(a){return ir().memoizedState=a},useTransition:function(){var a=kl(!1),l=a[0];return a=Tl.bind(null,a[1]),ir().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var m=Mt,v=ir();if(Nt){if(h===void 0)throw Error(d(407));h=h()}else{if(h=l(),xt===null)throw Error(d(349));(Ui&30)!==0||Fu(m,l,h)}v.memoizedState=h;var C={value:h,getSnapshot:l};return v.queue=C,Sd(Gu.bind(null,m,C,a),[a]),m.flags|=2048,Ps(9,Bu.bind(null,m,C,h,l),void 0,null),h},useId:function(){var a=ir(),l=xt.identifierPrefix;if(Nt){var h=Rr,m=Yn;h=(m&~(1<<32-er(m)-1)).toString(32)+h,l=":"+l+"R"+h,h=ma++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=mo++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Yu={readContext:nr,useCallback:Hu,useContext:nr,useEffect:El,useImperativeHandle:va,useInsertionEffect:Wu,useLayoutEffect:_t,useMemo:Nl,useReducer:Sl,useRef:wd,useState:function(){return Sl(Es)},useDebugValue:Ns,useDeferredValue:function(a){var l=yn();return vo(l,Yt.memoizedState,a)},useTransition:function(){var a=Sl(Es)[0],l=yn().memoizedState;return[a,l]},useMutableSource:ju,useSyncExternalStore:zu,useId:Ts,unstable_isNewReconciler:!1},Xu={readContext:nr,useCallback:Hu,useContext:nr,useEffect:El,useImperativeHandle:va,useInsertionEffect:Wu,useLayoutEffect:_t,useMemo:Nl,useReducer:yo,useRef:wd,useState:function(){return yo(Es)},useDebugValue:Ns,useDeferredValue:function(a){var l=yn();return Yt===null?l.memoizedState=a:vo(l,Yt.memoizedState,a)},useTransition:function(){var a=yo(Es)[0],l=yn().memoizedState;return[a,l]},useMutableSource:ju,useSyncExternalStore:zu,useId:Ts,unstable_isNewReconciler:!1};function sr(a,l){if(a&&a.defaultProps){l=u({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function Qu(a,l,h,m){l=a.memoizedState,h=h(m,l),h=h==null?l:u({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var _a={isMounted:function(a){return(a=a._reactInternals)?ye(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var m=Tt(),v=nn(a),C=pi(m,v);C.payload=l,h!=null&&(C.callback=h),l=gi(a,C,v),l!==null&&(bn(l,a,v,m),pa(l,a,v))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var m=Tt(),v=nn(a),C=pi(m,v);C.tag=1,C.payload=l,h!=null&&(C.callback=h),l=gi(a,C,v),l!==null&&(bn(l,a,v,m),pa(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Tt(),m=nn(a),v=pi(h,m);v.tag=2,l!=null&&(v.callback=l),l=gi(a,v,m),l!==null&&(bn(l,a,m,h),pa(l,a,m))}};function Ed(a,l,h,m,v,C,R){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,R):l.prototype&&l.prototype.isPureReactComponent?!pl(h,m)||!pl(v,C):!0}function Pd(a,l,h){var m=!1,v=Oi,C=l.contextType;return typeof C=="object"&&C!==null?C=nr(C):(v=on(l)?qr:En.current,m=l.contextTypes,C=(m=m!=null)?di(a,v):Oi),l=new l(h,C),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=_a,a.stateNode=l,l._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=C),l}function bl(a,l,h,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==a&&_a.enqueueReplaceState(l,l.state,null)}function Qr(a,l,h,m){var v=a.stateNode;v.props=h,v.state=a.memoizedState,v.refs={},Iu(a);var C=l.contextType;typeof C=="object"&&C!==null?v.context=nr(C):(C=on(l)?qr:En.current,v.context=di(a,C)),v.state=a.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(Qu(a,l,C,h),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&_a.enqueueReplaceState(v,v.state,null),Fi(a,h,v,m),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Rs(a,l){try{var h="",m=l;do h+=pf(m),m=m.return;while(m);var v=h}catch(C){v=`
Error generating stack: `+C.message+`
`+C.stack}return{value:a,source:l,stack:v,digest:null}}function Hi(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function xr(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var wa=typeof WeakMap=="function"?WeakMap:Map;function Kr(a,l,h){h=pi(-1,h),h.tag=3,h.payload={element:null};var m=l.value;return h.callback=function(){Gt||(Gt=!0,Xt=m),xr(a,l)},h}function Rl(a,l,h){h=pi(-1,h),h.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var v=l.value;h.payload=function(){return m(v)},h.callback=function(){xr(a,l)}}var C=a.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(h.callback=function(){xr(a,l),typeof m!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})}),h}function Nd(a,l,h){var m=a.pingCache;if(m===null){m=a.pingCache=new wa;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(h)||(v.add(h),a=Ld.bind(null,a,l,h),l.then(a,a))}function Td(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Vi(a,l,h,m,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=pi(-1,1),l.tag=2,gi(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var Sa=f.ReactCurrentOwner,en=!1;function un(a,l,h,m){l.child=a===null?yd(l,null,h,m):_s(l,a.child,h,m)}function Ml(a,l,h,m,v){h=h.render;var C=l.ref;return ho(l,v),m=ya(a,l,h,m,C,v),h=wl(),a!==null&&!en?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,vi(a,l,v)):(Nt&&h&&ca(l),l.flags|=1,un(a,l,m,v),l.child)}function Ms(a,l,h,m,v){if(a===null){var C=h.type;return typeof C=="function"&&!Ao(C)&&C.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=C,yi(a,l,C,m,v)):(a=Yl(h.type,null,m,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(C=a.child,(a.lanes&v)===0){var R=C.memoizedProps;if(h=h.compare,h=h!==null?h:pl,h(R,m)&&a.ref===l.ref)return vi(a,l,v)}return l.flags|=1,a=ts(C,m),a.ref=l.ref,a.return=l,l.child=a}function yi(a,l,h,m,v){if(a!==null){var C=a.memoizedProps;if(pl(C,m)&&a.ref===l.ref)if(en=!1,l.pendingProps=m=C,(a.lanes&v)!==0)(a.flags&131072)!==0&&(en=!0);else return l.lanes=a.lanes,vi(a,l,v)}return $r(a,l,h,m,v)}function wt(a,l,h){var m=l.pendingProps,v=m.children,C=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt($i,tn),tn|=h;else{if((h&1073741824)===0)return a=C!==null?C.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,nt($i,tn),tn|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=C!==null?C.baseLanes:h,nt($i,tn),tn|=m}else C!==null?(m=C.baseLanes|h,l.memoizedState=null):m=h,nt($i,tn),tn|=m;return un(a,l,v,h),l.child}function vt(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function $r(a,l,h,m,v){var C=on(h)?qr:En.current;return C=di(l,C),ho(l,v),h=ya(a,l,h,m,C,v),m=wl(),a!==null&&!en?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,vi(a,l,v)):(Nt&&m&&ca(l),l.flags|=1,un(a,l,h,v),l.child)}function vn(a,l,h,m,v){if(on(h)){var C=!0;no(l)}else C=!1;if(ho(l,v),l.stateNode===null)ka(a,l),Pd(l,h,m),Qr(l,h,m,v),m=!0;else if(a===null){var R=l.stateNode,W=l.memoizedProps;R.props=W;var Z=R.context,fe=h.contextType;typeof fe=="object"&&fe!==null?fe=nr(fe):(fe=on(h)?qr:En.current,fe=di(l,fe));var Te=h.getDerivedStateFromProps,Ke=typeof Te=="function"||typeof R.getSnapshotBeforeUpdate=="function";Ke||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W!==m||Z!==fe)&&bl(l,R,m,fe),rr=!1;var Ce=l.memoizedState;R.state=Ce,Fi(l,m,R,v),Z=l.memoizedState,W!==m||Ce!==Z||Vn.current||rr?(typeof Te=="function"&&(Qu(l,h,Te,m),Z=l.memoizedState),(W=rr||Ed(l,h,W,m,Ce,Z,fe))?(Ke||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(l.flags|=4194308)):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Z),R.props=m,R.state=Z,R.context=fe,m=W):(typeof R.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{R=l.stateNode,xd(a,l),W=l.memoizedProps,fe=l.type===l.elementType?W:sr(l.type,W),R.props=fe,Ke=l.pendingProps,Ce=R.context,Z=h.contextType,typeof Z=="object"&&Z!==null?Z=nr(Z):(Z=on(h)?qr:En.current,Z=di(l,Z));var kt=h.getDerivedStateFromProps;(Te=typeof kt=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W!==Ke||Ce!==Z)&&bl(l,R,m,Z),rr=!1,Ce=l.memoizedState,R.state=Ce,Fi(l,m,R,v);var ft=l.memoizedState;W!==Ke||Ce!==ft||Vn.current||rr?(typeof kt=="function"&&(Qu(l,h,kt,m),ft=l.memoizedState),(fe=rr||Ed(l,h,fe,m,Ce,ft,Z)||!1)?(Te||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(m,ft,Z),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(m,ft,Z)),typeof R.componentDidUpdate=="function"&&(l.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof R.componentDidUpdate!="function"||W===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ft),R.props=m,R.state=ft,R.context=Z,m=fe):(typeof R.componentDidUpdate!="function"||W===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===a.memoizedProps&&Ce===a.memoizedState||(l.flags|=1024),m=!1)}return Pn(a,l,h,m,C,v)}function Pn(a,l,h,m,v,C){vt(a,l);var R=(l.flags&128)!==0;if(!m&&!R)return v&&Cu(l,h,!1),vi(a,l,C);m=l.stateNode,Sa.current=l;var W=R&&typeof h.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,a!==null&&R?(l.child=_s(l,a.child,null,C),l.child=_s(l,null,W,C)):un(a,l,W,C),l.memoizedState=m.state,v&&Cu(l,h,!0),l.child}function qi(a){var l=a.stateNode;l.pendingContext?id(a,l.pendingContext,l.pendingContext!==l.context):l.context&&id(a,l.context,!1),xl(a,l.containerInfo)}function Is(a,l,h,m,v){return vs(),Tu(v),l.flags|=256,un(a,l,h,m),l.child}var Nn={dehydrated:null,treeContext:null,retryLane:0};function xo(a){return{baseLanes:a,cachePool:null,transitions:null}}function Ku(a,l,h){var m=l.pendingProps,v=zt.current,C=!1,R=(l.flags&128)!==0,W;if((W=R)||(W=a!==null&&a.memoizedState===null?!1:(v&2)!==0),W?(C=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),nt(zt,v&1),a===null)return Nu(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:fs(a)?l.lanes=8:l.lanes=1073741824,null):(R=m.children,a=m.fallback,C?(m=l.mode,C=l.child,R={mode:"hidden",children:R},(m&1)===0&&C!==null?(C.childLanes=0,C.pendingProps=R):C=Oo(R,m,0,null),a=xn(a,m,h,null),C.return=l,a.return=l,C.sibling=a,l.child=C,l.child.memoizedState=xo(h),l.memoizedState=Nn,a):Il(l,R));if(v=a.memoizedState,v!==null&&(W=v.dehydrated,W!==null))return bd(a,l,R,m,W,v,h);if(C){C=m.fallback,R=l.mode,v=a.child,W=v.sibling;var Z={mode:"hidden",children:m.children};return(R&1)===0&&l.child!==v?(m=l.child,m.childLanes=0,m.pendingProps=Z,l.deletions=null):(m=ts(v,Z),m.subtreeFlags=v.subtreeFlags&14680064),W!==null?C=ts(W,C):(C=xn(C,R,h,null),C.flags|=2),C.return=l,m.return=l,m.sibling=C,l.child=m,m=C,C=l.child,R=a.child.memoizedState,R=R===null?xo(h):{baseLanes:R.baseLanes|h,cachePool:null,transitions:R.transitions},C.memoizedState=R,C.childLanes=a.childLanes&~h,l.memoizedState=Nn,m}return C=a.child,a=C.sibling,m=ts(C,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=h),m.return=l,m.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=m,l.memoizedState=null,m}function Il(a,l){return l=Oo({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function As(a,l,h,m){return m!==null&&Tu(m),_s(l,a.child,null,h),a=Il(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function bd(a,l,h,m,v,C,R){if(h)return l.flags&256?(l.flags&=-257,m=Hi(Error(d(422))),As(a,l,R,m)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(C=m.fallback,v=l.mode,m=Oo({mode:"visible",children:m.children},v,0,null),C=xn(C,v,R,null),C.flags|=2,m.return=l,C.return=l,m.sibling=C,l.child=m,(l.mode&1)!==0&&_s(l,a.child,null,R),l.child.memoizedState=xo(R),l.memoizedState=Nn,C);if((l.mode&1)===0)return As(a,l,R,null);if(fs(v))return m=tl(v).digest,C=Error(d(419)),m=Hi(C,m,void 0),As(a,l,R,m);if(h=(R&a.childLanes)!==0,en||h){if(m=xt,m!==null){switch(R&-R){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|R))!==0?0:v,v!==0&&v!==C.retryLane&&(C.retryLane=v,Ar(a,v),bn(m,a,v,-1))}return Io(),m=Hi(Error(d(421))),As(a,l,R,m)}return $c(v)?(l.flags|=128,l.child=a.child,l=jd.bind(null,a),nl(v,l),null):(a=C.treeContext,Re&&(Ln=of(v),mn=l,Nt=!0,Ir=null,ha=!1,a!==null&&(On[tr++]=Yn,On[tr++]=Rr,On[tr++]=Jt,Yn=a.id,Rr=a.overflow,Jt=l)),l=Il(l,m.children),l.flags|=4096,l)}function Jr(a,l,h){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),ws(a.return,l,h)}function _o(a,l,h,m,v){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:v}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=v)}function Al(a,l,h){var m=l.pendingProps,v=m.revealOrder,C=m.tail;if(un(a,l,m.children,h),m=zt.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jr(a,h,l);else if(a.tag===19)Jr(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(nt(zt,m),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)a=h.alternate,a!==null&&_l(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),_o(l,!1,v,h,C);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&_l(a)===null){l.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}_o(l,!0,h,null,C);break;case"together":_o(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ka(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function vi(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),_i|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(d(153));if(l.child!==null){for(a=l.child,h=ts(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=ts(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function Yi(a,l,h){switch(l.tag){case 3:qi(l),vs();break;case 5:Au(l);break;case 1:on(l.type)&&no(l);break;case 4:xl(l,l.stateNode.containerInfo);break;case 10:vd(l,l.type._context,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(nt(zt,zt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Ku(a,l,h):(nt(zt,zt.current&1),a=vi(a,l,h),a!==null?a.sibling:null);nt(zt,zt.current&1);break;case 19:if(m=(h&l.childLanes)!==0,(a.flags&128)!==0){if(m)return Al(a,l,h);l.flags|=128}var v=l.memoizedState;if(v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),nt(zt,zt.current),m)break;return null;case 22:case 23:return l.lanes=0,wt(a,l,h)}return vi(a,l,h)}function Dn(a){a.flags|=4}function Os(a,l){if(a!==null&&a.child===l.child)return!0;if((l.flags&16)!==0)return!1;for(a=l.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var Xi,Qi,jn,zn;if(re)Xi=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)ee(a,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Qi=function(){},jn=function(a,l,h,m,v){if(a=a.memoizedProps,a!==m){var C=l.stateNode,R=vr(yr.current);h=je(C,h,a,m,v,R),(l.updateQueue=h)&&Dn(l)}},zn=function(a,l,h,m){h!==m&&Dn(l)};else if(We){Xi=function(a,l,h,m){for(var v=l.child;v!==null;){if(v.tag===5){var C=v.stateNode;h&&m&&(C=el(C,v.type,v.memoizedProps,v)),ee(a,C)}else if(v.tag===6)C=v.stateNode,h&&m&&(C=wu(C,v.memoizedProps,v)),ee(a,C);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)C=v.child,C!==null&&(C.return=v),Xi(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};var Ki=function(a,l,h,m){for(var v=l.child;v!==null;){if(v.tag===5){var C=v.stateNode;h&&m&&(C=el(C,v.type,v.memoizedProps,v)),_u(a,C)}else if(v.tag===6)C=v.stateNode,h&&m&&(C=wu(C,v.memoizedProps,v)),_u(a,C);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)C=v.child,C!==null&&(C.return=v),Ki(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};Qi=function(a,l){var h=l.stateNode;if(!Os(a,l)){a=h.containerInfo;var m=xu(a);Ki(m,l,!1,!1),h.pendingChildren=m,Dn(l),Kc(a,m)}},jn=function(a,l,h,m,v){var C=a.stateNode,R=a.memoizedProps;if((a=Os(a,l))&&R===m)l.stateNode=C;else{var W=l.stateNode,Z=vr(yr.current),fe=null;R!==m&&(fe=je(W,h,R,m,v,Z)),a&&fe===null?l.stateNode=C:(C=Qc(C,fe,h,R,m,l,a,W),Se(C,h,m,v,Z)&&Dn(l),l.stateNode=C,a?Dn(l):Xi(C,l,!1,!1))}},zn=function(a,l,h,m){h!==m?(a=vr(Gi.current),h=vr(yr.current),l.stateNode=Xe(m,a,h,l),Dn(l)):l.stateNode=a.stateNode}}else Qi=function(){},jn=function(){},zn=function(){};function or(a,l){if(!Nt)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function It(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,m=0;if(l)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=h,l}function Ls(a,l,h){var m=l.pendingProps;switch(da(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(l),null;case 1:return on(l.type)&&ms(),It(l),null;case 3:return h=l.stateNode,Ss(),Pt(Vn),Pt(En),Du(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(fl(l)?Dn(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ir!==null&&(Vl(Ir),Ir=null))),Qi(a,l),It(l),null;case 5:Ou(l),h=vr(Gi.current);var v=l.type;if(a!==null&&l.stateNode!=null)jn(a,l,v,m,h),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(d(166));return It(l),null}if(a=vr(yr.current),fl(l)){if(!Re)throw Error(d(175));a=ps(l.stateNode,l.type,l.memoizedProps,h,a,l,!ha),l.updateQueue=a,a!==null&&Dn(l)}else{var C=z(v,m,h,a,l);Xi(C,l,!1,!1),l.stateNode=C,Se(C,v,m,h,a)&&Dn(l)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return It(l),null;case 6:if(a&&l.stateNode!=null)zn(a,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(d(166));if(a=vr(Gi.current),h=vr(yr.current),fl(l)){if(!Re)throw Error(d(176));if(a=l.stateNode,h=l.memoizedProps,(m=Jc(a,h,l,!ha))&&(v=mn,v!==null))switch(v.tag){case 3:uf(v.stateNode.containerInfo,a,h,(v.mode&1)!==0);break;case 5:Wt(v.type,v.memoizedProps,v.stateNode,a,h,(v.mode&1)!==0)}m&&Dn(l)}else l.stateNode=Xe(m,a,h,l)}return It(l),null;case 13:if(Pt(zt),m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Nt&&Ln!==null&&(l.mode&1)!==0&&(l.flags&128)===0)pd(),vs(),l.flags|=98560,v=!1;else if(v=fl(l),m!==null&&m.dehydrated!==null){if(a===null){if(!v)throw Error(d(318));if(!Re)throw Error(d(344));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(d(317));Zc(v,l)}else vs(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;It(l),v=!1}else Ir!==null&&(Vl(Ir),Ir=null),v=!0;if(!v)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(h=m!==null,h!==(a!==null&&a.memoizedState!==null)&&h&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(zt.current&1)!==0?Ot===0&&(Ot=3):Io())),l.updateQueue!==null&&(l.flags|=4),It(l),null);case 4:return Ss(),Qi(a,l),a===null&&Ct(l.stateNode.containerInfo),It(l),null;case 10:return fa(l.type._context),It(l),null;case 17:return on(l.type)&&ms(),It(l),null;case 19:if(Pt(zt),v=l.memoizedState,v===null)return It(l),null;if(m=(l.flags&128)!==0,C=v.rendering,C===null)if(m)or(v,!1);else{if(Ot!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(C=_l(a),C!==null){for(l.flags|=128,or(v,!1),a=C.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),l.subtreeFlags=0,a=h,h=l.child;h!==null;)m=h,v=a,m.flags&=14680066,C=m.alternate,C===null?(m.childLanes=0,m.lanes=v,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=C.childLanes,m.lanes=C.lanes,m.child=C.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=C.memoizedProps,m.memoizedState=C.memoizedState,m.updateQueue=C.updateQueue,m.type=C.type,v=C.dependencies,m.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),h=h.sibling;return nt(zt,zt.current&1|2),l.child}a=a.sibling}v.tail!==null&&an()>Ra&&(l.flags|=128,m=!0,or(v,!1),l.lanes=4194304)}else{if(!m)if(a=_l(C),a!==null){if(l.flags|=128,m=!0,a=a.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),or(v,!0),v.tail===null&&v.tailMode==="hidden"&&!C.alternate&&!Nt)return It(l),null}else 2*an()-v.renderingStartTime>Ra&&h!==1073741824&&(l.flags|=128,m=!0,or(v,!1),l.lanes=4194304);v.isBackwards?(C.sibling=l.child,l.child=C):(a=v.last,a!==null?a.sibling=C:l.child=C,v.last=C)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=an(),l.sibling=null,a=zt.current,nt(zt,m?a&1|2:a&1),l):(It(l),null);case 22:case 23:return ql(),h=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==h&&(l.flags|=8192),h&&(l.mode&1)!==0?(tn&1073741824)!==0&&(It(l),re&&l.subtreeFlags&6&&(l.flags|=8192)):It(l),null;case 24:return null;case 25:return null}throw Error(d(156,l.tag))}function Rd(a,l){switch(da(l),l.tag){case 1:return on(l.type)&&ms(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Ss(),Pt(Vn),Pt(En),Du(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Ou(l),null;case 13:if(Pt(zt),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(d(340));vs()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Pt(zt),null;case 4:return Ss(),null;case 10:return fa(l.type._context),null;case 22:case 23:return ql(),null;case 24:return null;default:return null}}var wo=!1,cn=!1,ar=typeof WeakSet=="function"?WeakSet:Set,we=null;function ht(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){bt(a,l,m)}else h.current=null}function lr(a,l,h){try{h()}catch(m){bt(a,l,m)}}var $u=!1;function Md(a,l){for(he(a.containerInfo),we=l;we!==null;)if(a=we,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,we=l;else for(;we!==null;){a=we;try{var h=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,v=h.memoizedState,C=a.stateNode,R=C.getSnapshotBeforeUpdate(a.elementType===a.type?m:sr(a.type,m),v);C.__reactInternalSnapshotBeforeUpdate=R}break;case 3:re&&Zs(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(W){bt(a,a.return,W)}if(l=a.sibling,l!==null){l.return=a.return,we=l;break}we=a.return}return h=$u,$u=!1,h}function Ds(a,l,h){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&a)===a){var C=v.destroy;v.destroy=void 0,C!==void 0&&lr(l,h,C)}v=v.next}while(v!==m)}}function So(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var m=h.create;h.destroy=m()}h=h.next}while(h!==l)}}function Ol(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=le(h);break;default:a=h}typeof l=="function"?l(a):l.current=a}}function Ca(a){var l=a.alternate;l!==null&&(a.alternate=null,Ca(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Cn(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Ju(a){return a.tag===5||a.tag===3||a.tag===4}function js(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ju(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ea(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?Xc(h,a,l):$a(h,a);else if(m!==4&&(a=a.child,a!==null))for(Ea(a,l,h),a=a.sibling;a!==null;)Ea(a,l,h),a=a.sibling}function Zu(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?Yc(h,a,l):gr(h,a);else if(m!==4&&(a=a.child,a!==null))for(Zu(a,l,h),a=a.sibling;a!==null;)Zu(a,l,h),a=a.sibling}var Ht=null,Qn=!1;function Or(a,l,h){for(h=h.child;h!==null;)Ll(a,l,h),h=h.sibling}function Ll(a,l,h){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Di,h)}catch{}switch(h.tag){case 5:cn||ht(h,l);case 6:if(re){var m=Ht,v=Qn;Ht=null,Or(a,l,h),Ht=m,Qn=v,Ht!==null&&(Qn?gu(Ht,h.stateNode):nf(Ht,h.stateNode))}else Or(a,l,h);break;case 18:re&&Ht!==null&&(Qn?rd(Ht,h.stateNode):nd(Ht,h.stateNode));break;case 4:re?(m=Ht,v=Qn,Ht=h.stateNode.containerInfo,Qn=!0,Or(a,l,h),Ht=m,Qn=v):(We&&(m=h.stateNode.containerInfo,v=xu(m),Za(m,v)),Or(a,l,h));break;case 0:case 11:case 14:case 15:if(!cn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var C=v,R=C.destroy;C=C.tag,R!==void 0&&((C&2)!==0||(C&4)!==0)&&lr(h,l,R),v=v.next}while(v!==m)}Or(a,l,h);break;case 1:if(!cn&&(ht(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(W){bt(h,l,W)}Or(a,l,h);break;case 21:Or(a,l,h);break;case 22:h.mode&1?(cn=(m=cn)||h.memoizedState!==null,Or(a,l,h),cn=m):Or(a,l,h);break;default:Or(a,l,h)}}function zs(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new ar),l.forEach(function(m){var v=mf.bind(null,a,m);h.has(m)||(h.add(m),m.then(v,v))})}}function _r(a,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];try{var C=a,R=l;if(re){var W=R;e:for(;W!==null;){switch(W.tag){case 5:Ht=W.stateNode,Qn=!1;break e;case 3:Ht=W.stateNode.containerInfo,Qn=!0;break e;case 4:Ht=W.stateNode.containerInfo,Qn=!0;break e}W=W.return}if(Ht===null)throw Error(d(160));Ll(C,R,v),Ht=null,Qn=!1}else Ll(C,R,v);var Z=v.alternate;Z!==null&&(Z.return=null),v.return=null}catch(fe){bt(v,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Pa(l,a),l=l.sibling}function Pa(a,l){var h=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(_r(l,a),ur(a),m&4){try{Ds(3,a,a.return),So(3,a)}catch(Ce){bt(a,a.return,Ce)}try{Ds(5,a,a.return)}catch(Ce){bt(a,a.return,Ce)}}break;case 1:_r(l,a),ur(a),m&512&&h!==null&&ht(h,h.return);break;case 5:if(_r(l,a),ur(a),m&512&&h!==null&&ht(h,h.return),re){if(a.flags&32){var v=a.stateNode;try{Ja(v)}catch(Ce){bt(a,a.return,Ce)}}if(m&4&&(v=a.stateNode,v!=null)){var C=a.memoizedProps;if(h=h!==null?h.memoizedProps:C,m=a.type,l=a.updateQueue,a.updateQueue=null,l!==null)try{tf(v,l,m,h,C,a)}catch(Ce){bt(a,a.return,Ce)}}}break;case 6:if(_r(l,a),ur(a),m&4&&re){if(a.stateNode===null)throw Error(d(162));v=a.stateNode,C=a.memoizedProps,h=h!==null?h.memoizedProps:C;try{hs(v,h,C)}catch(Ce){bt(a,a.return,Ce)}}break;case 3:if(_r(l,a),ur(a),m&4){if(re&&Re&&h!==null&&h.memoizedState.isDehydrated)try{ed(l.containerInfo)}catch(Ce){bt(a,a.return,Ce)}if(We){v=l.containerInfo,C=l.pendingChildren;try{Za(v,C)}catch(Ce){bt(a,a.return,Ce)}}}break;case 4:if(_r(l,a),ur(a),m&4&&We){C=a.stateNode,v=C.containerInfo,C=C.pendingChildren;try{Za(v,C)}catch(Ce){bt(a,a.return,Ce)}}break;case 13:_r(l,a),ur(a),v=a.child,v.flags&8192&&(C=v.memoizedState!==null,v.stateNode.isHidden=C,!C||v.alternate!==null&&v.alternate.memoizedState!==null||(To=an())),m&4&&zs(a);break;case 22:var R=h!==null&&h.memoizedState!==null;if(a.mode&1?(cn=(h=cn)||R,_r(l,a),cn=h):_r(l,a),ur(a),m&8192){if(h=a.memoizedState!==null,(a.stateNode.isHidden=h)&&!R&&(a.mode&1)!==0)for(we=a,m=a.child;m!==null;){for(l=we=m;we!==null;){R=we;var W=R.child;switch(R.tag){case 0:case 11:case 14:case 15:Ds(4,R,R.return);break;case 1:ht(R,R.return);var Z=R.stateNode;if(typeof Z.componentWillUnmount=="function"){var fe=R,Te=R.return;try{var Ke=fe;Z.props=Ke.memoizedProps,Z.state=Ke.memoizedState,Z.componentWillUnmount()}catch(Ce){bt(fe,Te,Ce)}}break;case 5:ht(R,R.return);break;case 22:if(R.memoizedState!==null){zl(l);continue}}W!==null?(W.return=R,we=W):zl(l)}m=m.sibling}if(re){e:if(m=null,re)for(l=a;;){if(l.tag===5){if(m===null){m=l;try{v=l.stateNode,h?mu(v):vu(l.stateNode,l.memoizedProps)}catch(Ce){bt(a,a.return,Ce)}}}else if(l.tag===6){if(m===null)try{C=l.stateNode,h?yu(C):Js(C,l.memoizedProps)}catch(Ce){bt(a,a.return,Ce)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;m===l&&(m=null),l=l.return}m===l&&(m=null),l.sibling.return=l.return,l=l.sibling}}}break;case 19:_r(l,a),ur(a),m&4&&zs(a);break;case 21:break;default:_r(l,a),ur(a)}}function ur(a){var l=a.flags;if(l&2){try{if(re){e:{for(var h=a.return;h!==null;){if(Ju(h)){var m=h;break e}h=h.return}throw Error(d(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(Ja(v),m.flags&=-33);var C=js(a);Zu(a,C,v);break;case 3:case 4:var R=m.stateNode.containerInfo,W=js(a);Ea(a,W,R);break;default:throw Error(d(161))}}}catch(Z){bt(a,a.return,Z)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function ko(a,l,h){we=a,Dl(a)}function Dl(a,l,h){for(var m=(a.mode&1)!==0;we!==null;){var v=we,C=v.child;if(v.tag===22&&m){var R=v.memoizedState!==null||wo;if(!R){var W=v.alternate,Z=W!==null&&W.memoizedState!==null||cn;W=wo;var fe=cn;if(wo=R,(cn=Z)&&!fe)for(we=v;we!==null;)R=we,Z=R.child,R.tag===22&&R.memoizedState!==null?Fl(v):Z!==null?(Z.return=R,we=Z):Fl(v);for(;C!==null;)we=C,Dl(C),C=C.sibling;we=v,wo=W,cn=fe}jl(a)}else(v.subtreeFlags&8772)!==0&&C!==null?(C.return=v,we=C):jl(a)}}function jl(a){for(;we!==null;){var l=we;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:cn||So(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!cn)if(h===null)m.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:sr(l.type,h.memoizedProps);m.componentDidUpdate(v,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var C=l.updateQueue;C!==null&&_d(l,C,m);break;case 3:var R=l.updateQueue;if(R!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=le(l.child.stateNode);break;case 1:h=l.child.stateNode}_d(l,R,h)}break;case 5:var W=l.stateNode;h===null&&l.flags&4&&ra(W,l.type,l.memoizedProps,l);break;case 6:break;case 4:break;case 12:break;case 13:if(Re&&l.memoizedState===null){var Z=l.alternate;if(Z!==null){var fe=Z.memoizedState;if(fe!==null){var Te=fe.dehydrated;Te!==null&&td(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(d(163))}cn||l.flags&512&&Ol(l)}catch(Ke){bt(l,l.return,Ke)}}if(l===a){we=null;break}if(h=l.sibling,h!==null){h.return=l.return,we=h;break}we=l.return}}function zl(a){for(;we!==null;){var l=we;if(l===a){we=null;break}var h=l.sibling;if(h!==null){h.return=l.return,we=h;break}we=l.return}}function Fl(a){for(;we!==null;){var l=we;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{So(4,l)}catch(Z){bt(l,h,Z)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var v=l.return;try{m.componentDidMount()}catch(Z){bt(l,v,Z)}}var C=l.return;try{Ol(l)}catch(Z){bt(l,C,Z)}break;case 5:var R=l.return;try{Ol(l)}catch(Z){bt(l,R,Z)}}}catch(Z){bt(l,l.return,Z)}if(l===a){we=null;break}var W=l.sibling;if(W!==null){W.return=l.return,we=W;break}we=l.return}}var xi=0,Fn=1,Zr=2,Co=3,Na=4;if(typeof Symbol=="function"&&Symbol.for){var cr=Symbol.for;xi=cr("selector.component"),Fn=cr("selector.has_pseudo_class"),Zr=cr("selector.role"),Co=cr("selector.test_id"),Na=cr("selector.text")}function ei(a){var l=He(a);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(d(364));return l}if(a=fn(a),a===null)throw Error(d(362));return a.stateNode.current}function Ta(a,l){switch(l.$$typeof){case xi:if(a.type===l.value)return!0;break;case Fn:e:{l=l.value,a=[a,0];for(var h=0;h<a.length;){var m=a[h++],v=a[h++],C=l[v];if(m.tag!==5||!Vr(m)){for(;C!=null&&Ta(m,C);)v++,C=l[v];if(v===l.length){l=!0;break e}else for(m=m.child;m!==null;)a.push(m,v),m=m.sibling}}l=!1}return l;case Zr:if(a.tag===5&&na(a.stateNode,l.value))return!0;break;case Na:if((a.tag===5||a.tag===6)&&(a=Tr(a),a!==null&&0<=a.indexOf(l.value)))return!0;break;case Co:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function Bl(a){switch(a.$$typeof){case xi:return"<"+(ie(a.value)||"Unknown")+">";case Fn:return":has("+(Bl(a)||"")+")";case Zr:return'[role="'+a.value+'"]';case Na:return'"'+a.value+'"';case Co:return'[data-testname="'+a.value+'"]';default:throw Error(d(365))}}function ti(a,l){var h=[];a=[a,0];for(var m=0;m<a.length;){var v=a[m++],C=a[m++],R=l[C];if(v.tag!==5||!Vr(v)){for(;R!=null&&Ta(v,R);)C++,R=l[C];if(C===l.length)h.push(v);else for(v=v.child;v!==null;)a.push(v,C),v=v.sibling}}return h}function ni(a,l){if(!Et)throw Error(d(363));a=ei(a),a=ti(a,l),l=[],a=Array.from(a);for(var h=0;h<a.length;){var m=a[h++];if(m.tag===5)Vr(m)||l.push(m.stateNode);else for(m=m.child;m!==null;)a.push(m),m=m.sibling}return l}var Gl=Math.ceil,ba=f.ReactCurrentDispatcher,Eo=f.ReactCurrentOwner,Bt=f.ReactCurrentBatchConfig,Je=0,xt=null,At=null,Vt=0,tn=0,$i=pn(0),Ot=0,Po=null,_i=0,St=0,No=0,Fs=null,Tn=null,To=0,Ra=1/0,Bn=null;function mt(){Ra=an()+500}var Gt=!1,Xt=null,Lr=null,Ji=!1,wr=null,Ul=0,Qt=0,Ma=null,bo=-1,Ro=0;function Tt(){return(Je&6)!==0?an():bo!==-1?bo:bo=an()}function nn(a){return(a.mode&1)===0?1:(Je&2)!==0&&Vt!==0?Vt&-Vt:ff.transition!==null?(Ro===0&&(Ro=ol()),Ro):(a=rt,a!==0?a:gt())}function bn(a,l,h,m){if(50<Qt)throw Qt=0,Ma=null,Error(d(185));mr(a,h,m),((Je&2)===0||a!==xt)&&(a===xt&&((Je&2)===0&&(St|=h),Ot===4&&wi(a,Vt)),Rn(a,m),h===1&&Je===0&&(l.mode&1)===0&&(mt(),lo&&gn()))}function Rn(a,l){var h=a.callbackNode;ad(a,l);var m=io(a,a===xt?Vt:0);if(m===0)h!==null&&ld(h),a.callbackNode=null,a.callbackPriority=0;else if(l=m&-m,a.callbackPriority!==l){if(h!=null&&ld(h),l===1)a.tag===0?cd(ec.bind(null,a)):dl(ec.bind(null,a)),jt?Ut(function(){(Je&6)===0&&gn()}):Xr(al,gn),h=null;else{switch(oo(m)){case 1:h=al;break;case 4:h=ll;break;case 16:h=ul;break;case 536870912:h=hf;break;default:h=ul}h=ac(h,Wl.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function Wl(a,l){if(bo=-1,Ro=0,(Je&6)!==0)throw Error(d(327));var h=a.callbackNode;if(Si()&&a.callbackNode!==h)return null;var m=io(a,a===xt?Vt:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||l)l=Bs(a,m);else{l=m;var v=Je;Je|=2;var C=nc();(xt!==a||Vt!==l)&&(Bn=null,mt(),Zi(a,l));do try{rc();break}catch(W){Mo(a,W)}while(!0);Ru(),ba.current=C,Je=v,At!==null?l=0:(xt=null,Vt=0,l=Ot)}if(l!==0){if(l===2&&(v=sl(a),v!==0&&(m=v,l=Hl(a,v))),l===1)throw h=Po,Zi(a,0),wi(a,m),Rn(a,an()),h;if(l===6)wi(a,m);else{if(v=a.current.alternate,(m&30)===0&&!Id(v)&&(l=Bs(a,m),l===2&&(C=sl(a),C!==0&&(m=C,l=Hl(a,C))),l===1))throw h=Po,Zi(a,0),wi(a,m),Rn(a,an()),h;switch(a.finishedWork=v,a.finishedLanes=m,l){case 0:case 1:throw Error(d(345));case 2:es(a,Tn,Bn);break;case 3:if(wi(a,m),(m&130023424)===m&&(l=To+500-an(),10<l)){if(io(a,0)!==0)break;if(v=a.suspendedLanes,(v&m)!==m){Tt(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=Ue(es.bind(null,a,Tn,Bn),l);break}es(a,Tn,Bn);break;case 4:if(wi(a,m),(m&4194240)===m)break;for(l=a.eventTimes,v=-1;0<m;){var R=31-er(m);C=1<<R,R=l[R],R>v&&(v=R),m&=~C}if(m=v,m=an()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Gl(m/1960))-m,10<m){a.timeoutHandle=Ue(es.bind(null,a,Tn,Bn),m);break}es(a,Tn,Bn);break;case 5:es(a,Tn,Bn);break;default:throw Error(d(329))}}}return Rn(a,an()),a.callbackNode===h?Wl.bind(null,a):null}function Hl(a,l){var h=Fs;return a.current.memoizedState.isDehydrated&&(Zi(a,l).flags|=256),a=Bs(a,l),a!==2&&(l=Tn,Tn=h,l!==null&&Vl(l)),a}function Vl(a){Tn===null?Tn=a:Tn.push.apply(Tn,a)}function Id(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var v=h[m],C=v.getSnapshot;v=v.value;try{if(!br(C(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function wi(a,l){for(l&=~No,l&=~St,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-er(l),m=1<<h;a[h]=-1,l&=~m}}function ec(a){if((Je&6)!==0)throw Error(d(327));Si();var l=io(a,0);if((l&1)===0)return Rn(a,an()),null;var h=Bs(a,l);if(a.tag!==0&&h===2){var m=sl(a);m!==0&&(l=m,h=Hl(a,m))}if(h===1)throw h=Po,Zi(a,0),wi(a,l),Rn(a,an()),h;if(h===6)throw Error(d(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,es(a,Tn,Bn),Rn(a,an()),null}function tc(a){wr!==null&&wr.tag===0&&(Je&6)===0&&Si();var l=Je;Je|=1;var h=Bt.transition,m=rt;try{if(Bt.transition=null,rt=1,a)return a()}finally{rt=m,Bt.transition=h,Je=l,(Je&6)===0&&gn()}}function ql(){tn=$i.current,Pt($i)}function Zi(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==B&&(a.timeoutHandle=B,et(h)),At!==null)for(h=At.return;h!==null;){var m=h;switch(da(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&ms();break;case 3:Ss(),Pt(Vn),Pt(En),Du();break;case 5:Ou(m);break;case 4:Ss();break;case 13:Pt(zt);break;case 19:Pt(zt);break;case 10:fa(m.type._context);break;case 22:case 23:ql()}h=h.return}if(xt=a,At=a=ts(a.current,null),Vt=tn=l,Ot=0,Po=null,No=St=_i=0,Tn=Fs=null,zi!==null){for(l=0;l<zi.length;l++)if(h=zi[l],m=h.interleaved,m!==null){h.interleaved=null;var v=m.next,C=h.pending;if(C!==null){var R=C.next;C.next=v,m.next=R}h.pending=m}zi=null}return a}function Mo(a,l){do{var h=At;try{if(Ru(),Xn.current=bs,go){for(var m=Mt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}go=!1}if(Ui=0,Zt=Yt=Mt=null,ga=!1,ma=0,Eo.current=null,h===null||h.return===null){Ot=1,Po=l,At=null;break}e:{var C=a,R=h.return,W=h,Z=l;if(l=Vt,W.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var fe=Z,Te=W,Ke=Te.tag;if((Te.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Ce=Te.alternate;Ce?(Te.updateQueue=Ce.updateQueue,Te.memoizedState=Ce.memoizedState,Te.lanes=Ce.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var kt=Td(R);if(kt!==null){kt.flags&=-257,Vi(kt,R,W,C,l),kt.mode&1&&Nd(C,fe,l),l=kt,Z=fe;var ft=l.updateQueue;if(ft===null){var Gn=new Set;Gn.add(Z),l.updateQueue=Gn}else ft.add(Z);break e}else{if((l&1)===0){Nd(C,fe,l),Io();break e}Z=Error(d(426))}}else if(Nt&&W.mode&1){var ri=Td(R);if(ri!==null){(ri.flags&65536)===0&&(ri.flags|=256),Vi(ri,R,W,C,l),Tu(Rs(Z,W));break e}}C=Z=Rs(Z,W),Ot!==4&&(Ot=2),Fs===null?Fs=[C]:Fs.push(C),C=R;do{switch(C.tag){case 3:C.flags|=65536,l&=-l,C.lanes|=l;var $=Kr(C,Z,l);fo(C,$);break e;case 1:W=Z;var H=C.type,ne=C.stateNode;if((C.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Lr===null||!Lr.has(ne)))){C.flags|=65536,l&=-l,C.lanes|=l;var Ee=Rl(C,W,l);fo(C,Ee);break e}}C=C.return}while(C!==null)}sc(h)}catch(Be){l=Be,At===h&&h!==null&&(At=h=h.return);continue}break}while(!0)}function nc(){var a=ba.current;return ba.current=bs,a===null?bs:a}function Io(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),xt===null||(_i&268435455)===0&&(St&268435455)===0||wi(xt,Vt)}function Bs(a,l){var h=Je;Je|=2;var m=nc();(xt!==a||Vt!==l)&&(Bn=null,Zi(a,l));do try{Ad();break}catch(v){Mo(a,v)}while(!0);if(Ru(),Je=h,ba.current=m,At!==null)throw Error(d(261));return xt=null,Vt=0,Ot}function Ad(){for(;At!==null;)ic(At)}function rc(){for(;At!==null&&!ud();)ic(At)}function ic(a){var l=zd(a.alternate,a,tn);a.memoizedProps=a.pendingProps,l===null?sc(a):At=l,Eo.current=null}function sc(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=Ls(h,l,tn),h!==null){At=h;return}}else{if(h=Rd(h,l),h!==null){h.flags&=32767,At=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ot=6,At=null;return}}if(l=l.sibling,l!==null){At=l;return}At=l=a}while(l!==null);Ot===0&&(Ot=5)}function es(a,l,h){var m=rt,v=Bt.transition;try{Bt.transition=null,rt=1,Od(a,l,h,m)}finally{Bt.transition=v,rt=m}return null}function Od(a,l,h,m){do Si();while(wr!==null);if((Je&6)!==0)throw Error(d(327));h=a.finishedWork;var v=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(d(177));a.callbackNode=null,a.callbackPriority=0;var C=h.lanes|h.childLanes;if(Li(a,C),a===xt&&(At=xt=null,Vt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Ji||(Ji=!0,ac(ul,function(){return Si(),null})),C=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||C){C=Bt.transition,Bt.transition=null;var R=rt;rt=1;var W=Je;Je|=4,Eo.current=null,Md(a,h),Pa(h,a),oe(a.containerInfo),a.current=h,ko(h),la(),Je=W,rt=R,Bt.transition=C}else a.current=h;if(Ji&&(Ji=!1,wr=a,Ul=v),C=a.pendingLanes,C===0&&(Lr=null),ao(h.stateNode),Rn(a,an()),l!==null)for(m=a.onRecoverableError,h=0;h<l.length;h++)v=l[h],m(v.value,{componentStack:v.stack,digest:v.digest});if(Gt)throw Gt=!1,a=Xt,Xt=null,a;return(Ul&1)!==0&&a.tag!==0&&Si(),C=a.pendingLanes,(C&1)!==0?a===Ma?Qt++:(Qt=0,Ma=a):Qt=0,gn(),null}function Si(){if(wr!==null){var a=oo(Ul),l=Bt.transition,h=rt;try{if(Bt.transition=null,rt=16>a?16:a,wr===null)var m=!1;else{if(a=wr,wr=null,Ul=0,(Je&6)!==0)throw Error(d(331));var v=Je;for(Je|=4,we=a.current;we!==null;){var C=we,R=C.child;if((we.flags&16)!==0){var W=C.deletions;if(W!==null){for(var Z=0;Z<W.length;Z++){var fe=W[Z];for(we=fe;we!==null;){var Te=we;switch(Te.tag){case 0:case 11:case 15:Ds(8,Te,C)}var Ke=Te.child;if(Ke!==null)Ke.return=Te,we=Ke;else for(;we!==null;){Te=we;var Ce=Te.sibling,kt=Te.return;if(Ca(Te),Te===fe){we=null;break}if(Ce!==null){Ce.return=kt,we=Ce;break}we=kt}}}var ft=C.alternate;if(ft!==null){var Gn=ft.child;if(Gn!==null){ft.child=null;do{var ri=Gn.sibling;Gn.sibling=null,Gn=ri}while(Gn!==null)}}we=C}}if((C.subtreeFlags&2064)!==0&&R!==null)R.return=C,we=R;else e:for(;we!==null;){if(C=we,(C.flags&2048)!==0)switch(C.tag){case 0:case 11:case 15:Ds(9,C,C.return)}var $=C.sibling;if($!==null){$.return=C.return,we=$;break e}we=C.return}}var H=a.current;for(we=H;we!==null;){R=we;var ne=R.child;if((R.subtreeFlags&2064)!==0&&ne!==null)ne.return=R,we=ne;else e:for(R=H;we!==null;){if(W=we,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:So(9,W)}}catch(Be){bt(W,W.return,Be)}if(W===R){we=null;break e}var Ee=W.sibling;if(Ee!==null){Ee.return=W.return,we=Ee;break e}we=W.return}}if(Je=v,gn(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Di,a)}catch{}m=!0}return m}finally{rt=h,Bt.transition=l}}return!1}function oc(a,l,h){l=Rs(h,l),l=Kr(a,l,1),a=gi(a,l,1),l=Tt(),a!==null&&(mr(a,1,l),Rn(a,l))}function bt(a,l,h){if(a.tag===3)oc(a,a,h);else for(;l!==null;){if(l.tag===3){oc(l,a,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Lr===null||!Lr.has(m))){a=Rs(h,a),a=Rl(l,a,1),l=gi(l,a,1),a=Tt(),l!==null&&(mr(l,1,a),Rn(l,a));break}}l=l.return}}function Ld(a,l,h){var m=a.pingCache;m!==null&&m.delete(l),l=Tt(),a.pingedLanes|=a.suspendedLanes&h,xt===a&&(Vt&h)===h&&(Ot===4||Ot===3&&(Vt&130023424)===Vt&&500>an()-To?Zi(a,0):No|=h),Rn(a,l)}function Dd(a,l){l===0&&((a.mode&1)===0?l=1:(l=aa,aa<<=1,(aa&130023424)===0&&(aa=4194304)));var h=Tt();a=Ar(a,l),a!==null&&(mr(a,l,h),Rn(a,h))}function jd(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),Dd(a,h)}function mf(a,l){var h=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(d(314))}m!==null&&m.delete(l),Dd(a,h)}var zd;zd=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||Vn.current)en=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return en=!1,Yi(a,l,h);en=(a.flags&131072)!==0}else en=!1,Nt&&(l.flags&1048576)!==0&&dd(l,ys,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;ka(a,l),a=l.pendingProps;var v=di(l,En.current);ho(l,h),v=ya(null,l,m,a,v,h);var C=wl();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,on(m)?(C=!0,no(l)):C=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Iu(l),v.updater=_a,l.stateNode=v,v._reactInternals=l,Qr(l,m,a,h),l=Pn(null,l,m,!0,C,h)):(l.tag=0,Nt&&C&&ca(l),un(null,l,v,h),l=l.child),l;case 16:m=l.elementType;e:{switch(ka(a,l),a=l.pendingProps,v=m._init,m=v(m._payload),l.type=m,v=l.tag=yf(m),a=sr(m,a),v){case 0:l=$r(null,l,m,a,h);break e;case 1:l=vn(null,l,m,a,h);break e;case 11:l=Ml(null,l,m,a,h);break e;case 14:l=Ms(null,l,m,sr(m.type,a),h);break e}throw Error(d(306,m,""))}return l;case 0:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),$r(a,l,m,v,h);case 1:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),vn(a,l,m,v,h);case 3:e:{if(qi(l),a===null)throw Error(d(387));m=l.pendingProps,C=l.memoizedState,v=C.element,xd(a,l),Fi(l,m,null,h);var R=l.memoizedState;if(m=R.element,Re&&C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},l.updateQueue.baseState=C,l.memoizedState=C,l.flags&256){v=Rs(Error(d(423)),l),l=Is(a,l,m,h,v);break e}else if(m!==v){v=Rs(Error(d(424)),l),l=Is(a,l,m,h,v);break e}else for(Re&&(Ln=sf(l.stateNode.containerInfo),mn=l,Nt=!0,Ir=null,ha=!1),h=yd(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(vs(),m===v){l=vi(a,l,h);break e}un(a,l,m,h)}l=l.child}return l;case 5:return Au(l),a===null&&Nu(l),m=l.type,v=l.pendingProps,C=a!==null?a.memoizedProps:null,R=v.children,Ye(m,v)?R=null:C!==null&&Ye(m,C)&&(l.flags|=32),vt(a,l),un(a,l,R,h),l.child;case 6:return a===null&&Nu(l),null;case 13:return Ku(a,l,h);case 4:return xl(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=_s(l,null,m,h):un(a,l,m,h),l.child;case 11:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),Ml(a,l,m,v,h);case 7:return un(a,l,l.pendingProps,h),l.child;case 8:return un(a,l,l.pendingProps.children,h),l.child;case 12:return un(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(m=l.type._context,v=l.pendingProps,C=l.memoizedProps,R=v.value,vd(l,m,R),C!==null)if(br(C.value,R)){if(C.children===v.children&&!Vn.current){l=vi(a,l,h);break e}}else for(C=l.child,C!==null&&(C.return=l);C!==null;){var W=C.dependencies;if(W!==null){R=C.child;for(var Z=W.firstContext;Z!==null;){if(Z.context===m){if(C.tag===1){Z=pi(-1,h&-h),Z.tag=2;var fe=C.updateQueue;if(fe!==null){fe=fe.shared;var Te=fe.pending;Te===null?Z.next=Z:(Z.next=Te.next,Te.next=Z),fe.pending=Z}}C.lanes|=h,Z=C.alternate,Z!==null&&(Z.lanes|=h),ws(C.return,h,l),W.lanes|=h;break}Z=Z.next}}else if(C.tag===10)R=C.type===l.type?null:C.child;else if(C.tag===18){if(R=C.return,R===null)throw Error(d(341));R.lanes|=h,W=R.alternate,W!==null&&(W.lanes|=h),ws(R,h,l),R=C.sibling}else R=C.child;if(R!==null)R.return=C;else for(R=C;R!==null;){if(R===l){R=null;break}if(C=R.sibling,C!==null){C.return=R.return,R=C;break}R=R.return}C=R}un(a,l,v.children,h),l=l.child}return l;case 9:return v=l.type,m=l.pendingProps.children,ho(l,h),v=nr(v),m=m(v),l.flags|=1,un(a,l,m,h),l.child;case 14:return m=l.type,v=sr(m,l.pendingProps),v=sr(m.type,v),Ms(a,l,m,v,h);case 15:return yi(a,l,l.type,l.pendingProps,h);case 17:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),ka(a,l),l.tag=1,on(m)?(a=!0,no(l)):a=!1,ho(l,h),Pd(l,m,v),Qr(l,m,v,h),Pn(null,l,m,!0,a,h);case 19:return Al(a,l,h);case 22:return wt(a,l,h)}throw Error(d(156,l.tag))};function ac(a,l){return Xr(a,l)}function Fd(a,l,h,m){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(a,l,h,m){return new Fd(a,l,h,m)}function Ao(a){return a=a.prototype,!(!a||!a.isReactComponent)}function yf(a){if(typeof a=="function")return Ao(a)?1:0;if(a!=null){if(a=a.$$typeof,a===A)return 11;if(a===b)return 14}return 2}function ts(a,l){var h=a.alternate;return h===null?(h=dr(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Yl(a,l,h,m,v,C){var R=2;if(m=a,typeof a=="function")Ao(a)&&(R=1);else if(typeof a=="string")R=5;else e:switch(a){case _:return xn(h.children,v,C,l);case k:R=8,v|=8;break;case S:return a=dr(12,h,l,v|2),a.elementType=S,a.lanes=C,a;case M:return a=dr(13,h,l,v),a.elementType=M,a.lanes=C,a;case I:return a=dr(19,h,l,v),a.elementType=I,a.lanes=C,a;case L:return Oo(h,v,C,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:R=10;break e;case P:R=9;break e;case A:R=11;break e;case b:R=14;break e;case O:R=16,m=null;break e}throw Error(d(130,a==null?a:typeof a,""))}return l=dr(R,h,l,v),l.elementType=a,l.type=m,l.lanes=C,l}function xn(a,l,h,m){return a=dr(7,a,m,l),a.lanes=h,a}function Oo(a,l,h,m){return a=dr(22,a,m,l),a.elementType=L,a.lanes=h,a.stateNode={isHidden:!1},a}function Lo(a,l,h){return a=dr(6,a,null,l),a.lanes=h,a}function Xl(a,l,h){return l=dr(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Bd(a,l,h,m,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=B,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=so(0),this.expirationTimes=so(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.identifierPrefix=m,this.onRecoverableError=v,Re&&(this.mutableSourceEagerHydrationData=null)}function lc(a,l,h,m,v,C,R,W,Z){return a=new Bd(a,l,h,W,Z),l===1?(l=1,C===!0&&(l|=8)):l=0,C=dr(3,null,null,l),a.current=C,C.stateNode=a,C.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Iu(C),a}function Ql(a){if(!a)return Oi;a=a._reactInternals;e:{if(ye(a)!==a||a.tag!==1)throw Error(d(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(on(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(d(171))}if(a.tag===1){var h=a.type;if(on(h))return sd(a,h,l)}return l}function Gs(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(d(188)):(a=Object.keys(a).join(","),Error(d(268,a)));return a=ve(l),a===null?null:a.stateNode}function Kl(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function Do(a,l){Kl(a,l),(a=a.alternate)&&Kl(a,l)}function vf(a){return a=ve(a),a===null?null:a.stateNode}function Gd(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var l=Ar(a,134217728);if(l!==null){var h=Tt();bn(l,a,134217728,h)}Do(a,134217728)}},t.attemptDiscreteHydration=function(a){if(a.tag===13){var l=Ar(a,1);if(l!==null){var h=Tt();bn(l,a,1,h)}Do(a,1)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var l=nn(a),h=Ar(a,l);if(h!==null){var m=Tt();bn(h,a,l,m)}Do(a,l)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=ro(l.pendingLanes);h!==0&&(Yr(l,h|1),Rn(l,an()),(Je&6)===0&&(mt(),gn()))}break;case 13:tc(function(){var m=Ar(a,1);if(m!==null){var v=Tt();bn(m,a,1,v)}}),Do(a,1)}},t.batchedUpdates=function(a,l){var h=Je;Je|=1;try{return a(l)}finally{Je=h,Je===0&&(mt(),lo&&gn())}},t.createComponentSelector=function(a){return{$$typeof:xi,value:a}},t.createContainer=function(a,l,h,m,v,C,R){return lc(a,l,!1,null,h,m,v,C,R)},t.createHasPseudoClassSelector=function(a){return{$$typeof:Fn,value:a}},t.createHydrationContainer=function(a,l,h,m,v,C,R,W,Z){return a=lc(h,m,!0,a,v,C,R,W,Z),a.context=Ql(null),h=a.current,m=Tt(),v=nn(h),C=pi(m,v),C.callback=l??null,gi(h,C,v),a.current.lanes=v,mr(a,v,m),Rn(a,m),a},t.createPortal=function(a,l,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:m==null?null:""+m,children:a,containerInfo:l,implementation:h}},t.createRoleSelector=function(a){return{$$typeof:Zr,value:a}},t.createTestNameSelector=function(a){return{$$typeof:Co,value:a}},t.createTextSelector=function(a){return{$$typeof:Na,value:a}},t.deferredUpdates=function(a){var l=rt,h=Bt.transition;try{return Bt.transition=null,rt=16,a()}finally{rt=l,Bt.transition=h}},t.discreteUpdates=function(a,l,h,m,v){var C=rt,R=Bt.transition;try{return Bt.transition=null,rt=1,a(l,h,m,v)}finally{rt=C,Bt.transition=R,Je===0&&mt()}},t.findAllNodes=ni,t.findBoundingRects=function(a,l){if(!Et)throw Error(d(363));l=ni(a,l),a=[];for(var h=0;h<l.length;h++)a.push(Nr(l[h]));for(l=a.length-1;0<l;l--){h=a[l];for(var m=h.x,v=m+h.width,C=h.y,R=C+h.height,W=l-1;0<=W;W--)if(l!==W){var Z=a[W],fe=Z.x,Te=fe+Z.width,Ke=Z.y,Ce=Ke+Z.height;if(m>=fe&&C>=Ke&&v<=Te&&R<=Ce){a.splice(l,1);break}else if(m!==fe||h.width!==Z.width||Ce<C||Ke>R){if(!(C!==Ke||h.height!==Z.height||Te<m||fe>v)){fe>m&&(Z.width+=fe-m,Z.x=m),Te<v&&(Z.width=v-fe),a.splice(l,1);break}}else{Ke>C&&(Z.height+=Ke-C,Z.y=C),Ce<R&&(Z.height=R-Ke),a.splice(l,1);break}}}return a},t.findHostInstance=Gs,t.findHostInstanceWithNoPortals=function(a){return a=Ge(a),a=a!==null?Me(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return Gs(a)},t.flushControlled=function(a){var l=Je;Je|=1;var h=Bt.transition,m=rt;try{Bt.transition=null,rt=1,a()}finally{rt=m,Bt.transition=h,Je=l,Je===0&&(mt(),gn())}},t.flushPassiveEffects=Si,t.flushSync=tc,t.focusWithin=function(a,l){if(!Et)throw Error(d(363));for(a=ei(a),l=ti(a,l),l=Array.from(l),a=0;a<l.length;){var h=l[a++];if(!Vr(h)){if(h.tag===5&&Ai(h.stateNode))return!0;for(h=h.child;h!==null;)l.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return rt},t.getFindAllNodesFailureDescription=function(a,l){if(!Et)throw Error(d(363));var h=0,m=[];a=[ei(a),0];for(var v=0;v<a.length;){var C=a[v++],R=a[v++],W=l[R];if((C.tag!==5||!Vr(C))&&(Ta(C,W)&&(m.push(Bl(W)),R++,R>h&&(h=R)),R<l.length))for(C=C.child;C!==null;)a.push(C,R),C=C.sibling}if(h<l.length){for(a=[];h<l.length;h++)a.push(Bl(l[h]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return le(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:vf,findFiberByHostInstance:a.findFiberByHostInstance||Gd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)a=!0;else{try{Di=l.inject(a),qn=l}catch{}a=!!l.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,l,h,m){if(!Et)throw Error(d(363));a=ni(a,l);var v=ds(a,h,m).disconnect;return{disconnect:function(){v()}}},t.registerMutableSourceForHydration=function(a,l){var h=l._getVersion;h=h(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,h]:a.mutableSourceEagerHydrationData.push(l,h)},t.runWithPriority=function(a,l){var h=rt;try{return rt=a,l()}finally{rt=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,l,h,m){var v=l.current,C=Tt(),R=nn(v);return h=Ql(h),l.context===null?l.context=h:l.pendingContext=h,l=pi(C,R),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=gi(v,l,R),a!==null&&(bn(a,v,R,C),pa(a,v,R)),R},t}),_p}var Hm;function N8(){return Hm||(Hm=1,xp.exports=P8()),xp.exports}var T8=N8();const b8=Uh(T8);var wp={exports:{}},Ho={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function R8(){return Vm||(Vm=1,Ho.ConcurrentRoot=1,Ho.ContinuousEventPriority=4,Ho.DefaultEventPriority=16,Ho.DiscreteEventPriority=1,Ho.IdleEventPriority=536870912,Ho.LegacyRoot=0),Ho}var qm;function M8(){return qm||(qm=1,wp.exports=R8()),wp.exports}var zy=M8();const Ym={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Xm=!1,Qm=!1;const j0=".react-konva-event",I8=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,A8=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,O8={};function ef(r,e,t=O8){if(!Xm&&"zIndex"in e&&(console.warn(A8),Xm=!0),!Qm&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(I8),Qm=!0)}for(var u in t)if(!Ym[u]){var d=u.slice(0,2)==="on",f=t[u]!==e[u];if(d&&f){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),r.off(g,t[u])}var x=!e.hasOwnProperty(u);x&&r.setAttr(u,void 0)}var _=e._useStrictMode,k={},S=!1;const N={};for(var u in e)if(!Ym[u]){var d=u.slice(0,2)==="on",P=t[u]!==e[u];if(d&&P){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),e[u]&&(N[g]=e[u])}!d&&(e[u]!==t[u]||_&&e[u]!==r.getAttr(u))&&(S=!0,k[u]=e[u])}S&&(r.setAttrs(k),ta(r));for(var g in N)r.on(g+j0,N[g])}function ta(r){if(!xe.autoDrawEnabled){var e=r.getLayer()||r.getStage();e&&e.batchDraw()}}var Sp=i0();const Fy={},L8={};Ha.Node.prototype._applyProps=ef;function D8(r,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}r.add(e),ta(r)}function j8(r,e,t){let i=Ha[r];i||(console.error(`Konva has no node with the type ${r}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${r}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Ha.Group);const o={},u={};for(var d in e){var f=d.slice(0,2)==="on";f?u[d]=e[d]:o[d]=e[d]}const g=new i(o);return ef(g,u),g}function z8(r,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${r}"`)}function F8(r,e,t){return!1}function B8(r){return r}function G8(){return null}function U8(){return null}function W8(r,e,t,i){return L8}function H8(){}function V8(r){}function q8(r,e){return!1}function Y8(){return Fy}function X8(){return Fy}const Q8=setTimeout,K8=clearTimeout,$8=-1;function J8(r,e){return!1}const Z8=!1,ex=!0,tx=!0;function nx(r,e){e.parent===r?e.moveToTop():r.add(e),ta(r)}function rx(r,e){e.parent===r?e.moveToTop():r.add(e),ta(r)}function By(r,e,t){e._remove(),r.add(e),e.setZIndex(t.getZIndex()),ta(r)}function ix(r,e,t){By(r,e,t)}function sx(r,e){e.destroy(),e.off(j0),ta(r)}function ox(r,e){e.destroy(),e.off(j0),ta(r)}function ax(r,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function lx(r,e,t){}function ux(r,e,t,i,o){ef(r,o,i)}function cx(r){r.hide(),ta(r)}function dx(r){}function hx(r,e){(e.visible==null||e.visible)&&r.show()}function fx(r,e){}function px(r){}function gx(){}const mx=()=>zy.DefaultEventPriority,yx=Object.freeze(Object.defineProperty({__proto__:null,appendChild:nx,appendChildToContainer:rx,appendInitialChild:D8,cancelTimeout:K8,clearContainer:px,commitMount:lx,commitTextUpdate:ax,commitUpdate:ux,createInstance:j8,createTextInstance:z8,detachDeletedInstance:gx,finalizeInitialChildren:F8,getChildHostContext:X8,getCurrentEventPriority:mx,getPublicInstance:B8,getRootHostContext:Y8,hideInstance:cx,hideTextInstance:dx,idlePriority:Sp.unstable_IdlePriority,insertBefore:By,insertInContainerBefore:ix,isPrimaryRenderer:Z8,noTimeout:$8,now:Sp.unstable_now,prepareForCommit:G8,preparePortalMount:U8,prepareUpdate:W8,removeChild:sx,removeChildFromContainer:ox,resetAfterCommit:H8,resetTextContent:V8,run:Sp.unstable_runWithPriority,scheduleTimeout:Q8,shouldDeprioritizeSubtree:q8,shouldSetTextContent:J8,supportsMutation:tx,unhideInstance:hx,unhideTextInstance:fx,warnsIfNotActing:ex},Symbol.toStringTag,{value:"Module"}));var vx=Object.defineProperty,xx=Object.defineProperties,_x=Object.getOwnPropertyDescriptors,Km=Object.getOwnPropertySymbols,wx=Object.prototype.hasOwnProperty,Sx=Object.prototype.propertyIsEnumerable,$m=(r,e,t)=>e in r?vx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Jm=(r,e)=>{for(var t in e||(e={}))wx.call(e,t)&&$m(r,t,e[t]);if(Km)for(var t of Km(e))Sx.call(e,t)&&$m(r,t,e[t]);return r},kx=(r,e)=>xx(r,_x(e)),Zm,e1;typeof window<"u"&&((Zm=window.document)!=null&&Zm.createElement||((e1=window.navigator)==null?void 0:e1.product)==="ReactNative")?Le.useLayoutEffect:Le.useEffect;function Gy(r,e,t){if(!r)return;if(t(r)===!0)return r;let i=r.child;for(;i;){const o=Gy(i,e,t);if(o)return o;i=i.sibling}}function Uy(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const t1=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=t1;return}return t1.apply(this,arguments)};const z0=Uy(Le.createContext(null));class Wy extends Le.Component{render(){return Le.createElement(z0.Provider,{value:this._reactInternals},this.props.children)}}function Cx(){const r=Le.useContext(z0);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Le.useId();return Le.useMemo(()=>{for(const i of[r,r==null?void 0:r.alternate]){if(!i)continue;const o=Gy(i,!1,u=>{let d=u.memoizedState;for(;d;){if(d.memoizedState===e)return!0;d=d.next}});if(o)return o}},[r,e])}function Ex(){const r=Cx(),[e]=Le.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const o=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;o&&o!==z0&&!e.has(o)&&e.set(o,Le.useContext(Uy(o)))}t=t.return}return e}function Px(){const r=Ex();return Le.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>i=>Le.createElement(e,null,Le.createElement(t.Provider,kx(Jm({},i),{value:r.get(t)}))),e=>Le.createElement(Wy,Jm({},e))),[r])}function Nx(r){const e=Pe.useRef({});return Pe.useLayoutEffect(()=>{e.current=r}),Pe.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Tx=r=>{const e=Pe.useRef(null),t=Pe.useRef(null),i=Pe.useRef(null),o=Nx(r),u=Px(),d=f=>{const{forwardedRef:g}=r;g&&(typeof g=="function"?g(f):g.current=f)};return Pe.useLayoutEffect(()=>(t.current=new Ha.Stage({width:r.width,height:r.height,container:e.current}),d(t.current),i.current=Ac.createContainer(t.current,zy.LegacyRoot,!1,null),Ac.updateContainer(Pe.createElement(u,{},r.children),i.current),()=>{Ha.isBrowser&&(d(null),Ac.updateContainer(null,i.current,null),t.current.destroy())}),[]),Pe.useLayoutEffect(()=>{d(t.current),ef(t.current,r,o),Ac.updateContainer(Pe.createElement(u,{},r.children),i.current,null)}),Pe.createElement("div",{ref:e,id:r.id,accessKey:r.accessKey,className:r.className,role:r.role,style:r.style,tabIndex:r.tabIndex,title:r.title})},bx="Layer",Sn="Group",os="Rect",Br="Circle",zr="Line",Qo="Text",Va="Path",kp="RegularPolygon",Ac=b8(yx);Ac.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Pe.version,rendererPackageName:"react-konva"});const Rx=Pe.forwardRef((r,e)=>Pe.createElement(Wy,{},Pe.createElement(Tx,{...r,forwardedRef:e})));function Hy(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=Hy(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function Vy(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=Hy(r))&&(i&&(i+=" "),i+=e);return i}const Mx=(r,e)=>{const t=new Array(r.length+e.length);for(let i=0;i<r.length;i++)t[i]=r[i];for(let i=0;i<e.length;i++)t[r.length+i]=e[i];return t},Ix=(r,e)=>({classGroupId:r,validator:e}),qy=(r=new Map,e=null,t)=>({nextPart:r,validators:e,classGroupId:t}),Bh="-",n1=[],Ax="arbitrary..",Ox=r=>{const e=Dx(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=r;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return Lx(d);const f=d.split(Bh),g=f[0]===""&&f.length>1?1:0;return Yy(f,g,e)},getConflictingClassGroupIds:(d,f)=>{if(f){const g=i[d],x=t[d];return g?x?Mx(x,g):g:x||n1}return t[d]||n1}}},Yy=(r,e,t)=>{if(r.length-e===0)return t.classGroupId;const o=r[e],u=t.nextPart.get(o);if(u){const x=Yy(r,e+1,u);if(x)return x}const d=t.validators;if(d===null)return;const f=e===0?r.join(Bh):r.slice(e).join(Bh),g=d.length;for(let x=0;x<g;x++){const _=d[x];if(_.validator(f))return _.classGroupId}},Lx=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=r.slice(1,-1),t=e.indexOf(":"),i=e.slice(0,t);return i?Ax+i:void 0})(),Dx=r=>{const{theme:e,classGroups:t}=r;return jx(t,e)},jx=(r,e)=>{const t=qy();for(const i in r){const o=r[i];F0(o,t,i,e)}return t},F0=(r,e,t,i)=>{const o=r.length;for(let u=0;u<o;u++){const d=r[u];zx(d,e,t,i)}},zx=(r,e,t,i)=>{if(typeof r=="string"){Fx(r,e,t);return}if(typeof r=="function"){Bx(r,e,t,i);return}Gx(r,e,t,i)},Fx=(r,e,t)=>{const i=r===""?e:Xy(e,r);i.classGroupId=t},Bx=(r,e,t,i)=>{if(Ux(r)){F0(r(i),e,t,i);return}e.validators===null&&(e.validators=[]),e.validators.push(Ix(t,r))},Gx=(r,e,t,i)=>{const o=Object.entries(r),u=o.length;for(let d=0;d<u;d++){const[f,g]=o[d];F0(g,Xy(e,f),t,i)}},Xy=(r,e)=>{let t=r;const i=e.split(Bh),o=i.length;for(let u=0;u<o;u++){const d=i[u];let f=t.nextPart.get(d);f||(f=qy(),t.nextPart.set(d,f)),t=f}return t},Ux=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,Wx=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),i=Object.create(null);const o=(u,d)=>{t[u]=d,e++,e>r&&(e=0,i=t,t=Object.create(null))};return{get(u){let d=t[u];if(d!==void 0)return d;if((d=i[u])!==void 0)return o(u,d),d},set(u,d){u in t?t[u]=d:o(u,d)}}},t0="!",r1=":",Hx=[],i1=(r,e,t,i,o)=>({modifiers:r,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:i,isExternal:o}),Vx=r=>{const{prefix:e,experimentalParseClassName:t}=r;let i=o=>{const u=[];let d=0,f=0,g=0,x;const _=o.length;for(let A=0;A<_;A++){const M=o[A];if(d===0&&f===0){if(M===r1){u.push(o.slice(g,A)),g=A+1;continue}if(M==="/"){x=A;continue}}M==="["?d++:M==="]"?d--:M==="("?f++:M===")"&&f--}const k=u.length===0?o:o.slice(g);let S=k,N=!1;k.endsWith(t0)?(S=k.slice(0,-1),N=!0):k.startsWith(t0)&&(S=k.slice(1),N=!0);const P=x&&x>g?x-g:void 0;return i1(u,N,S,P)};if(e){const o=e+r1,u=i;i=d=>d.startsWith(o)?u(d.slice(o.length)):i1(Hx,!1,d,void 0,!0)}if(t){const o=i;i=u=>t({className:u,parseClassName:o})}return i},qx=r=>{const e=new Map;return r.orderSensitiveModifiers.forEach((t,i)=>{e.set(t,1e6+i)}),t=>{const i=[];let o=[];for(let u=0;u<t.length;u++){const d=t[u],f=d[0]==="[",g=e.has(d);f||g?(o.length>0&&(o.sort(),i.push(...o),o=[]),i.push(d)):o.push(d)}return o.length>0&&(o.sort(),i.push(...o)),i}},Yx=r=>({cache:Wx(r.cacheSize),parseClassName:Vx(r),sortModifiers:qx(r),...Ox(r)}),Xx=/\s+/,Qx=(r,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:u}=e,d=[],f=r.trim().split(Xx);let g="";for(let x=f.length-1;x>=0;x-=1){const _=f[x],{isExternal:k,modifiers:S,hasImportantModifier:N,baseClassName:P,maybePostfixModifierPosition:A}=t(_);if(k){g=_+(g.length>0?" "+g:g);continue}let M=!!A,I=i(M?P.substring(0,A):P);if(!I){if(!M){g=_+(g.length>0?" "+g:g);continue}if(I=i(P),!I){g=_+(g.length>0?" "+g:g);continue}M=!1}const b=S.length===0?"":S.length===1?S[0]:u(S).join(":"),O=N?b+t0:b,L=O+I;if(d.indexOf(L)>-1)continue;d.push(L);const X=o(I,M);for(let te=0;te<X.length;++te){const ie=X[te];d.push(O+ie)}g=_+(g.length>0?" "+g:g)}return g},Kx=(...r)=>{let e=0,t,i,o="";for(;e<r.length;)(t=r[e++])&&(i=Qy(t))&&(o&&(o+=" "),o+=i);return o},Qy=r=>{if(typeof r=="string")return r;let e,t="";for(let i=0;i<r.length;i++)r[i]&&(e=Qy(r[i]))&&(t&&(t+=" "),t+=e);return t},$x=(r,...e)=>{let t,i,o,u;const d=g=>{const x=e.reduce((_,k)=>k(_),r());return t=Yx(x),i=t.cache.get,o=t.cache.set,u=f,f(g)},f=g=>{const x=i(g);if(x)return x;const _=Qx(g,t);return o(g,_),_};return u=d,(...g)=>u(Kx(...g))},Jx=[],wn=r=>{const e=t=>t[r]||Jx;return e.isThemeGetter=!0,e},Ky=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,$y=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Zx=/^\d+\/\d+$/,e9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,r9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,i9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ru=r=>Zx.test(r),tt=r=>!!r&&!Number.isNaN(Number(r)),Vo=r=>!!r&&Number.isInteger(Number(r)),Cp=r=>r.endsWith("%")&&tt(r.slice(0,-1)),Hs=r=>e9.test(r),s9=()=>!0,o9=r=>t9.test(r)&&!n9.test(r),Jy=()=>!1,a9=r=>r9.test(r),l9=r=>i9.test(r),u9=r=>!Ae(r)&&!Oe(r),c9=r=>fu(r,t2,Jy),Ae=r=>Ky.test(r),Ba=r=>fu(r,n2,o9),Ep=r=>fu(r,g9,tt),s1=r=>fu(r,Zy,Jy),d9=r=>fu(r,e2,l9),kh=r=>fu(r,r2,a9),Oe=r=>$y.test(r),Ec=r=>pu(r,n2),h9=r=>pu(r,m9),o1=r=>pu(r,Zy),f9=r=>pu(r,t2),p9=r=>pu(r,e2),Ch=r=>pu(r,r2,!0),fu=(r,e,t)=>{const i=Ky.exec(r);return i?i[1]?e(i[1]):t(i[2]):!1},pu=(r,e,t=!1)=>{const i=$y.exec(r);return i?i[1]?e(i[1]):t:!1},Zy=r=>r==="position"||r==="percentage",e2=r=>r==="image"||r==="url",t2=r=>r==="length"||r==="size"||r==="bg-size",n2=r=>r==="length",g9=r=>r==="number",m9=r=>r==="family-name",r2=r=>r==="shadow",y9=()=>{const r=wn("color"),e=wn("font"),t=wn("text"),i=wn("font-weight"),o=wn("tracking"),u=wn("leading"),d=wn("breakpoint"),f=wn("container"),g=wn("spacing"),x=wn("radius"),_=wn("shadow"),k=wn("inset-shadow"),S=wn("text-shadow"),N=wn("drop-shadow"),P=wn("blur"),A=wn("perspective"),M=wn("aspect"),I=wn("ease"),b=wn("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],X=()=>[...L(),Oe,Ae],te=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto","contain","none"],K=()=>[Oe,Ae,g],ye=()=>[ru,"full","auto",...K()],ke=()=>[Vo,"none","subgrid",Oe,Ae],Ge=()=>["auto",{span:["full",Vo,Oe,Ae]},Vo,Oe,Ae],ve=()=>[Vo,"auto",Oe,Ae],De=()=>["auto","min","max","fr",Oe,Ae],Me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],le=()=>["auto",...K()],ue=()=>[ru,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...K()],G=()=>[r,Oe,Ae],he=()=>[...L(),o1,s1,{position:[Oe,Ae]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],z=()=>["auto","cover","contain",f9,c9,{size:[Oe,Ae]}],ee=()=>[Cp,Ec,Ba],Se=()=>["","none","full",x,Oe,Ae],je=()=>["",tt,Ec,Ba],Ye=()=>["solid","dashed","dotted","double"],Xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ue=()=>[tt,Cp,o1,s1],et=()=>["","none",P,Oe,Ae],B=()=>["none",tt,Oe,Ae],Y=()=>["none",tt,Oe,Ae],re=()=>[tt,Oe,Ae],We=()=>[ru,"full",...K()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Hs],breakpoint:[Hs],color:[s9],container:[Hs],"drop-shadow":[Hs],ease:["in","out","in-out"],font:[u9],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Hs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Hs],shadow:[Hs],spacing:["px",tt],text:[Hs],"text-shadow":[Hs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ru,Ae,Oe,M]}],container:["container"],columns:[{columns:[tt,Ae,Oe,f]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:X()}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ye()}],"inset-x":[{"inset-x":ye()}],"inset-y":[{"inset-y":ye()}],start:[{start:ye()}],end:[{end:ye()}],top:[{top:ye()}],right:[{right:ye()}],bottom:[{bottom:ye()}],left:[{left:ye()}],visibility:["visible","invisible","collapse"],z:[{z:[Vo,"auto",Oe,Ae]}],basis:[{basis:[ru,"full","auto",f,...K()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,ru,"auto","initial","none",Ae]}],grow:[{grow:["",tt,Oe,Ae]}],shrink:[{shrink:["",tt,Oe,Ae]}],order:[{order:[Vo,"first","last","none",Oe,Ae]}],"grid-cols":[{"grid-cols":ke()}],"col-start-end":[{col:Ge()}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":ke()}],"row-start-end":[{row:Ge()}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":De()}],"auto-rows":[{"auto-rows":De()}],gap:[{gap:K()}],"gap-x":[{"gap-x":K()}],"gap-y":[{"gap-y":K()}],"justify-content":[{justify:[...Me(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...Me()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":Me()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:K()}],px:[{px:K()}],py:[{py:K()}],ps:[{ps:K()}],pe:[{pe:K()}],pt:[{pt:K()}],pr:[{pr:K()}],pb:[{pb:K()}],pl:[{pl:K()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":K()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":K()}],"space-y-reverse":["space-y-reverse"],size:[{size:ue()}],w:[{w:[f,"screen",...ue()]}],"min-w":[{"min-w":[f,"screen","none",...ue()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...ue()]}],h:[{h:["screen","lh",...ue()]}],"min-h":[{"min-h":["screen","lh","none",...ue()]}],"max-h":[{"max-h":["screen","lh",...ue()]}],"font-size":[{text:["base",t,Ec,Ba]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Oe,Ep]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cp,Ae]}],"font-family":[{font:[h9,Ae,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Oe,Ae]}],"line-clamp":[{"line-clamp":[tt,"none",Oe,Ep]}],leading:[{leading:[u,...K()]}],"list-image":[{"list-image":["none",Oe,Ae]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Oe,Ae]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Oe,Ba]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[tt,"auto",Oe,Ae]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Oe,Ae]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Oe,Ae]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:he()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Vo,Oe,Ae],radial:["",Oe,Ae],conic:[Vo,Oe,Ae]},p9,d9]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:je()}],"border-w-x":[{"border-x":je()}],"border-w-y":[{"border-y":je()}],"border-w-s":[{"border-s":je()}],"border-w-e":[{"border-e":je()}],"border-w-t":[{"border-t":je()}],"border-w-r":[{"border-r":je()}],"border-w-b":[{"border-b":je()}],"border-w-l":[{"border-l":je()}],"divide-x":[{"divide-x":je()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":je()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ye(),"hidden","none"]}],"divide-style":[{divide:[...Ye(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...Ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Oe,Ae]}],"outline-w":[{outline:["",tt,Ec,Ba]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",_,Ch,kh]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",k,Ch,kh]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:je()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[tt,Ba]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":je()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",S,Ch,kh]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[tt,Oe,Ae]}],"mix-blend":[{"mix-blend":[...Xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ue()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":Ue()}],"mask-image-t-to-pos":[{"mask-t-to":Ue()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":Ue()}],"mask-image-r-to-pos":[{"mask-r-to":Ue()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":Ue()}],"mask-image-b-to-pos":[{"mask-b-to":Ue()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":Ue()}],"mask-image-l-to-pos":[{"mask-l-to":Ue()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":Ue()}],"mask-image-x-to-pos":[{"mask-x-to":Ue()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":Ue()}],"mask-image-y-to-pos":[{"mask-y-to":Ue()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Oe,Ae]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ue()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ue()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:he()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Oe,Ae]}],filter:[{filter:["","none",Oe,Ae]}],blur:[{blur:et()}],brightness:[{brightness:[tt,Oe,Ae]}],contrast:[{contrast:[tt,Oe,Ae]}],"drop-shadow":[{"drop-shadow":["","none",N,Ch,kh]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",tt,Oe,Ae]}],"hue-rotate":[{"hue-rotate":[tt,Oe,Ae]}],invert:[{invert:["",tt,Oe,Ae]}],saturate:[{saturate:[tt,Oe,Ae]}],sepia:[{sepia:["",tt,Oe,Ae]}],"backdrop-filter":[{"backdrop-filter":["","none",Oe,Ae]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Oe,Ae]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Oe,Ae]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Oe,Ae]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Oe,Ae]}],"backdrop-invert":[{"backdrop-invert":["",tt,Oe,Ae]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Oe,Ae]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Oe,Ae]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Oe,Ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":K()}],"border-spacing-x":[{"border-spacing-x":K()}],"border-spacing-y":[{"border-spacing-y":K()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Oe,Ae]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Oe,Ae]}],ease:[{ease:["linear","initial",I,Oe,Ae]}],delay:[{delay:[tt,Oe,Ae]}],animate:[{animate:["none",b,Oe,Ae]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,Oe,Ae]}],"perspective-origin":[{"perspective-origin":X()}],rotate:[{rotate:B()}],"rotate-x":[{"rotate-x":B()}],"rotate-y":[{"rotate-y":B()}],"rotate-z":[{"rotate-z":B()}],scale:[{scale:Y()}],"scale-x":[{"scale-x":Y()}],"scale-y":[{"scale-y":Y()}],"scale-z":[{"scale-z":Y()}],"scale-3d":["scale-3d"],skew:[{skew:re()}],"skew-x":[{"skew-x":re()}],"skew-y":[{"skew-y":re()}],transform:[{transform:[Oe,Ae,"","none","gpu","cpu"]}],"transform-origin":[{origin:X()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Oe,Ae]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Oe,Ae]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[tt,Ec,Ba,Ep]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},v9=$x(y9);function $s(...r){return v9(Vy(r))}const Ri=Le.forwardRef(({className:r,...e},t)=>T.jsx("div",{ref:t,className:$s("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));Ri.displayName="Card";const ls=Le.forwardRef(({className:r,...e},t)=>T.jsx("div",{ref:t,className:$s("flex flex-col space-y-1.5 p-6",r),...e}));ls.displayName="CardHeader";const us=Le.forwardRef(({className:r,...e},t)=>T.jsx("h3",{ref:t,className:$s("text-2xl font-semibold leading-none tracking-tight",r),...e}));us.displayName="CardTitle";const i2=Le.forwardRef(({className:r,...e},t)=>T.jsx("p",{ref:t,className:$s("text-sm text-muted-foreground",r),...e}));i2.displayName="CardDescription";const Mi=Le.forwardRef(({className:r,...e},t)=>T.jsx("div",{ref:t,className:$s("p-6 pt-0",r),...e}));Mi.displayName="CardContent";const x9=Le.forwardRef(({className:r,...e},t)=>T.jsx("div",{ref:t,className:$s("flex items-center p-6 pt-0",r),...e}));x9.displayName="CardFooter";function a1(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function _9(...r){return e=>{let t=!1;const i=r.map(o=>{const u=a1(o,e);return!t&&typeof u=="function"&&(t=!0),u});if(t)return()=>{for(let o=0;o<i.length;o++){const u=i[o];typeof u=="function"?u():a1(r[o],null)}}}}var w9=Symbol.for("react.lazy"),Gh=B2[" use ".trim().toString()];function S9(r){return typeof r=="object"&&r!==null&&"then"in r}function s2(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===w9&&"_payload"in r&&S9(r._payload)}function k9(r){const e=E9(r),t=Le.forwardRef((i,o)=>{let{children:u,...d}=i;s2(u)&&typeof Gh=="function"&&(u=Gh(u._payload));const f=Le.Children.toArray(u),g=f.find(N9);if(g){const x=g.props.children,_=f.map(k=>k===g?Le.Children.count(x)>1?Le.Children.only(null):Le.isValidElement(x)?x.props.children:null:k);return T.jsx(e,{...d,ref:o,children:Le.isValidElement(x)?Le.cloneElement(x,void 0,_):null})}return T.jsx(e,{...d,ref:o,children:u})});return t.displayName=`${r}.Slot`,t}var C9=k9("Slot");function E9(r){const e=Le.forwardRef((t,i)=>{let{children:o,...u}=t;if(s2(o)&&typeof Gh=="function"&&(o=Gh(o._payload)),Le.isValidElement(o)){const d=b9(o),f=T9(u,o.props);return o.type!==Le.Fragment&&(f.ref=i?_9(i,d):d),Le.cloneElement(o,f)}return Le.Children.count(o)>1?Le.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var P9=Symbol("radix.slottable");function N9(r){return Le.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===P9}function T9(r,e){const t={...e};for(const i in e){const o=r[i],u=e[i];/^on[A-Z]/.test(i)?o&&u?t[i]=(...f)=>{const g=u(...f);return o(...f),g}:o&&(t[i]=o):i==="style"?t[i]={...o,...u}:i==="className"&&(t[i]=[o,u].filter(Boolean).join(" "))}return{...r,...t}}function b9(r){var i,o;let e=(i=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(o=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const l1=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,u1=Vy,o2=(r,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return u1(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:u}=e,d=Object.keys(o).map(x=>{const _=t==null?void 0:t[x],k=u==null?void 0:u[x];if(_===null)return null;const S=l1(_)||l1(k);return o[x][S]}),f=t&&Object.entries(t).reduce((x,_)=>{let[k,S]=_;return S===void 0||(x[k]=S),x},{}),g=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((x,_)=>{let{class:k,className:S,...N}=_;return Object.entries(N).every(P=>{let[A,M]=P;return Array.isArray(M)?M.includes({...u,...f}[A]):{...u,...f}[A]===M})?[...x,k,S]:x},[]);return u1(r,d,g,t==null?void 0:t.class,t==null?void 0:t.className)},R9=o2("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ti=Le.forwardRef(({className:r,variant:e,size:t,asChild:i=!1,...o},u)=>{const d=i?C9:"button";return T.jsx(d,{className:$s(R9({variant:e,size:t,className:r})),ref:u,...o})});Ti.displayName="Button";const M9=o2("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-yellow-500 text-black"}},defaultVariants:{variant:"default"}});function n0({className:r,variant:e,...t}){return T.jsx("div",{className:$s(M9({variant:e}),r),...t})}const a2=2,Hn={metal:{base:"#2d3748",light:"#4a5568",accent:"#718096"},organic:{base:"#1a4731",light:"#276749"},player0:{fill:"#0891b2",stroke:"#22d3ee",glow:"#06b6d4"},player1:{fill:"#ea580c",stroke:"#fb923c",glow:"#f97316"},highlight:{valid:"#fbbf24",active:"#f59e0b"}},Hc={0:{bg:"bg-cyan-500",bgLight:"bg-cyan-500/20",border:"border-cyan-400",text:"text-cyan-400"},1:{bg:"bg-orange-500",bgLight:"bg-orange-500/20",border:"border-orange-400",text:"text-orange-400"}};function I9({x:r,y:e,size:t=20,color:i="#718096"}){const o=t/20;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Va,{data:`M 0 ${-8*o} L ${5*o} ${-2*o} L ${3*o} ${8*o} L ${-3*o} ${8*o} L ${-5*o} ${-2*o} Z`,fill:i,stroke:"#cbd5e1",strokeWidth:1.5,opacity:.9}),T.jsx(Va,{data:`M ${-2*o} ${-5*o} L 0 ${-2*o} L ${-1*o} ${2*o}`,stroke:"#ffffff",strokeWidth:1.5,opacity:.6,lineCap:"round",lineJoin:"round"})]})}function A9({x:r,y:e,size:t=20}){const i=t/20;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Va,{data:`M 0 ${-8*i} Q ${7*i} ${-4*i} ${5*i} ${4*i} Q ${2*i} ${8*i} 0 ${8*i} Q ${-2*i} ${8*i} ${-5*i} ${4*i} Q ${-7*i} ${-4*i} 0 ${-8*i}`,fill:"#48bb78",stroke:"#276749",strokeWidth:1.5}),T.jsx(zr,{points:[0,-4*i,0,6*i],stroke:"#276749",strokeWidth:1.5,lineCap:"round"}),T.jsx(zr,{points:[0,0,3*i,-2*i],stroke:"#276749",strokeWidth:1,lineCap:"round"}),T.jsx(zr,{points:[0,2*i,-2.5*i,0],stroke:"#276749",strokeWidth:1,lineCap:"round"})]})}function B0({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("path",{d:"M12 2 L18 8 L15 20 L9 20 L6 8 Z",fill:"#475569",stroke:"#64748b",strokeWidth:"1.5"}),T.jsx("path",{d:"M9 6 L12 10 L10 14",stroke:"#94a3b8",strokeWidth:"1.5",fill:"none",opacity:"0.7"})]})}function G0({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("path",{d:"M12 2 Q20 6 17 14 Q14 20 12 20 Q10 20 7 14 Q4 6 12 2",fill:"#22c55e",stroke:"#16a34a",strokeWidth:"1.5"}),T.jsx("path",{d:"M12 6 L12 18 M12 10 L15 7 M12 14 L9 12",stroke:"#16a34a",strokeWidth:"1.5",fill:"none"})]})}function l2({size:r=16,className:e=""}){return T.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:T.jsx("path",{d:"M13 2 L6 14 L11 14 L10 22 L18 10 L13 10 Z",fill:"#facc15",stroke:"#eab308",strokeWidth:"1.5"})})}function u2({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#b45309",stroke:"#d97706",strokeWidth:"1.5"}),T.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"#fbbf24",stroke:"#d97706",strokeWidth:"1"}),T.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#b45309"})]})}function c2({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("ellipse",{cx:"12",cy:"12",rx:"7",ry:"9",fill:"#0d9488",stroke:"#14b8a6",strokeWidth:"1.5"}),T.jsx("path",{d:"M9 8 Q12 12 9 16 M15 8 Q12 12 15 16",stroke:"#5eead4",strokeWidth:"1.5",fill:"none"})]})}function O9({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"#c026d3",stroke:"#e879f9",strokeWidth:"1.5"}),T.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#f0abfc",opacity:"0.8"}),T.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"#fff"})]})}function d2({size:r=16,className:e=""}){return T.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[T.jsx("ellipse",{cx:"12",cy:"10",rx:"8",ry:"7",fill:"#6366f1",stroke:"#818cf8",strokeWidth:"1.5"}),T.jsx("path",{d:"M8 17 Q12 20 16 17",stroke:"#818cf8",strokeWidth:"1.5",fill:"none"}),T.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"#c7d2fe"}),T.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"#c7d2fe"})]})}function L9({x:r,y:e,size:t=16,color:i="#facc15"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(zr,{points:[0,8*o,0,-2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),T.jsx(zr,{points:[0,-2*o,0,-8*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),T.jsx(zr,{points:[0,-2*o,5*o,2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),T.jsx(zr,{points:[0,-2*o,-5*o,2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),T.jsx(Br,{radius:2*o,fill:i})]})}function D9({x:r,y:e,size:t=16,color:i="#94a3b8"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Va,{data:`M ${-6*o} ${8*o} L ${-6*o} ${-2*o} L ${-2*o} ${-6*o} L ${2*o} ${-2*o} L ${6*o} ${-6*o} L ${6*o} ${8*o} Z`,fill:i,stroke:"#64748b",strokeWidth:1}),T.jsx(os,{x:-2*o,y:2*o,width:4*o,height:6*o,fill:"#475569"})]})}function j9({x:r,y:e,size:t=16,color:i="#f97316"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Va,{data:`M ${-6*o} ${4*o} L ${-4*o} ${-4*o} L ${4*o} ${-4*o} L ${6*o} ${4*o} L ${4*o} ${8*o} L ${-4*o} ${8*o} Z`,fill:i,stroke:"#c2410c",strokeWidth:1}),T.jsx(Br,{x:0,y:-6*o,radius:2*o,fill:"#fbbf24"})]})}function z9({x:r,y:e,size:t=16,color:i="#22c55e"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Va,{data:`M ${-2*o} ${-8*o} L ${-2*o} ${-2*o} L ${-6*o} ${8*o} L ${6*o} ${8*o} L ${2*o} ${-2*o} L ${2*o} ${-8*o} Z`,fill:i,stroke:"#16a34a",strokeWidth:1}),T.jsx(Va,{data:`M ${-4*o} ${4*o} L ${4*o} ${4*o} L ${5*o} ${8*o} L ${-5*o} ${8*o} Z`,fill:"#4ade80"})]})}function F9({x:r,y:e,size:t=16,color:i="#c026d3"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(Br,{radius:6*o,fill:"transparent",stroke:i,strokeWidth:3*o}),T.jsx(Br,{radius:3*o,fill:i}),T.jsx(Br,{radius:1.5*o,fill:"#f0abfc"})]})}function B9({x:r,y:e,size:t=16,color:i="#6366f1"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(os,{x:-5*o,y:-5*o,width:10*o,height:10*o,fill:i,stroke:"#818cf8",strokeWidth:1}),T.jsx(zr,{points:[-7*o,-3*o,-5*o,-3*o],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(zr,{points:[-7*o,0,-5*o,0],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(zr,{points:[-7*o,3*o,-5*o,3*o],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(zr,{points:[5*o,-3*o,7*o,-3*o],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(zr,{points:[5*o,0,7*o,0],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(zr,{points:[5*o,3*o,7*o,3*o],stroke:"#818cf8",strokeWidth:2*o}),T.jsx(os,{x:-2*o,y:-2*o,width:4*o,height:4*o,fill:"#c7d2fe"})]})}function G9({x:r,y:e,size:t=16,color:i="#14b8a6"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(os,{x:-5*o,y:-4*o,width:10*o,height:12*o,fill:i,stroke:"#0d9488",strokeWidth:1,cornerRadius:2*o}),T.jsx(Br,{x:-2*o,y:2*o,radius:2*o,fill:"#5eead4"}),T.jsx(Br,{x:2*o,y:0,radius:1.5*o,fill:"#5eead4"}),T.jsx(Br,{x:0,y:4*o,radius:1*o,fill:"#5eead4"})]})}function U9({x:r,y:e,size:t=16,color:i="#ef4444"}){const o=t/16;return T.jsxs(Sn,{x:r,y:e,children:[T.jsx(os,{x:-5*o,y:2*o,width:10*o,height:6*o,fill:i,stroke:"#dc2626",strokeWidth:1}),T.jsx(Br,{y:0,radius:4*o,fill:i,stroke:"#dc2626",strokeWidth:1}),T.jsx(os,{x:-1.5*o,y:-8*o,width:3*o,height:6*o,fill:"#fca5a5",stroke:"#dc2626",strokeWidth:1})]})}function W9({type:r,x:e,y:t,size:i=14,playerColor:o}){return{windTurbine:T.jsx(L9,{x:e,y:t,size:i,color:"#facc15"}),factory:T.jsx(D9,{x:e,y:t,size:i,color:o}),orbitalForge:T.jsx(j9,{x:e,y:t,size:i,color:"#f97316"}),bioLab:T.jsx(z9,{x:e,y:t,size:i,color:"#22c55e"}),condenser:T.jsx(F9,{x:e,y:t,size:i,color:"#c026d3"}),chipEngraver:T.jsx(B9,{x:e,y:t,size:i,color:"#6366f1"}),biomassFactory:T.jsx(G9,{x:e,y:t,size:i,color:"#14b8a6"}),turret:T.jsx(U9,{x:e,y:t,size:i,color:o})}[r]||null}function H9({tile:r,x:e,y:t,size:i,isSelected:o,controllerId:u,currentPlayerId:d,isValidDrop:f,isDragOver:g,canBuildOnTile:x,probesByPlayer:_,buildingsOnTile:k,onClick:S}){const N=r.resourceType==="metal",P=u===d,A=u!==null&&u!==d;let M=N?Hn.metal.base:Hn.organic.base,I=N?Hn.metal.light:Hn.organic.light,b=2;return P?(I=Hn.player0.stroke,b=3):A&&(I=Hn.player1.stroke,b=3),x&&(I="#10b981",b=4),f&&(I=Hn.highlight.valid,b=4),g&&(M="#3d2810",I=Hn.highlight.active,b=5),o&&(I="#ffffff",b=4),T.jsxs(Sn,{x:e,y:t,onClick:S,style:{cursor:x?"pointer":"default"},children:[(f||g)&&T.jsx(kp,{sides:6,radius:i+6,fill:Hn.highlight.valid,rotation:0,opacity:.2}),x&&!f&&!g&&T.jsx(kp,{sides:6,radius:i+4,fill:"#10b981",rotation:0,opacity:.15}),T.jsx(kp,{sides:6,radius:i,fill:M,stroke:I,strokeWidth:b,rotation:0}),T.jsxs(Sn,{x:-i*.7,y:-i*.7,children:[T.jsx(Br,{radius:12,fill:"#0f0f1a",stroke:I,strokeWidth:2}),T.jsx(Qo,{x:-4,y:-5,text:String(r.value),fontSize:12,fontStyle:"bold",fill:"#ffffff",fontFamily:"monospace"})]}),T.jsx(Sn,{y:-8,children:N?T.jsx(I9,{x:0,y:0,size:20,color:Hn.metal.accent}):T.jsx(A9,{x:0,y:0,size:20})}),T.jsx(Qo,{x:-8,y:10,text:String(r.resourceCount),fontSize:14,fontStyle:"bold",fill:"#e2e8f0",fontFamily:"monospace",width:16,align:"center"}),k.length>0&&T.jsx(Sn,{children:k.slice(0,4).map((O,L)=>{const X=(L*90+45)*(Math.PI/180),te=Math.cos(X)*(i*.45),ie=Math.sin(X)*(i*.45),K=O.owner==="0"?Hn.player0.fill:Hn.player1.fill;return T.jsxs(Sn,{children:[T.jsx(Br,{x:te,y:ie,radius:10,fill:"#0f0f1a",opacity:.7}),T.jsx(W9,{type:O.type,x:te,y:ie,size:12,playerColor:K})]},L)})}),_.length>0&&T.jsx(Sn,{y:i*.55,children:_.map((O,L)=>{const X=O.playerId==="0"?Hn.player0:Hn.player1,te=(L-(_.length-1)/2)*20;return T.jsxs(Sn,{x:te,children:[T.jsx(Br,{radius:10,fill:X.glow,opacity:.3}),T.jsx(Br,{radius:7,fill:X.fill,stroke:X.stroke,strokeWidth:1.5}),T.jsx(Qo,{x:-3,y:-4,text:String(O.count),fontSize:9,fontStyle:"bold",fill:"#ffffff"})]},O.playerId)})})]})}const oi=40;function V9({value:r,count:e,x:t,y:i,isDeployed:o,onDragEnd:u,onDragMove:d}){const[f,g]=Le.useState(!1);return o?T.jsxs(Sn,{x:t,y:i,children:[T.jsx(os,{x:-oi/2,y:-oi/2,width:oi,height:oi,fill:"#059669",stroke:"#34d399",strokeWidth:2,cornerRadius:8}),T.jsx(Qo,{x:-7,y:-10,text:String(r),fontSize:18,fontStyle:"bold",fill:"#fff",fontFamily:"monospace"}),T.jsx(Qo,{x:-5,y:6,text:"",fontSize:12,fill:"#fff"})]}):T.jsxs(Sn,{x:t,y:i,draggable:!0,onDragStart:()=>g(!0),onDragEnd:x=>{g(!1),u(r,x.target.x(),x.target.y()),x.target.position({x:t,y:i})},onDragMove:x=>d(r,x.target.x(),x.target.y()),children:[T.jsx(os,{x:-oi/2-6,y:-oi/2-6,width:oi+12,height:oi+12,fill:Hn.highlight.valid,opacity:f?.5:.25,cornerRadius:12}),T.jsx(os,{x:-oi/2,y:-oi/2,width:oi,height:oi,fill:f?"#d97706":Hn.highlight.valid,stroke:"#fcd34d",strokeWidth:f?4:2,cornerRadius:8,shadowColor:Hn.highlight.valid,shadowBlur:f?25:15,shadowOpacity:.6}),T.jsx(Qo,{x:-7,y:-12,text:String(r),fontSize:20,fontStyle:"bold",fill:"#000",fontFamily:"monospace"}),e>1&&T.jsx(Qo,{x:-10,y:6,text:`${e}`,fontSize:11,fontStyle:"bold",fill:"#000"})]})}function q9({tiles:r,players:e,currentPlayerId:t,selectedTile:i,onTileClick:o,diceValues:u,deployedValues:d,moves:f,canDeploy:g,canBuild:x,playerEnergy:_}){const k=Le.useRef(null),S=Le.useRef(null),[N,P]=Le.useState(500),[A,M]=Le.useState(null),[I,b]=Le.useState(null);Le.useEffect(()=>{const ue=()=>{if(k.current){const G=k.current.offsetWidth;P(Math.min(600,Math.max(400,G)))}};return ue(),window.addEventListener("resize",ue),()=>window.removeEventListener("resize",ue)},[]);const O=N/10,L=N/2,X=N/2-40,ie=Math.sqrt(3)*O,K=1.5*O,ye=[{x:L-ie,y:X-K},{x:L,y:X-K},{x:L+ie,y:X-K},{x:L-1.5*ie,y:X},{x:L-.5*ie,y:X},{x:L+.5*ie,y:X},{x:L+1.5*ie,y:X},{x:L-ie,y:X+K},{x:L,y:X+K},{x:L+ie,y:X+K},{x:L-.5*ie,y:X+2*K},{x:L+.5*ie,y:X+2*K}],ke=[];r.forEach((ue,G)=>{if(G<ye.length){const he=ye[G];ke.push({tile:ue,x:he.x,y:he.y})}});const Ge=(ue,G,he)=>{b(ue);let oe=null;for(const{tile:z,x:ee,y:Se}of ke)if(Math.sqrt((G-ee)**2+(he-Se)**2)<O&&z.value===ue){oe=z.id;break}M(oe)},ve=(ue,G,he)=>{if(b(null),M(null),!(!g||d.includes(ue))){for(const{tile:oe,x:z,y:ee}of ke)if(Math.sqrt((G-z)**2+(he-ee)**2)<O&&oe.value===ue){const je=u.filter(Ye=>Ye===ue).length;_>=je&&f.deployProbes(ue,oe.id);break}}},De={};u.forEach(ue=>{De[ue]=(De[ue]||0)+1});const Me=Object.entries(De).map(([ue,G])=>({value:parseInt(ue),count:G})),_e=N-40,le=L-(Me.length-1)*30;return T.jsx("div",{ref:k,className:"w-full",children:T.jsx("div",{className:"mx-auto rounded-xl overflow-hidden",style:{width:N,height:N,background:"radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 100%)",boxShadow:"inset 0 0 100px rgba(0,0,0,0.5), 0 0 40px rgba(0,0,0,0.5)"},children:T.jsx(Rx,{ref:S,width:N,height:N,children:T.jsxs(bx,{children:[ke.map(({tile:ue,x:G,y:he})=>{const oe=du(ue,e),z=g&&u.includes(ue.value)&&!d.includes(ue.value)&&I===ue.value,ee=oe.controller===t,Se=x&&ee,je=[];for(const[Ue,et]of Object.entries(e)){const B=et.probes.filter(Y=>Y.tileId===ue.id).length;B>0&&je.push({playerId:Ue,count:B})}const Ye=[];for(const[Ue,et]of Object.entries(e))for(const B of et.buildings)B.tileId===ue.id&&Ye.push({type:B.type,owner:Ue});const Xe=Ue=>{if(S.current&&k.current){const B=k.current.getBoundingClientRect(),Y=B.left+G,re=B.top+he;o(ue.id,Y,re)}};return T.jsx(H9,{tile:ue,x:G,y:he,size:O,isSelected:i===ue.id,controllerId:oe.controller,currentPlayerId:t,isValidDrop:z,isDragOver:A===ue.id,canBuildOnTile:Se,probesByPlayer:je,buildingsOnTile:Ye,onClick:Xe},ue.id)}),g&&T.jsxs(T.Fragment,{children:[T.jsx(os,{x:L-110,y:_e-30,width:220,height:60,fill:"#0f0f1a",stroke:"#2d2d4a",strokeWidth:2,cornerRadius:10,opacity:.95}),T.jsx(Qo,{x:L-100,y:_e-25,text:"Glisse sur les cases",fontSize:10,fill:"#6b7280",width:200,align:"center"}),Me.map((ue,G)=>T.jsx(V9,{value:ue.value,count:ue.count,x:le+G*60,y:_e+5,isDeployed:d.includes(ue.value),onDragEnd:ve,onDragMove:Ge},`${ue.value}-${G}`))]})]})})})})}function Y9({G:r,ctx:e,moves:t,playerID:i,isConnected:o,matchData:u}){const[d,f]=Le.useState(null),[g,x]=Le.useState(null),[_,k]=Le.useState(null),S=(u==null?void 0:u.length)===a2&&u.every(O=>O.name),N=S&&u.every(O=>O.isConnected);if(!S||!N)return T.jsx(r_,{matchData:u,playerID:i,isConnected:o});if(e.gameover)return T.jsx(i_,{ctx:e,matchData:u,playerID:i});const P=r.players[i||"0"],A=e.currentPlayer===i,M=A&&r.deploymentComplete&&P.buildings.some(O=>O.type==="factory"),I=(O,L,X)=>{if(f(O),M){const te=r.tiles.find(ie=>ie.id===O);if(te&&du(te,r.players).controller===i){x(O),k({x:L,y:X});return}}x(null)},b=(O,L)=>{t.buildBuilding(O,L),x(null)};return T.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] p-3 sm:p-4 relative",children:[T.jsx(X9,{G:r,ctx:e,matchData:u,playerID:i,isMyTurn:A}),T.jsxs("div",{className:"max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-4 mt-4",children:[T.jsxs("div",{className:"lg:col-span-3 space-y-3",children:[T.jsx(Q9,{resources:P.resources}),e.phase==="main"&&A&&T.jsx(n_,{G:r,moves:t,playerID:i||"0"}),!A&&T.jsx(Ri,{className:"bg-[#12121a] border-[#2d2d4a]",children:T.jsx(Mi,{className:"py-8 text-center",children:T.jsx("div",{className:"text-gray-500",children:"En attente..."})})})]}),T.jsx("div",{className:"lg:col-span-6 flex items-center justify-center",children:T.jsx(q9,{tiles:r.tiles,players:r.players,currentPlayerId:i||"0",selectedTile:d,onTileClick:I,diceValues:r.diceValues,deployedValues:r.deployedValues,moves:t,canDeploy:e.phase==="main"&&A&&r.rolledDice&&!r.deploymentComplete,canBuild:M,playerEnergy:P.resources.energy})}),T.jsxs("div",{className:"lg:col-span-3 space-y-3",children:[T.jsx(K9,{players:r.players,matchData:u,currentPlayerId:i||"0"}),d!==null&&r.tiles.find(O=>O.id===d)&&T.jsx($9,{tile:r.tiles.find(O=>O.id===d),players:r.players,currentPlayerId:i||"0"})]})]}),g!==null&&_&&T.jsx(t_,{x:_.x,y:_.y,tileId:g,player:P,onBuild:b,onClose:()=>x(null)})]})}function X9({G:r,ctx:e,matchData:t,playerID:i,isMyTurn:o}){var f;const u=Hc[i]||Hc[0],d=((f=t==null?void 0:t.find(g=>String(g.id)===i))==null?void 0:f.name)||"Joueur";return T.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:`w-4 h-4 rounded-full ${u.bg}`}),T.jsx("span",{className:"text-white font-semibold",children:d})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx(n0,{className:o?"bg-emerald-600":"bg-gray-700",children:o?"Ton tour":"Attente"}),T.jsxs("span",{className:"text-gray-500 text-sm",children:["Round ",r.round,"  ",e.phase]})]})]})}function Q9({resources:r}){return T.jsxs(Ri,{className:"bg-[#12121a] border-[#2d2d4a]",children:[T.jsx(ls,{className:"pb-2",children:T.jsx(us,{className:"text-sm text-white",children:"Ressources"})}),T.jsxs(Mi,{className:"space-y-4",children:[T.jsxs("div",{className:"p-3 bg-indigo-950/50 rounded-lg border border-indigo-800/50",children:[T.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[T.jsxs("span",{className:"flex items-center gap-1.5 text-indigo-300",children:[T.jsx(d2,{size:16})," Intelligence"]}),T.jsxs("span",{className:"font-bold text-indigo-200",children:[r.intelligence,"/",Wp]})]}),T.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-purple-500 transition-all",style:{width:`${r.intelligence/Wp*100}%`}})})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[T.jsx(iu,{icon:T.jsx(B0,{size:20}),value:r.metal,color:"bg-slate-800",label:"Mtal"}),T.jsx(iu,{icon:T.jsx(G0,{size:20}),value:r.organic,color:"bg-green-900",label:"Organique"}),T.jsx(iu,{icon:T.jsx(l2,{size:20}),value:r.energy,color:"bg-yellow-950",highlight:!0,label:"nergie"})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[T.jsx(iu,{icon:T.jsx(u2,{size:20}),value:r.alloy,color:"bg-orange-950",label:"Alliage"}),T.jsx(iu,{icon:T.jsx(c2,{size:20}),value:r.biomass,color:"bg-teal-950",label:"Biomasse"}),T.jsx(iu,{icon:T.jsx(O9,{size:20}),value:r.plasma,color:"bg-fuchsia-950",label:"Plasma"})]})]})]})}function iu({icon:r,value:e,color:t,highlight:i,label:o}){return T.jsxs("div",{className:`p-2 rounded-lg ${t} ${i?"ring-1 ring-yellow-500/50":""} group relative cursor-help`,title:o,children:[T.jsx("div",{className:"flex justify-center",children:r}),T.jsx("div",{className:`text-center text-lg font-bold ${i?"text-yellow-400":"text-white"}`,children:e}),T.jsx("div",{className:"absolute -bottom-7 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:o})]})}function K9({players:r,matchData:e,currentPlayerId:t}){return T.jsxs(Ri,{className:"bg-[#12121a] border-[#2d2d4a]",children:[T.jsx(ls,{className:"pb-2",children:T.jsx(us,{className:"text-sm text-white",children:"Joueurs"})}),T.jsx(Mi,{className:"space-y-2",children:Object.entries(r).map(([i,o])=>{const u=e==null?void 0:e.find(g=>String(g.id)===i),d=Hc[i],f=i===t;return T.jsxs("div",{className:`p-3 rounded-lg ${d.bgLight} border ${d.border}`,children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${d.bg}`}),T.jsx("span",{className:"text-sm font-medium text-white",children:(u==null?void 0:u.name)||`P${i}`}),f&&T.jsx("span",{className:"text-xs text-gray-500",children:"(toi)"})]}),u!=null&&u.isConnected?T.jsx(ry,{className:"h-4 w-4 text-green-500"}):T.jsx(ny,{className:"h-4 w-4 text-red-500"})]}),T.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(d2,{size:14})," ",o.resources.intelligence]}),T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",children:T.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#3b82f6",stroke:"#60a5fa",strokeWidth:"2"})}),o.probes.filter(g=>g.tileId===null).length,"/",o.probes.length]}),T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",children:T.jsx("path",{d:"M4 20 L4 8 L12 4 L20 8 L20 20 Z",fill:"#64748b",stroke:"#94a3b8",strokeWidth:"1.5"})}),o.buildings.length]})]})]},i)})})]})}function $9({tile:r,players:e,currentPlayerId:t}){var o;const i=du(r,e);return T.jsxs(Ri,{className:"bg-[#12121a] border-[#2d2d4a]",children:[T.jsx(ls,{className:"pb-2",children:T.jsxs(us,{className:"text-sm text-white",children:["Tuile ",r.id]})}),T.jsxs(Mi,{className:"text-sm space-y-2",children:[T.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[r.resourceType==="metal"?T.jsx(B0,{size:18}):T.jsx(G0,{size:18}),T.jsxs("span",{children:[r.resourceType==="metal"?"Mtal":"Organique",": ",r.resourceCount]})]}),T.jsxs("div",{className:"text-gray-300",children:["D: ",T.jsx("span",{className:"font-bold text-white",children:r.value})]}),T.jsxs("div",{className:"text-gray-300",children:["Contrle: ",i.controller?T.jsxs("span",{className:(o=Hc[i.controller])==null?void 0:o.text,children:["Joueur ",i.controller]}):T.jsx("span",{className:"text-gray-500",children:"Aucun"})]}),i.harvestCount>0&&T.jsxs("div",{className:"text-green-400",children:["Rcolte: +",i.harvestCount]})]})]})}const J9=[{type:"windTurbine",name:"olienne",desc:"+2 nergie/tour",cost:{metal:2,organic:1}},{type:"factory",name:"Usine",desc:"Permet construction",cost:{metal:2}},{type:"orbitalForge",name:"Forge",desc:"2 mtal  1 alliage",cost:{metal:2}},{type:"bioLab",name:"Labo Bio",desc:"2 organique  1 biomasse",cost:{organic:2}},{type:"condenser",name:"Condenseur",desc:"3 nergie  1 plasma",cost:{energy:3}},{type:"chipEngraver",name:"Graveur",desc:"1 alliage + 1 biomasse  1 intel",cost:{alloy:1,biomass:1}},{type:"biomassFactory",name:"Usine Bio",desc:"Brle biomasse  +2 nergie",cost:{metal:1,biomass:1}},{type:"turret",name:"Tourelle",desc:"+1 dfense sur tuile",cost:{metal:1,energy:1}}],Z9={orbitalForge:"Forge",bioLab:"Labo",condenser:"Condenseur",chipEngraver:"Graveur",biomassFactory:"Usine Bio"};function e_(r){const e={metal:T.jsx(B0,{size:12}),organic:T.jsx(G0,{size:12}),energy:T.jsx(l2,{size:12}),alloy:T.jsx(u2,{size:12}),biomass:T.jsx(c2,{size:12})};return T.jsx("span",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:Object.entries(r).map(([t,i],o)=>T.jsxs("span",{className:"flex items-center",children:[o>0&&T.jsx("span",{className:"mx-0.5",children:"+"}),i,e[t]]},t))})}function t_({x:r,y:e,tileId:t,player:i,onBuild:o,onClose:u}){const d=k=>Object.entries(k).every(([S,N])=>i.resources[S]>=(N||0)),x=Math.min(r,window.innerWidth-200-20),_=Math.min(e,window.innerHeight-320-20);return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"fixed inset-0 z-40",onClick:u}),T.jsxs("div",{className:"fixed z-50 bg-[#1a1a2e] border border-emerald-700 rounded-lg shadow-xl p-2",style:{left:x,top:_,width:200},children:[T.jsxs("div",{className:"flex justify-between items-center mb-2 pb-1 border-b border-gray-700",children:[T.jsxs("span",{className:"text-xs font-semibold text-emerald-400",children:["Construire sur T",t]}),T.jsx("button",{onClick:u,className:"text-gray-500 hover:text-white text-sm",children:""})]}),T.jsx("div",{className:"space-y-1 max-h-72 overflow-y-auto",children:J9.map(k=>{const S=d(k.cost);return T.jsxs("button",{onClick:()=>{S&&o(k.type,t)},disabled:!S,className:`w-full p-2 rounded text-left transition-colors ${S?"bg-gray-800 hover:bg-emerald-900/50 border border-gray-700 hover:border-emerald-600":"bg-gray-900 border border-gray-800 opacity-40 cursor-not-allowed"}`,children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("span",{className:"text-xs font-medium text-white",children:k.name}),e_(k.cost)]}),T.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:k.desc})]},k.type)})})]})]})}function n_({G:r,moves:e,playerID:t}){const i=r.players[t],o=i.probes.filter(S=>S.tileId===null),u=i.probes.filter(S=>S.tileId!==null),d=r.deployedValues.length,f=[...new Set(r.diceValues)].length,g=i.resources.energy>=1,x=i.buildings.filter(S=>!S.activated&&["orbitalForge","bioLab","condenser","chipEngraver","biomassFactory"].includes(S.type)),_=i.buildings.some(S=>S.type==="factory"),k=r.tiles.filter(S=>du(S,r.players).controller===t);return r.deploymentComplete?T.jsxs(Ri,{className:"bg-[#12121a] border-emerald-800/50",children:[T.jsx(ls,{className:"pb-2",children:T.jsx(us,{className:"text-sm text-emerald-400",children:" Construction"})}),T.jsxs(Mi,{className:"space-y-3",children:[T.jsx("p",{className:"text-[10px] text-gray-400",children:"Clique sur une tuile contrle pour construire"}),x.length>0&&T.jsxs("div",{className:"space-y-1",children:[T.jsx("p",{className:"text-[10px] text-gray-500",children:"Activer (1 nergie):"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:x.map(S=>T.jsxs(Ti,{size:"sm",variant:"outline",className:"text-[10px] px-2 py-1 h-auto",onClick:()=>e.activateBuilding(S.id),disabled:i.resources.energy<1,children:[" ",Z9[S.type]||S.type]},S.id))})]}),T.jsx(Ti,{size:"sm",variant:"outline",className:"w-full h-8 text-xs",onClick:()=>e.buildProbe(),disabled:i.probes.length>=12||i.resources.alloy<1||i.resources.organic<1,children:"+ Nouvelle sonde (1 alliage + 1 organique)"}),_&&k.length>0?T.jsxs("div",{className:"p-2 bg-emerald-950/30 rounded border border-emerald-800/50",children:[T.jsxs("p",{className:"text-[10px] text-emerald-300",children:[" ",k.length," tuile",k.length>1?"s":""," contrle",k.length>1?"s":""]}),T.jsx("p",{className:"text-[9px] text-gray-500 mt-1",children:"Clique dessus pour ouvrir le menu de construction"})]}):_?T.jsx("p",{className:"text-[10px] text-yellow-400",children:" Contrle une tuile d'abord"}):T.jsx("p",{className:"text-[10px] text-red-400",children:" Usine requise pour construire"}),T.jsx(Ti,{size:"sm",className:"w-full bg-cyan-600 hover:bg-cyan-500",onClick:()=>e.endTurn(),children:"Fin du tour "})]})]}):T.jsxs(Ri,{className:"bg-[#12121a] border-amber-800/50",children:[T.jsx(ls,{className:"pb-2",children:T.jsx(us,{className:"text-sm text-amber-400",children:" Dploiement"})}),T.jsxs(Mi,{className:"space-y-3",children:[r.rolledDice?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"text-xs text-gray-300",children:"Glisse les ds sur les tuiles correspondantes"}),T.jsxs("div",{className:"text-sm font-bold text-amber-400",children:["Dploy: ",d,"/",f]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"text-[10px] text-gray-400",children:[o.length," sondes libres  ",u.length," dployes"]}),o.length>0?T.jsxs(Ti,{size:"sm",className:"w-full h-8 text-xs bg-amber-600 hover:bg-amber-500",onClick:()=>e.rollProbes(),children:[" Lancer ",o.length," ds"]}):T.jsx("p",{className:"text-[10px] text-gray-500",children:"Aucune sonde libre  lancer"}),u.length>0&&T.jsxs("div",{className:"pt-2 border-t border-gray-800",children:[T.jsx("p",{className:"text-[10px] text-gray-500 mb-1",children:"Rappeler (1 nergie):"}),T.jsx("div",{className:"flex flex-wrap gap-1",children:u.slice(0,6).map(S=>{const N=r.tiles.find(P=>P.id===S.tileId);return T.jsxs(Ti,{size:"sm",variant:"outline",className:"text-[10px] px-1.5 py-0.5 h-auto",onClick:()=>e.recallProbe(S.id),disabled:!g,children:["T",N==null?void 0:N.id]},S.id)})})]})]}),T.jsx(Ti,{size:"sm",className:"w-full bg-emerald-600 hover:bg-emerald-500",onClick:()=>e.endDeployment(),children:r.rolledDice?"Terminer dploiement ":"Passer au build "})]})]})}function r_({matchData:r,playerID:e,isConnected:t}){return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] p-4",children:T.jsxs(Ri,{className:"max-w-sm w-full bg-[#12121a] border-[#2d2d4a]",children:[T.jsx(ls,{className:"text-center pb-2",children:T.jsxs(us,{className:"flex items-center justify-center gap-2 text-white",children:[T.jsx(y3,{className:"h-5 w-5 animate-spin text-cyan-400"}),"En attente des joueurs"]})}),T.jsx(Mi,{className:"space-y-3",children:Array.from({length:a2},(i,o)=>{const u=r==null?void 0:r.find(g=>g.id===o),d=u&&String(u.id)===e,f=Hc[String(o)];return T.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u!=null&&u.name?f.bgLight:"bg-gray-800/30"} ${u!=null&&u.name?f.border:"border-gray-700"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:`w-3 h-3 rounded-full ${u!=null&&u.name?f.bg:"bg-gray-600"}`}),T.jsxs("span",{className:"text-white",children:[(u==null?void 0:u.name)||"En attente...",d&&" (toi)"]})]}),(u==null?void 0:u.name)&&(u.isConnected?T.jsx(ry,{className:"h-4 w-4 text-green-500"}):T.jsx(ny,{className:"h-4 w-4 text-red-500"}))]},o)})})]})})}function i_({ctx:r,matchData:e,playerID:t}){var d,f,g;const i=(d=r.gameover)==null?void 0:d.winner,o=((f=e==null?void 0:e.find(x=>String(x.id)===i))==null?void 0:f.name)||`Joueur ${i}`,u=i===t;return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] p-4",children:T.jsxs(Ri,{className:`max-w-sm w-full border-2 ${u?"border-amber-500 bg-amber-950/30":"border-gray-700 bg-[#12121a]"}`,children:[T.jsx(ls,{className:"text-center",children:T.jsx(us,{className:`text-3xl ${u?"text-amber-400":"text-gray-400"}`,children:u?" Victoire!":"Dfaite"})}),T.jsxs(Mi,{className:"text-center",children:[T.jsxs("p",{className:"text-white text-lg",children:[o," a atteint la Singularit!"]}),T.jsxs("p",{className:"text-gray-400 mt-2",children:["Intelligence: ",(g=r.gameover)==null?void 0:g.intelligence]})]})]})})}const h2=Le.forwardRef(({className:r,type:e,...t},i)=>T.jsx("input",{type:e,className:$s("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:i,...t}));h2.displayName="Input";const r0="boardgame-lobby-credentials",Eh="singularity";function s_({serverUrl:r,onJoinMatch:e}){const[t,i]=Le.useState([]),[o,u]=Le.useState(""),[d,f]=Le.useState(!1),[g,x]=Le.useState(null),_=new j1({server:r}),k=Le.useCallback(async()=>{try{const{matches:M}=await _.listMatches(Eh);i(M.filter(I=>!I.gameover)),x(null)}catch{x("Failed to load matches")}},[]);Le.useEffect(()=>{k();const M=setInterval(k,3e3);return()=>clearInterval(M)},[k]),Le.useEffect(()=>{const M=localStorage.getItem(r0);if(M){const I=JSON.parse(M);u(I.playerName),e(I.matchID,I.playerID,I.credentials)}},[]);const S=M=>{localStorage.setItem(r0,JSON.stringify(M))},N=async()=>{if(!o.trim()){x("Please enter your name");return}f(!0),x(null);try{const{matchID:M}=await _.createMatch(Eh,{numPlayers:2}),{playerCredentials:I}=await _.joinMatch(Eh,M,{playerID:"0",playerName:o.trim()}),b={matchID:M,playerID:"0",credentials:I,playerName:o.trim()};S(b),e(M,"0",I)}catch{x("Failed to create match")}finally{f(!1)}},P=async M=>{if(!o.trim()){x("Please enter your name");return}const I=M.players.find(b=>!b.name);if(!I){x("No available seats");return}f(!0),x(null);try{const{playerCredentials:b}=await _.joinMatch(Eh,M.matchID,{playerID:String(I.id),playerName:o.trim()}),O={matchID:M.matchID,playerID:String(I.id),credentials:b,playerName:o.trim()};S(O),e(M.matchID,String(I.id),b)}catch{x("Failed to join match")}finally{f(!1)}},A=M=>{const I=M.players.filter(O=>O.name),b=M.players.length-I.length;return{joined:I.length,total:M.players.length,canJoin:b>0}};return T.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[T.jsxs("div",{className:"text-center space-y-2",children:[T.jsx("h1",{className:"text-4xl font-bold",children:T.jsx("span",{className:"text-purple-400",children:"Singularity"})}),T.jsx("p",{className:"text-slate-400",children:"Race to artificial superintelligence"})]}),T.jsxs(Ri,{className:"bg-slate-800/80 border-slate-700",children:[T.jsx(ls,{children:T.jsxs(us,{className:"text-lg text-white flex items-center gap-2",children:[T.jsx(R3,{className:"h-5 w-5 text-purple-400"}),"Enter the Game"]})}),T.jsxs(Mi,{className:"space-y-4",children:[T.jsx(h2,{placeholder:"Enter your name",value:o,onChange:M=>u(M.target.value),disabled:d,maxLength:20,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-500"}),T.jsxs(Ti,{onClick:N,disabled:d||!o.trim(),className:"w-full bg-purple-600 hover:bg-purple-500 text-white",children:[T.jsx(k3,{className:"mr-2 h-4 w-4"}),d?"Creating...":"Create New Match"]}),g&&T.jsx("p",{className:"text-sm text-red-400 text-center",children:g})]})]}),T.jsxs(Ri,{className:"bg-slate-800/80 border-slate-700",children:[T.jsxs(ls,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[T.jsxs("div",{children:[T.jsx(us,{className:"text-lg text-white",children:"Available Matches"}),T.jsxs(i2,{className:"text-slate-500",children:[t.length," matches found"]})]}),T.jsx(Ti,{variant:"ghost",size:"icon",onClick:k,disabled:d,className:"text-slate-400 hover:text-white hover:bg-slate-700",children:T.jsx(E3,{className:`h-4 w-4 ${d?"animate-spin":""}`})})]}),T.jsx(Mi,{children:t.length===0?T.jsxs("div",{className:"text-center py-8 text-slate-500",children:[T.jsx(hm,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),T.jsx("p",{children:"No matches available"}),T.jsx("p",{className:"text-sm",children:"Create one to start playing!"})]}):T.jsx("div",{className:"space-y-3",children:t.map(M=>{const I=A(M),b=M.players.find(O=>O.name);return T.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-600 bg-slate-700/30",children:[T.jsxs("div",{className:"space-y-1",children:[T.jsxs("p",{className:"font-medium text-white",children:[(b==null?void 0:b.name)||"Unknown","'s game"]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs(n0,{variant:"outline",className:I.canJoin?"border-purple-500 text-purple-400":"border-slate-600 text-slate-500",children:[T.jsx(hm,{className:"h-3 w-3 mr-1"}),I.joined,"/",I.total]}),!I.canJoin&&T.jsx(n0,{variant:"outline",className:"border-yellow-600 text-yellow-500",children:"Full"})]})]}),T.jsxs(Ti,{size:"sm",onClick:()=>P(M),disabled:d||!I.canJoin||!o.trim(),className:"bg-purple-600 hover:bg-purple-500 text-white disabled:opacity-50",children:[T.jsx(x3,{className:"h-4 w-4 mr-1"}),"Join"]})]},M.matchID)})})})]})]})}function o_(){localStorage.removeItem(r0)}const a_=()=>`http://${window.location.hostname}:8000`;function l_(){const[r,e]=Le.useState(null),[t]=Le.useState(a_),i=J1({game:n5,board:Y9,multiplayer:Up({server:t}),debug:!1}),o=(d,f,g)=>{e({matchID:d,playerID:f,credentials:g})},u=()=>{o_(),e(null)};return Le.useEffect(()=>()=>{},[]),r?T.jsxs("div",{className:"min-h-screen",children:[T.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-900/90 backdrop-blur border-b border-slate-700",children:T.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[T.jsx("h1",{className:"text-xl font-bold text-white",children:T.jsx("span",{className:"text-purple-400",children:"Singularity"})}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("span",{className:"text-xs text-slate-500",children:["Match: ",r.matchID.slice(0,8)]}),T.jsxs(Ti,{variant:"ghost",size:"sm",onClick:u,className:"text-slate-400 hover:text-white hover:bg-slate-800",children:[T.jsx(w3,{className:"h-4 w-4 mr-2"}),"Leave"]})]})]})}),T.jsx("main",{className:"pt-14",children:T.jsx(i,{matchID:r.matchID,playerID:r.playerID,credentials:r.credentials})})]}):T.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:T.jsx(s_,{serverUrl:t,onJoinMatch:o})})}const f2=document.getElementById("root");if(!f2)throw new Error("Root element not found");V2.createRoot(f2).render(T.jsx(Le.StrictMode,{children:T.jsx(l_,{})}));
