function L2(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in r)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(r,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var gg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gf={exports:{}},cc={},Uf={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function D2(){if(mg)return it;mg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.iterator;function C(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,A={};function R(j,K,xe){this.props=j,this.context=K,this.refs=A,this.updater=xe||b}R.prototype.isReactComponent={},R.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},R.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function I(){}I.prototype=R.prototype;function T(j,K,xe){this.props=j,this.context=K,this.refs=A,this.updater=xe||b}var O=T.prototype=new I;O.constructor=T,P(O,R.prototype),O.isPureReactComponent=!0;var z=Array.isArray,J=Object.prototype.hasOwnProperty,te={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function Y(j,K,xe){var Le,qe={},Ve=null,He=null;if(K!=null)for(Le in K.ref!==void 0&&(He=K.ref),K.key!==void 0&&(Ve=""+K.key),K)J.call(K,Le)&&!ie.hasOwnProperty(Le)&&(qe[Le]=K[Le]);var Ze=arguments.length-2;if(Ze===1)qe.children=xe;else if(1<Ze){for(var B=Array(Ze),X=0;X<Ze;X++)B[X]=arguments[X+2];qe.children=B}if(j&&j.defaultProps)for(Le in Ze=j.defaultProps,Ze)qe[Le]===void 0&&(qe[Le]=Ze[Le]);return{$$typeof:r,type:j,key:Ve,ref:He,props:qe,_owner:te.current}}function ge(j,K){return{$$typeof:r,type:j.type,key:K,ref:j.ref,props:j.props,_owner:j._owner}}function ue(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function ke(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(xe){return K[xe]})}var de=/\/+/g;function Oe(j,K){return typeof j=="object"&&j!==null&&j.key!=null?ke(""+j.key):K.toString(36)}function Ne(j,K,xe,Le,qe){var Ve=typeof j;(Ve==="undefined"||Ve==="boolean")&&(j=null);var He=!1;if(j===null)He=!0;else switch(Ve){case"string":case"number":He=!0;break;case"object":switch(j.$$typeof){case r:case e:He=!0}}if(He)return He=j,qe=qe(He),j=Le===""?"."+Oe(He,0):Le,z(qe)?(xe="",j!=null&&(xe=j.replace(de,"$&/")+"/"),Ne(qe,K,xe,"",function(X){return X})):qe!=null&&(ue(qe)&&(qe=ge(qe,xe+(!qe.key||He&&He.key===qe.key?"":(""+qe.key).replace(de,"$&/")+"/")+j)),K.push(qe)),1;if(He=0,Le=Le===""?".":Le+":",z(j))for(var Ze=0;Ze<j.length;Ze++){Ve=j[Ze];var B=Le+Oe(Ve,Ze);He+=Ne(Ve,K,xe,B,qe)}else if(B=C(j),typeof B=="function")for(j=B.call(j),Ze=0;!(Ve=j.next()).done;)Ve=Ve.value,B=Le+Oe(Ve,Ze++),He+=Ne(Ve,K,xe,B,qe);else if(Ve==="object")throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return He}function _e(j,K,xe){if(j==null)return j;var Le=[],qe=0;return Ne(j,Le,"","",function(Ve){return K.call(xe,Ve,qe++)}),Le}function ae(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(xe){(j._status===0||j._status===-1)&&(j._status=1,j._result=xe)},function(xe){(j._status===0||j._status===-1)&&(j._status=2,j._result=xe)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var Re={current:null},W={transition:null},ve={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:W,ReactCurrentOwner:te};function he(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:_e,forEach:function(j,K,xe){_e(j,function(){K.apply(this,arguments)},xe)},count:function(j){var K=0;return _e(j,function(){K++}),K},toArray:function(j){return _e(j,function(K){return K})||[]},only:function(j){if(!ue(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},it.Component=R,it.Fragment=t,it.Profiler=o,it.PureComponent=T,it.StrictMode=i,it.Suspense=g,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,it.act=he,it.cloneElement=function(j,K,xe){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Le=P({},j.props),qe=j.key,Ve=j.ref,He=j._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,He=te.current),K.key!==void 0&&(qe=""+K.key),j.type&&j.type.defaultProps)var Ze=j.type.defaultProps;for(B in K)J.call(K,B)&&!ie.hasOwnProperty(B)&&(Le[B]=K[B]===void 0&&Ze!==void 0?Ze[B]:K[B])}var B=arguments.length-2;if(B===1)Le.children=xe;else if(1<B){Ze=Array(B);for(var X=0;X<B;X++)Ze[X]=arguments[X+2];Le.children=Ze}return{$$typeof:r,type:j.type,key:qe,ref:Ve,props:Le,_owner:He}},it.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:u,_context:j},j.Consumer=j},it.createElement=Y,it.createFactory=function(j){var K=Y.bind(null,j);return K.type=j,K},it.createRef=function(){return{current:null}},it.forwardRef=function(j){return{$$typeof:f,render:j}},it.isValidElement=ue,it.lazy=function(j){return{$$typeof:w,_payload:{_status:-1,_result:j},_init:ae}},it.memo=function(j,K){return{$$typeof:x,type:j,compare:K===void 0?null:K}},it.startTransition=function(j){var K=W.transition;W.transition={};try{j()}finally{W.transition=K}},it.unstable_act=he,it.useCallback=function(j,K){return Re.current.useCallback(j,K)},it.useContext=function(j){return Re.current.useContext(j)},it.useDebugValue=function(){},it.useDeferredValue=function(j){return Re.current.useDeferredValue(j)},it.useEffect=function(j,K){return Re.current.useEffect(j,K)},it.useId=function(){return Re.current.useId()},it.useImperativeHandle=function(j,K,xe){return Re.current.useImperativeHandle(j,K,xe)},it.useInsertionEffect=function(j,K){return Re.current.useInsertionEffect(j,K)},it.useLayoutEffect=function(j,K){return Re.current.useLayoutEffect(j,K)},it.useMemo=function(j,K){return Re.current.useMemo(j,K)},it.useReducer=function(j,K,xe){return Re.current.useReducer(j,K,xe)},it.useRef=function(j){return Re.current.useRef(j)},it.useState=function(j){return Re.current.useState(j)},it.useSyncExternalStore=function(j,K,xe){return Re.current.useSyncExternalStore(j,K,xe)},it.useTransition=function(){return Re.current.useTransition()},it.version="18.3.1",it}var yg;function Uh(){return yg||(yg=1,Uf.exports=D2()),Uf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg;function j2(){if(vg)return cc;vg=1;var r=Uh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(f,g,x){var w,S={},C=null,b=null;x!==void 0&&(C=""+x),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(b=g.ref);for(w in g)i.call(g,w)&&!u.hasOwnProperty(w)&&(S[w]=g[w]);if(f&&f.defaultProps)for(w in g=f.defaultProps,g)S[w]===void 0&&(S[w]=g[w]);return{$$typeof:e,type:f,key:C,ref:b,props:S,_owner:o.current}}return cc.Fragment=t,cc.jsx=d,cc.jsxs=d,cc}var xg;function z2(){return xg||(xg=1,Gf.exports=j2()),Gf.exports}var N=z2(),Ae=Uh();const be=Gh(Ae),F2=L2({__proto__:null,default:be},[Ae]);var sh={},Wf={exports:{}},Cr={},Hf={exports:{}},Vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wg;function B2(){return wg||(wg=1,(function(r){function e(W,ve){var he=W.length;W.push(ve);e:for(;0<he;){var j=he-1>>>1,K=W[j];if(0<o(K,ve))W[j]=ve,W[he]=K,he=j;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ve=W[0],he=W.pop();if(he!==ve){W[0]=he;e:for(var j=0,K=W.length,xe=K>>>1;j<xe;){var Le=2*(j+1)-1,qe=W[Le],Ve=Le+1,He=W[Ve];if(0>o(qe,he))Ve<K&&0>o(He,qe)?(W[j]=He,W[Ve]=he,j=Ve):(W[j]=qe,W[Le]=he,j=Le);else if(Ve<K&&0>o(He,he))W[j]=He,W[Ve]=he,j=Ve;else break e}}return ve}function o(W,ve){var he=W.sortIndex-ve.sortIndex;return he!==0?he:W.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,f=d.now();r.unstable_now=function(){return d.now()-f}}var g=[],x=[],w=1,S=null,C=3,b=!1,P=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(W){for(var ve=t(x);ve!==null;){if(ve.callback===null)i(x);else if(ve.startTime<=W)i(x),ve.sortIndex=ve.expirationTime,e(g,ve);else break;ve=t(x)}}function z(W){if(A=!1,O(W),!P)if(t(g)!==null)P=!0,ae(J);else{var ve=t(x);ve!==null&&Re(z,ve.startTime-W)}}function J(W,ve){P=!1,A&&(A=!1,I(Y),Y=-1),b=!0;var he=C;try{for(O(ve),S=t(g);S!==null&&(!(S.expirationTime>ve)||W&&!ke());){var j=S.callback;if(typeof j=="function"){S.callback=null,C=S.priorityLevel;var K=j(S.expirationTime<=ve);ve=r.unstable_now(),typeof K=="function"?S.callback=K:S===t(g)&&i(g),O(ve)}else i(g);S=t(g)}if(S!==null)var xe=!0;else{var Le=t(x);Le!==null&&Re(z,Le.startTime-ve),xe=!1}return xe}finally{S=null,C=he,b=!1}}var te=!1,ie=null,Y=-1,ge=5,ue=-1;function ke(){return!(r.unstable_now()-ue<ge)}function de(){if(ie!==null){var W=r.unstable_now();ue=W;var ve=!0;try{ve=ie(!0,W)}finally{ve?Oe():(te=!1,ie=null)}}else te=!1}var Oe;if(typeof T=="function")Oe=function(){T(de)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,_e=Ne.port2;Ne.port1.onmessage=de,Oe=function(){_e.postMessage(null)}}else Oe=function(){R(de,0)};function ae(W){ie=W,te||(te=!0,Oe())}function Re(W,ve){Y=R(function(){W(r.unstable_now())},ve)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(W){W.callback=null},r.unstable_continueExecution=function(){P||b||(P=!0,ae(J))},r.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<W?Math.floor(1e3/W):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(W){switch(C){case 1:case 2:case 3:var ve=3;break;default:ve=C}var he=C;C=ve;try{return W()}finally{C=he}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(W,ve){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var he=C;C=W;try{return ve()}finally{C=he}},r.unstable_scheduleCallback=function(W,ve,he){var j=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?j+he:j):he=j,W){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=he+K,W={id:w++,callback:ve,priorityLevel:W,startTime:he,expirationTime:K,sortIndex:-1},he>j?(W.sortIndex=he,e(x,W),t(g)===null&&W===t(x)&&(A?(I(Y),Y=-1):A=!0,Re(z,he-j))):(W.sortIndex=K,e(g,W),P||b||(P=!0,ae(J))),W},r.unstable_shouldYield=ke,r.unstable_wrapCallback=function(W){var ve=C;return function(){var he=C;C=ve;try{return W.apply(this,arguments)}finally{C=he}}}})(Vf)),Vf}var _g;function n0(){return _g||(_g=1,Hf.exports=B2()),Hf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sg;function G2(){if(Sg)return Cr;Sg=1;var r=Uh(),e=n0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,s){d(n,s),d(n+"Capture",s)}function d(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},S={};function C(n){return g.call(S,n)?!0:g.call(w,n)?!1:x.test(n)?S[n]=!0:(w[n]=!0,!1)}function b(n,s,c,p){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function P(n,s,c,p){if(s===null||typeof s>"u"||b(n,s,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function A(n,s,c,p,y,_,E){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=n,this.type=s,this.sanitizeURL=_,this.removeEmptyString=E}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){R[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];R[s]=new A(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){R[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){R[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){R[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){R[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){R[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){R[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){R[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(I,T);R[s]=new A(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(I,T);R[s]=new A(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(I,T);R[s]=new A(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){R[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),R.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){R[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,c,p){var y=R.hasOwnProperty(s)?R[s]:null;(y!==null?y.type!==0:p||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(P(s,c,y,p)&&(c=null),p||y===null?C(s)&&(c===null?n.removeAttribute(s):n.setAttribute(s,""+c)):y.mustUseProperty?n[y.propertyName]=c===null?y.type===3?!1:"":c:(s=y.attributeName,p=y.attributeNamespace,c===null?n.removeAttribute(s):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?n.setAttributeNS(p,s,c):n.setAttribute(s,c))))}var z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),te=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),ke=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),Oe=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),W=Symbol.iterator;function ve(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var he=Object.assign,j;function K(n){if(j===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+n}var xe=!1;function Le(n,s){if(!n||xe)return"";xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(Z){var p=Z}Reflect.construct(n,[],s)}else{try{s.call()}catch(Z){p=Z}n.call(s.prototype)}else{try{throw Error()}catch(Z){p=Z}n()}}catch(Z){if(Z&&p&&typeof Z.stack=="string"){for(var y=Z.stack.split(`
`),_=p.stack.split(`
`),E=y.length-1,L=_.length-1;1<=E&&0<=L&&y[E]!==_[L];)L--;for(;1<=E&&0<=L;E--,L--)if(y[E]!==_[L]){if(E!==1||L!==1)do if(E--,L--,0>L||y[E]!==_[L]){var F=`
`+y[E].replace(" at new "," at ");return n.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",n.displayName)),F}while(1<=E&&0<=L);break}}}finally{xe=!1,Error.prepareStackTrace=c}return(n=n?n.displayName||n.name:"")?K(n):""}function qe(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Le(n.type,!1),n;case 11:return n=Le(n.type.render,!1),n;case 1:return n=Le(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ie:return"Fragment";case te:return"Portal";case ge:return"Profiler";case Y:return"StrictMode";case Oe:return"Suspense";case Ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ke:return(n.displayName||"Context")+".Consumer";case ue:return(n._context.displayName||"Context")+".Provider";case de:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _e:return s=n.displayName||null,s!==null?s:Ve(n.type)||"Memo";case ae:s=n._payload,n=n._init;try{return Ve(n(s))}catch{}}return null}function He(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ze(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function B(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function X(n){var s=B(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),p=""+n[s];if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return y.call(this)},set:function(E){p=""+E,_.call(this,E)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(E){p=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function re(n){n._valueTracker||(n._valueTracker=X(n))}function Fe(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),p="";return n&&(p=B(n)?n.checked?"true":"false":n.value),n=p,n!==c?(s.setValue(n),!0):!1}function Ce(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ue(n,s){var c=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??n._wrapperState.initialChecked})}function vt(n,s){var c=s.defaultValue==null?"":s.defaultValue,p=s.checked!=null?s.checked:s.defaultChecked;c=Ze(s.value!=null?s.value:c),n._wrapperState={initialChecked:p,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function Cn(n,s){gt(n,s);var c=Ze(s.value),p=s.type;if(c!=null)p==="number"?(c===0&&n.value===""||n.value!=c)&&(n.value=""+c):n.value!==""+c&&(n.value=""+c);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Ut(n,s.type,c):s.hasOwnProperty("defaultValue")&&Ut(n,s.type,Ze(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function jt(n,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var p=s.type;if(!(p!=="submit"&&p!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,c||s===n.value||(n.value=s),n.defaultValue=s}c=n.name,c!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,c!==""&&(n.name=c)}function Ut(n,s,c){(s!=="number"||Ce(n.ownerDocument)!==n)&&(c==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+c&&(n.defaultValue=""+c))}var Et=Array.isArray;function fn(n,s,c,p){if(n=n.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<n.length;c++)y=s.hasOwnProperty("$"+n[c].value),n[c].selected!==y&&(n[c].selected=y),y&&p&&(n[c].defaultSelected=!0)}else{for(c=""+Ze(c),s=null,y=0;y<n.length;y++){if(n[y].value===c){n[y].selected=!0,p&&(n[y].defaultSelected=!0);return}s!==null||n[y].disabled||(s=n[y])}s!==null&&(s.selected=!0)}}function br(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Tr(n,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(Et(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}n._wrapperState={initialValue:Ze(c)}}function Vr(n,s){var c=Ze(s.value),p=Ze(s.defaultValue);c!=null&&(c=""+c,c!==n.value&&(n.value=c),s.defaultValue==null&&n.defaultValue!==c&&(n.defaultValue=c)),p!=null&&(n.defaultValue=""+p)}function Jo(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Mi(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function as(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Mi(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var gr,Xa=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,p,y){MSApp.execUnsafeLocalFunction(function(){return n(s,c,p,y)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(gr=gr||document.createElement("div"),gr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=gr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ls(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ef=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(n){ef.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Zo[s]=Zo[n]})});function qc(n,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||Zo.hasOwnProperty(n)&&Zo[n]?(""+s).trim():s+"px"}function Yc(n,s){n=n.style;for(var c in s)if(s.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=qc(c,s[c],p);c==="float"&&(c="cssFloat"),p?n.setProperty(c,y):n[c]=y}}var tf=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cu(n,s){if(s){if(tf[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Qa(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=null;function hu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fu=null,Xs=null,Qs=null;function Xc(n){if(n=va(n)){if(typeof fu!="function")throw Error(t(280));var s=n.stateNode;s&&(s=un(s),fu(n.stateNode,n.type,s))}}function pu(n){Xs?Qs?Qs.push(n):Qs=[n]:Xs=n}function gu(){if(Xs){var n=Xs,s=Qs;if(Qs=Xs=null,Xc(n),s)for(n=0;n<s.length;n++)Xc(s[n])}}function Qc(n,s){return n(s)}function Ka(){}var $a=!1;function mu(n,s,c){if($a)return n(s,c);$a=!0;try{return Qc(n,s,c)}finally{$a=!1,(Xs!==null||Qs!==null)&&(Ka(),gu())}}function ea(n,s){var c=n.stateNode;if(c===null)return null;var p=un(c);if(p===null)return null;c=p[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var yu=!1;if(f)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){yu=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{yu=!1}function Kc(n,s,c,p,y,_,E,L,F){var Z=Array.prototype.slice.call(arguments,3);try{s.apply(c,Z)}catch(oe){this.onError(oe)}}var us=!1,Ja=null,Za=!1,Ks=null,nf={onError:function(n){us=!0,Ja=n}};function rf(n,s,c,p,y,_,E,L,F){us=!1,Ja=null,Kc.apply(nf,arguments)}function sf(n,s,c,p,y,_,E,L,F){if(rf.apply(this,arguments),us){if(us){var Z=Ja;us=!1,Ja=null}else throw Error(t(198));Za||(Za=!0,Ks=Z)}}function cs(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function $c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Jc(n){if(cs(n)!==n)throw Error(t(188))}function of(n){var s=n.alternate;if(!s){if(s=cs(n),s===null)throw Error(t(188));return s!==n?null:n}for(var c=n,p=s;;){var y=c.return;if(y===null)break;var _=y.alternate;if(_===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===c)return Jc(y),n;if(_===p)return Jc(y),s;_=_.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=_;else{for(var E=!1,L=y.child;L;){if(L===c){E=!0,c=y,p=_;break}if(L===p){E=!0,p=y,c=_;break}L=L.sibling}if(!E){for(L=_.child;L;){if(L===c){E=!0,c=_,p=y;break}if(L===p){E=!0,p=_,c=y;break}L=L.sibling}if(!E)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?n:s}function Zc(n){return n=of(n),n!==null?ed(n):null}function ed(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=ed(n);if(s!==null)return s;n=n.sibling}return null}var td=e.unstable_scheduleCallback,nd=e.unstable_cancelCallback,af=e.unstable_shouldYield,lf=e.unstable_requestPaint,Wt=e.unstable_now,vu=e.unstable_getCurrentPriorityLevel,ds=e.unstable_ImmediatePriority,el=e.unstable_UserBlockingPriority,$s=e.unstable_NormalPriority,uf=e.unstable_LowPriority,tl=e.unstable_IdlePriority,di=null,pn=null;function Pt(n){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(di,n,void 0,(n.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:Vn,Ii=Math.log,En=Math.LN2;function Vn(n){return n>>>=0,n===0?32:31-(Ii(n)/En|0)|0}var qr=64,hi=4194304;function on(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hs(n,s){var c=n.pendingLanes;if(c===0)return 0;var p=0,y=n.suspendedLanes,_=n.pingedLanes,E=c&268435455;if(E!==0){var L=E&~y;L!==0?p=on(L):(_&=E,_!==0&&(p=on(_)))}else E=c&~y,E!==0?p=on(E):_!==0&&(p=on(_));if(p===0)return 0;if(s!==0&&s!==p&&(s&y)===0&&(y=p&-p,_=s&-s,y>=_||y===16&&(_&4194240)!==0))return s;if((p&4)!==0&&(p|=c&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=p;0<s;)c=31-nt(s),y=1<<c,p|=n[c],s&=~y;return p}function rd(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function id(n,s){for(var c=n.suspendedLanes,p=n.pingedLanes,y=n.expirationTimes,_=n.pendingLanes;0<_;){var E=31-nt(_),L=1<<E,F=y[E];F===-1?((L&c)===0||(L&p)!==0)&&(y[E]=rd(L,s)):F<=s&&(n.expiredLanes|=L),_&=~L}}function Js(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xu(){var n=qr;return qr<<=1,(qr&4194240)===0&&(qr=64),n}function er(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function na(n,s,c){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-nt(s),n[s]=c}function cf(n,s){var c=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<c;){var y=31-nt(c),_=1<<y;s[y]=0,p[y]=-1,n[y]=-1,c&=~_}}function wu(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var p=31-nt(c),y=1<<p;y&s|n[p]&s&&(n[p]|=s),c&=~y}}var ut=0;function ra(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Zs,eo,sd,od,nl,rl=!1,to=[],mr=null,Ai=null,Yr=null,rt=new Map,no=new Map,Xr=[],ad="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ld(n,s){switch(n){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":rt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(s.pointerId)}}function ia(n,s,c,p,y,_){return n===null||n.nativeEvent!==_?(n={blockedOn:s,domEventName:c,eventSystemFlags:p,nativeEvent:_,targetContainers:[y]},s!==null&&(s=va(s),s!==null&&eo(s)),n):(n.eventSystemFlags|=p,s=n.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),n)}function an(n,s,c,p,y){switch(s){case"focusin":return mr=ia(mr,n,s,c,p,y),!0;case"dragenter":return Ai=ia(Ai,n,s,c,p,y),!0;case"mouseover":return Yr=ia(Yr,n,s,c,p,y),!0;case"pointerover":var _=y.pointerId;return rt.set(_,ia(rt.get(_)||null,n,s,c,p,y)),!0;case"gotpointercapture":return _=y.pointerId,no.set(_,ia(no.get(_)||null,n,s,c,p,y)),!0}return!1}function il(n){var s=Wi(n.target);if(s!==null){var c=cs(s);if(c!==null){if(s=c.tag,s===13){if(s=$c(c),s!==null){n.blockedOn=s,nl(n.priority,function(){sd(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=ll(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(c===null){c=n.nativeEvent;var p=new c.constructor(c.type,c);du=p,c.target.dispatchEvent(p),du=null}else return s=va(c),s!==null&&eo(s),n.blockedOn=c,!1;s.shift()}return!0}function ol(n,s,c){sl(n)&&c.delete(s)}function df(){rl=!1,mr!==null&&sl(mr)&&(mr=null),Ai!==null&&sl(Ai)&&(Ai=null),Yr!==null&&sl(Yr)&&(Yr=null),rt.forEach(ol),no.forEach(ol)}function Oi(n,s){n.blockedOn===s&&(n.blockedOn=null,rl||(rl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,df)))}function qn(n){function s(y){return Oi(y,n)}if(0<to.length){Oi(to[0],n);for(var c=1;c<to.length;c++){var p=to[c];p.blockedOn===n&&(p.blockedOn=null)}}for(mr!==null&&Oi(mr,n),Ai!==null&&Oi(Ai,n),Yr!==null&&Oi(Yr,n),rt.forEach(s),no.forEach(s),c=0;c<Xr.length;c++)p=Xr[c],p.blockedOn===n&&(p.blockedOn=null);for(;0<Xr.length&&(c=Xr[0],c.blockedOn===null);)il(c),c.blockedOn===null&&Xr.shift()}var ro=z.ReactCurrentBatchConfig,al=!0;function Nr(n,s,c,p){var y=ut,_=ro.transition;ro.transition=null;try{ut=1,io(n,s,c,p)}finally{ut=y,ro.transition=_}}function fi(n,s,c,p){var y=ut,_=ro.transition;ro.transition=null;try{ut=4,io(n,s,c,p)}finally{ut=y,ro.transition=_}}function io(n,s,c,p){if(al){var y=ll(n,s,c,p);if(y===null)Cl(n,s,p,so,c),ld(n,p);else if(an(y,n,s,c,p))p.stopPropagation();else if(ld(n,p),s&4&&-1<ad.indexOf(n)){for(;y!==null;){var _=va(y);if(_!==null&&Zs(_),_=ll(n,s,c,p),_===null&&Cl(n,s,p,so,c),_===y)break;y=_}y!==null&&p.stopPropagation()}else Cl(n,s,p,null,c)}}var so=null;function ll(n,s,c,p){if(so=null,n=hu(p),n=Wi(n),n!==null)if(s=cs(n),s===null)n=null;else if(c=s.tag,c===13){if(n=$c(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return so=n,null}function ud(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vu()){case ds:return 1;case el:return 4;case $s:case uf:return 16;case tl:return 536870912;default:return 16}default:return 16}}var gn=null,Li=null,pi=null;function sa(){if(pi)return pi;var n,s=Li,c=s.length,p,y="value"in gn?gn.value:gn.textContent,_=y.length;for(n=0;n<c&&s[n]===y[n];n++);var E=c-n;for(p=1;p<=E&&s[c-p]===y[_-p];p++);return pi=y.slice(n,1<p?1-p:void 0)}function fs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function On(){return!0}function tr(){return!1}function Jt(n){function s(c,p,y,_,E){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(c=n[L],this[L]=c?c(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?On:tr,this.isPropagationStopped=tr,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=On)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=On)},persist:function(){},isPersistent:On}),s}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rr=Jt(Yn),Mr=he({},Yn,{view:0,detail:0}),cd=Jt(Mr),oa,aa,mn,Ln=he({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mn&&(mn&&n.type==="mousemove"?(oa=n.screenX-mn.screenX,aa=n.screenY-mn.screenY):aa=oa=0,mn=n),oa)},movementY:function(n){return"movementY"in n?n.movementY:aa}}),bt=Jt(Ln),la=he({},Ln,{dataTransfer:0}),Ir=Jt(la),dd=he({},Mr,{relatedTarget:0}),ul=Jt(dd),_u=he({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Jt(_u),hd=he({},Yn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cl=Jt(hd),fd=he({},Yn,{data:0}),ps=Jt(fd),ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ff(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=dl[n])?!!s[n]:!1}function gs(){return ff}var hl=he({},Mr,{key:function(n){if(n.key){var s=ku[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=fs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hf[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(n){return n.type==="keypress"?fs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pd=Jt(hl),gd=he({},Ln,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ms=Jt(gd),md=he({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),fl=Jt(md),pl=he({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),oo=Jt(pl),Cu=he({},Ln,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Eu=Jt(Cu),yd=[9,13,27,32],ua=f&&"CompositionEvent"in window,ys=null;f&&"documentMode"in document&&(ys=document.documentMode);var ao=f&&"TextEvent"in window&&!ys,nr=f&&(!ua||ys&&8<ys&&11>=ys),Di=" ",gl=!1;function Pu(n,s){switch(n){case"keyup":return yd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ar(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var rr=!1;function bu(n,s){switch(n){case"compositionend":return Ar(s);case"keypress":return s.which!==32?null:(gl=!0,Di);case"textInput":return n=s.data,n===Di&&gl?null:n;default:return null}}function vd(n,s){if(rr)return n==="compositionend"||!ua&&Pu(n,s)?(n=sa(),pi=Li=gn=null,rr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return nr&&s.locale!=="ko"?null:s.data;default:return null}}var gi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mi(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!gi[n.type]:s==="textarea"}function ca(n,s,c,p){pu(p),s=El(s,"onChange"),0<s.length&&(c=new Rr("onChange","change",null,c,p),n.push({event:c,listeners:s}))}var lo=null,ji=null;function xd(n){zu(n,0)}function zi(n){var s=en(n);if(Fe(s))return n}function yr(n,s){if(n==="change")return s}var uo=!1;if(f){var Fi;if(f){var vr="oninput"in document;if(!vr){var ml=document.createElement("div");ml.setAttribute("oninput","return;"),vr=typeof ml.oninput=="function"}Fi=vr}else Fi=!1;uo=Fi&&(!document.documentMode||9<document.documentMode)}function vs(){lo&&(lo.detachEvent("onpropertychange",Tu),ji=lo=null)}function Tu(n){if(n.propertyName==="value"&&zi(ji)){var s=[];ca(s,ji,n,hu(n)),mu(xd,s)}}function Nu(n,s,c){n==="focusin"?(vs(),lo=s,ji=c,lo.attachEvent("onpropertychange",Tu)):n==="focusout"&&vs()}function zt(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return zi(ji)}function yl(n,s){if(n==="click")return zi(s)}function Ru(n,s){if(n==="input"||n==="change")return zi(s)}function Mu(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Xn=typeof Object.is=="function"?Object.is:Mu;function xs(n,s){if(Xn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),p=Object.keys(s);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!g.call(s,y)||!Xn(n[y],s[y]))return!1}return!0}function Bi(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mt(n,s){var c=Bi(n);n=0;for(var p;c;){if(c.nodeType===3){if(p=n+c.textContent.length,n<=s&&p>=s)return{node:c,offset:s-n};n=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Bi(c)}}function Yt(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Yt(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Zt(){for(var n=window,s=Ce();s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=Ce(n.document)}return s}function co(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function da(n){var s=Zt(),c=n.focusedElem,p=n.selectionRange;if(s!==c&&c&&c.ownerDocument&&Yt(c.ownerDocument.documentElement,c)){if(p!==null&&co(c)){if(s=p.start,n=p.end,n===void 0&&(n=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(n,c.value.length);else if(n=(s=c.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var y=c.textContent.length,_=Math.min(p.start,y);p=p.end===void 0?_:Math.min(p.end,y),!n.extend&&_>p&&(y=p,p=_,_=y),y=Mt(c,_);var E=Mt(c,p);y&&E&&(n.rangeCount!==1||n.anchorNode!==y.node||n.anchorOffset!==y.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(s=s.createRange(),s.setStart(y.node,y.offset),n.removeAllRanges(),_>p?(n.addRange(s),n.extend(E.node,E.offset)):(s.setEnd(E.node,E.offset),n.addRange(s)))}}for(s=[],n=c;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)n=s[c],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ha=f&&"documentMode"in document&&11>=document.documentMode,ho=null,ln=null,ws=null,fa=!1;function vl(n,s,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fa||ho==null||ho!==Ce(p)||(p=ho,"selectionStart"in p&&co(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ws&&xs(ws,p)||(ws=p,p=El(ln,"onSelect"),0<p.length&&(s=new Rr("onSelect","select",null,s,c),n.push({event:s,listeners:p}),s.target=ho)))}function ir(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var yn={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionend:ir("Transition","TransitionEnd")},_s={},xl={};f&&(xl=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function fo(n){if(_s[n])return _s[n];if(!yn[n])return n;var s=yn[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in xl)return _s[n]=s[c];return n}var Iu=fo("animationend"),Au=fo("animationiteration"),Ou=fo("animationstart"),Lu=fo("transitionend"),Du=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(n,s){Du.set(n,s),u(s,[n])}for(var wl=0;wl<ju.length;wl++){var Ss=ju[wl],wd=Ss.toLowerCase(),_l=Ss[0].toUpperCase()+Ss.slice(1);yi(wd,"on"+_l)}yi(Iu,"onAnimationEnd"),yi(Au,"onAnimationIteration"),yi(Ou,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(Lu,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_d=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Sl(n,s,c){var p=n.type||"unknown-event";n.currentTarget=c,sf(p,s,void 0,n),n.currentTarget=null}function zu(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var p=n[c],y=p.event;p=p.listeners;e:{var _=void 0;if(s)for(var E=p.length-1;0<=E;E--){var L=p[E],F=L.instance,Z=L.currentTarget;if(L=L.listener,F!==_&&y.isPropagationStopped())break e;Sl(y,L,Z),_=F}else for(E=0;E<p.length;E++){if(L=p[E],F=L.instance,Z=L.currentTarget,L=L.listener,F!==_&&y.isPropagationStopped())break e;Sl(y,L,Z),_=F}}}if(Za)throw n=Ks,Za=!1,Ks=null,n}function _t(n,s){var c=s[bl];c===void 0&&(c=s[bl]=new Set);var p=n+"__bubble";c.has(p)||(Fu(s,n,2,!1),c.add(p))}function kl(n,s,c){var p=0;s&&(p|=4),Fu(c,n,p,s)}var pa="_reactListening"+Math.random().toString(36).slice(2);function ks(n){if(!n[pa]){n[pa]=!0,i.forEach(function(c){c!=="selectionchange"&&(_d.has(c)||kl(c,!1,n),kl(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[pa]||(s[pa]=!0,kl("selectionchange",!1,s))}}function Fu(n,s,c,p){switch(ud(s)){case 1:var y=Nr;break;case 4:y=fi;break;default:y=io}c=y.bind(null,s,c,n),y=void 0,!yu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),p?y!==void 0?n.addEventListener(s,c,{capture:!0,passive:y}):n.addEventListener(s,c,!0):y!==void 0?n.addEventListener(s,c,{passive:y}):n.addEventListener(s,c,!1)}function Cl(n,s,c,p,y){var _=p;if((s&1)===0&&(s&2)===0&&p!==null)e:for(;;){if(p===null)return;var E=p.tag;if(E===3||E===4){var L=p.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(E===4)for(E=p.return;E!==null;){var F=E.tag;if((F===3||F===4)&&(F=E.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;E=E.return}for(;L!==null;){if(E=Wi(L),E===null)return;if(F=E.tag,F===5||F===6){p=_=E;continue e}L=L.parentNode}}p=p.return}mu(function(){var Z=_,oe=hu(c),ce=[];e:{var se=Du.get(n);if(se!==void 0){var Te=Rr,De=n;switch(n){case"keypress":if(fs(c)===0)break e;case"keydown":case"keyup":Te=pd;break;case"focusin":De="focus",Te=ul;break;case"focusout":De="blur",Te=ul;break;case"beforeblur":case"afterblur":Te=ul;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Ir;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=fl;break;case Iu:case Au:case Ou:Te=Su;break;case Lu:Te=oo;break;case"scroll":Te=cd;break;case"wheel":Te=Eu;break;case"copy":case"cut":case"paste":Te=cl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=ms}var Be=(s&4)!==0,sn=!Be&&n==="scroll",q=Be?se!==null?se+"Capture":null:se;Be=[];for(var G=Z,Q;G!==null;){Q=G;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,q!==null&&(me=ea(G,q),me!=null&&Be.push(po(G,me,Q)))),sn)break;G=G.return}0<Be.length&&(se=new Te(se,De,null,c,oe),ce.push({event:se,listeners:Be}))}}if((s&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",Te=n==="mouseout"||n==="pointerout",se&&c!==du&&(De=c.relatedTarget||c.fromElement)&&(Wi(De)||De[Kr]))break e;if((Te||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,Te?(De=c.relatedTarget||c.toElement,Te=Z,De=De?Wi(De):null,De!==null&&(sn=cs(De),De!==sn||De.tag!==5&&De.tag!==6)&&(De=null)):(Te=null,De=Z),Te!==De)){if(Be=bt,me="onMouseLeave",q="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Be=ms,me="onPointerLeave",q="onPointerEnter",G="pointer"),sn=Te==null?se:en(Te),Q=De==null?se:en(De),se=new Be(me,G+"leave",Te,c,oe),se.target=sn,se.relatedTarget=Q,me=null,Wi(oe)===Z&&(Be=new Be(q,G+"enter",De,c,oe),Be.target=Q,Be.relatedTarget=sn,me=Be),sn=me,Te&&De)t:{for(Be=Te,q=De,G=0,Q=Be;Q;Q=Cs(Q))G++;for(Q=0,me=q;me;me=Cs(me))Q++;for(;0<G-Q;)Be=Cs(Be),G--;for(;0<Q-G;)q=Cs(q),Q--;for(;G--;){if(Be===q||q!==null&&Be===q.alternate)break t;Be=Cs(Be),q=Cs(q)}Be=null}else Be=null;Te!==null&&Sd(ce,se,Te,Be,!1),De!==null&&sn!==null&&Sd(ce,sn,De,Be,!0)}}e:{if(se=Z?en(Z):window,Te=se.nodeName&&se.nodeName.toLowerCase(),Te==="select"||Te==="input"&&se.type==="file")var Ge=yr;else if(mi(se))if(uo)Ge=Ru;else{Ge=zt;var Ye=Nu}else(Te=se.nodeName)&&Te.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ge=yl);if(Ge&&(Ge=Ge(n,Z))){ca(ce,Ge,c,oe);break e}Ye&&Ye(n,se,Z),n==="focusout"&&(Ye=se._wrapperState)&&Ye.controlled&&se.type==="number"&&Ut(se,"number",se.value)}switch(Ye=Z?en(Z):window,n){case"focusin":(mi(Ye)||Ye.contentEditable==="true")&&(ho=Ye,ln=Z,ws=null);break;case"focusout":ws=ln=ho=null;break;case"mousedown":fa=!0;break;case"contextmenu":case"mouseup":case"dragend":fa=!1,vl(ce,c,oe);break;case"selectionchange":if(ha)break;case"keydown":case"keyup":vl(ce,c,oe)}var Xe;if(ua)e:{switch(n){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else rr?Pu(n,c)&&(Qe="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(nr&&c.locale!=="ko"&&(rr||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&rr&&(Xe=sa()):(gn=oe,Li="value"in gn?gn.value:gn.textContent,rr=!0)),Ye=El(Z,Qe),0<Ye.length&&(Qe=new ps(Qe,n,null,c,oe),ce.push({event:Qe,listeners:Ye}),Xe?Qe.data=Xe:(Xe=Ar(c),Xe!==null&&(Qe.data=Xe)))),(Xe=ao?bu(n,c):vd(n,c))&&(Z=El(Z,"onBeforeInput"),0<Z.length&&(oe=new ps("onBeforeInput","beforeinput",null,c,oe),ce.push({event:oe,listeners:Z}),oe.data=Xe))}zu(ce,s)})}function po(n,s,c){return{instance:n,listener:s,currentTarget:c}}function El(n,s){for(var c=s+"Capture",p=[];n!==null;){var y=n,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=ea(n,c),_!=null&&p.unshift(po(n,_,y)),_=ea(n,s),_!=null&&p.push(po(n,_,y))),n=n.return}return p}function Cs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Sd(n,s,c,p,y){for(var _=s._reactName,E=[];c!==null&&c!==p;){var L=c,F=L.alternate,Z=L.stateNode;if(F!==null&&F===p)break;L.tag===5&&Z!==null&&(L=Z,y?(F=ea(c,_),F!=null&&E.unshift(po(c,F,L))):y||(F=ea(c,_),F!=null&&E.push(po(c,F,L)))),c=c.return}E.length!==0&&n.push({event:s,listeners:E})}var pf=/\r\n?/g,kd=/\u0000|\uFFFD/g;function Bu(n){return(typeof n=="string"?n:""+n).replace(pf,`
`).replace(kd,"")}function ga(n,s,c){if(s=Bu(s),Bu(n)!==s&&c)throw Error(t(425))}function Es(){}var Gu=null,Uu=null;function Wu(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var sr=typeof setTimeout=="function"?setTimeout:void 0,Hu=typeof clearTimeout=="function"?clearTimeout:void 0,ma=typeof Promise=="function"?Promise:void 0,Cd=typeof queueMicrotask=="function"?queueMicrotask:typeof ma<"u"?function(n){return ma.resolve(null).then(n).catch(Ed)}:sr;function Ed(n){setTimeout(function(){throw n})}function Pl(n,s){var c=s,p=0;do{var y=c.nextSibling;if(n.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){n.removeChild(y),qn(s);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);qn(s)}function Qr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Ps(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return n;s--}else c==="/$"&&s++}n=n.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),xr="__reactFiber$"+Ui,ya="__reactProps$"+Ui,Kr="__reactContainer$"+Ui,bl="__reactEvents$"+Ui,Pd="__reactListeners$"+Ui,bd="__reactHandles$"+Ui;function Wi(n){var s=n[xr];if(s)return s;for(var c=n.parentNode;c;){if(s=c[Kr]||c[xr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=Ps(n);n!==null;){if(c=n[xr])return c;n=Ps(n)}return s}n=c,c=n.parentNode}return null}function va(n){return n=n[xr]||n[Kr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function en(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function un(n){return n[ya]||null}var Tl=[],bs=-1;function vi(n){return{current:n}}function St(n){0>bs||(n.current=Tl[bs],Tl[bs]=null,bs--)}function xt(n,s){bs++,Tl[bs]=n.current,n.current=s}var $r={},vn=vi($r),Pn=vi(!1),Hi=$r;function Ts(n,s){var c=n.type.contextTypes;if(!c)return $r;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===s)return p.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in c)y[_]=s[_];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=y),y}function bn(n){return n=n.childContextTypes,n!=null}function go(){St(Pn),St(vn)}function Vu(n,s,c){if(vn.current!==$r)throw Error(t(168));xt(vn,s),xt(Pn,c)}function Nl(n,s,c){var p=n.stateNode;if(s=s.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in s))throw Error(t(108,He(n)||"Unknown",y));return he({},c,p)}function Ns(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||$r,Hi=vn.current,xt(vn,n),xt(Pn,Pn.current),!0}function Td(n,s,c){var p=n.stateNode;if(!p)throw Error(t(169));c?(n=Nl(n,s,Hi),p.__reactInternalMemoizedMergedChildContext=n,St(Pn),St(vn),xt(vn,n)):St(Pn),xt(Pn,c)}var Jr=null,mo=!1,Rl=!1;function xa(n){Jr===null?Jr=[n]:Jr.push(n)}function xi(n){mo=!0,xa(n)}function Vi(){if(!Rl&&Jr!==null){Rl=!0;var n=0,s=ut;try{var c=Jr;for(ut=1;n<c.length;n++){var p=c[n];do p=p(!0);while(p!==null)}Jr=null,mo=!1}catch(y){throw Jr!==null&&(Jr=Jr.slice(n+1)),td(ds,Vi),y}finally{ut=s,Rl=!1}}return null}var Dn=[],Rs=0,qi=null,Yi=0,jn=[],zn=0,Xi=null,or=1,It="";function Ms(n,s){Dn[Rs++]=Yi,Dn[Rs++]=qi,qi=n,Yi=s}function Nd(n,s,c){jn[zn++]=or,jn[zn++]=It,jn[zn++]=Xi,Xi=n;var p=or;n=It;var y=32-nt(p)-1;p&=~(1<<y),c+=1;var _=32-nt(s)+y;if(30<_){var E=y-y%5;_=(p&(1<<E)-1).toString(32),p>>=E,y-=E,or=1<<32-nt(s)+y|c<<y|p,It=_+n}else or=1<<_|c<<y|p,It=n}function yo(n){n.return!==null&&(Ms(n,1),Nd(n,1,0))}function cn(n){for(;n===qi;)qi=Dn[--Rs],Dn[Rs]=null,Yi=Dn[--Rs],Dn[Rs]=null;for(;n===Xi;)Xi=jn[--zn],jn[zn]=null,It=jn[--zn],jn[zn]=null,or=jn[--zn],jn[zn]=null}var ar=null,Se=null,ht=!1,lr=null;function qu(n,s){var c=si(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=n,s=n.deletions,s===null?(n.deletions=[c],n.flags|=16):s.push(c)}function Rd(n,s){switch(n.tag){case 5:var c=n.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,ar=n,Se=Qr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,ar=n,Se=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Xi!==null?{id:or,overflow:It}:null,n.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=si(18,null,null,0),c.stateNode=s,c.return=n,n.child=c,ar=n,Se=null,!0):!1;default:return!1}}function Is(n){return(n.mode&1)!==0&&(n.flags&128)===0}function vo(n){if(ht){var s=Se;if(s){var c=s;if(!Rd(n,s)){if(Is(n))throw Error(t(418));s=Qr(c.nextSibling);var p=ar;s&&Rd(n,s)?qu(p,c):(n.flags=n.flags&-4097|2,ht=!1,ar=n)}}else{if(Is(n))throw Error(t(418));n.flags=n.flags&-4097|2,ht=!1,ar=n}}}function Ml(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function wa(n){if(n!==ar)return!1;if(!ht)return Ml(n),ht=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Wu(n.type,n.memoizedProps)),s&&(s=Se)){if(Is(n))throw Yu(),Error(t(418));for(;s;)qu(n,s),s=Qr(s.nextSibling)}if(Ml(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"){if(s===0){Se=Qr(n.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}n=n.nextSibling}Se=null}}else Se=ar?Qr(n.stateNode.nextSibling):null;return!0}function Yu(){for(var n=Se;n;)n=Qr(n.nextSibling)}function As(){Se=ar=null,ht=!1}function _a(n){lr===null?lr=[n]:lr.push(n)}var Xu=z.ReactCurrentBatchConfig;function Ht(n,s,c){if(n=c.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,n));var y=p,_=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(E){var L=y.refs;E===null?delete L[_]:L[_]=E},s._stringRef=_,s)}if(typeof n!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,n))}return n}function Qn(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Or(n){var s=n._init;return s(n._payload)}function Il(n){function s(q,G){if(n){var Q=q.deletions;Q===null?(q.deletions=[G],q.flags|=16):Q.push(G)}}function c(q,G){if(!n)return null;for(;G!==null;)s(q,G),G=G.sibling;return null}function p(q,G){for(q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function y(q,G){return q=zo(q,G),q.index=0,q.sibling=null,q}function _(q,G,Q){return q.index=Q,n?(Q=q.alternate,Q!==null?(Q=Q.index,Q<G?(q.flags|=2,G):Q):(q.flags|=2,G)):(q.flags|=1048576,G)}function E(q){return n&&q.alternate===null&&(q.flags|=2),q}function L(q,G,Q,me){return G===null||G.tag!==6?(G=Lf(Q,q.mode,me),G.return=q,G):(G=y(G,Q),G.return=q,G)}function F(q,G,Q,me){var Ge=Q.type;return Ge===ie?oe(q,G,Q.props.children,me,Q.key):G!==null&&(G.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===ae&&Or(Ge)===G.type)?(me=y(G,Q.props),me.ref=Ht(q,G,Q),me.return=q,me):(me=$d(Q.type,Q.key,Q.props,null,q.mode,me),me.ref=Ht(q,G,Q),me.return=q,me)}function Z(q,G,Q,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=Df(Q,q.mode,me),G.return=q,G):(G=y(G,Q.children||[]),G.return=q,G)}function oe(q,G,Q,me,Ge){return G===null||G.tag!==7?(G=Ia(Q,q.mode,me,Ge),G.return=q,G):(G=y(G,Q),G.return=q,G)}function ce(q,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Lf(""+G,q.mode,Q),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case J:return Q=$d(G.type,G.key,G.props,null,q.mode,Q),Q.ref=Ht(q,null,G),Q.return=q,Q;case te:return G=Df(G,q.mode,Q),G.return=q,G;case ae:var me=G._init;return ce(q,me(G._payload),Q)}if(Et(G)||ve(G))return G=Ia(G,q.mode,Q,null),G.return=q,G;Qn(q,G)}return null}function se(q,G,Q,me){var Ge=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ge!==null?null:L(q,G,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:return Q.key===Ge?F(q,G,Q,me):null;case te:return Q.key===Ge?Z(q,G,Q,me):null;case ae:return Ge=Q._init,se(q,G,Ge(Q._payload),me)}if(Et(Q)||ve(Q))return Ge!==null?null:oe(q,G,Q,me,null);Qn(q,Q)}return null}function Te(q,G,Q,me,Ge){if(typeof me=="string"&&me!==""||typeof me=="number")return q=q.get(Q)||null,L(G,q,""+me,Ge);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case J:return q=q.get(me.key===null?Q:me.key)||null,F(G,q,me,Ge);case te:return q=q.get(me.key===null?Q:me.key)||null,Z(G,q,me,Ge);case ae:var Ye=me._init;return Te(q,G,Q,Ye(me._payload),Ge)}if(Et(me)||ve(me))return q=q.get(Q)||null,oe(G,q,me,Ge,null);Qn(G,me)}return null}function De(q,G,Q,me){for(var Ge=null,Ye=null,Xe=G,Qe=G=0,An=null;Xe!==null&&Qe<Q.length;Qe++){Xe.index>Qe?(An=Xe,Xe=null):An=Xe.sibling;var dt=se(q,Xe,Q[Qe],me);if(dt===null){Xe===null&&(Xe=An);break}n&&Xe&&dt.alternate===null&&s(q,Xe),G=_(dt,G,Qe),Ye===null?Ge=dt:Ye.sibling=dt,Ye=dt,Xe=An}if(Qe===Q.length)return c(q,Xe),ht&&Ms(q,Qe),Ge;if(Xe===null){for(;Qe<Q.length;Qe++)Xe=ce(q,Q[Qe],me),Xe!==null&&(G=_(Xe,G,Qe),Ye===null?Ge=Xe:Ye.sibling=Xe,Ye=Xe);return ht&&Ms(q,Qe),Ge}for(Xe=p(q,Xe);Qe<Q.length;Qe++)An=Te(Xe,q,Qe,Q[Qe],me),An!==null&&(n&&An.alternate!==null&&Xe.delete(An.key===null?Qe:An.key),G=_(An,G,Qe),Ye===null?Ge=An:Ye.sibling=An,Ye=An);return n&&Xe.forEach(function(Fo){return s(q,Fo)}),ht&&Ms(q,Qe),Ge}function Be(q,G,Q,me){var Ge=ve(Q);if(typeof Ge!="function")throw Error(t(150));if(Q=Ge.call(Q),Q==null)throw Error(t(151));for(var Ye=Ge=null,Xe=G,Qe=G=0,An=null,dt=Q.next();Xe!==null&&!dt.done;Qe++,dt=Q.next()){Xe.index>Qe?(An=Xe,Xe=null):An=Xe.sibling;var Fo=se(q,Xe,dt.value,me);if(Fo===null){Xe===null&&(Xe=An);break}n&&Xe&&Fo.alternate===null&&s(q,Xe),G=_(Fo,G,Qe),Ye===null?Ge=Fo:Ye.sibling=Fo,Ye=Fo,Xe=An}if(dt.done)return c(q,Xe),ht&&Ms(q,Qe),Ge;if(Xe===null){for(;!dt.done;Qe++,dt=Q.next())dt=ce(q,dt.value,me),dt!==null&&(G=_(dt,G,Qe),Ye===null?Ge=dt:Ye.sibling=dt,Ye=dt);return ht&&Ms(q,Qe),Ge}for(Xe=p(q,Xe);!dt.done;Qe++,dt=Q.next())dt=Te(Xe,q,Qe,dt.value,me),dt!==null&&(n&&dt.alternate!==null&&Xe.delete(dt.key===null?Qe:dt.key),G=_(dt,G,Qe),Ye===null?Ge=dt:Ye.sibling=dt,Ye=dt);return n&&Xe.forEach(function(O2){return s(q,O2)}),ht&&Ms(q,Qe),Ge}function sn(q,G,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===ie&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case J:e:{for(var Ge=Q.key,Ye=G;Ye!==null;){if(Ye.key===Ge){if(Ge=Q.type,Ge===ie){if(Ye.tag===7){c(q,Ye.sibling),G=y(Ye,Q.props.children),G.return=q,q=G;break e}}else if(Ye.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===ae&&Or(Ge)===Ye.type){c(q,Ye.sibling),G=y(Ye,Q.props),G.ref=Ht(q,Ye,Q),G.return=q,q=G;break e}c(q,Ye);break}else s(q,Ye);Ye=Ye.sibling}Q.type===ie?(G=Ia(Q.props.children,q.mode,me,Q.key),G.return=q,q=G):(me=$d(Q.type,Q.key,Q.props,null,q.mode,me),me.ref=Ht(q,G,Q),me.return=q,q=me)}return E(q);case te:e:{for(Ye=Q.key;G!==null;){if(G.key===Ye)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){c(q,G.sibling),G=y(G,Q.children||[]),G.return=q,q=G;break e}else{c(q,G);break}else s(q,G);G=G.sibling}G=Df(Q,q.mode,me),G.return=q,q=G}return E(q);case ae:return Ye=Q._init,sn(q,G,Ye(Q._payload),me)}if(Et(Q))return De(q,G,Q,me);if(ve(Q))return Be(q,G,Q,me);Qn(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(c(q,G.sibling),G=y(G,Q),G.return=q,q=G):(c(q,G),G=Lf(Q,q.mode,me),G.return=q,q=G),E(q)):c(q,G)}return sn}var Os=Il(!0),wr=Il(!1),Sa=vi(null),ur=null,xo=null,Al=null;function Ol(){Al=xo=ur=null}function Ll(n){var s=Sa.current;St(Sa),n._currentValue=s}function Dl(n,s,c){for(;n!==null;){var p=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),n===c)break;n=n.return}}function wi(n,s){ur=n,Al=xo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(k=!0),n.firstContext=null)}function Fn(n){var s=n._currentValue;if(Al!==n)if(n={context:n,memoizedValue:s,next:null},xo===null){if(ur===null)throw Error(t(308));xo=n,ur.dependencies={lanes:0,firstContext:n}}else xo=xo.next=n;return s}var Zr=null;function wo(n){Zr===null?Zr=[n]:Zr.push(n)}function ka(n,s,c,p){var y=s.interleaved;return y===null?(c.next=c,wo(s)):(c.next=y.next,y.next=c),s.interleaved=c,cr(n,p)}function cr(n,s){n.lanes|=s;var c=n.alternate;for(c!==null&&(c.lanes|=s),c=n,n=n.return;n!==null;)n.childLanes|=s,c=n.alternate,c!==null&&(c.childLanes|=s),c=n,n=n.return;return c.tag===3?c.stateNode:null}var ei=!1;function Ca(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jl(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ti(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ni(n,s,c){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(ct&2)!==0){var y=p.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),p.pending=s,cr(n,c)}return y=p.interleaved,y===null?(s.next=s,wo(p)):(s.next=y.next,y.next=s),p.interleaved=s,cr(n,c)}function zl(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var p=s.lanes;p&=n.pendingLanes,c|=p,s.lanes=c,wu(n,c)}}function Ea(n,s){var c=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var E={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?y=_=E:_=_.next=E,c=c.next}while(c!==null);_===null?y=_=s:_=_.next=s}else y=_=s;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:p.shared,effects:p.effects},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}function _o(n,s,c,p){var y=n.updateQueue;ei=!1;var _=y.firstBaseUpdate,E=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var F=L,Z=F.next;F.next=null,E===null?_=Z:E.next=Z,E=F;var oe=n.alternate;oe!==null&&(oe=oe.updateQueue,L=oe.lastBaseUpdate,L!==E&&(L===null?oe.firstBaseUpdate=Z:L.next=Z,oe.lastBaseUpdate=F))}if(_!==null){var ce=y.baseState;E=0,oe=Z=F=null,L=_;do{var se=L.lane,Te=L.eventTime;if((p&se)===se){oe!==null&&(oe=oe.next={eventTime:Te,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var De=n,Be=L;switch(se=s,Te=c,Be.tag){case 1:if(De=Be.payload,typeof De=="function"){ce=De.call(Te,ce,se);break e}ce=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Be.payload,se=typeof De=="function"?De.call(Te,ce,se):De,se==null)break e;ce=he({},ce,se);break e;case 2:ei=!0}}L.callback!==null&&L.lane!==0&&(n.flags|=64,se=y.effects,se===null?y.effects=[L]:se.push(L))}else Te={eventTime:Te,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},oe===null?(Z=oe=Te,F=ce):oe=oe.next=Te,E|=se;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;se=L,L=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(oe===null&&(F=ce),y.baseState=F,y.firstBaseUpdate=Z,y.lastBaseUpdate=oe,s=y.shared.interleaved,s!==null){y=s;do E|=y.lane,y=y.next;while(y!==s)}else _===null&&(y.shared.lanes=0);Ta|=E,n.lanes=E,n.memoizedState=ce}}function Bt(n,s,c){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var p=n[s],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Je={},wt=vi(Je),At=vi(Je),Vt=vi(Je);function tn(n){if(n===Je)throw Error(t(174));return n}function Qi(n,s){switch(xt(Vt,s),xt(At,n),xt(wt,Je),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:as(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=as(s,n)}St(wt),xt(wt,s)}function Ot(){St(wt),St(At),St(Vt)}function So(n){tn(Vt.current);var s=tn(wt.current),c=as(s,n.type);s!==c&&(xt(At,n),xt(wt,c))}function _i(n){At.current===n&&(St(wt),St(At))}var kt=vi(0);function ko(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ls=[];function Tn(){for(var n=0;n<Ls.length;n++)Ls[n]._workInProgressVersionPrimary=null;Ls.length=0}var Co=z.ReactCurrentDispatcher,Pa=z.ReactCurrentBatchConfig,Bn=0,mt=null,Gt=null,Xt=null,Lr=!1,Ki=!1,_r=0,Fl=0;function Qt(){throw Error(t(321))}function ba(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!Xn(n[c],s[c]))return!1;return!0}function Eo(n,s,c,p,y,_){if(Bn=_,mt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Co.current=n===null||n.memoizedState===null?mf:Zi,n=c(p,y),Ki){_=0;do{if(Ki=!1,_r=0,25<=_)throw Error(t(301));_+=1,Xt=Gt=null,s.updateQueue=null,Co.current=Hl,n=c(p,y)}while(Ki)}if(Co.current=No,s=Gt!==null&&Gt.next!==null,Bn=0,Xt=Gt=mt=null,Lr=!1,s)throw Error(t(300));return n}function Po(){var n=_r!==0;return _r=0,n}function Tt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?mt.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function nn(){if(Gt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var s=Xt===null?mt.memoizedState:Xt.next;if(s!==null)Xt=s,Gt=n;else{if(n===null)throw Error(t(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Xt===null?mt.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function Nn(n,s){return typeof s=="function"?s(n):s}function Rn(n){var s=nn(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var p=Gt,y=p.baseQueue,_=c.pending;if(_!==null){if(y!==null){var E=y.next;y.next=_.next,_.next=E}p.baseQueue=y=_,c.pending=null}if(y!==null){_=y.next,p=p.baseState;var L=E=null,F=null,Z=_;do{var oe=Z.lane;if((Bn&oe)===oe)F!==null&&(F=F.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),p=Z.hasEagerState?Z.eagerState:n(p,Z.action);else{var ce={lane:oe,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};F===null?(L=F=ce,E=p):F=F.next=ce,mt.lanes|=oe,Ta|=oe}Z=Z.next}while(Z!==null&&Z!==_);F===null?E=p:F.next=L,Xn(p,s.memoizedState)||(k=!0),s.memoizedState=p,s.baseState=E,s.baseQueue=F,c.lastRenderedState=p}if(n=c.interleaved,n!==null){y=n;do _=y.lane,mt.lanes|=_,Ta|=_,y=y.next;while(y!==n)}else y===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Bl(n){var s=nn(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=n;var p=c.dispatch,y=c.pending,_=s.memoizedState;if(y!==null){c.pending=null;var E=y=y.next;do _=n(_,E.action),E=E.next;while(E!==y);Xn(_,s.memoizedState)||(k=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),c.lastRenderedState=_}return[_,p]}function Gl(){}function Ul(n,s){var c=mt,p=nn(),y=s(),_=!Xn(p.memoizedState,y);if(_&&(p.memoizedState=y,k=!0),p=p.queue,Ju(Qu.bind(null,c,p,n),[n]),p.getSnapshot!==s||_||Xt!==null&&Xt.memoizedState.tag&1){if(c.flags|=2048,bo(9,Si.bind(null,c,p,y,s),void 0,null),In===null)throw Error(t(349));(Bn&30)!==0||Md(c,s,y)}return y}function Md(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Si(n,s,c,p){s.value=c,s.getSnapshot=p,Ku(s)&&Wl(n)}function Qu(n,s,c){return c(function(){Ku(s)&&Wl(n)})}function Ku(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!Xn(n,c)}catch{return!0}}function Wl(n){var s=cr(n,1);s!==null&&Pi(s,n,1,-1)}function $i(n){var s=Tt();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:n},s.queue=n,n=n.dispatch=jd.bind(null,mt,n),[s.memoizedState,n]}function bo(n,s,c,p){return n={tag:n,create:s,destroy:c,deps:p,next:null},s=mt.updateQueue,s===null?(s={lastEffect:null,stores:null},mt.updateQueue=s,s.lastEffect=n.next=n):(c=s.lastEffect,c===null?s.lastEffect=n.next=n:(p=c.next,c.next=n,n.next=p,s.lastEffect=n)),n}function $u(){return nn().memoizedState}function To(n,s,c,p){var y=Tt();mt.flags|=n,y.memoizedState=bo(1|s,c,void 0,p===void 0?null:p)}function Ds(n,s,c,p){var y=nn();p=p===void 0?null:p;var _=void 0;if(Gt!==null){var E=Gt.memoizedState;if(_=E.destroy,p!==null&&ba(p,E.deps)){y.memoizedState=bo(s,c,_,p);return}}mt.flags|=n,y.memoizedState=bo(1|s,c,_,p)}function Id(n,s){return To(8390656,8,n,s)}function Ju(n,s){return Ds(2048,8,n,s)}function Zu(n,s){return Ds(4,2,n,s)}function ec(n,s){return Ds(4,4,n,s)}function Ji(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Ad(n,s,c){return c=c!=null?c.concat([n]):null,Ds(4,4,Ji.bind(null,s,n),c)}function ki(){}function tc(n,s){var c=nn();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&ba(s,p[1])?p[0]:(c.memoizedState=[n,s],n)}function Nt(n,s){var c=nn();s=s===void 0?null:s;var p=c.memoizedState;return p!==null&&s!==null&&ba(s,p[1])?p[0]:(n=n(),c.memoizedState=[n,s],n)}function Od(n,s,c){return(Bn&21)===0?(n.baseState&&(n.baseState=!1,k=!0),n.memoizedState=c):(Xn(c,s)||(c=xu(),mt.lanes|=c,Ta|=c,n.baseState=!0),s)}function Ld(n,s){var c=ut;ut=c!==0&&4>c?c:4,n(!0);var p=Pa.transition;Pa.transition={};try{n(!1),s()}finally{ut=c,Pa.transition=p}}function Dd(){return nn().memoizedState}function gf(n,s,c){var p=Do(n);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},nc(n))zd(s,c);else if(c=ka(n,s,c,p),c!==null){var y=hr();Pi(c,n,p,y),dr(c,s,p)}}function jd(n,s,c){var p=Do(n),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(nc(n))zd(s,y);else{var _=n.alternate;if(n.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var E=s.lastRenderedState,L=_(E,c);if(y.hasEagerState=!0,y.eagerState=L,Xn(L,E)){var F=s.interleaved;F===null?(y.next=y,wo(s)):(y.next=F.next,F.next=y),s.interleaved=y;return}}catch{}finally{}c=ka(n,s,y,p),c!==null&&(y=hr(),Pi(c,n,p,y),dr(c,s,p))}}function nc(n){var s=n.alternate;return n===mt||s!==null&&s===mt}function zd(n,s){Ki=Lr=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function dr(n,s,c){if((c&4194240)!==0){var p=s.lanes;p&=n.pendingLanes,c|=p,s.lanes=c,wu(n,c)}}var No={readContext:Fn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},mf={readContext:Fn,useCallback:function(n,s){return Tt().memoizedState=[n,s===void 0?null:s],n},useContext:Fn,useEffect:Id,useImperativeHandle:function(n,s,c){return c=c!=null?c.concat([n]):null,To(4194308,4,Ji.bind(null,s,n),c)},useLayoutEffect:function(n,s){return To(4194308,4,n,s)},useInsertionEffect:function(n,s){return To(4,2,n,s)},useMemo:function(n,s){var c=Tt();return s=s===void 0?null:s,n=n(),c.memoizedState=[n,s],n},useReducer:function(n,s,c){var p=Tt();return s=c!==void 0?c(s):s,p.memoizedState=p.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},p.queue=n,n=n.dispatch=gf.bind(null,mt,n),[p.memoizedState,n]},useRef:function(n){var s=Tt();return n={current:n},s.memoizedState=n},useState:$i,useDebugValue:ki,useDeferredValue:function(n){return Tt().memoizedState=n},useTransition:function(){var n=$i(!1),s=n[0];return n=Ld.bind(null,n[1]),Tt().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,c){var p=mt,y=Tt();if(ht){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),In===null)throw Error(t(349));(Bn&30)!==0||Md(p,s,c)}y.memoizedState=c;var _={value:c,getSnapshot:s};return y.queue=_,Id(Qu.bind(null,p,_,n),[n]),p.flags|=2048,bo(9,Si.bind(null,p,_,c,s),void 0,null),c},useId:function(){var n=Tt(),s=In.identifierPrefix;if(ht){var c=It,p=or;c=(p&~(1<<32-nt(p)-1)).toString(32)+c,s=":"+s+"R"+c,c=_r++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Fl++,s=":"+s+"r"+c.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Zi={readContext:Fn,useCallback:tc,useContext:Fn,useEffect:Ju,useImperativeHandle:Ad,useInsertionEffect:Zu,useLayoutEffect:ec,useMemo:Nt,useReducer:Rn,useRef:$u,useState:function(){return Rn(Nn)},useDebugValue:ki,useDeferredValue:function(n){var s=nn();return Od(s,Gt.memoizedState,n)},useTransition:function(){var n=Rn(Nn)[0],s=nn().memoizedState;return[n,s]},useMutableSource:Gl,useSyncExternalStore:Ul,useId:Dd,unstable_isNewReconciler:!1},Hl={readContext:Fn,useCallback:tc,useContext:Fn,useEffect:Ju,useImperativeHandle:Ad,useInsertionEffect:Zu,useLayoutEffect:ec,useMemo:Nt,useReducer:Bl,useRef:$u,useState:function(){return Bl(Nn)},useDebugValue:ki,useDeferredValue:function(n){var s=nn();return Gt===null?s.memoizedState=n:Od(s,Gt.memoizedState,n)},useTransition:function(){var n=Bl(Nn)[0],s=nn().memoizedState;return[n,s]},useMutableSource:Gl,useSyncExternalStore:Ul,useId:Dd,unstable_isNewReconciler:!1};function xn(n,s){if(n&&n.defaultProps){s=he({},s),n=n.defaultProps;for(var c in n)s[c]===void 0&&(s[c]=n[c]);return s}return s}function Ro(n,s,c,p){s=n.memoizedState,c=c(p,s),c=c==null?s:he({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Mo={isMounted:function(n){return(n=n._reactInternals)?cs(n)===n:!1},enqueueSetState:function(n,s,c){n=n._reactInternals;var p=hr(),y=Do(n),_=ti(p,y);_.payload=s,c!=null&&(_.callback=c),s=ni(n,_,y),s!==null&&(Pi(s,n,y,p),zl(s,n,y))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var p=hr(),y=Do(n),_=ti(p,y);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=ni(n,_,y),s!==null&&(Pi(s,n,y,p),zl(s,n,y))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=hr(),p=Do(n),y=ti(c,p);y.tag=2,s!=null&&(y.callback=s),s=ni(n,y,p),s!==null&&(Pi(s,n,p,c),zl(s,n,p))}};function Vl(n,s,c,p,y,_,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,_,E):s.prototype&&s.prototype.isPureReactComponent?!xs(c,p)||!xs(y,_):!0}function Fd(n,s,c){var p=!1,y=$r,_=s.contextType;return typeof _=="object"&&_!==null?_=Fn(_):(y=bn(s)?Hi:vn.current,p=s.contextTypes,_=(p=p!=null)?Ts(n,y):$r),s=new s(c,_),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Mo,n.stateNode=s,s._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=y,n.__reactInternalMemoizedMaskedChildContext=_),s}function rc(n,s,c,p){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,p),s.state!==n&&Mo.enqueueReplaceState(s,s.state,null)}function ql(n,s,c,p){var y=n.stateNode;y.props=c,y.state=n.memoizedState,y.refs={},Ca(n);var _=s.contextType;typeof _=="object"&&_!==null?y.context=Fn(_):(_=bn(s)?Hi:vn.current,y.context=Ts(n,_)),y.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Ro(n,s,_,c),y.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(s=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),s!==y.state&&Mo.enqueueReplaceState(y,y.state,null),_o(n,c,y,p),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308)}function js(n,s){try{var c="",p=s;do c+=qe(p),p=p.return;while(p);var y=c}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:n,source:s,stack:y,digest:null}}function Yl(n,s,c){return{value:n,source:null,stack:c??null,digest:s??null}}function Io(n,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var yf=typeof WeakMap=="function"?WeakMap:Map;function Bd(n,s,c){c=ti(-1,c),c.tag=3,c.payload={element:null};var p=s.value;return c.callback=function(){Vd||(Vd=!0,bf=p),Io(n,s)},c}function a(n,s,c){c=ti(-1,c),c.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var y=s.value;c.payload=function(){return p(y)},c.callback=function(){Io(n,s)}}var _=n.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){Io(n,s),typeof p!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var E=s.stack;this.componentDidCatch(s.value,{componentStack:E!==null?E:""})}),c}function l(n,s,c){var p=n.pingCache;if(p===null){p=n.pingCache=new yf;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(c)||(y.add(c),n=k2.bind(null,n,s,c),s.then(n,n))}function h(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function m(n,s,c,p,y){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=ti(-1,1),s.tag=2,ni(c,s,1))),c.lanes|=1),n):(n.flags|=65536,n.lanes=y,n)}var v=z.ReactCurrentOwner,k=!1;function M(n,s,c,p){s.child=n===null?wr(s,null,c,p):Os(s,n.child,c,p)}function U(n,s,c,p,y){c=c.render;var _=s.ref;return wi(s,y),p=Eo(n,s,c,p,_,y),c=Po(),n!==null&&!k?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,Mn(n,s,y)):(ht&&c&&yo(s),s.flags|=1,M(n,s,p,y),s.child)}function ee(n,s,c,p,y){if(n===null){var _=c.type;return typeof _=="function"&&!Of(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=_,fe(n,s,_,p,y)):(n=$d(c.type,null,p,s,s.mode,y),n.ref=s.ref,n.return=s,s.child=n)}if(_=n.child,(n.lanes&y)===0){var E=_.memoizedProps;if(c=c.compare,c=c!==null?c:xs,c(E,p)&&n.ref===s.ref)return Mn(n,s,y)}return s.flags|=1,n=zo(_,p),n.ref=s.ref,n.return=s,s.child=n}function fe(n,s,c,p,y){if(n!==null){var _=n.memoizedProps;if(xs(_,p)&&n.ref===s.ref)if(k=!1,s.pendingProps=p=_,(n.lanes&y)!==0)(n.flags&131072)!==0&&(k=!0);else return s.lanes=n.lanes,Mn(n,s,y)}return Ee(n,s,c,p,y)}function Me(n,s,c){var p=s.pendingProps,y=p.children,_=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Ql,Dr),Dr|=c;else{if((c&1073741824)===0)return n=_!==null?_.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,xt(Ql,Dr),Dr|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:c,xt(Ql,Dr),Dr|=p}else _!==null?(p=_.baseLanes|c,s.memoizedState=null):p=c,xt(Ql,Dr),Dr|=p;return M(n,s,y,c),s.child}function Ke(n,s){var c=s.ref;(n===null&&c!==null||n!==null&&n.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Ee(n,s,c,p,y){var _=bn(c)?Hi:vn.current;return _=Ts(s,_),wi(s,y),c=Eo(n,s,c,p,_,y),p=Po(),n!==null&&!k?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~y,Mn(n,s,y)):(ht&&p&&yo(s),s.flags|=1,M(n,s,c,y),s.child)}function Ct(n,s,c,p,y){if(bn(c)){var _=!0;Ns(s)}else _=!1;if(wi(s,y),s.stateNode===null)st(n,s),Fd(s,c,p),ql(s,c,p,y),p=!0;else if(n===null){var E=s.stateNode,L=s.memoizedProps;E.props=L;var F=E.context,Z=c.contextType;typeof Z=="object"&&Z!==null?Z=Fn(Z):(Z=bn(c)?Hi:vn.current,Z=Ts(s,Z));var oe=c.getDerivedStateFromProps,ce=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function";ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==p||F!==Z)&&rc(s,E,p,Z),ei=!1;var se=s.memoizedState;E.state=se,_o(s,p,E,y),F=s.memoizedState,L!==p||se!==F||Pn.current||ei?(typeof oe=="function"&&(Ro(s,c,oe,p),F=s.memoizedState),(L=ei||Vl(s,c,L,p,se,F,Z))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(s.flags|=4194308)):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=F),E.props=p,E.state=F,E.context=Z,p=L):(typeof E.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{E=s.stateNode,jl(n,s),L=s.memoizedProps,Z=s.type===s.elementType?L:xn(s.type,L),E.props=Z,ce=s.pendingProps,se=E.context,F=c.contextType,typeof F=="object"&&F!==null?F=Fn(F):(F=bn(c)?Hi:vn.current,F=Ts(s,F));var Te=c.getDerivedStateFromProps;(oe=typeof Te=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(L!==ce||se!==F)&&rc(s,E,p,F),ei=!1,se=s.memoizedState,E.state=se,_o(s,p,E,y);var De=s.memoizedState;L!==ce||se!==De||Pn.current||ei?(typeof Te=="function"&&(Ro(s,c,Te,p),De=s.memoizedState),(Z=ei||Vl(s,c,Z,p,se,De,F)||!1)?(oe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,De,F),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,De,F)),typeof E.componentDidUpdate=="function"&&(s.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof E.componentDidUpdate!="function"||L===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=De),E.props=p,E.state=De,E.context=F,p=Z):(typeof E.componentDidUpdate!="function"||L===n.memoizedProps&&se===n.memoizedState||(s.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&se===n.memoizedState||(s.flags|=1024),p=!1)}return ft(n,s,c,p,_,y)}function ft(n,s,c,p,y,_){Ke(n,s);var E=(s.flags&128)!==0;if(!p&&!E)return y&&Td(s,c,!1),Mn(n,s,_);p=s.stateNode,v.current=s;var L=E&&typeof c.getDerivedStateFromError!="function"?null:p.render();return s.flags|=1,n!==null&&E?(s.child=Os(s,n.child,null,_),s.child=Os(s,null,L,_)):M(n,s,L,_),s.memoizedState=p.state,y&&Td(s,c,!0),s.child}function Gn(n){var s=n.stateNode;s.pendingContext?Vu(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Vu(n,s.context,!1),Qi(n,s.containerInfo)}function ri(n,s,c,p,y){return As(),_a(y),s.flags|=256,M(n,s,c,p),s.child}var $={dehydrated:null,treeContext:null,retryLane:0};function H(n){return{baseLanes:n,cachePool:null,transitions:null}}function ne(n,s,c){var p=s.pendingProps,y=kt.current,_=!1,E=(s.flags&128)!==0,L;if((L=E)||(L=n!==null&&n.memoizedState===null?!1:(y&2)!==0),L?(_=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(y|=1),xt(kt,y&1),n===null)return vo(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(E=p.children,n=p.fallback,_?(p=s.mode,_=s.child,E={mode:"hidden",children:E},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=E):_=Jd(E,p,0,null),n=Ia(n,p,c,null),_.return=s,n.return=s,_.sibling=n,s.child=_,s.child.memoizedState=H(c),s.memoizedState=$,n):Pe(s,E));if(y=n.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return et(n,s,E,p,L,y,c);if(_){_=p.fallback,E=s.mode,y=n.child,L=y.sibling;var F={mode:"hidden",children:p.children};return(E&1)===0&&s.child!==y?(p=s.child,p.childLanes=0,p.pendingProps=F,s.deletions=null):(p=zo(y,F),p.subtreeFlags=y.subtreeFlags&14680064),L!==null?_=zo(L,_):(_=Ia(_,E,c,null),_.flags|=2),_.return=s,p.return=s,p.sibling=_,s.child=p,p=_,_=s.child,E=n.child.memoizedState,E=E===null?H(c):{baseLanes:E.baseLanes|c,cachePool:null,transitions:E.transitions},_.memoizedState=E,_.childLanes=n.childLanes&~c,s.memoizedState=$,p}return _=n.child,n=_.sibling,p=zo(_,{mode:"visible",children:p.children}),(s.mode&1)===0&&(p.lanes=c),p.return=s,p.sibling=null,n!==null&&(c=s.deletions,c===null?(s.deletions=[n],s.flags|=16):c.push(n)),s.child=p,s.memoizedState=null,p}function Pe(n,s){return s=Jd({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function We(n,s,c,p){return p!==null&&_a(p),Os(s,n.child,null,c),n=Pe(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function et(n,s,c,p,y,_,E){if(c)return s.flags&256?(s.flags&=-257,p=Yl(Error(t(422))),We(n,s,E,p)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(_=p.fallback,y=s.mode,p=Jd({mode:"visible",children:p.children},y,0,null),_=Ia(_,y,E,null),_.flags|=2,p.return=s,_.return=s,p.sibling=_,s.child=p,(s.mode&1)!==0&&Os(s,n.child,null,E),s.child.memoizedState=H(E),s.memoizedState=$,_);if((s.mode&1)===0)return We(n,s,E,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var L=p.dgst;return p=L,_=Error(t(419)),p=Yl(_,p,void 0),We(n,s,E,p)}if(L=(E&n.childLanes)!==0,k||L){if(p=In,p!==null){switch(E&-E){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(p.suspendedLanes|E))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,cr(n,y),Pi(p,n,y,-1))}return Af(),p=Yl(Error(t(421))),We(n,s,E,p)}return y.data==="$?"?(s.flags|=128,s.child=n.child,s=C2.bind(null,n),y._reactRetry=s,null):(n=_.treeContext,Se=Qr(y.nextSibling),ar=s,ht=!0,lr=null,n!==null&&(jn[zn++]=or,jn[zn++]=It,jn[zn++]=Xi,or=n.id,It=n.overflow,Xi=s),s=Pe(s,p.children),s.flags|=4096,s)}function $e(n,s,c){n.lanes|=s;var p=n.alternate;p!==null&&(p.lanes|=s),Dl(n.return,s,c)}function ot(n,s,c,p,y){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=y)}function rn(n,s,c){var p=s.pendingProps,y=p.revealOrder,_=p.tail;if(M(n,s,p.children,c),p=kt.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$e(n,c,s);else if(n.tag===19)$e(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(xt(kt,p),(s.mode&1)===0)s.memoizedState=null;else switch(y){case"forwards":for(c=s.child,y=null;c!==null;)n=c.alternate,n!==null&&ko(n)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),ot(s,!1,y,c,_);break;case"backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(n=y.alternate,n!==null&&ko(n)===null){s.child=y;break}n=y.sibling,y.sibling=c,c=y,y=n}ot(s,!0,c,null,_);break;case"together":ot(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function st(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Mn(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),Ta|=s.lanes,(c&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,c=zo(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=zo(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function vf(n,s,c){switch(s.tag){case 3:Gn(s),As();break;case 5:So(s);break;case 1:bn(s.type)&&Ns(s);break;case 4:Qi(s,s.stateNode.containerInfo);break;case 10:var p=s.type._context,y=s.memoizedProps.value;xt(Sa,p._currentValue),p._currentValue=y;break;case 13:if(p=s.memoizedState,p!==null)return p.dehydrated!==null?(xt(kt,kt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?ne(n,s,c):(xt(kt,kt.current&1),n=Mn(n,s,c),n!==null?n.sibling:null);xt(kt,kt.current&1);break;case 19:if(p=(c&s.childLanes)!==0,(n.flags&128)!==0){if(p)return rn(n,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),xt(kt,kt.current),p)break;return null;case 22:case 23:return s.lanes=0,Me(n,s,c)}return Mn(n,s,c)}var B0,xf,G0,U0;B0=function(n,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)n.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},xf=function(){},G0=function(n,s,c,p){var y=n.memoizedProps;if(y!==p){n=s.stateNode,tn(wt.current);var _=null;switch(c){case"input":y=Ue(n,y),p=Ue(n,p),_=[];break;case"select":y=he({},y,{value:void 0}),p=he({},p,{value:void 0}),_=[];break;case"textarea":y=br(n,y),p=br(n,p),_=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=Es)}cu(c,p);var E;c=null;for(Z in y)if(!p.hasOwnProperty(Z)&&y.hasOwnProperty(Z)&&y[Z]!=null)if(Z==="style"){var L=y[Z];for(E in L)L.hasOwnProperty(E)&&(c||(c={}),c[E]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(o.hasOwnProperty(Z)?_||(_=[]):(_=_||[]).push(Z,null));for(Z in p){var F=p[Z];if(L=y!=null?y[Z]:void 0,p.hasOwnProperty(Z)&&F!==L&&(F!=null||L!=null))if(Z==="style")if(L){for(E in L)!L.hasOwnProperty(E)||F&&F.hasOwnProperty(E)||(c||(c={}),c[E]="");for(E in F)F.hasOwnProperty(E)&&L[E]!==F[E]&&(c||(c={}),c[E]=F[E])}else c||(_||(_=[]),_.push(Z,c)),c=F;else Z==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,L=L?L.__html:void 0,F!=null&&L!==F&&(_=_||[]).push(Z,F)):Z==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(Z,""+F):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(o.hasOwnProperty(Z)?(F!=null&&Z==="onScroll"&&_t("scroll",n),_||L===F||(_=[])):(_=_||[]).push(Z,F))}c&&(_=_||[]).push("style",c);var Z=_;(s.updateQueue=Z)&&(s.flags|=4)}},U0=function(n,s,c,p){c!==p&&(s.flags|=4)};function ic(n,s){if(!ht)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Kn(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,p=0;if(s)for(var y=n.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=p,n.childLanes=c,s}function f2(n,s,c){var p=s.pendingProps;switch(cn(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(s),null;case 1:return bn(s.type)&&go(),Kn(s),null;case 3:return p=s.stateNode,Ot(),St(Pn),St(vn),Tn(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(wa(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,lr!==null&&(Rf(lr),lr=null))),xf(n,s),Kn(s),null;case 5:_i(s);var y=tn(Vt.current);if(c=s.type,n!==null&&s.stateNode!=null)G0(n,s,c,p,y),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!p){if(s.stateNode===null)throw Error(t(166));return Kn(s),null}if(n=tn(wt.current),wa(s)){p=s.stateNode,c=s.type;var _=s.memoizedProps;switch(p[xr]=s,p[ya]=_,n=(s.mode&1)!==0,c){case"dialog":_t("cancel",p),_t("close",p);break;case"iframe":case"object":case"embed":_t("load",p);break;case"video":case"audio":for(y=0;y<Gi.length;y++)_t(Gi[y],p);break;case"source":_t("error",p);break;case"img":case"image":case"link":_t("error",p),_t("load",p);break;case"details":_t("toggle",p);break;case"input":vt(p,_),_t("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},_t("invalid",p);break;case"textarea":Tr(p,_),_t("invalid",p)}cu(c,_),y=null;for(var E in _)if(_.hasOwnProperty(E)){var L=_[E];E==="children"?typeof L=="string"?p.textContent!==L&&(_.suppressHydrationWarning!==!0&&ga(p.textContent,L,n),y=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&ga(p.textContent,L,n),y=["children",""+L]):o.hasOwnProperty(E)&&L!=null&&E==="onScroll"&&_t("scroll",p)}switch(c){case"input":re(p),jt(p,_,!0);break;case"textarea":re(p),Jo(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=Es)}p=y,s.updateQueue=p,p!==null&&(s.flags|=4)}else{E=y.nodeType===9?y:y.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Mi(c)),n==="http://www.w3.org/1999/xhtml"?c==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=E.createElement(c,{is:p.is}):(n=E.createElement(c),c==="select"&&(E=n,p.multiple?E.multiple=!0:p.size&&(E.size=p.size))):n=E.createElementNS(n,c),n[xr]=s,n[ya]=p,B0(n,s,!1,!1),s.stateNode=n;e:{switch(E=Qa(c,p),c){case"dialog":_t("cancel",n),_t("close",n),y=p;break;case"iframe":case"object":case"embed":_t("load",n),y=p;break;case"video":case"audio":for(y=0;y<Gi.length;y++)_t(Gi[y],n);y=p;break;case"source":_t("error",n),y=p;break;case"img":case"image":case"link":_t("error",n),_t("load",n),y=p;break;case"details":_t("toggle",n),y=p;break;case"input":vt(n,p),y=Ue(n,p),_t("invalid",n);break;case"option":y=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},y=he({},p,{value:void 0}),_t("invalid",n);break;case"textarea":Tr(n,p),y=br(n,p),_t("invalid",n);break;default:y=p}cu(c,y),L=y;for(_ in L)if(L.hasOwnProperty(_)){var F=L[_];_==="style"?Yc(n,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Xa(n,F)):_==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&ls(n,F):typeof F=="number"&&ls(n,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(o.hasOwnProperty(_)?F!=null&&_==="onScroll"&&_t("scroll",n):F!=null&&O(n,_,F,E))}switch(c){case"input":re(n),jt(n,p,!1);break;case"textarea":re(n),Jo(n);break;case"option":p.value!=null&&n.setAttribute("value",""+Ze(p.value));break;case"select":n.multiple=!!p.multiple,_=p.value,_!=null?fn(n,!!p.multiple,_,!1):p.defaultValue!=null&&fn(n,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(n.onclick=Es)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kn(s),null;case 6:if(n&&s.stateNode!=null)U0(n,s,n.memoizedProps,p);else{if(typeof p!="string"&&s.stateNode===null)throw Error(t(166));if(c=tn(Vt.current),tn(wt.current),wa(s)){if(p=s.stateNode,c=s.memoizedProps,p[xr]=s,(_=p.nodeValue!==c)&&(n=ar,n!==null))switch(n.tag){case 3:ga(p.nodeValue,c,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ga(p.nodeValue,c,(n.mode&1)!==0)}_&&(s.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[xr]=s,s.stateNode=p}return Kn(s),null;case 13:if(St(kt),p=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ht&&Se!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Yu(),As(),s.flags|=98560,_=!1;else if(_=wa(s),p!==null&&p.dehydrated!==null){if(n===null){if(!_)throw Error(t(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[xr]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Kn(s),_=!1}else lr!==null&&(Rf(lr),lr=null),_=!0;if(!_)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(kt.current&1)!==0?wn===0&&(wn=3):Af())),s.updateQueue!==null&&(s.flags|=4),Kn(s),null);case 4:return Ot(),xf(n,s),n===null&&ks(s.stateNode.containerInfo),Kn(s),null;case 10:return Ll(s.type._context),Kn(s),null;case 17:return bn(s.type)&&go(),Kn(s),null;case 19:if(St(kt),_=s.memoizedState,_===null)return Kn(s),null;if(p=(s.flags&128)!==0,E=_.rendering,E===null)if(p)ic(_,!1);else{if(wn!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(E=ko(n),E!==null){for(s.flags|=128,ic(_,!1),p=E.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),s.subtreeFlags=0,p=c,c=s.child;c!==null;)_=c,n=p,_.flags&=14680066,E=_.alternate,E===null?(_.childLanes=0,_.lanes=n,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=E.childLanes,_.lanes=E.lanes,_.child=E.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=E.memoizedProps,_.memoizedState=E.memoizedState,_.updateQueue=E.updateQueue,_.type=E.type,n=E.dependencies,_.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),c=c.sibling;return xt(kt,kt.current&1|2),s.child}n=n.sibling}_.tail!==null&&Wt()>Kl&&(s.flags|=128,p=!0,ic(_,!1),s.lanes=4194304)}else{if(!p)if(n=ko(E),n!==null){if(s.flags|=128,p=!0,c=n.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),ic(_,!0),_.tail===null&&_.tailMode==="hidden"&&!E.alternate&&!ht)return Kn(s),null}else 2*Wt()-_.renderingStartTime>Kl&&c!==1073741824&&(s.flags|=128,p=!0,ic(_,!1),s.lanes=4194304);_.isBackwards?(E.sibling=s.child,s.child=E):(c=_.last,c!==null?c.sibling=E:s.child=E,_.last=E)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=Wt(),s.sibling=null,c=kt.current,xt(kt,p?c&1|2:c&1),s):(Kn(s),null);case 22:case 23:return If(),p=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(s.flags|=8192),p&&(s.mode&1)!==0?(Dr&1073741824)!==0&&(Kn(s),s.subtreeFlags&6&&(s.flags|=8192)):Kn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function p2(n,s){switch(cn(s),s.tag){case 1:return bn(s.type)&&go(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ot(),St(Pn),St(vn),Tn(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return _i(s),null;case 13:if(St(kt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));As()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return St(kt),null;case 4:return Ot(),null;case 10:return Ll(s.type._context),null;case 22:case 23:return If(),null;case 24:return null;default:return null}}var Gd=!1,$n=!1,g2=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Xl(n,s){var c=n.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Kt(n,s,p)}else c.current=null}function wf(n,s,c){try{c()}catch(p){Kt(n,s,p)}}var W0=!1;function m2(n,s){if(Gu=al,n=Zt(),co(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var E=0,L=-1,F=-1,Z=0,oe=0,ce=n,se=null;t:for(;;){for(var Te;ce!==c||y!==0&&ce.nodeType!==3||(L=E+y),ce!==_||p!==0&&ce.nodeType!==3||(F=E+p),ce.nodeType===3&&(E+=ce.nodeValue.length),(Te=ce.firstChild)!==null;)se=ce,ce=Te;for(;;){if(ce===n)break t;if(se===c&&++Z===y&&(L=E),se===_&&++oe===p&&(F=E),(Te=ce.nextSibling)!==null)break;ce=se,se=ce.parentNode}ce=Te}c=L===-1||F===-1?null:{start:L,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Uu={focusedElem:n,selectionRange:c},al=!1,Ie=s;Ie!==null;)if(s=Ie,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ie=n;else for(;Ie!==null;){s=Ie;try{var De=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Be=De.memoizedProps,sn=De.memoizedState,q=s.stateNode,G=q.getSnapshotBeforeUpdate(s.elementType===s.type?Be:xn(s.type,Be),sn);q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Kt(s,s.return,me)}if(n=s.sibling,n!==null){n.return=s.return,Ie=n;break}Ie=s.return}return De=W0,W0=!1,De}function sc(n,s,c){var p=s.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&n)===n){var _=y.destroy;y.destroy=void 0,_!==void 0&&wf(s,c,_)}y=y.next}while(y!==p)}}function Ud(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&n)===n){var p=c.create;c.destroy=p()}c=c.next}while(c!==s)}}function _f(n){var s=n.ref;if(s!==null){var c=n.stateNode;switch(n.tag){case 5:n=c;break;default:n=c}typeof s=="function"?s(n):s.current=n}}function H0(n){var s=n.alternate;s!==null&&(n.alternate=null,H0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[xr],delete s[ya],delete s[bl],delete s[Pd],delete s[bd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function V0(n){return n.tag===5||n.tag===3||n.tag===4}function q0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sf(n,s,c){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(n,s):c.insertBefore(n,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(n,c)):(s=c,s.appendChild(n)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Es));else if(p!==4&&(n=n.child,n!==null))for(Sf(n,s,c),n=n.sibling;n!==null;)Sf(n,s,c),n=n.sibling}function kf(n,s,c){var p=n.tag;if(p===5||p===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(kf(n,s,c),n=n.sibling;n!==null;)kf(n,s,c),n=n.sibling}var Un=null,Ci=!1;function Ao(n,s,c){for(c=c.child;c!==null;)Y0(n,s,c),c=c.sibling}function Y0(n,s,c){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(di,c)}catch{}switch(c.tag){case 5:$n||Xl(c,s);case 6:var p=Un,y=Ci;Un=null,Ao(n,s,c),Un=p,Ci=y,Un!==null&&(Ci?(n=Un,c=c.stateNode,n.nodeType===8?n.parentNode.removeChild(c):n.removeChild(c)):Un.removeChild(c.stateNode));break;case 18:Un!==null&&(Ci?(n=Un,c=c.stateNode,n.nodeType===8?Pl(n.parentNode,c):n.nodeType===1&&Pl(n,c),qn(n)):Pl(Un,c.stateNode));break;case 4:p=Un,y=Ci,Un=c.stateNode.containerInfo,Ci=!0,Ao(n,s,c),Un=p,Ci=y;break;case 0:case 11:case 14:case 15:if(!$n&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var _=y,E=_.destroy;_=_.tag,E!==void 0&&((_&2)!==0||(_&4)!==0)&&wf(c,s,E),y=y.next}while(y!==p)}Ao(n,s,c);break;case 1:if(!$n&&(Xl(c,s),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(L){Kt(c,s,L)}Ao(n,s,c);break;case 21:Ao(n,s,c);break;case 22:c.mode&1?($n=(p=$n)||c.memoizedState!==null,Ao(n,s,c),$n=p):Ao(n,s,c);break;default:Ao(n,s,c)}}function X0(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var c=n.stateNode;c===null&&(c=n.stateNode=new g2),s.forEach(function(p){var y=E2.bind(null,n,p);c.has(p)||(c.add(p),p.then(y,y))})}}function Ei(n,s){var c=s.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var _=n,E=s,L=E;e:for(;L!==null;){switch(L.tag){case 5:Un=L.stateNode,Ci=!1;break e;case 3:Un=L.stateNode.containerInfo,Ci=!0;break e;case 4:Un=L.stateNode.containerInfo,Ci=!0;break e}L=L.return}if(Un===null)throw Error(t(160));Y0(_,E,y),Un=null,Ci=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(Z){Kt(y,s,Z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Q0(s,n),s=s.sibling}function Q0(n,s){var c=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ei(s,n),es(n),p&4){try{sc(3,n,n.return),Ud(3,n)}catch(Be){Kt(n,n.return,Be)}try{sc(5,n,n.return)}catch(Be){Kt(n,n.return,Be)}}break;case 1:Ei(s,n),es(n),p&512&&c!==null&&Xl(c,c.return);break;case 5:if(Ei(s,n),es(n),p&512&&c!==null&&Xl(c,c.return),n.flags&32){var y=n.stateNode;try{ls(y,"")}catch(Be){Kt(n,n.return,Be)}}if(p&4&&(y=n.stateNode,y!=null)){var _=n.memoizedProps,E=c!==null?c.memoizedProps:_,L=n.type,F=n.updateQueue;if(n.updateQueue=null,F!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&gt(y,_),Qa(L,E);var Z=Qa(L,_);for(E=0;E<F.length;E+=2){var oe=F[E],ce=F[E+1];oe==="style"?Yc(y,ce):oe==="dangerouslySetInnerHTML"?Xa(y,ce):oe==="children"?ls(y,ce):O(y,oe,ce,Z)}switch(L){case"input":Cn(y,_);break;case"textarea":Vr(y,_);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var Te=_.value;Te!=null?fn(y,!!_.multiple,Te,!1):se!==!!_.multiple&&(_.defaultValue!=null?fn(y,!!_.multiple,_.defaultValue,!0):fn(y,!!_.multiple,_.multiple?[]:"",!1))}y[ya]=_}catch(Be){Kt(n,n.return,Be)}}break;case 6:if(Ei(s,n),es(n),p&4){if(n.stateNode===null)throw Error(t(162));y=n.stateNode,_=n.memoizedProps;try{y.nodeValue=_}catch(Be){Kt(n,n.return,Be)}}break;case 3:if(Ei(s,n),es(n),p&4&&c!==null&&c.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(Be){Kt(n,n.return,Be)}break;case 4:Ei(s,n),es(n);break;case 13:Ei(s,n),es(n),y=n.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Pf=Wt())),p&4&&X0(n);break;case 22:if(oe=c!==null&&c.memoizedState!==null,n.mode&1?($n=(Z=$n)||oe,Ei(s,n),$n=Z):Ei(s,n),es(n),p&8192){if(Z=n.memoizedState!==null,(n.stateNode.isHidden=Z)&&!oe&&(n.mode&1)!==0)for(Ie=n,oe=n.child;oe!==null;){for(ce=Ie=oe;Ie!==null;){switch(se=Ie,Te=se.child,se.tag){case 0:case 11:case 14:case 15:sc(4,se,se.return);break;case 1:Xl(se,se.return);var De=se.stateNode;if(typeof De.componentWillUnmount=="function"){p=se,c=se.return;try{s=p,De.props=s.memoizedProps,De.state=s.memoizedState,De.componentWillUnmount()}catch(Be){Kt(p,c,Be)}}break;case 5:Xl(se,se.return);break;case 22:if(se.memoizedState!==null){J0(ce);continue}}Te!==null?(Te.return=se,Ie=Te):J0(ce)}oe=oe.sibling}e:for(oe=null,ce=n;;){if(ce.tag===5){if(oe===null){oe=ce;try{y=ce.stateNode,Z?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=ce.stateNode,F=ce.memoizedProps.style,E=F!=null&&F.hasOwnProperty("display")?F.display:null,L.style.display=qc("display",E))}catch(Be){Kt(n,n.return,Be)}}}else if(ce.tag===6){if(oe===null)try{ce.stateNode.nodeValue=Z?"":ce.memoizedProps}catch(Be){Kt(n,n.return,Be)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===n)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===n)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===n)break e;oe===ce&&(oe=null),ce=ce.return}oe===ce&&(oe=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Ei(s,n),es(n),p&4&&X0(n);break;case 21:break;default:Ei(s,n),es(n)}}function es(n){var s=n.flags;if(s&2){try{e:{for(var c=n.return;c!==null;){if(V0(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(ls(y,""),p.flags&=-33);var _=q0(n);kf(n,_,y);break;case 3:case 4:var E=p.stateNode.containerInfo,L=q0(n);Sf(n,L,E);break;default:throw Error(t(161))}}catch(F){Kt(n,n.return,F)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function y2(n,s,c){Ie=n,K0(n)}function K0(n,s,c){for(var p=(n.mode&1)!==0;Ie!==null;){var y=Ie,_=y.child;if(y.tag===22&&p){var E=y.memoizedState!==null||Gd;if(!E){var L=y.alternate,F=L!==null&&L.memoizedState!==null||$n;L=Gd;var Z=$n;if(Gd=E,($n=F)&&!Z)for(Ie=y;Ie!==null;)E=Ie,F=E.child,E.tag===22&&E.memoizedState!==null?Z0(y):F!==null?(F.return=E,Ie=F):Z0(y);for(;_!==null;)Ie=_,K0(_),_=_.sibling;Ie=y,Gd=L,$n=Z}$0(n)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Ie=_):$0(n)}}function $0(n){for(;Ie!==null;){var s=Ie;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:$n||Ud(5,s);break;case 1:var p=s.stateNode;if(s.flags&4&&!$n)if(c===null)p.componentDidMount();else{var y=s.elementType===s.type?c.memoizedProps:xn(s.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&Bt(s,_,p);break;case 3:var E=s.updateQueue;if(E!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}Bt(s,E,c)}break;case 5:var L=s.stateNode;if(c===null&&s.flags&4){c=L;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var Z=s.alternate;if(Z!==null){var oe=Z.memoizedState;if(oe!==null){var ce=oe.dehydrated;ce!==null&&qn(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}$n||s.flags&512&&_f(s)}catch(se){Kt(s,s.return,se)}}if(s===n){Ie=null;break}if(c=s.sibling,c!==null){c.return=s.return,Ie=c;break}Ie=s.return}}function J0(n){for(;Ie!==null;){var s=Ie;if(s===n){Ie=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Ie=c;break}Ie=s.return}}function Z0(n){for(;Ie!==null;){var s=Ie;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{Ud(4,s)}catch(F){Kt(s,c,F)}break;case 1:var p=s.stateNode;if(typeof p.componentDidMount=="function"){var y=s.return;try{p.componentDidMount()}catch(F){Kt(s,y,F)}}var _=s.return;try{_f(s)}catch(F){Kt(s,_,F)}break;case 5:var E=s.return;try{_f(s)}catch(F){Kt(s,E,F)}}}catch(F){Kt(s,s.return,F)}if(s===n){Ie=null;break}var L=s.sibling;if(L!==null){L.return=s.return,Ie=L;break}Ie=s.return}}var v2=Math.ceil,Wd=z.ReactCurrentDispatcher,Cf=z.ReactCurrentOwner,ii=z.ReactCurrentBatchConfig,ct=0,In=null,dn=null,Wn=0,Dr=0,Ql=vi(0),wn=0,oc=null,Ta=0,Hd=0,Ef=0,ac=null,Sr=null,Pf=0,Kl=1/0,zs=null,Vd=!1,bf=null,Oo=null,qd=!1,Lo=null,Yd=0,lc=0,Tf=null,Xd=-1,Qd=0;function hr(){return(ct&6)!==0?Wt():Xd!==-1?Xd:Xd=Wt()}function Do(n){return(n.mode&1)===0?1:(ct&2)!==0&&Wn!==0?Wn&-Wn:Xu.transition!==null?(Qd===0&&(Qd=xu()),Qd):(n=ut,n!==0||(n=window.event,n=n===void 0?16:ud(n.type)),n)}function Pi(n,s,c,p){if(50<lc)throw lc=0,Tf=null,Error(t(185));na(n,c,p),((ct&2)===0||n!==In)&&(n===In&&((ct&2)===0&&(Hd|=c),wn===4&&jo(n,Wn)),kr(n,p),c===1&&ct===0&&(s.mode&1)===0&&(Kl=Wt()+500,mo&&Vi()))}function kr(n,s){var c=n.callbackNode;id(n,s);var p=hs(n,n===In?Wn:0);if(p===0)c!==null&&nd(c),n.callbackNode=null,n.callbackPriority=0;else if(s=p&-p,n.callbackPriority!==s){if(c!=null&&nd(c),s===1)n.tag===0?xi(tg.bind(null,n)):xa(tg.bind(null,n)),Cd(function(){(ct&6)===0&&Vi()}),c=null;else{switch(ra(p)){case 1:c=ds;break;case 4:c=el;break;case 16:c=$s;break;case 536870912:c=tl;break;default:c=$s}c=ug(c,eg.bind(null,n))}n.callbackPriority=s,n.callbackNode=c}}function eg(n,s){if(Xd=-1,Qd=0,(ct&6)!==0)throw Error(t(327));var c=n.callbackNode;if($l()&&n.callbackNode!==c)return null;var p=hs(n,n===In?Wn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||s)s=Kd(n,p);else{s=p;var y=ct;ct|=2;var _=rg();(In!==n||Wn!==s)&&(zs=null,Kl=Wt()+500,Ra(n,s));do try{_2();break}catch(L){ng(n,L)}while(!0);Ol(),Wd.current=_,ct=y,dn!==null?s=0:(In=null,Wn=0,s=wn)}if(s!==0){if(s===2&&(y=Js(n),y!==0&&(p=y,s=Nf(n,y))),s===1)throw c=oc,Ra(n,0),jo(n,p),kr(n,Wt()),c;if(s===6)jo(n,p);else{if(y=n.current.alternate,(p&30)===0&&!x2(y)&&(s=Kd(n,p),s===2&&(_=Js(n),_!==0&&(p=_,s=Nf(n,_))),s===1))throw c=oc,Ra(n,0),jo(n,p),kr(n,Wt()),c;switch(n.finishedWork=y,n.finishedLanes=p,s){case 0:case 1:throw Error(t(345));case 2:Ma(n,Sr,zs);break;case 3:if(jo(n,p),(p&130023424)===p&&(s=Pf+500-Wt(),10<s)){if(hs(n,0)!==0)break;if(y=n.suspendedLanes,(y&p)!==p){hr(),n.pingedLanes|=n.suspendedLanes&y;break}n.timeoutHandle=sr(Ma.bind(null,n,Sr,zs),s);break}Ma(n,Sr,zs);break;case 4:if(jo(n,p),(p&4194240)===p)break;for(s=n.eventTimes,y=-1;0<p;){var E=31-nt(p);_=1<<E,E=s[E],E>y&&(y=E),p&=~_}if(p=y,p=Wt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*v2(p/1960))-p,10<p){n.timeoutHandle=sr(Ma.bind(null,n,Sr,zs),p);break}Ma(n,Sr,zs);break;case 5:Ma(n,Sr,zs);break;default:throw Error(t(329))}}}return kr(n,Wt()),n.callbackNode===c?eg.bind(null,n):null}function Nf(n,s){var c=ac;return n.current.memoizedState.isDehydrated&&(Ra(n,s).flags|=256),n=Kd(n,s),n!==2&&(s=Sr,Sr=c,s!==null&&Rf(s)),n}function Rf(n){Sr===null?Sr=n:Sr.push.apply(Sr,n)}function x2(n){for(var s=n;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],_=y.getSnapshot;y=y.value;try{if(!Xn(_(),y))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function jo(n,s){for(s&=~Ef,s&=~Hd,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var c=31-nt(s),p=1<<c;n[c]=-1,s&=~p}}function tg(n){if((ct&6)!==0)throw Error(t(327));$l();var s=hs(n,0);if((s&1)===0)return kr(n,Wt()),null;var c=Kd(n,s);if(n.tag!==0&&c===2){var p=Js(n);p!==0&&(s=p,c=Nf(n,p))}if(c===1)throw c=oc,Ra(n,0),jo(n,s),kr(n,Wt()),c;if(c===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Ma(n,Sr,zs),kr(n,Wt()),null}function Mf(n,s){var c=ct;ct|=1;try{return n(s)}finally{ct=c,ct===0&&(Kl=Wt()+500,mo&&Vi())}}function Na(n){Lo!==null&&Lo.tag===0&&(ct&6)===0&&$l();var s=ct;ct|=1;var c=ii.transition,p=ut;try{if(ii.transition=null,ut=1,n)return n()}finally{ut=p,ii.transition=c,ct=s,(ct&6)===0&&Vi()}}function If(){Dr=Ql.current,St(Ql)}function Ra(n,s){n.finishedWork=null,n.finishedLanes=0;var c=n.timeoutHandle;if(c!==-1&&(n.timeoutHandle=-1,Hu(c)),dn!==null)for(c=dn.return;c!==null;){var p=c;switch(cn(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&go();break;case 3:Ot(),St(Pn),St(vn),Tn();break;case 5:_i(p);break;case 4:Ot();break;case 13:St(kt);break;case 19:St(kt);break;case 10:Ll(p.type._context);break;case 22:case 23:If()}c=c.return}if(In=n,dn=n=zo(n.current,null),Wn=Dr=s,wn=0,oc=null,Ef=Hd=Ta=0,Sr=ac=null,Zr!==null){for(s=0;s<Zr.length;s++)if(c=Zr[s],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,_=c.pending;if(_!==null){var E=_.next;_.next=y,p.next=E}c.pending=p}Zr=null}return n}function ng(n,s){do{var c=dn;try{if(Ol(),Co.current=No,Lr){for(var p=mt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Lr=!1}if(Bn=0,Xt=Gt=mt=null,Ki=!1,_r=0,Cf.current=null,c===null||c.return===null){wn=1,oc=s,dn=null;break}e:{var _=n,E=c.return,L=c,F=s;if(s=Wn,L.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var Z=F,oe=L,ce=oe.tag;if((oe.mode&1)===0&&(ce===0||ce===11||ce===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Te=h(E);if(Te!==null){Te.flags&=-257,m(Te,E,L,_,s),Te.mode&1&&l(_,Z,s),s=Te,F=Z;var De=s.updateQueue;if(De===null){var Be=new Set;Be.add(F),s.updateQueue=Be}else De.add(F);break e}else{if((s&1)===0){l(_,Z,s),Af();break e}F=Error(t(426))}}else if(ht&&L.mode&1){var sn=h(E);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),m(sn,E,L,_,s),_a(js(F,L));break e}}_=F=js(F,L),wn!==4&&(wn=2),ac===null?ac=[_]:ac.push(_),_=E;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var q=Bd(_,F,s);Ea(_,q);break e;case 1:L=F;var G=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Oo===null||!Oo.has(Q)))){_.flags|=65536,s&=-s,_.lanes|=s;var me=a(_,L,s);Ea(_,me);break e}}_=_.return}while(_!==null)}sg(c)}catch(Ge){s=Ge,dn===c&&c!==null&&(dn=c=c.return);continue}break}while(!0)}function rg(){var n=Wd.current;return Wd.current=No,n===null?No:n}function Af(){(wn===0||wn===3||wn===2)&&(wn=4),In===null||(Ta&268435455)===0&&(Hd&268435455)===0||jo(In,Wn)}function Kd(n,s){var c=ct;ct|=2;var p=rg();(In!==n||Wn!==s)&&(zs=null,Ra(n,s));do try{w2();break}catch(y){ng(n,y)}while(!0);if(Ol(),ct=c,Wd.current=p,dn!==null)throw Error(t(261));return In=null,Wn=0,wn}function w2(){for(;dn!==null;)ig(dn)}function _2(){for(;dn!==null&&!af();)ig(dn)}function ig(n){var s=lg(n.alternate,n,Dr);n.memoizedProps=n.pendingProps,s===null?sg(n):dn=s,Cf.current=null}function sg(n){var s=n;do{var c=s.alternate;if(n=s.return,(s.flags&32768)===0){if(c=f2(c,s,Dr),c!==null){dn=c;return}}else{if(c=p2(c,s),c!==null){c.flags&=32767,dn=c;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wn=6,dn=null;return}}if(s=s.sibling,s!==null){dn=s;return}dn=s=n}while(s!==null);wn===0&&(wn=5)}function Ma(n,s,c){var p=ut,y=ii.transition;try{ii.transition=null,ut=1,S2(n,s,c,p)}finally{ii.transition=y,ut=p}return null}function S2(n,s,c,p){do $l();while(Lo!==null);if((ct&6)!==0)throw Error(t(327));c=n.finishedWork;var y=n.finishedLanes;if(c===null)return null;if(n.finishedWork=null,n.finishedLanes=0,c===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var _=c.lanes|c.childLanes;if(cf(n,_),n===In&&(dn=In=null,Wn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||qd||(qd=!0,ug($s,function(){return $l(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=ii.transition,ii.transition=null;var E=ut;ut=1;var L=ct;ct|=4,Cf.current=null,m2(n,c),Q0(c,n),da(Uu),al=!!Gu,Uu=Gu=null,n.current=c,y2(c),lf(),ct=L,ut=E,ii.transition=_}else n.current=c;if(qd&&(qd=!1,Lo=n,Yd=y),_=n.pendingLanes,_===0&&(Oo=null),Pt(c.stateNode),kr(n,Wt()),s!==null)for(p=n.onRecoverableError,c=0;c<s.length;c++)y=s[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Vd)throw Vd=!1,n=bf,bf=null,n;return(Yd&1)!==0&&n.tag!==0&&$l(),_=n.pendingLanes,(_&1)!==0?n===Tf?lc++:(lc=0,Tf=n):lc=0,Vi(),null}function $l(){if(Lo!==null){var n=ra(Yd),s=ii.transition,c=ut;try{if(ii.transition=null,ut=16>n?16:n,Lo===null)var p=!1;else{if(n=Lo,Lo=null,Yd=0,(ct&6)!==0)throw Error(t(331));var y=ct;for(ct|=4,Ie=n.current;Ie!==null;){var _=Ie,E=_.child;if((Ie.flags&16)!==0){var L=_.deletions;if(L!==null){for(var F=0;F<L.length;F++){var Z=L[F];for(Ie=Z;Ie!==null;){var oe=Ie;switch(oe.tag){case 0:case 11:case 15:sc(8,oe,_)}var ce=oe.child;if(ce!==null)ce.return=oe,Ie=ce;else for(;Ie!==null;){oe=Ie;var se=oe.sibling,Te=oe.return;if(H0(oe),oe===Z){Ie=null;break}if(se!==null){se.return=Te,Ie=se;break}Ie=Te}}}var De=_.alternate;if(De!==null){var Be=De.child;if(Be!==null){De.child=null;do{var sn=Be.sibling;Be.sibling=null,Be=sn}while(Be!==null)}}Ie=_}}if((_.subtreeFlags&2064)!==0&&E!==null)E.return=_,Ie=E;else e:for(;Ie!==null;){if(_=Ie,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:sc(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,Ie=q;break e}Ie=_.return}}var G=n.current;for(Ie=G;Ie!==null;){E=Ie;var Q=E.child;if((E.subtreeFlags&2064)!==0&&Q!==null)Q.return=E,Ie=Q;else e:for(E=G;Ie!==null;){if(L=Ie,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Ud(9,L)}}catch(Ge){Kt(L,L.return,Ge)}if(L===E){Ie=null;break e}var me=L.sibling;if(me!==null){me.return=L.return,Ie=me;break e}Ie=L.return}}if(ct=y,Vi(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(di,n)}catch{}p=!0}return p}finally{ut=c,ii.transition=s}}return!1}function og(n,s,c){s=js(c,s),s=Bd(n,s,1),n=ni(n,s,1),s=hr(),n!==null&&(na(n,1,s),kr(n,s))}function Kt(n,s,c){if(n.tag===3)og(n,n,c);else for(;s!==null;){if(s.tag===3){og(s,n,c);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Oo===null||!Oo.has(p))){n=js(c,n),n=a(s,n,1),s=ni(s,n,1),n=hr(),s!==null&&(na(s,1,n),kr(s,n));break}}s=s.return}}function k2(n,s,c){var p=n.pingCache;p!==null&&p.delete(s),s=hr(),n.pingedLanes|=n.suspendedLanes&c,In===n&&(Wn&c)===c&&(wn===4||wn===3&&(Wn&130023424)===Wn&&500>Wt()-Pf?Ra(n,0):Ef|=c),kr(n,s)}function ag(n,s){s===0&&((n.mode&1)===0?s=1:(s=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var c=hr();n=cr(n,s),n!==null&&(na(n,s,c),kr(n,c))}function C2(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),ag(n,c)}function E2(n,s){var c=0;switch(n.tag){case 13:var p=n.stateNode,y=n.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(s),ag(n,c)}var lg;lg=function(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps||Pn.current)k=!0;else{if((n.lanes&c)===0&&(s.flags&128)===0)return k=!1,vf(n,s,c);k=(n.flags&131072)!==0}else k=!1,ht&&(s.flags&1048576)!==0&&Nd(s,Yi,s.index);switch(s.lanes=0,s.tag){case 2:var p=s.type;st(n,s),n=s.pendingProps;var y=Ts(s,vn.current);wi(s,c),y=Eo(null,s,p,n,y,c);var _=Po();return s.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,bn(p)?(_=!0,Ns(s)):_=!1,s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ca(s),y.updater=Mo,s.stateNode=y,y._reactInternals=s,ql(s,p,n,c),s=ft(null,s,p,!0,_,c)):(s.tag=0,ht&&_&&yo(s),M(null,s,y,c),s=s.child),s;case 16:p=s.elementType;e:{switch(st(n,s),n=s.pendingProps,y=p._init,p=y(p._payload),s.type=p,y=s.tag=b2(p),n=xn(p,n),y){case 0:s=Ee(null,s,p,n,c);break e;case 1:s=Ct(null,s,p,n,c);break e;case 11:s=U(null,s,p,n,c);break e;case 14:s=ee(null,s,p,xn(p.type,n),c);break e}throw Error(t(306,p,""))}return s;case 0:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),Ee(n,s,p,y,c);case 1:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),Ct(n,s,p,y,c);case 3:e:{if(Gn(s),n===null)throw Error(t(387));p=s.pendingProps,_=s.memoizedState,y=_.element,jl(n,s),_o(s,p,null,c);var E=s.memoizedState;if(p=E.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){y=js(Error(t(423)),s),s=ri(n,s,p,c,y);break e}else if(p!==y){y=js(Error(t(424)),s),s=ri(n,s,p,c,y);break e}else for(Se=Qr(s.stateNode.containerInfo.firstChild),ar=s,ht=!0,lr=null,c=wr(s,null,p,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(As(),p===y){s=Mn(n,s,c);break e}M(n,s,p,c)}s=s.child}return s;case 5:return So(s),n===null&&vo(s),p=s.type,y=s.pendingProps,_=n!==null?n.memoizedProps:null,E=y.children,Wu(p,y)?E=null:_!==null&&Wu(p,_)&&(s.flags|=32),Ke(n,s),M(n,s,E,c),s.child;case 6:return n===null&&vo(s),null;case 13:return ne(n,s,c);case 4:return Qi(s,s.stateNode.containerInfo),p=s.pendingProps,n===null?s.child=Os(s,null,p,c):M(n,s,p,c),s.child;case 11:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),U(n,s,p,y,c);case 7:return M(n,s,s.pendingProps,c),s.child;case 8:return M(n,s,s.pendingProps.children,c),s.child;case 12:return M(n,s,s.pendingProps.children,c),s.child;case 10:e:{if(p=s.type._context,y=s.pendingProps,_=s.memoizedProps,E=y.value,xt(Sa,p._currentValue),p._currentValue=E,_!==null)if(Xn(_.value,E)){if(_.children===y.children&&!Pn.current){s=Mn(n,s,c);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var L=_.dependencies;if(L!==null){E=_.child;for(var F=L.firstContext;F!==null;){if(F.context===p){if(_.tag===1){F=ti(-1,c&-c),F.tag=2;var Z=_.updateQueue;if(Z!==null){Z=Z.shared;var oe=Z.pending;oe===null?F.next=F:(F.next=oe.next,oe.next=F),Z.pending=F}}_.lanes|=c,F=_.alternate,F!==null&&(F.lanes|=c),Dl(_.return,c,s),L.lanes|=c;break}F=F.next}}else if(_.tag===10)E=_.type===s.type?null:_.child;else if(_.tag===18){if(E=_.return,E===null)throw Error(t(341));E.lanes|=c,L=E.alternate,L!==null&&(L.lanes|=c),Dl(E,c,s),E=_.sibling}else E=_.child;if(E!==null)E.return=_;else for(E=_;E!==null;){if(E===s){E=null;break}if(_=E.sibling,_!==null){_.return=E.return,E=_;break}E=E.return}_=E}M(n,s,y.children,c),s=s.child}return s;case 9:return y=s.type,p=s.pendingProps.children,wi(s,c),y=Fn(y),p=p(y),s.flags|=1,M(n,s,p,c),s.child;case 14:return p=s.type,y=xn(p,s.pendingProps),y=xn(p.type,y),ee(n,s,p,y,c);case 15:return fe(n,s,s.type,s.pendingProps,c);case 17:return p=s.type,y=s.pendingProps,y=s.elementType===p?y:xn(p,y),st(n,s),s.tag=1,bn(p)?(n=!0,Ns(s)):n=!1,wi(s,c),Fd(s,p,y),ql(s,p,y,c),ft(null,s,p,!0,n,c);case 19:return rn(n,s,c);case 22:return Me(n,s,c)}throw Error(t(156,s.tag))};function ug(n,s){return td(n,s)}function P2(n,s,c,p){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(n,s,c,p){return new P2(n,s,c,p)}function Of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function b2(n){if(typeof n=="function")return Of(n)?1:0;if(n!=null){if(n=n.$$typeof,n===de)return 11;if(n===_e)return 14}return 2}function zo(n,s){var c=n.alternate;return c===null?(c=si(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&14680064,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c}function $d(n,s,c,p,y,_){var E=2;if(p=n,typeof n=="function")Of(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case ie:return Ia(c.children,y,_,s);case Y:E=8,y|=8;break;case ge:return n=si(12,c,s,y|2),n.elementType=ge,n.lanes=_,n;case Oe:return n=si(13,c,s,y),n.elementType=Oe,n.lanes=_,n;case Ne:return n=si(19,c,s,y),n.elementType=Ne,n.lanes=_,n;case Re:return Jd(c,y,_,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ue:E=10;break e;case ke:E=9;break e;case de:E=11;break e;case _e:E=14;break e;case ae:E=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=si(E,c,s,y),s.elementType=n,s.type=p,s.lanes=_,s}function Ia(n,s,c,p){return n=si(7,n,p,s),n.lanes=c,n}function Jd(n,s,c,p){return n=si(22,n,p,s),n.elementType=Re,n.lanes=c,n.stateNode={isHidden:!1},n}function Lf(n,s,c){return n=si(6,n,null,s),n.lanes=c,n}function Df(n,s,c){return s=si(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function T2(n,s,c,p,y){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=er(0),this.expirationTimes=er(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function jf(n,s,c,p,y,_,E,L,F){return n=new T2(n,s,c,L,F),s===1?(s=1,_===!0&&(s|=8)):s=0,_=si(3,null,null,s),n.current=_,_.stateNode=n,_.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ca(_),n}function N2(n,s,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:p==null?null:""+p,children:n,containerInfo:s,implementation:c}}function cg(n){if(!n)return $r;n=n._reactInternals;e:{if(cs(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(bn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var c=n.type;if(bn(c))return Nl(n,c,s)}return s}function dg(n,s,c,p,y,_,E,L,F){return n=jf(c,p,!0,n,y,_,E,L,F),n.context=cg(null),c=n.current,p=hr(),y=Do(c),_=ti(p,y),_.callback=s??null,ni(c,_,y),n.current.lanes=y,na(n,y,p),kr(n,p),n}function Zd(n,s,c,p){var y=s.current,_=hr(),E=Do(y);return c=cg(c),s.context===null?s.context=c:s.pendingContext=c,s=ti(_,E),s.payload={element:n},p=p===void 0?null:p,p!==null&&(s.callback=p),n=ni(y,s,E),n!==null&&(Pi(n,y,E,_),zl(n,y,E)),E}function eh(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function hg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function zf(n,s){hg(n,s),(n=n.alternate)&&hg(n,s)}function R2(){return null}var fg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ff(n){this._internalRoot=n}th.prototype.render=Ff.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Zd(n,s,null,null)},th.prototype.unmount=Ff.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Na(function(){Zd(null,n,null,null)}),s[Kr]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var s=od();n={blockedOn:null,target:n,priority:s};for(var c=0;c<Xr.length&&s!==0&&s<Xr[c].priority;c++);Xr.splice(c,0,n),c===0&&il(n)}};function Bf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function nh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pg(){}function M2(n,s,c,p,y){if(y){if(typeof p=="function"){var _=p;p=function(){var Z=eh(E);_.call(Z)}}var E=dg(s,p,n,0,null,!1,!1,"",pg);return n._reactRootContainer=E,n[Kr]=E.current,ks(n.nodeType===8?n.parentNode:n),Na(),E}for(;y=n.lastChild;)n.removeChild(y);if(typeof p=="function"){var L=p;p=function(){var Z=eh(F);L.call(Z)}}var F=jf(n,0,!1,null,null,!1,!1,"",pg);return n._reactRootContainer=F,n[Kr]=F.current,ks(n.nodeType===8?n.parentNode:n),Na(function(){Zd(s,F,c,p)}),F}function rh(n,s,c,p,y){var _=c._reactRootContainer;if(_){var E=_;if(typeof y=="function"){var L=y;y=function(){var F=eh(E);L.call(F)}}Zd(s,E,n,y)}else E=M2(c,s,n,y,p);return eh(E)}Zs=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var c=on(s.pendingLanes);c!==0&&(wu(s,c|1),kr(s,Wt()),(ct&6)===0&&(Kl=Wt()+500,Vi()))}break;case 13:Na(function(){var p=cr(n,1);if(p!==null){var y=hr();Pi(p,n,1,y)}}),zf(n,1)}},eo=function(n){if(n.tag===13){var s=cr(n,134217728);if(s!==null){var c=hr();Pi(s,n,134217728,c)}zf(n,134217728)}},sd=function(n){if(n.tag===13){var s=Do(n),c=cr(n,s);if(c!==null){var p=hr();Pi(c,n,s,p)}zf(n,s)}},od=function(){return ut},nl=function(n,s){var c=ut;try{return ut=n,s()}finally{ut=c}},fu=function(n,s,c){switch(s){case"input":if(Cn(n,c),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var p=c[s];if(p!==n&&p.form===n.form){var y=un(p);if(!y)throw Error(t(90));Fe(p),Cn(p,y)}}}break;case"textarea":Vr(n,c);break;case"select":s=c.value,s!=null&&fn(n,!!c.multiple,s,!1)}},Qc=Mf,Ka=Na;var I2={usingClientEntryPoint:!1,Events:[va,en,un,pu,gu,Mf]},uc={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A2={bundleType:uc.bundleType,version:uc.version,rendererPackageName:uc.rendererPackageName,rendererConfig:uc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zc(n),n===null?null:n.stateNode},findFiberByHostInstance:uc.findFiberByHostInstance||R2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{di=ih.inject(A2),pn=ih}catch{}}return Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I2,Cr.createPortal=function(n,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bf(s))throw Error(t(200));return N2(n,s,null,c)},Cr.createRoot=function(n,s){if(!Bf(n))throw Error(t(299));var c=!1,p="",y=fg;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=jf(n,1,!1,null,null,c,!1,p,y),n[Kr]=s.current,ks(n.nodeType===8?n.parentNode:n),new Ff(s)},Cr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Zc(s),n=n===null?null:n.stateNode,n},Cr.flushSync=function(n){return Na(n)},Cr.hydrate=function(n,s,c){if(!nh(s))throw Error(t(200));return rh(null,n,s,!0,c)},Cr.hydrateRoot=function(n,s,c){if(!Bf(n))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,_="",E=fg;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),s=dg(s,null,n,1,c??null,y,!1,_,E),n[Kr]=s.current,ks(n),p)for(n=0;n<p.length;n++)c=p[n],y=c._getVersion,y=y(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,y]:s.mutableSourceEagerHydrationData.push(c,y);return new th(s)},Cr.render=function(n,s,c){if(!nh(s))throw Error(t(200));return rh(null,n,s,!1,c)},Cr.unmountComponentAtNode=function(n){if(!nh(n))throw Error(t(40));return n._reactRootContainer?(Na(function(){rh(null,null,n,!1,function(){n._reactRootContainer=null,n[Kr]=null})}),!0):!1},Cr.unstable_batchedUpdates=Mf,Cr.unstable_renderSubtreeIntoContainer=function(n,s,c,p){if(!nh(c))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return rh(n,s,c,!1,p)},Cr.version="18.3.1-next-f1338f8080-20240426",Cr}var kg;function U2(){if(kg)return Wf.exports;kg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wf.exports=G2(),Wf.exports}var Cg;function W2(){if(Cg)return sh;Cg=1;var r=U2();return sh.createRoot=r.createRoot,sh.hydrateRoot=r.hydrateRoot,sh}var H2=W2();let V2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",q2=(r=21)=>{let e="",t=r|0;for(;t--;)e+=V2[Math.random()*64|0];return e};function Ni(r){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+r+(t.length?" "+t.map((function(o){return"'"+o+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function nu(r){return!!r&&!!r[Ur]}function Ba(r){var e;return!!r&&((function(t){if(!t||typeof t!="object")return!1;var i=Object.getPrototypeOf(t);if(i===null)return!0;var o=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===ev})(r)||Array.isArray(r)||!!r[Ig]||!!(!((e=r.constructor)===null||e===void 0)&&e[Ig])||r0(r)||i0(r))}function Oc(r,e,t){t===void 0&&(t=!1),su(r)===0?(t?Object.keys:u0)(r).forEach((function(i){t&&typeof i=="symbol"||e(i,r[i],r)})):r.forEach((function(i,o){return e(o,i,r)}))}function su(r){var e=r[Ur];return e?e.i>3?e.i-4:e.i:Array.isArray(r)?1:r0(r)?2:i0(r)?3:0}function Ep(r,e){return su(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function Y2(r,e){return su(r)===2?r.get(e):r[e]}function c1(r,e,t){var i=su(r);i===2?r.set(e,t):i===3?r.add(t):r[e]=t}function X2(r,e){return r===e?r!==0||1/r==1/e:r!=r&&e!=e}function r0(r){return J2&&r instanceof Map}function i0(r){return Z2&&r instanceof Set}function za(r){return r.o||r.t}function s0(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var e=tv(r);delete e[Ur];for(var t=u0(e),i=0;i<t.length;i++){var o=t[i],u=e[o];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(e[o]={configurable:!0,writable:!0,enumerable:u.enumerable,value:r[o]})}return Object.create(Object.getPrototypeOf(r),e)}function o0(r,e){return e===void 0&&(e=!1),a0(r)||nu(r)||!Ba(r)||(su(r)>1&&(r.set=r.add=r.clear=r.delete=Q2),Object.freeze(r),e&&Oc(r,(function(t,i){return o0(i,!0)}),!0)),r}function Q2(){Ni(2)}function a0(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function ns(r){var e=nv[r];return e||Ni(18,r),e}function Eg(){return Lc}function qf(r,e){e&&(ns("Patches"),r.u=[],r.s=[],r.v=e)}function Mh(r){Pp(r),r.p.forEach(K2),r.p=null}function Pp(r){r===Lc&&(Lc=r.l)}function Pg(r){return Lc={p:[],l:Lc,h:r,m:!0,_:0}}function K2(r){var e=r[Ur];e.i===0||e.i===1?e.j():e.g=!0}function Yf(r,e){e._=e.p.length;var t=e.p[0],i=r!==void 0&&r!==t;return e.h.O||ns("ES5").S(e,r,i),i?(t[Ur].P&&(Mh(e),Ni(4)),Ba(r)&&(r=Ih(e,r),e.l||Ah(e,r)),e.u&&ns("Patches").M(t[Ur].t,r,e.u,e.s)):r=Ih(e,t,[]),Mh(e),e.u&&e.v(e.u,e.s),r!==d1?r:void 0}function Ih(r,e,t){if(a0(e))return e;var i=e[Ur];if(!i)return Oc(e,(function(f,g){return bg(r,i,e,f,g,t)}),!0),e;if(i.A!==r)return e;if(!i.P)return Ah(r,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var o=i.i===4||i.i===5?i.o=s0(i.k):i.o,u=o,d=!1;i.i===3&&(u=new Set(o),o.clear(),d=!0),Oc(u,(function(f,g){return bg(r,i,o,f,g,t,d)})),Ah(r,o,!1),t&&r.u&&ns("Patches").N(i,t,r.u,r.s)}return i.o}function bg(r,e,t,i,o,u,d){if(nu(o)){var f=Ih(r,o,u&&e&&e.i!==3&&!Ep(e.R,i)?u.concat(i):void 0);if(c1(t,i,f),!nu(f))return;r.m=!1}else d&&t.add(o);if(Ba(o)&&!a0(o)){if(!r.h.D&&r._<1)return;Ih(r,o),e&&e.A.l||Ah(r,o)}}function Ah(r,e,t){t===void 0&&(t=!1),!r.l&&r.h.D&&r.m&&o0(e,t)}function Xf(r,e){var t=r[Ur];return(t?za(t):r)[e]}function Tg(r,e){if(e in r)for(var t=Object.getPrototypeOf(r);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function bp(r){r.P||(r.P=!0,r.l&&bp(r.l))}function Qf(r){r.o||(r.o=s0(r.t))}function Tp(r,e,t){var i=r0(e)?ns("MapSet").F(e,t):i0(e)?ns("MapSet").T(e,t):r.O?(function(o,u){var d=Array.isArray(o),f={i:d?1:0,A:u?u.A:Eg(),P:!1,I:!1,R:{},l:u,t:o,k:null,o:null,j:null,C:!1},g=f,x=Np;d&&(g=[f],x=_c);var w=Proxy.revocable(g,x),S=w.revoke,C=w.proxy;return f.k=C,f.j=S,C})(e,t):ns("ES5").J(e,t);return(t?t.A:Eg()).p.push(i),i}function $2(r){return nu(r)||Ni(22,r),(function e(t){if(!Ba(t))return t;var i,o=t[Ur],u=su(t);if(o){if(!o.P&&(o.i<4||!ns("ES5").K(o)))return o.t;o.I=!0,i=Ng(t,u),o.I=!1}else i=Ng(t,u);return Oc(i,(function(d,f){o&&Y2(o.t,d)===f||c1(i,d,e(f))})),u===3?new Set(i):i})(r)}function Ng(r,e){switch(e){case 2:return new Map(r);case 3:return Array.from(r)}return s0(r)}var Rg,Lc,l0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",J2=typeof Map<"u",Z2=typeof Set<"u",Mg=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",d1=l0?Symbol.for("immer-nothing"):((Rg={})["immer-nothing"]=!0,Rg),Ig=l0?Symbol.for("immer-draftable"):"__$immer_draftable",Ur=l0?Symbol.for("immer-state"):"__$immer_state",ev=""+Object.prototype.constructor,u0=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,tv=Object.getOwnPropertyDescriptors||function(r){var e={};return u0(r).forEach((function(t){e[t]=Object.getOwnPropertyDescriptor(r,t)})),e},nv={},Np={get:function(r,e){if(e===Ur)return r;var t=za(r);if(!Ep(t,e))return(function(o,u,d){var f,g=Tg(u,d);return g?"value"in g?g.value:(f=g.get)===null||f===void 0?void 0:f.call(o.k):void 0})(r,t,e);var i=t[e];return r.I||!Ba(i)?i:i===Xf(r.t,e)?(Qf(r),r.o[e]=Tp(r.A.h,i,r)):i},has:function(r,e){return e in za(r)},ownKeys:function(r){return Reflect.ownKeys(za(r))},set:function(r,e,t){var i=Tg(za(r),e);if(i!=null&&i.set)return i.set.call(r.k,t),!0;if(!r.P){var o=Xf(za(r),e),u=o==null?void 0:o[Ur];if(u&&u.t===t)return r.o[e]=t,r.R[e]=!1,!0;if(X2(t,o)&&(t!==void 0||Ep(r.t,e)))return!0;Qf(r),bp(r)}return r.o[e]===t&&(t!==void 0||e in r.o)||Number.isNaN(t)&&Number.isNaN(r.o[e])||(r.o[e]=t,r.R[e]=!0),!0},deleteProperty:function(r,e){return Xf(r.t,e)!==void 0||e in r.t?(r.R[e]=!1,Qf(r),bp(r)):delete r.R[e],r.o&&delete r.o[e],!0},getOwnPropertyDescriptor:function(r,e){var t=za(r),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:r.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){Ni(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){Ni(12)}},_c={};Oc(Np,(function(r,e){_c[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),_c.deleteProperty=function(r,e){return _c.set.call(this,r,e,void 0)},_c.set=function(r,e,t){return Np.set.call(this,r[0],e,t,r[0])};var rv=(function(){function r(t){var i=this;this.O=Mg,this.D=!0,this.produce=function(o,u,d){if(typeof o=="function"&&typeof u!="function"){var f=u;u=o;var g=i;return function(A){var R=this;A===void 0&&(A=f);for(var I=arguments.length,T=Array(I>1?I-1:0),O=1;O<I;O++)T[O-1]=arguments[O];return g.produce(A,(function(z){var J;return(J=u).call.apply(J,[R,z].concat(T))}))}}var x;if(typeof u!="function"&&Ni(6),d!==void 0&&typeof d!="function"&&Ni(7),Ba(o)){var w=Pg(i),S=Tp(i,o,void 0),C=!0;try{x=u(S),C=!1}finally{C?Mh(w):Pp(w)}return typeof Promise<"u"&&x instanceof Promise?x.then((function(A){return qf(w,d),Yf(A,w)}),(function(A){throw Mh(w),A})):(qf(w,d),Yf(x,w))}if(!o||typeof o!="object"){if((x=u(o))===void 0&&(x=o),x===d1&&(x=void 0),i.D&&o0(x,!0),d){var b=[],P=[];ns("Patches").M(o,x,b,P),d(b,P)}return x}Ni(21,o)},this.produceWithPatches=function(o,u){if(typeof o=="function")return function(x){for(var w=arguments.length,S=Array(w>1?w-1:0),C=1;C<w;C++)S[C-1]=arguments[C];return i.produceWithPatches(x,(function(b){return o.apply(void 0,[b].concat(S))}))};var d,f,g=i.produce(o,u,(function(x,w){d=x,f=w}));return typeof Promise<"u"&&g instanceof Promise?g.then((function(x){return[x,d,f]})):[g,d,f]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=r.prototype;return e.createDraft=function(t){Ba(t)||Ni(8),nu(t)&&(t=$2(t));var i=Pg(this),o=Tp(this,t,void 0);return o[Ur].C=!0,Pp(i),o},e.finishDraft=function(t,i){var o=t&&t[Ur],u=o.A;return qf(u,i),Yf(void 0,u)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!Mg&&Ni(20),this.O=t},e.applyPatches=function(t,i){var o;for(o=i.length-1;o>=0;o--){var u=i[o];if(u.path.length===0&&u.op==="replace"){t=u.value;break}}o>-1&&(i=i.slice(o+1));var d=ns("Patches").$;return nu(t)?d(t,i):this.produce(t,(function(f){return d(f,i)}))},r})(),Wr=new rv,iv=Wr.produce;Wr.produceWithPatches.bind(Wr);Wr.setAutoFreeze.bind(Wr);Wr.setUseProxies.bind(Wr);Wr.applyPatches.bind(Wr);Wr.createDraft.bind(Wr);Wr.finishDraft.bind(Wr);class sv{constructor(e){const t=ov();this.c=1,this.s0=t(" "),this.s1=t(" "),this.s2=t(" "),this.s0-=t(e),this.s0<0&&(this.s0+=1),this.s1-=t(e),this.s1<0&&(this.s1+=1),this.s2-=t(e),this.s2<0&&(this.s2+=1)}next(){const e=2091639*this.s0+this.c*23283064365386963e-26;return this.s0=this.s1,this.s1=this.s2,this.s2=e-(this.c=Math.trunc(e))}}function ov(){let r=4022871197;return function(t){const i=t.toString();for(let o=0;o<i.length;o++){r+=i.charCodeAt(o);let u=.02519603282416938*r;r=u>>>0,u-=r,u*=r,r=u>>>0,u-=r,r+=u*4294967296}return(r>>>0)*23283064365386963e-26}}function Ag(r,e){return e.c=r.c,e.s0=r.s0,e.s1=r.s1,e.s2=r.s2,e}function h1(r,e){const t=new sv(r),i=t.next.bind(t);return e&&Ag(e,t),i.state=()=>Ag(t,{}),i}class Og{constructor(e){this.state=e||{seed:"0"},this.used=!1}static seed(){return Date.now().toString(36).slice(-10)}isUsed(){return this.used}getState(){return this.state}_random(){this.used=!0;const e=this.state,t=e.prngstate?"":e.seed,i=h1(t,e.prngstate),o=i();return this.state={...e,prngstate:i.state()},o}api(){const e=this._random.bind(this),t={D4:4,D6:6,D8:8,D10:10,D12:12,D20:20},i={};for(const u in t){const d=t[u];i[u]=f=>f===void 0?Math.floor(e()*d)+1:Array.from({length:f}).map(()=>Math.floor(e()*d)+1)}function o(u=6,d){return d===void 0?Math.floor(e()*u)+1:Array.from({length:d}).map(()=>Math.floor(e()*u)+1)}return{...i,Die:o,Number:()=>e(),Shuffle:u=>{const d=[...u];let f=u.length,g=0;const x=Array.from({length:f});for(;f;){const w=Math.trunc(f*e());x[g++]=d[w],d[w]=d[--f]}return x},_private:this}}}const av={name:"random",noClient:({api:r})=>r._private.isUsed(),flush:({api:r})=>r._private.getState(),api:({data:r})=>new Og(r).api(),setup:({game:r})=>{let{seed:e}=r;return e===void 0&&(e=Og.seed()),{seed:e}},playerView:()=>{}};var Kf,Lg;function lv(){if(Lg)return Kf;Lg=1;var r="[object Object]";function e(C){var b=!1;if(C!=null&&typeof C.toString!="function")try{b=!!(C+"")}catch{}return b}function t(C,b){return function(P){return C(b(P))}}var i=Function.prototype,o=Object.prototype,u=i.toString,d=o.hasOwnProperty,f=u.call(Object),g=o.toString,x=t(Object.getPrototypeOf,Object);function w(C){return!!C&&typeof C=="object"}function S(C){if(!w(C)||g.call(C)!=r||e(C))return!1;var b=x(C);if(b===null)return!0;var P=d.call(b,"constructor")&&b.constructor;return typeof P=="function"&&P instanceof P&&u.call(P)==f}return Kf=S,Kf}lv();const Dc="MAKE_MOVE",Wh="GAME_EVENT",Hh="REDO",c0="RESET",d0="SYNC",Vh="UNDO",h0="UPDATE",f0="PATCH",f1="PLUGIN",qh="STRIP_TRANSIENTS",p1=(r,e,t,i)=>({type:Dc,payload:{type:r,args:e,playerID:t,credentials:i}}),Nc=(r,e,t,i)=>({type:Wh,payload:{type:r,args:e,playerID:t,credentials:i}}),g1=(r,e,t,i)=>({type:Wh,payload:{type:r,args:e,playerID:t,credentials:i},automatic:!0}),m1=r=>({type:d0,state:r.state,log:r.log,initialState:r.initialState,clientOnly:!0}),y1=(r,e,t,i)=>({type:f0,prevStateID:r,stateID:e,patch:t,deltalog:i,clientOnly:!0}),v1=(r,e)=>({type:h0,state:r,deltalog:e,clientOnly:!0}),x1=r=>({type:c0,state:r,clientOnly:!0}),w1=(r,e)=>({type:Vh,payload:{type:null,args:null,playerID:r,credentials:e}}),_1=(r,e)=>({type:Hh,payload:{type:null,args:null,playerID:r,credentials:e}}),uv=(r,e,t,i)=>({type:f1,payload:{type:r,args:e,playerID:t,credentials:i}}),S1=()=>({type:qh});var cv=Object.freeze({__proto__:null,makeMove:p1,gameEvent:Nc,automaticGameEvent:g1,sync:m1,patch:y1,update:v1,reset:x1,undo:w1,redo:_1,plugin:uv,stripTransients:S1});const $t="INVALID_MOVE",dv={name:"plugin-immer",fnWrap:r=>(e,...t)=>{let i=!1;const o=iv(e.G,u=>{const d=r({...e,G:u},...t);if(d===$t){i=!0;return}return d});return i?$t:o}};var Zn;(function(r){r.MOVE="MOVE",r.GAME_ON_END="GAME_ON_END",r.PHASE_ON_BEGIN="PHASE_ON_BEGIN",r.PHASE_ON_END="PHASE_ON_END",r.TURN_ON_BEGIN="TURN_ON_BEGIN",r.TURN_ON_MOVE="TURN_ON_MOVE",r.TURN_ON_END="TURN_ON_END"})(Zn||(Zn={}));var Us;(function(r){r.CalledOutsideHook="Events must be called from moves or the `onBegin`, `onEnd`, and `onMove` hooks.\nThis error probably means you called an event from other game code, like an `endIf` trigger or one of the `turn.order` methods.",r.EndTurnInOnEnd="`endTurn` is disallowed in `onEnd` hooks  the turn is already ending.",r.MaxTurnEndings=`Maximum number of turn endings exceeded for this update.
This likely means game code is triggering an infinite loop.`,r.PhaseEventInOnEnd="`setPhase` & `endPhase` are disallowed in a phases `onEnd` hook  the phase is already ending.\nIf youre trying to dynamically choose the next phase when a phase ends, use the phases `next` trigger.",r.StageEventInOnEnd="`setStage`, `endStage` & `setActivePlayers` are disallowed in `onEnd` hooks.",r.StageEventInPhaseBegin="`setStage`, `endStage` & `setActivePlayers` are disallowed in a phases `onBegin` hook.\nUse `setActivePlayers` in a `turn.onBegin` hook or declare stages with `turn.activePlayers` instead.",r.StageEventInTurnBegin="`setStage` & `endStage` are disallowed in `turn.onBegin`.\nUse `setActivePlayers` or declare stages with `turn.activePlayers` instead."})(Us||(Us={}));class hv{constructor(e,t,i){this.flow=e,this.playerID=i,this.dispatch=[],this.initialTurn=t.turn,this.updateTurnContext(t,void 0),this.maxEndedTurnsPerAction=t.numPlayers*100}api(){const e={_private:this};for(const t of this.flow.eventNames)e[t]=(...i)=>{this.dispatch.push({type:t,args:i,phase:this.currentPhase,turn:this.currentTurn,calledFrom:this.currentMethod,error:new Error("Events Plugin Error")})};return e}isUsed(){return this.dispatch.length>0}updateTurnContext(e,t){this.currentPhase=e.phase,this.currentTurn=e.turn,this.currentMethod=t}unsetCurrentMethod(){this.currentMethod=void 0}update(e){const t=e,i=({stack:o},u)=>({...t,plugins:{...t.plugins,events:{...t.plugins.events,data:{error:u+`
`+o}}}});e:for(let o=0;o<this.dispatch.length;o++){const u=this.dispatch[o],d=u.turn!==e.ctx.turn;if(this.currentTurn-this.initialTurn>=this.maxEndedTurnsPerAction)return i(u.error,Us.MaxTurnEndings);if(u.calledFrom===void 0)return i(u.error,Us.CalledOutsideHook);if(e.ctx.gameover)break e;switch(u.type){case"endStage":case"setStage":case"setActivePlayers":{switch(u.calledFrom){case Zn.TURN_ON_END:case Zn.PHASE_ON_END:return i(u.error,Us.StageEventInOnEnd);case Zn.PHASE_ON_BEGIN:return i(u.error,Us.StageEventInPhaseBegin);case Zn.TURN_ON_BEGIN:if(u.type==="setActivePlayers")break;return i(u.error,Us.StageEventInTurnBegin)}if(d)continue e;break}case"endTurn":{if(u.calledFrom===Zn.TURN_ON_END||u.calledFrom===Zn.PHASE_ON_END)return i(u.error,Us.EndTurnInOnEnd);if(d)continue e;break}case"endPhase":case"setPhase":{if(u.calledFrom===Zn.PHASE_ON_END)return i(u.error,Us.PhaseEventInOnEnd);if(u.phase!==e.ctx.phase)continue e;break}}const g=g1(u.type,u.args,this.playerID);e=this.flow.processEvent(e,g)}return e}}const p0={name:"events",noClient:({api:r})=>r._private.isUsed(),isInvalid:({data:r})=>r.error||!1,fnWrap:(r,e)=>(t,...i)=>{const o=t.events;o&&o._private.updateTurnContext(t.ctx,e);const u=r(t,...i);return o&&o._private.unsetCurrentMethod(),u},dangerouslyFlushRawState:({state:r,api:e})=>e._private.update(r),api:({game:r,ctx:e,playerID:t})=>new hv(r.flow,e,t).api()},fv={name:"log",flush:()=>({}),api:({data:r})=>({setMetadata:e=>{r.metadata=e}}),setup:()=>({})},pv={name:"plugin-serializable",fnWrap:r=>(e,...t)=>r(e,...t)},gv=(...r)=>console.error(...r);function yt(r){gv("ERROR:",r)}const g0=[dv,av,fv,pv],Wc=[...g0,p0],mv=(r,e,t)=>(t.game.plugins.filter(i=>i.action!==void 0).filter(i=>i.name===e.payload.type).forEach(i=>{const o=i.name,u=r.plugins[o]||{data:{}},d=i.action(u.data,e.payload);r={...r,plugins:{...r.plugins,[o]:{...u,data:d}}}}),r),ru=({plugins:r})=>Object.entries(r||{}).reduce((e,[t,{api:i}])=>(e[t]=i,e),{}),k1=(r,e,t)=>[...g0,...t,p0].filter(i=>i.fnWrap!==void 0).reduce((i,{fnWrap:o})=>o(i,e),r),yv=(r,e)=>([...Wc,...e.game.plugins].filter(t=>t.setup!==void 0).forEach(t=>{const i=t.name,o=t.setup({G:r.G,ctx:r.ctx,game:e.game});r={...r,plugins:{...r.plugins,[i]:{data:o}}}}),r),Rp=(r,e)=>([...Wc,...e.game.plugins].filter(t=>t.api!==void 0).forEach(t=>{const i=t.name,o=r.plugins[i]||{data:{}},u=t.api({G:r.G,ctx:r.ctx,data:o.data,game:e.game,playerID:e.playerID});r={...r,plugins:{...r.plugins,[i]:{...o,api:u}}}}),r),vv=(r,e)=>([...g0,...e.game.plugins,p0].reverse().forEach(t=>{const i=t.name,o=r.plugins[i]||{data:{}};if(t.flush){const u=t.flush({G:r.G,ctx:r.ctx,game:e.game,api:o.api,data:o.data});r={...r,plugins:{...r.plugins,[t.name]:{data:u}}}}else if(t.dangerouslyFlushRawState){r=t.dangerouslyFlushRawState({state:r,game:e.game,api:o.api,data:o.data});const u=r.plugins[i].data;r={...r,plugins:{...r.plugins,[t.name]:{data:u}}}}}),r),xv=(r,e)=>[...Wc,...e.game.plugins].filter(t=>t.noClient!==void 0).map(t=>{const i=t.name,o=r.plugins[i];return o?t.noClient({G:r.G,ctx:r.ctx,game:e.game,api:o.api,data:o.data}):!1}).includes(!0),wv=(r,e)=>[...Wc,...e.game.plugins].filter(i=>i.isInvalid!==void 0).map(i=>{const{name:o}=i,u=r.plugins[o],d=i.isInvalid({G:r.G,ctx:r.ctx,game:e.game,data:u&&u.data});return d?{plugin:o,message:d}:!1}).find(i=>i)||!1,C1=(r,e)=>{const t=vv(r,e),i=wv(t,e);if(!i)return[t];const{plugin:o,message:u}=i;return yt(`${o} plugin declared action invalid:
${u}`),[r,i]},E1=({G:r,ctx:e,plugins:t={}},{game:i,playerID:o})=>([...Wc,...i.plugins].forEach(({name:u,playerView:d})=>{if(!d)return;const{data:f}=t[u]||{data:{}},g=d({G:r,ctx:e,game:i,data:f,playerID:o});t={...t,[u]:{data:g}}}),t);function Oh(r,e=!1){r.moveLimit&&(e&&(r.minMoves=r.moveLimit),r.maxMoves=r.moveLimit,delete r.moveLimit)}function Lh(r,e){let t={},i=[],o=null,u={},d={};if(Array.isArray(e)){const g={};e.forEach(x=>g[x]=Dh.NULL),t=g}else{if(Oh(e),e.next&&(o=e.next),e.revert&&(i=[...r._prevActivePlayers,{activePlayers:r.activePlayers,_activePlayersMinMoves:r._activePlayersMinMoves,_activePlayersMaxMoves:r._activePlayersMaxMoves,_activePlayersNumMoves:r._activePlayersNumMoves}]),e.currentPlayer!==void 0&&oh(t,u,d,r.currentPlayer,e.currentPlayer),e.others!==void 0)for(let g=0;g<r.playOrder.length;g++){const x=r.playOrder[g];x!==r.currentPlayer&&oh(t,u,d,x,e.others)}if(e.all!==void 0)for(let g=0;g<r.playOrder.length;g++){const x=r.playOrder[g];oh(t,u,d,x,e.all)}if(e.value)for(const g in e.value)oh(t,u,d,g,e.value[g]);if(e.minMoves)for(const g in t)u[g]===void 0&&(u[g]=e.minMoves);if(e.maxMoves)for(const g in t)d[g]===void 0&&(d[g]=e.maxMoves)}Object.keys(t).length===0&&(t=null),Object.keys(u).length===0&&(u=null),Object.keys(d).length===0&&(d=null);const f={};for(const g in t)f[g]=0;return{...r,activePlayers:t,_activePlayersMinMoves:u,_activePlayersMaxMoves:d,_activePlayersNumMoves:f,_prevActivePlayers:i,_nextActivePlayers:o}}function _v(r){let{activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u,_nextActivePlayers:d}=r;if(e&&Object.keys(e).length===0)if(d)r=Lh(r,d),{activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u}=r;else if(u.length>0){const f=u.length-1;({activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o}=u[f]),u=u.slice(0,f)}else e=null,t=null,i=null;return{...r,activePlayers:e,_activePlayersMinMoves:t,_activePlayersMaxMoves:i,_activePlayersNumMoves:o,_prevActivePlayers:u}}function oh(r,e,t,i,o){(typeof o!="object"||o===Dh.NULL)&&(o={stage:o}),o.stage!==void 0&&(Oh(o),r[i]=o.stage,o.minMoves&&(e[i]=o.minMoves),o.maxMoves&&(t[i]=o.maxMoves))}function Mp(r,e){return r[e]+""}function Sv(r,e){let{G:t,ctx:i}=r;const{numPlayers:o}=i,d={...ru(r),G:t,ctx:i},f=e.order;let g=[...Array.from({length:o})].map((C,b)=>b+"");f.playOrder!==void 0&&(g=f.playOrder(d));const x=f.first(d),w=typeof x;w!=="number"&&yt(`invalid value returned by turn.order.first  expected number got ${w} ${x}.`);const S=Mp(g,x);return i={...i,currentPlayer:S,playOrderPos:x,playOrder:g},i=Lh(i,e.activePlayers||{}),i}function kv(r,e,t,i){const o=t.order;let{G:u,ctx:d}=r,f=d.playOrderPos,g=!1;if(i&&i!==!0)typeof i!="object"&&yt(`invalid argument to endTurn: ${i}`),Object.keys(i).forEach(x=>{switch(x){case"remove":e=Mp(d.playOrder,f);break;case"next":f=d.playOrder.indexOf(i.next),e=i.next;break;default:yt(`invalid argument to endTurn: ${x}`)}});else{const w={...ru(r),G:u,ctx:d},S=o.next(w),C=typeof S;S!==void 0&&C!=="number"&&yt(`invalid value returned by turn.order.next  expected number or undefined got ${C} ${S}.`),S===void 0?g=!0:(f=S,e=Mp(d.playOrder,f))}return d={...d,playOrderPos:f,currentPlayer:e},{endPhase:g,ctx:d}}const Ip={DEFAULT:{first:({ctx:r})=>r.turn===0?r.playOrderPos:(r.playOrderPos+1)%r.playOrder.length,next:({ctx:r})=>(r.playOrderPos+1)%r.playOrder.length}},Dh={NULL:null};var $f={},Fs={},Dg;function P1(){if(Dg)return Fs;Dg=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.Pointer=Fs.escapeToken=Fs.unescapeToken=void 0;function r(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}Fs.unescapeToken=r;function e(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}Fs.escapeToken=e;var t=(function(){function i(o){o===void 0&&(o=[""]),this.tokens=o}return i.fromJSON=function(o){var u=o.split("/").map(r);if(u[0]!=="")throw new Error("Invalid JSON Pointer: ".concat(o));return new i(u)},i.prototype.toString=function(){return this.tokens.map(e).join("/")},i.prototype.evaluate=function(o){for(var u=null,d="",f=o,g=1,x=this.tokens.length;g<x;g++)u=f,d=this.tokens[g],!(d=="__proto__"||d=="constructor"||d=="prototype")&&(f=(u||{})[d]);return{parent:u,key:d,value:f}},i.prototype.get=function(o){return this.evaluate(o).value},i.prototype.set=function(o,u){var d=this.evaluate(o);d.parent&&(d.parent[d.key]=u)},i.prototype.push=function(o){this.tokens.push(o)},i.prototype.add=function(o){var u=this.tokens.concat(String(o));return new i(u)},i})();return Fs.Pointer=t,Fs}var Ft={},Jf={},jg;function b1(){return jg||(jg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.objectType=r.hasOwnProperty=void 0,r.hasOwnProperty=Object.prototype.hasOwnProperty;function e(o){return o===void 0?"undefined":o===null?"null":Array.isArray(o)?"array":typeof o}r.objectType=e;function t(o){return o!=null&&typeof o=="object"}function i(o){if(!t(o))return o;if(o.constructor==Array){for(var u=o.length,d=new Array(u),f=0;f<u;f++)d[f]=i(o[f]);return d}if(o.constructor==Date){var g=new Date(+o);return g}var x={};for(var w in o)r.hasOwnProperty.call(o,w)&&(x[w]=i(o[w]));return x}r.clone=i})(Jf)),Jf}var fr={},zg;function T1(){if(zg)return fr;zg=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.diffAny=fr.diffObjects=fr.diffArrays=fr.intersection=fr.subtract=fr.isDestructive=void 0;var r=b1();function e(w){var S=w.op;return S==="remove"||S==="replace"||S==="copy"||S==="move"}fr.isDestructive=e;function t(w,S){var C={};for(var b in w)r.hasOwnProperty.call(w,b)&&w[b]!==void 0&&(C[b]=1);for(var P in S)r.hasOwnProperty.call(S,P)&&S[P]!==void 0&&delete C[P];return Object.keys(C)}fr.subtract=t;function i(w){for(var S=w.length,C={},b=0;b<S;b++){var P=w[b];for(var A in P)r.hasOwnProperty.call(P,A)&&P[A]!==void 0&&(C[A]=(C[A]||0)+1)}for(var A in C)C[A]<S&&delete C[A];return Object.keys(C)}fr.intersection=i;function o(w){return w.op==="add"}function u(w){return w.op==="remove"}function d(w,S){return{operations:w.operations.concat(S),cost:w.cost+1}}function f(w,S,C,b){b===void 0&&(b=x);var P={"0,0":{operations:[],cost:0}};function A(z,J){var te="".concat(z,",").concat(J),ie=P[te];if(ie===void 0){if(z>0&&J>0&&!b(w[z-1],S[J-1],C.add(String(z-1))).length)ie=A(z-1,J-1);else{var Y=[];if(z>0){var ge=A(z-1,J),ue={op:"remove",index:z-1};Y.push(d(ge,ue))}if(J>0){var ke=A(z,J-1),de={op:"add",index:z-1,value:S[J-1]};Y.push(d(ke,de))}if(z>0&&J>0){var Oe=A(z-1,J-1),Ne={op:"replace",index:z-1,original:w[z-1],value:S[J-1]};Y.push(d(Oe,Ne))}var _e=Y.sort(function(ae,Re){return ae.cost-Re.cost})[0];ie=_e}P[te]=ie}return ie}var R=isNaN(w.length)||w.length<=0?0:w.length,I=isNaN(S.length)||S.length<=0?0:S.length,T=A(R,I).operations,O=T.reduce(function(z,J){var te=z[0],ie=z[1];if(o(J)){var Y=J.index+1+ie,ge=Y<R+ie?String(Y):"-",ue={op:J.op,path:C.add(ge).toString(),value:J.value};return[te.concat(ue),ie+1]}else if(u(J)){var ue={op:J.op,path:C.add(String(J.index+ie)).toString()};return[te.concat(ue),ie-1]}else{var ke=C.add(String(J.index+ie)),de=b(J.original,J.value,ke);return[te.concat.apply(te,de),ie]}},[[],0])[0];return O}fr.diffArrays=f;function g(w,S,C,b){b===void 0&&(b=x);var P=[];return t(w,S).forEach(function(A){P.push({op:"remove",path:C.add(A).toString()})}),t(S,w).forEach(function(A){P.push({op:"add",path:C.add(A).toString(),value:S[A]})}),i([w,S]).forEach(function(A){P.push.apply(P,b(w[A],S[A],C.add(A)))}),P}fr.diffObjects=g;function x(w,S,C,b){if(b===void 0&&(b=x),w===S)return[];var P=(0,r.objectType)(w),A=(0,r.objectType)(S);return P=="array"&&A=="array"?f(w,S,C,b):P=="object"&&A=="object"?g(w,S,C,b):[{op:"replace",path:C.toString(),value:S}]}return fr.diffAny=x,fr}var Fg;function Cv(){if(Fg)return Ft;Fg=1;var r=Ft&&Ft.__extends||(function(){var R=function(I,T){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,z){O.__proto__=z}||function(O,z){for(var J in z)Object.prototype.hasOwnProperty.call(z,J)&&(O[J]=z[J])},R(I,T)};return function(I,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");R(I,T);function O(){this.constructor=I}I.prototype=T===null?Object.create(T):(O.prototype=T.prototype,new O)}})();Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.apply=Ft.InvalidOperationError=Ft.test=Ft.copy=Ft.move=Ft.replace=Ft.remove=Ft.add=Ft.TestError=Ft.MissingError=void 0;var e=P1(),t=b1(),i=T1(),o=(function(R){r(I,R);function I(T){var O=R.call(this,"Value required at path: ".concat(T))||this;return O.path=T,O.name="MissingError",O}return I})(Error);Ft.MissingError=o;var u=(function(R){r(I,R);function I(T,O){var z=R.call(this,"Test failed: ".concat(T," != ").concat(O))||this;return z.actual=T,z.expected=O,z.name="TestError",z}return I})(Error);Ft.TestError=u;function d(R,I,T){if(Array.isArray(R))if(I=="-")R.push(T);else{var O=parseInt(I,10);R.splice(O,0,T)}else R[I]=T}function f(R,I){if(Array.isArray(R)){var T=parseInt(I,10);R.splice(T,1)}else delete R[I]}function g(R,I){var T=e.Pointer.fromJSON(I.path).evaluate(R);return T.parent===void 0?new o(I.path):(d(T.parent,T.key,(0,t.clone)(I.value)),null)}Ft.add=g;function x(R,I){var T=e.Pointer.fromJSON(I.path).evaluate(R);return T.value===void 0?new o(I.path):(f(T.parent,T.key),null)}Ft.remove=x;function w(R,I){var T=e.Pointer.fromJSON(I.path).evaluate(R);if(T.parent===null)return new o(I.path);if(Array.isArray(T.parent)){if(parseInt(T.key,10)>=T.parent.length)return new o(I.path)}else if(T.value===void 0)return new o(I.path);return T.parent[T.key]=(0,t.clone)(I.value),null}Ft.replace=w;function S(R,I){var T=e.Pointer.fromJSON(I.from).evaluate(R);if(T.value===void 0)return new o(I.from);var O=e.Pointer.fromJSON(I.path).evaluate(R);return O.parent===void 0?new o(I.path):(f(T.parent,T.key),d(O.parent,O.key,T.value),null)}Ft.move=S;function C(R,I){var T=e.Pointer.fromJSON(I.from).evaluate(R);if(T.value===void 0)return new o(I.from);var O=e.Pointer.fromJSON(I.path).evaluate(R);return O.parent===void 0?new o(I.path):(d(O.parent,O.key,(0,t.clone)(T.value)),null)}Ft.copy=C;function b(R,I){var T=e.Pointer.fromJSON(I.path).evaluate(R);return(0,i.diffAny)(T.value,I.value,new e.Pointer).length?new u(T.value,I.value):null}Ft.test=b;var P=(function(R){r(I,R);function I(T){var O=R.call(this,"Invalid operation: ".concat(T.op))||this;return O.operation=T,O.name="InvalidOperationError",O}return I})(Error);Ft.InvalidOperationError=P;function A(R,I){switch(I.op){case"add":return g(R,I);case"remove":return x(R,I);case"replace":return w(R,I);case"move":return S(R,I);case"copy":return C(R,I);case"test":return b(R,I)}return new P(I)}return Ft.apply=A,Ft}var Bg;function Ev(){return Bg||(Bg=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.createTests=r.createPatch=r.applyPatch=r.Pointer=void 0;var e=P1();Object.defineProperty(r,"Pointer",{enumerable:!0,get:function(){return e.Pointer}});var t=Cv(),i=T1();function o(x,w){return w.map(function(S){return(0,t.apply)(x,S)})}r.applyPatch=o;function u(x){function w(S,C,b){var P=x(S,C,b);return Array.isArray(P)?P:(0,i.diffAny)(S,C,b,w)}return w}function d(x,w,S){var C=new e.Pointer;return(S?u(S):i.diffAny)(x,w,C)}r.createPatch=d;function f(x,w){var S=e.Pointer.fromJSON(w).evaluate(x);if(S!==void 0)return{op:"test",path:w,value:S.value}}function g(x,w){var S=new Array;return w.filter(i.isDestructive).forEach(function(C){var b=f(x,C.path);if(b&&S.push(b),"from"in C){var P=f(x,C.from);P&&S.push(P)}}),S}r.createTests=g})($f)),$f}var N1=Ev();function Pv({moves:r,phases:e,endIf:t,onEnd:i,turn:o,events:u,plugins:d}){r===void 0&&(r={}),u===void 0&&(u={}),d===void 0&&(d=[]),e===void 0&&(e={}),t||(t=()=>{}),i||(i=({G:B})=>B),o||(o={});const f={...e};""in f&&yt("cannot specify phase with empty name"),f[""]={};const g={},x=new Set;let w=null;Object.keys(r).forEach(B=>x.add(B));const S=(B,X)=>{const re=k1(B,X,d);return Fe=>{const Ce=ru(Fe);return re({...Ce,G:Fe.G,ctx:Fe.ctx,playerID:Fe.playerID})}},C=B=>X=>{const re=ru(X);return B({...re,G:X.G,ctx:X.ctx})},b={onEnd:S(i,Zn.GAME_ON_END),endIf:C(t)};for(const B in f){const X=f[B];if(X.start===!0&&(w=B),X.moves!==void 0)for(const re of Object.keys(X.moves))g[B+"."+re]=X.moves[re],x.add(re);X.endIf===void 0&&(X.endIf=()=>{}),X.onBegin===void 0&&(X.onBegin=({G:re})=>re),X.onEnd===void 0&&(X.onEnd=({G:re})=>re),X.turn===void 0&&(X.turn=o),X.turn.order===void 0&&(X.turn.order=Ip.DEFAULT),X.turn.onBegin===void 0&&(X.turn.onBegin=({G:re})=>re),X.turn.onEnd===void 0&&(X.turn.onEnd=({G:re})=>re),X.turn.endIf===void 0&&(X.turn.endIf=()=>!1),X.turn.onMove===void 0&&(X.turn.onMove=({G:re})=>re),X.turn.stages===void 0&&(X.turn.stages={}),Oh(X.turn,!0);for(const re in X.turn.stages){const Ce=X.turn.stages[re].moves||{};for(const Ue of Object.keys(Ce)){const vt=B+"."+re+"."+Ue;g[vt]=Ce[Ue],x.add(Ue)}}if(X.wrapped={onBegin:S(X.onBegin,Zn.PHASE_ON_BEGIN),onEnd:S(X.onEnd,Zn.PHASE_ON_END),endIf:C(X.endIf)},X.turn.wrapped={onMove:S(X.turn.onMove,Zn.TURN_ON_MOVE),onBegin:S(X.turn.onBegin,Zn.TURN_ON_BEGIN),onEnd:S(X.turn.onEnd,Zn.TURN_ON_END),endIf:C(X.turn.endIf)},typeof X.next!="function"){const{next:re}=X;X.next=()=>re||null}X.wrapped.next=C(X.next)}function P(B){return B.phase?f[B.phase]:f[""]}function A(B){return B}function R(B,X){const re=new Set,Fe=new Set;for(let Ce=0;Ce<X.length;Ce++){const{fn:Ue,arg:vt,...gt}=X[Ce];if(Ue===de){Fe.clear();const Et=B.ctx.phase;if(re.has(Et)){const fn={...B.ctx,phase:null};return{...B,ctx:fn}}re.add(Et)}const Cn=[];if(B=Ue(B,{...gt,arg:vt,next:Cn}),Ue===ke)break;const jt=Y(B);if(jt){X.push({fn:ke,arg:jt,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}const Ut=ge(B);if(Ut){X.push({fn:de,arg:Ut,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}if([A,te,ie].includes(Ue)){const Et=ue(B);if(Et){X.push({fn:Oe,arg:Et,turn:B.ctx.turn,phase:B.ctx.phase,automatic:!0});continue}}X.push(...Cn)}return B}function I(B,{next:X}){return X.push({fn:T}),B}function T(B,{next:X}){let{G:re,ctx:Fe}=B;return re=P(Fe).wrapped.onBegin(B),X.push({fn:O}),{...B,G:re,ctx:Fe}}function O(B,{currentPlayer:X}){let{ctx:re}=B;const Fe=P(re);X?(re={...re,currentPlayer:X},Fe.turn.activePlayers&&(re=Lh(re,Fe.turn.activePlayers))):re=Sv(B,Fe.turn);const Ce=re.turn+1;re={...re,turn:Ce,numMoves:0,_prevActivePlayers:[]};const Ue=Fe.turn.wrapped.onBegin({...B,ctx:re});return{...B,G:Ue,ctx:re,_undo:[],_redo:[]}}function z(B,{arg:X,next:re,phase:Fe}){const Ce=P({phase:Fe});let{ctx:Ue}=B;if(X&&X.next)if(X.next in f)Ue={...Ue,phase:X.next};else return yt("invalid phase: "+X.next),B;else Ue={...Ue,phase:Ce.wrapped.next(B)||null};return B={...B,ctx:Ue},re.push({fn:T}),B}function J(B,{arg:X,currentPlayer:re,next:Fe}){let{G:Ce,ctx:Ue}=B;const vt=P(Ue),{endPhase:gt,ctx:Cn}=kv(B,re,vt.turn,X);return Ue=Cn,B={...B,G:Ce,ctx:Ue},gt?Fe.push({fn:de,turn:Ue.turn,phase:Ue.phase}):Fe.push({fn:O,currentPlayer:Ue.currentPlayer}),B}function te(B,{arg:X,playerID:re}){if((typeof X=="string"||X===Dh.NULL)&&(X={stage:X}),typeof X!="object")return B;Oh(X);let{ctx:Fe}=B,{activePlayers:Ce,_activePlayersMinMoves:Ue,_activePlayersMaxMoves:vt,_activePlayersNumMoves:gt}=Fe;return X.stage!==void 0&&(Ce===null&&(Ce={}),Ce[re]=X.stage,gt[re]=0,X.minMoves&&(Ue===null&&(Ue={}),Ue[re]=X.minMoves),X.maxMoves&&(vt===null&&(vt={}),vt[re]=X.maxMoves)),Fe={...Fe,activePlayers:Ce,_activePlayersMinMoves:Ue,_activePlayersMaxMoves:vt,_activePlayersNumMoves:gt},{...B,ctx:Fe}}function ie(B,{arg:X}){return{...B,ctx:Lh(B.ctx,X)}}function Y(B){return b.endIf(B)}function ge(B){return P(B.ctx).wrapped.endIf(B)}function ue(B){const X=P(B.ctx),re=B.ctx.numMoves||0;return X.turn.maxMoves&&re>=X.turn.maxMoves?!0:X.turn.wrapped.endIf(B)}function ke(B,{arg:X,phase:re}){B=de(B,{}),X===void 0&&(X=!0),B={...B,ctx:{...B.ctx,gameover:X}};const Fe=b.onEnd(B);return{...B,G:Fe}}function de(B,{arg:X,next:re,turn:Fe,automatic:Ce}){B=Oe(B,{turn:Fe,force:!0,automatic:!0});const{phase:Ue,turn:vt}=B.ctx;if(re&&re.push({fn:z,arg:X,phase:Ue}),Ue===null)return B;const Cn=P(B.ctx).wrapped.onEnd(B),jt={...B.ctx,phase:null},Ut=Nc("endPhase",X),{_stateID:Et}=B,fn={action:Ut,_stateID:Et,turn:vt,phase:Ue};Ce&&(fn.automatic=!0);const br=[...B.deltalog||[],fn];return{...B,G:Cn,ctx:jt,deltalog:br}}function Oe(B,{arg:X,next:re,turn:Fe,force:Ce,automatic:Ue,playerID:vt}){if(Fe!==B.ctx.turn)return B;const{currentPlayer:gt,numMoves:Cn,phase:jt,turn:Ut}=B.ctx,Et=P(B.ctx),fn=Cn||0;if(!Ce&&Et.turn.minMoves&&fn<Et.turn.minMoves)return`${Et.turn.minMoves}`,B;const br=Et.turn.wrapped.onEnd(B);re&&re.push({fn:J,arg:X,currentPlayer:gt});let Tr={...B.ctx,activePlayers:null};if(X&&X.remove){vt=vt||gt;const gr=Tr.playOrder.filter(ls=>ls!=vt),Xa=Tr.playOrderPos>gr.length-1?0:Tr.playOrderPos;if(Tr={...Tr,playOrder:gr,playOrderPos:Xa},gr.length===0)return re.push({fn:de,turn:Ut,phase:jt}),B}const Vr=Nc("endTurn",X),{_stateID:Jo}=B,Mi={action:Vr,_stateID:Jo,turn:Ut,phase:jt};Ue&&(Mi.automatic=!0);const as=[...B.deltalog||[],Mi];return{...B,G:br,ctx:Tr,deltalog:as,_undo:[],_redo:[]}}function Ne(B,{arg:X,next:re,automatic:Fe,playerID:Ce}){Ce=Ce||B.ctx.currentPlayer;let{ctx:Ue,_stateID:vt}=B,{activePlayers:gt,_activePlayersNumMoves:Cn,_activePlayersMinMoves:jt,_activePlayersMaxMoves:Ut,phase:Et,turn:fn}=Ue;const br=gt!==null&&Ce in gt,Tr=P(Ue);if(!X&&br){const gr=Tr.turn.stages[gt[Ce]];gr&&gr.next&&(X=gr.next)}if(re&&re.push({fn:te,arg:X,playerID:Ce}),!br)return B;const Vr=Cn[Ce]||0;if(jt&&jt[Ce]&&Vr<jt[Ce])return`${jt[Ce]}`,B;gt={...gt},delete gt[Ce],jt&&(jt={...jt},delete jt[Ce]),Ut&&(Ut={...Ut},delete Ut[Ce]),Ue=_v({...Ue,activePlayers:gt,_activePlayersMinMoves:jt,_activePlayersMaxMoves:Ut});const Mi={action:Nc("endStage",X),_stateID:vt,turn:fn,phase:Et};Fe&&(Mi.automatic=!0);const as=[...B.deltalog||[],Mi];return{...B,ctx:Ue,deltalog:as}}function _e(B,X,re){const Fe=P(B),Ce=Fe.turn.stages,{activePlayers:Ue}=B;if(Ue&&Ue[re]!==void 0&&Ue[re]!==Dh.NULL&&Ce[Ue[re]]!==void 0&&Ce[Ue[re]].moves!==void 0){const gt=Ce[Ue[re]].moves;if(X in gt)return gt[X]}else if(Fe.moves){if(X in Fe.moves)return Fe.moves[X]}else if(X in r)return r[X];return null}function ae(B,X){const{playerID:re,type:Fe}=X,{currentPlayer:Ce,activePlayers:Ue,_activePlayersMaxMoves:vt}=B.ctx,gt=_e(B.ctx,Fe,re),Cn=!gt||typeof gt=="function"||gt.noLimit!==!0;let{numMoves:jt,_activePlayersNumMoves:Ut}=B.ctx;Cn&&(re===Ce&&jt++,Ue&&Ut[re]++),B={...B,ctx:{...B.ctx,numMoves:jt,_activePlayersNumMoves:Ut}},vt&&Ut[re]>=vt[re]&&(B=Ne(B,{playerID:re,automatic:!0}));const fn=P(B.ctx).turn.wrapped.onMove({...B,playerID:re});return B={...B,G:fn},R(B,[{fn:A}])}function Re(B,X,re){return R(B,[{fn:Ne,arg:re,playerID:X}])}function W(B,X){return R(B,[{fn:Ne,playerID:X}])}function ve(B,X,re){return R(B,[{fn:ie,arg:re}])}function he(B,X,re){return R(B,[{fn:de,phase:B.ctx.phase,turn:B.ctx.turn,arg:{next:re}}])}function j(B){return R(B,[{fn:de,phase:B.ctx.phase,turn:B.ctx.turn}])}function K(B,X,re){return R(B,[{fn:Oe,turn:B.ctx.turn,phase:B.ctx.phase,arg:re}])}function xe(B,X,re){return R(B,[{fn:Oe,turn:B.ctx.turn,phase:B.ctx.phase,force:!0,arg:re}])}function Le(B,X,re){return R(B,[{fn:ke,turn:B.ctx.turn,phase:B.ctx.phase,arg:re}])}const qe={endStage:W,setStage:Re,endTurn:K,pass:xe,endPhase:j,setPhase:he,endGame:Le,setActivePlayers:ve},Ve=[];u.endTurn!==!1&&Ve.push("endTurn"),u.pass!==!1&&Ve.push("pass"),u.endPhase!==!1&&Ve.push("endPhase"),u.setPhase!==!1&&Ve.push("setPhase"),u.endGame!==!1&&Ve.push("endGame"),u.setActivePlayers!==!1&&Ve.push("setActivePlayers"),u.endStage!==!1&&Ve.push("endStage"),u.setStage!==!1&&Ve.push("setStage");function He(B,X){const{type:re,playerID:Fe,args:Ce}=X.payload;return typeof qe[re]!="function"?B:qe[re](B,Fe,...Array.isArray(Ce)?Ce:[Ce])}function Ze(B,X,re){return X.activePlayers?re in X.activePlayers:X.currentPlayer===re}return{ctx:B=>({numPlayers:B,turn:0,currentPlayer:"0",playOrder:[...Array.from({length:B})].map((X,re)=>re+""),playOrderPos:0,phase:w,activePlayers:null}),init:B=>R(B,[{fn:I}]),isPlayerActive:Ze,eventHandlers:qe,eventNames:Object.keys(qe),enabledEventNames:Ve,moveMap:g,moveNames:[...x.values()],processMove:ae,processEvent:He,getMove:_e}}function bv(r){return r.processMove!==void 0}function Yh(r){if(bv(r))return r;if(r.name===void 0&&(r.name="default"),r.deltaState===void 0&&(r.deltaState=!1),r.disableUndo===void 0&&(r.disableUndo=!1),r.setup===void 0&&(r.setup=()=>({})),r.moves===void 0&&(r.moves={}),r.playerView===void 0&&(r.playerView=({G:t})=>t),r.plugins===void 0&&(r.plugins=[]),r.plugins.forEach(t=>{if(t.name===void 0)throw new Error("Plugin missing name attribute");if(t.name.includes(" "))throw new Error(t.name+": Plugin name must not include spaces")}),r.name.includes(" "))throw new Error(r.name+": Game name must not include spaces");const e=Pv(r);return{...r,flow:e,moveNames:e.moveNames,pluginNames:r.plugins.map(t=>t.name),processMove:(t,i)=>{let o=e.getMove(t.ctx,i.type,i.playerID);if(R1(o)&&(o=o.move),o instanceof Function){const u=k1(o,Zn.MOVE,r.plugins);let d=[];i.args!==void 0&&(d=Array.isArray(i.args)?i.args:[i.args]);const f={...ru(t),G:t.G,ctx:t.ctx,playerID:i.playerID};return u(f,...d)}return yt(`invalid move object: ${i.type}`),t.G}}}function R1(r){return r instanceof Object&&r.move!==void 0}var Ap;(function(r){r.UnauthorizedAction="update/unauthorized_action",r.MatchNotFound="update/match_not_found",r.PatchFailed="update/patch_failed"})(Ap||(Ap={}));var Jn;(function(r){r.StaleStateId="action/stale_state_id",r.UnavailableMove="action/unavailable_move",r.InvalidMove="action/invalid_move",r.InactivePlayer="action/inactive_player",r.GameOver="action/gameover",r.ActionDisabled="action/action_disabled",r.ActionInvalid="action/action_invalid",r.PluginActionInvalid="action/plugin_invalid"})(Jn||(Jn={}));const ah=r=>r.payload.playerID!==null&&r.payload.playerID!==void 0,Tv=(r,e,t)=>{function i(u){return u.undoable!==void 0}function o(u){return u instanceof Function}return i(t)?o(t.undoable)?t.undoable({G:r,ctx:e}):t.undoable:!0};function Gg(r,e){if(e.game.disableUndo)return r;const t={G:r.G,ctx:r.ctx,plugins:r.plugins,playerID:e.action.payload.playerID||r.ctx.currentPlayer};return e.action.type==="MAKE_MOVE"&&(t.moveType=e.action.payload.type),{...r,_undo:[...r._undo,t],_redo:[]}}function Zf(r,e,t){const i={action:e,_stateID:r._stateID,turn:r.ctx.turn,phase:r.ctx.phase},o=r.plugins.log.data.metadata;return o!==void 0&&(i.metadata=o),typeof t=="object"&&t.redact===!0?i.redact=!0:typeof t=="object"&&t.redact instanceof Function&&(i.redact=t.redact({G:r.G,ctx:r.ctx})),{...r,deltalog:[i]}}function ep(r,e,t){const[i,o]=C1(r,t);return o?[i,pr(e,Jn.PluginActionInvalid,o)]:[i]}function M1(r){if(!r)return[null,void 0];const{transients:e,...t}=r;return[t,e]}function pr(r,e,t){return{...r,transients:{error:{type:e,payload:t}}}}const I1=r=>e=>t=>{const i=e(t);switch(t.type){case qh:return i;default:{const[,o]=M1(r.getState());return typeof o<"u"?(r.dispatch(S1()),{...i,transients:o}):i}}};function m0({game:r,isClient:e}){return r=Yh(r),(t=null,i)=>{let[o]=M1(t);switch(i.type){case qh:return o;case Wh:{if(o={...o,deltalog:[]},e)return o;if(o.ctx.gameover!==void 0)return yt("cannot call event after game end"),pr(o,Jn.GameOver);if(ah(i)&&!r.flow.isPlayerActive(o.G,o.ctx,i.payload.playerID))return yt(`disallowed event: ${i.payload.type}`),pr(o,Jn.InactivePlayer);o=Rp(o,{game:r,playerID:i.payload.playerID});let u=r.flow.processEvent(o,i),d;return[u,d]=ep(u,o,{game:r}),d||(u=Gg(u,{game:r,action:i}),{...u,_stateID:o._stateID+1})}case Dc:{const u=o={...o,deltalog:[]},d=r.flow.getMove(o.ctx,i.payload.type,i.payload.playerID||o.ctx.currentPlayer);if(d===null)return yt(`disallowed move: ${i.payload.type}`),pr(o,Jn.UnavailableMove);if(e&&d.client===!1)return o;if(o.ctx.gameover!==void 0)return yt("cannot make move after game end"),pr(o,Jn.GameOver);if(ah(i)&&!r.flow.isPlayerActive(o.G,o.ctx,i.payload.playerID))return yt(`disallowed move: ${i.payload.type}`),pr(o,Jn.InactivePlayer);o=Rp(o,{game:r,playerID:i.payload.playerID});const f=r.processMove(o,i.payload);if(f===$t)return yt(`invalid move: ${i.payload.type} args: ${i.payload.args}`),pr(o,Jn.InvalidMove);const g={...o,G:f};if(e&&xv(g,{game:r}))return o;if(o=g,e){let w;return[o,w]=ep(o,u,{game:r}),w||{...o,_stateID:o._stateID+1}}o=Zf(o,i,d),o=r.flow.processMove(o,i.payload);let x;return[o,x]=ep(o,u,{game:r}),x||(o=Gg(o,{game:r,action:i}),{...o,_stateID:o._stateID+1})}case c0:case h0:case d0:return i.state;case Vh:{if(o={...o,deltalog:[]},r.disableUndo)return yt("Undo is not enabled"),pr(o,Jn.ActionDisabled);const{G:u,ctx:d,_undo:f,_redo:g,_stateID:x}=o;if(f.length<2)return yt("No moves to undo"),pr(o,Jn.ActionInvalid);const w=f[f.length-1],S=f[f.length-2];if(ah(i)&&i.payload.playerID!==w.playerID)return yt("Cannot undo other players' moves"),pr(o,Jn.ActionInvalid);if(w.moveType){const C=r.flow.getMove(S.ctx,w.moveType,w.playerID);if(!Tv(u,d,C))return yt("Move cannot be undone"),pr(o,Jn.ActionInvalid)}return o=Zf(o,i),{...o,G:S.G,ctx:S.ctx,plugins:S.plugins,_stateID:x+1,_undo:f.slice(0,-1),_redo:[w,...g]}}case Hh:{if(o={...o,deltalog:[]},r.disableUndo)return yt("Redo is not enabled"),pr(o,Jn.ActionDisabled);const{_undo:u,_redo:d,_stateID:f}=o;if(d.length===0)return yt("No moves to redo"),pr(o,Jn.ActionInvalid);const g=d[0];return ah(i)&&i.payload.playerID!==g.playerID?(yt("Cannot redo other players' moves"),pr(o,Jn.ActionInvalid)):(o=Zf(o,i),{...o,G:g.G,ctx:g.ctx,plugins:g.plugins,_stateID:f+1,_undo:[...u,g],_redo:d.slice(1)})}case f1:return mv(o,i,{game:r});case f0:{const u=o,d=JSON.parse(JSON.stringify(u)),f=N1.applyPatch(d,i.patch);return f.some(x=>x!==null)?(yt(`Patch ${JSON.stringify(i.patch)} apply failed`),pr(u,Ap.PatchFailed,f)):d}default:return o}}}var tp={},Ug;function Nv(){return Ug||(Ug=1,(function(r,e){if(r.setImmediate)return;var t=1,i={},o=!1,u=r.document,d;function f(T){typeof T!="function"&&(T=new Function(""+T));for(var O=new Array(arguments.length-1),z=0;z<O.length;z++)O[z]=arguments[z+1];var J={callback:T,args:O};return i[t]=J,d(t),t++}function g(T){delete i[T]}function x(T){var O=T.callback,z=T.args;switch(z.length){case 0:O();break;case 1:O(z[0]);break;case 2:O(z[0],z[1]);break;case 3:O(z[0],z[1],z[2]);break;default:O.apply(e,z);break}}function w(T){if(o)setTimeout(w,0,T);else{var O=i[T];if(O){o=!0;try{x(O)}finally{g(T),o=!1}}}}function S(){d=function(T){process.nextTick(function(){w(T)})}}function C(){if(r.postMessage&&!r.importScripts){var T=!0,O=r.onmessage;return r.onmessage=function(){T=!1},r.postMessage("","*"),r.onmessage=O,T}}function b(){var T="setImmediate$"+Math.random()+"$",O=function(z){z.source===r&&typeof z.data=="string"&&z.data.indexOf(T)===0&&w(+z.data.slice(T.length))};r.addEventListener?r.addEventListener("message",O,!1):r.attachEvent("onmessage",O),d=function(z){r.postMessage(T+z,"*")}}function P(){var T=new MessageChannel;T.port1.onmessage=function(O){var z=O.data;w(z)},d=function(O){T.port2.postMessage(O)}}function A(){var T=u.documentElement;d=function(O){var z=u.createElement("script");z.onreadystatechange=function(){w(O),z.onreadystatechange=null,T.removeChild(z),z=null},T.appendChild(z)}}function R(){d=function(T){setTimeout(w,0,T)}}var I=Object.getPrototypeOf&&Object.getPrototypeOf(r);I=I&&I.setTimeout?I:r,{}.toString.call(r.process)==="[object process]"?S():C()?b():r.MessageChannel?P():u&&"onreadystatechange"in u.createElement("script")?A():R(),I.setImmediate=f,I.clearImmediate=g})(typeof self>"u"?typeof gg>"u"?tp:gg:self)),tp}Nv();class Rv{constructor({enumerate:e,seed:t}){this.enumerateFn=e,this.seed=t,this.iterationCounter=0,this._opts={}}addOpt({key:e,range:t,initial:i}){this._opts[e]={range:t,value:i}}getOpt(e){return this._opts[e].value}setOpt(e,t){e in this._opts&&(this._opts[e].value=t)}opts(){return this._opts}enumerate(e,t,i){return this.enumerateFn(e,t,i).map(u=>{if("payload"in u)return u;if("move"in u)return p1(u.move,u.args,i);if("event"in u)return Nc(u.event,u.args,i)})}random(e){let t;if(this.seed!==void 0){const i=this.prngstate?"":this.seed,o=h1(i,this.prngstate);t=o(),this.prngstate=o.state()}else t=Math.random();if(e)if(Array.isArray(e)){const i=Math.floor(t*e.length);return e[i]}else return Math.floor(t*e);return t}}const Mv=25;class Iv extends Rv{constructor({enumerate:e,seed:t,objectives:i,game:o,iterations:u,playoutDepth:d,iterationCallback:f}){super({enumerate:e,seed:t}),i===void 0&&(i=()=>({})),this.objectives=i,this.iterationCallback=f||(()=>{}),this.reducer=m0({game:o}),this.iterations=u,this.playoutDepth=d,this.addOpt({key:"async",initial:!1}),this.addOpt({key:"iterations",initial:typeof u=="number"?u:1e3,range:{min:1,max:2e3}}),this.addOpt({key:"playoutDepth",initial:typeof d=="number"?d:50,range:{min:1,max:100}})}createNode({state:e,parentAction:t,parent:i,playerID:o}){const{G:u,ctx:d}=e;let f=[],g=[];if(o!==void 0)f=this.enumerate(u,d,o),g=this.objectives(u,d,o);else if(d.activePlayers)for(const x in d.activePlayers)f.push(...this.enumerate(u,d,x)),g.push(this.objectives(u,d,x));else f=this.enumerate(u,d,d.currentPlayer),g=this.objectives(u,d,d.currentPlayer);return{state:e,parent:i,parentAction:t,actions:f,objectives:g,children:[],visits:0,value:0}}select(e){if(e.actions.length>0||e.children.length===0)return e;let t=null,i=0;for(const o of e.children){const u=o.visits+Number.EPSILON,d=o.value/u+Math.sqrt(2*Math.log(e.visits)/u);(t==null||d>i)&&(i=d,t=o)}return this.select(t)}expand(e){const t=e.actions;if(t.length===0||e.state.ctx.gameover!==void 0)return e;const i=this.random(t.length),o=t[i];e.actions.splice(i,1);const u=this.reducer(e.state,o),d=this.createNode({state:u,parentAction:o,parent:e});return e.children.push(d),d}playout({state:e}){let t=this.getOpt("playoutDepth");typeof this.playoutDepth=="function"&&(t=this.playoutDepth(e.G,e.ctx));for(let i=0;i<t&&e.ctx.gameover===void 0;i++){const{G:o,ctx:u}=e;let d=u.currentPlayer;u.activePlayers&&(d=Object.keys(u.activePlayers)[0]);const f=this.enumerate(o,u,d),g=this.objectives(o,u,d),x=Object.keys(g).reduce((C,b)=>{const P=g[b];return P.checker(o,u)?C+P.weight:C},0);if(x>0)return{score:x};if(!f||f.length===0)return;const w=this.random(f.length);e=this.reducer(e,f[w])}return e.ctx.gameover}backpropagate(e,t={}){e.visits++,t.score!==void 0&&(e.value+=t.score),t.draw===!0&&(e.value+=.5),e.parentAction&&t.winner===e.parentAction.payload.playerID&&e.value++,e.parent&&this.backpropagate(e.parent,t)}play(e,t){const i=this.createNode({state:e,playerID:t});let o=this.getOpt("iterations");typeof this.iterations=="function"&&(o=this.iterations(e.G,e.ctx));const u=()=>{let d=null;for(const x of i.children)(d==null||x.visits>d.visits)&&(d=x);return{action:d&&d.parentAction,metadata:i}};return new Promise(d=>{const f=()=>{for(let g=0;g<Mv&&this.iterationCounter<o;g++){const x=this.select(i),w=this.expand(x),S=this.playout(w);this.backpropagate(w,S),this.iterationCounter++}this.iterationCallback({iterationCounter:this.iterationCounter,numIterations:o,metadata:i})};if(this.iterationCounter=0,this.getOpt("async")){const g=()=>{this.iterationCounter<o?(f(),setImmediate(g)):d(u())};g()}else{for(;this.iterationCounter<o;)f();d(u())}})}}function jc(r){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(r)}function Av(r,e){if(jc(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(jc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ov(r){var e=Av(r,"string");return jc(e)=="symbol"?e:e+""}function Lv(r,e,t){return(e=Ov(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Wg(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,i)}return t}function Hg(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wg(Object(t),!0).forEach(function(i){Lv(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wg(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function jr(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Vg=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),qg=function(){return Math.random().toString(36).substring(7).split("").join(".")},Yg={INIT:"@@redux/INIT"+qg(),REPLACE:"@@redux/REPLACE"+qg()};function Dv(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function y0(r,e,t){var i;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(jr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(jr(1));return t(y0)(r,e)}if(typeof r!="function")throw new Error(jr(2));var o=r,u=e,d=[],f=d,g=!1;function x(){f===d&&(f=d.slice())}function w(){if(g)throw new Error(jr(3));return u}function S(A){if(typeof A!="function")throw new Error(jr(4));if(g)throw new Error(jr(5));var R=!0;return x(),f.push(A),function(){if(R){if(g)throw new Error(jr(6));R=!1,x();var T=f.indexOf(A);f.splice(T,1),d=null}}}function C(A){if(!Dv(A))throw new Error(jr(7));if(typeof A.type>"u")throw new Error(jr(8));if(g)throw new Error(jr(9));try{g=!0,u=o(u,A)}finally{g=!1}for(var R=d=f,I=0;I<R.length;I++){var T=R[I];T()}return A}function b(A){if(typeof A!="function")throw new Error(jr(10));o=A,C({type:Yg.REPLACE})}function P(){var A,R=S;return A={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(jr(11));function O(){T.next&&T.next(w())}O();var z=R(O);return{unsubscribe:z}}},A[Vg]=function(){return this},A}return C({type:Yg.INIT}),i={dispatch:C,subscribe:S,getState:w,replaceReducer:b},i[Vg]=P,i}function A1(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,o){return function(){return i(o.apply(void 0,arguments))}})}function O1(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(i){return function(){var o=i.apply(void 0,arguments),u=function(){throw new Error(jr(15))},d={getState:o.getState,dispatch:function(){return u.apply(void 0,arguments)}},f=e.map(function(g){return g(d)});return u=A1.apply(void 0,f)(o.dispatch),Hg(Hg({},o),{},{dispatch:u})}}}function L1({game:r,numPlayers:e,setupData:t}){r=Yh(r),e||(e=2);const i=r.flow.ctx(e);let o={G:{},ctx:i,plugins:{}};o=yv(o,{game:r}),o=Rp(o,{game:r,playerID:void 0});const u=ru(o);o.G=r.setup({...u,ctx:o.ctx},t);let d={...o,_undo:[],_redo:[],_stateID:0};return d=r.flow.init(d),[d]=C1(d,{game:r}),r.disableUndo||(d._undo=[{G:d.G,ctx:d.ctx,plugins:d.plugins}]),d}let v0=class{constructor({transportDataCallback:e,gameName:t,playerID:i,matchID:o,credentials:u,numPlayers:d}){this.connectionStatusCallback=()=>{},this.isConnected=!1,this.transportDataCallback=e,this.gameName=t||"default",this.playerID=i||null,this.matchID=o||"default",this.credentials=u,this.numPlayers=d||2}subscribeToConnectionStatus(e){this.connectionStatusCallback=e}setConnectionStatus(e){this.isConnected=e,this.connectionStatusCallback()}notifyClient(e){this.transportDataCallback(e)}};class jv extends v0{connect(){}disconnect(){}sendAction(){}sendChatMessage(){}requestSync(){}updateCredentials(){}updateMatchID(){}updatePlayerID(){}}const zv=r=>new jv(r);class Fv{constructor(){this.debugPanel=null,this.currentClient=null,this.clients=new Map,this.subscribers=new Map}register(e){this.clients.set(e,e),this.mountDebug(e),this.notifySubscribers()}unregister(e){if(this.clients.delete(e),this.currentClient===e){this.unmountDebug();for(const[t]of this.clients){if(this.debugPanel)break;this.mountDebug(t)}}this.notifySubscribers()}subscribe(e){const t=Symbol();return this.subscribers.set(t,e),e(this.getState()),()=>{this.subscribers.delete(t)}}switchPlayerID(e){if(this.currentClient.multiplayer){for(const[t]of this.clients)if(t.playerID===e&&t.debugOpt!==!1&&t.multiplayer===this.currentClient.multiplayer){this.switchToClient(t);return}}this.currentClient.updatePlayerID(e),this.notifySubscribers()}switchToClient(e){e!==this.currentClient&&(this.unmountDebug(),this.mountDebug(e),this.notifySubscribers())}notifySubscribers(){const e=this.getState();this.subscribers.forEach(t=>{t(e)})}getState(){return{client:this.currentClient,debuggableClients:this.getDebuggableClients()}}getDebuggableClients(){return[...this.clients.values()].filter(e=>e.debugOpt!==!1)}mountDebug(e){if(e.debugOpt===!1||this.debugPanel!==null||typeof document>"u")return;let t,i=document.body;e.debugOpt&&e.debugOpt!==!0&&(t=e.debugOpt.impl||t,i=e.debugOpt.target||i),t&&(this.currentClient=e,this.debugPanel=new t({target:i,props:{clientManager:this}}))}unmountDebug(){this.debugPanel.$destroy(),this.debugPanel=null,this.currentClient=null}}const Bv=new Fv;function Op(r,e,t){return!t&&r==null&&(r=e.getState().ctx.currentPlayer),r}function x0(r,e,t,i,o,u){const d={};for(const f of e)d[f]=(...g)=>{const x=cv[r](f,g,Op(i,t,u),o);t.dispatch(x)};return d}const Gv=x0.bind(null,"makeMove"),Uv=x0.bind(null,"gameEvent"),Wv=x0.bind(null,"plugin");class Hv{constructor({game:e,debug:t,numPlayers:i,multiplayer:o,matchID:u,playerID:d,credentials:f,enhancer:g}){this.game=Yh(e),this.playerID=d,this.matchID=u||"default",this.credentials=f,this.multiplayer=o,this.debugOpt=t,this.manager=Bv,this.gameStateOverride=null,this.subscribers={},this._running=!1,this.reducer=m0({game:this.game,isClient:o!==void 0}),this.initialState=null,o||(this.initialState=L1({game:this.game,numPlayers:i})),this.reset=()=>{this.store.dispatch(x1(this.initialState))},this.undo=()=>{const b=w1(Op(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(b)},this.redo=()=>{const b=_1(Op(this.playerID,this.store,this.multiplayer),this.credentials);this.store.dispatch(b)},this.log=[];const C=O1(I1,()=>b=>P=>{const A=b(P);return this.notifySubscribers(),A},b=>P=>A=>{const R=b.getState(),I=P(A);return!("clientOnly"in A)&&A.type!==qh&&this.transport.sendAction(R,A),I},b=>P=>A=>{const R=P(A),I=b.getState();switch(A.type){case Dc:case Wh:case Vh:case Hh:{const T=I.deltalog;this.log=[...this.log,...T];break}case c0:{this.log=[];break}case f0:case h0:{let T=-1;this.log.length>0&&(T=this.log[this.log.length-1]._stateID);let O=A.deltalog||[];O=O.filter(z=>z._stateID>T),this.log=[...this.log,...O];break}case d0:{this.initialState=A.initialState,this.log=A.log||[];break}}return R});g=g!==void 0?A1(C,g):C,this.store=y0(this.reducer,this.initialState,g),o||(o=zv),this.transport=o({transportDataCallback:b=>this.receiveTransportData(b),gameKey:e,game:this.game,matchID:u,playerID:d,credentials:f,gameName:this.game.name,numPlayers:i}),this.createDispatchers(),this.chatMessages=[],this.sendChatMessage=b=>{this.transport.sendChatMessage(this.matchID,{id:q2(7),sender:this.playerID,payload:b})}}receiveMatchData(e){this.matchData=e,this.notifySubscribers()}receiveChatMessage(e){this.chatMessages=[...this.chatMessages,e],this.notifySubscribers()}receiveTransportData(e){const[t]=e.args;if(t===this.matchID)switch(e.type){case"sync":{const[,i]=e.args,o=m1(i);this.receiveMatchData(i.filteredMetadata),this.store.dispatch(o);break}case"update":{const[,i,o]=e.args,u=this.store.getState();if(i._stateID>=u._stateID){const d=v1(i,o);this.store.dispatch(d)}break}case"patch":{const[,i,o,u,d]=e.args,f=this.store.getState()._stateID;if(i!==f)break;const g=y1(i,o,u,d);this.store.dispatch(g),this.store.getState()._stateID===f&&this.transport.requestSync();break}case"matchData":{const[,i]=e.args;this.receiveMatchData(i);break}case"chat":{const[,i]=e.args;this.receiveChatMessage(i);break}}}notifySubscribers(){Object.values(this.subscribers).forEach(e=>e(this.getState()))}overrideGameState(e){this.gameStateOverride=e,this.notifySubscribers()}start(){this.transport.connect(),this._running=!0,this.manager.register(this)}stop(){this.transport.disconnect(),this._running=!1,this.manager.unregister(this)}subscribe(e){const t=Object.keys(this.subscribers).length;return this.subscribers[t]=e,this.transport.subscribeToConnectionStatus(()=>this.notifySubscribers()),(this._running||!this.multiplayer)&&e(this.getState()),()=>{delete this.subscribers[t]}}getInitialState(){return this.initialState}getState(){let e=this.store.getState();if(this.gameStateOverride!==null&&(e=this.gameStateOverride),e===null)return e;let t=!0;const i=this.game.flow.isPlayerActive(e.G,e.ctx,this.playerID);return this.multiplayer&&!i&&(t=!1),!this.multiplayer&&this.playerID!==null&&this.playerID!==void 0&&!i&&(t=!1),e.ctx.gameover!==void 0&&(t=!1),this.multiplayer||(e={...e,G:this.game.playerView({G:e.G,ctx:e.ctx,playerID:this.playerID}),plugins:E1(e,this)}),{...e,log:this.log,isActive:t,isConnected:this.transport.isConnected}}createDispatchers(){this.moves=Gv(this.game.moveNames,this.store,this.playerID,this.credentials,this.multiplayer),this.events=Uv(this.game.flow.enabledEventNames,this.store,this.playerID,this.credentials,this.multiplayer),this.plugins=Wv(this.game.pluginNames,this.store,this.playerID,this.credentials,this.multiplayer)}updatePlayerID(e){this.playerID=e,this.createDispatchers(),this.transport.updatePlayerID(e),this.notifySubscribers()}updateMatchID(e){this.matchID=e,this.createDispatchers(),this.transport.updateMatchID(e),this.notifySubscribers()}updateCredentials(e){this.credentials=e,this.createDispatchers(),this.transport.updateCredentials(e),this.notifySubscribers()}}function Vv(r){return new Hv(r)}const D1=(r,e)=>{if(!r||typeof r!="string")throw new Error(`Expected ${e} string, got "${r}".`)},Aa=r=>D1(r,"game name"),dc=r=>D1(r,"match ID"),hc=(r,e)=>{if(!r)throw new Error(`Expected body, got ${r}.`);for(const t in e){const i=e[t],o=Array.isArray(i)?i:[i],u=r[t];if(!o.includes(typeof u)){const d=o.join("|");throw new TypeError(`Expected body.${t} to be of type ${d}, got ${u}.`)}}};class qv extends Error{constructor(e,t){super(e),this.details=t}}class j1{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){const i=await fetch(this.server+e,t);if(!i.ok){let o;try{o=await i.clone().json()}catch{try{o=await i.text()}catch(u){o=u.message}}throw new qv(`HTTP status ${i.status}`,o)}return i.json()}async post(e,t){let i={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(i={...i,...t.init,headers:{...i.headers,...t.init.headers}}),this.request(e,i)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,i){Aa(e);let o="";if(t){const u=[],{isGameover:d,updatedBefore:f,updatedAfter:g}=t;d!==void 0&&u.push(`isGameover=${d}`),f&&u.push(`updatedBefore=${f}`),g&&u.push(`updatedAfter=${g}`),u.length>0&&(o="?"+u.join("&"))}return this.request(`/games/${e}${o}`,i)}async getMatch(e,t,i){return Aa(e),dc(t),this.request(`/games/${e}/${t}`,i)}async createMatch(e,t,i){return Aa(e),hc(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:i})}async joinMatch(e,t,i,o){return Aa(e),dc(t),hc(i,{playerID:["string","undefined"],playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:i,init:o})}async leaveMatch(e,t,i,o){Aa(e),dc(t),hc(i,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:i,init:o})}async updatePlayer(e,t,i,o){Aa(e),dc(t),hc(i,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:i,init:o})}async playAgain(e,t,i,o){return Aa(e),dc(t),hc(i,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:i,init:o})}}var np={exports:{}},rp,Xg;function Yv(){if(Xg)return rp;Xg=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return rp=r,rp}var ip,Qg;function Xv(){if(Qg)return ip;Qg=1;var r=Yv();function e(){}function t(){}return t.resetWarningCache=e,ip=function(){function i(d,f,g,x,w,S){if(S!==r){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}i.isRequired=i;function o(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return u.PropTypes=u,u},ip}var Kg;function Qv(){return Kg||(Kg=1,np.exports=Xv()()),np.exports}var Kv=Qv();const ts=Gh(Kv);var bi={},lh={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var $g;function $v(){if($g)return lh;$g=1,lh.parse=o,lh.serialize=u;var r=decodeURIComponent,e=encodeURIComponent,t=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(f,g){if(typeof f!="string")throw new TypeError("argument str must be a string");for(var x={},w=g||{},S=f.split(t),C=w.decode||r,b=0;b<S.length;b++){var P=S[b],A=P.indexOf("=");if(!(A<0)){var R=P.substr(0,A).trim(),I=P.substr(++A,P.length).trim();I[0]=='"'&&(I=I.slice(1,-1)),x[R]==null&&(x[R]=d(I,C))}}return x}function u(f,g,x){var w=x||{},S=w.encode||e;if(typeof S!="function")throw new TypeError("option encode is invalid");if(!i.test(f))throw new TypeError("argument name is invalid");var C=S(g);if(C&&!i.test(C))throw new TypeError("argument val is invalid");var b=f+"="+C;if(w.maxAge!=null){var P=w.maxAge-0;if(isNaN(P))throw new Error("maxAge should be a Number");b+="; Max-Age="+Math.floor(P)}if(w.domain){if(!i.test(w.domain))throw new TypeError("option domain is invalid");b+="; Domain="+w.domain}if(w.path){if(!i.test(w.path))throw new TypeError("option path is invalid");b+="; Path="+w.path}if(w.expires){if(typeof w.expires.toUTCString!="function")throw new TypeError("option expires is invalid");b+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(b+="; HttpOnly"),w.secure&&(b+="; Secure"),w.sameSite){var A=typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite;switch(A){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return b}function d(f,g){try{return g(f)}catch{return f}}return lh}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var sp,Jg;function Jv(){if(Jg)return sp;Jg=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(u){if(u==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(u)}function o(){try{if(!Object.assign)return!1;var u=new String("abc");if(u[5]="de",Object.getOwnPropertyNames(u)[0]==="5")return!1;for(var d={},f=0;f<10;f++)d["_"+String.fromCharCode(f)]=f;var g=Object.getOwnPropertyNames(d).map(function(w){return d[w]});if(g.join("")!=="0123456789")return!1;var x={};return"abcdefghijklmnopqrst".split("").forEach(function(w){x[w]=w}),Object.keys(Object.assign({},x)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return sp=o()?Object.assign:function(u,d){for(var f,g=i(u),x,w=1;w<arguments.length;w++){f=Object(arguments[w]);for(var S in f)e.call(f,S)&&(g[S]=f[S]);if(r){x=r(f);for(var C=0;C<x.length;C++)t.call(f,x[C])&&(g[x[C]]=f[x[C]])}}return g},sp}var Zg;function Zv(){if(Zg)return bi;Zg=1;var r={};Object.defineProperty(bi,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};bi.load=S,bi.loadAll=C,bi.select=b,bi.save=P,bi.remove=A,bi.setRawCookie=R,bi.plugToRequest=I;var t=$v(),i=d(t),o=Jv(),u=d(o);function d(T){return T&&T.__esModule?T:{default:T}}var f=typeof document>"u"||typeof process<"u"&&r&&!1,g={},x=void 0;function w(){return x&&!x.headersSent}function S(T,O){var z=f?g:i.default.parse(document.cookie),J=z&&z[T];if(typeof O>"u"&&(O=!J||J[0]!=="{"&&J[0]!=="["),!O)try{J=JSON.parse(J)}catch{}return J}function C(T){var O=f?g:i.default.parse(document.cookie),z=O;if(typeof T>"u"&&(T=!z||z[0]!=="{"&&z[0]!=="["),!T)try{z=JSON.parse(z)}catch{}return z}function b(T){var O=f?g:i.default.parse(document.cookie);return O?T?Object.keys(O).reduce(function(z,J){if(!T.test(J))return z;var te={};return te[J]=O[J],(0,u.default)({},z,te)},{}):O:{}}function P(T,O,z){g[T]=O,(typeof O>"u"?"undefined":e(O))==="object"&&(g[T]=JSON.stringify(O)),f||(document.cookie=i.default.serialize(T,g[T],z)),w()&&x.cookie&&x.cookie(T,O,z)}function A(T,O){delete g[T],typeof O>"u"?O={}:typeof O=="string"?O={path:O}:O=(0,u.default)({},O),typeof document<"u"&&(O.expires=new Date(1970,1,1,0,0,1),O.maxAge=0,document.cookie=i.default.serialize(T,"",O)),w()&&x.clearCookie&&x.clearCookie(T,O)}function R(T){T?g=i.default.parse(T):g={}}function I(T,O){return T.cookie?g=T.cookie:T.cookies?g=T.cookies:T.headers&&T.headers.cookie?R(T.headers.cookie):g={},x=O,function(){x=null,g={}}}return bi.default={setRawCookie:R,load:S,loadAll:C,select:b,save:P,remove:A,plugToRequest:I},bi}var e4=Zv();const em=Gh(e4);var jh;(function(r){r[r.SYNC=0]="SYNC",r[r.ASYNC=1]="ASYNC"})(jh||(jh={}));function Oa(r){return r.type()===jh.SYNC}class t4{type(){return jh.SYNC}connect(){}createMatch(e,t){if(this.createGame)return console.warn("The database connector does not implement a createMatch method.",`
Using the deprecated createGame method instead.`),this.createGame(e,t);console.error("The database connector does not implement a createMatch method.")}listMatches(e){if(this.listGames)return console.warn("The database connector does not implement a listMatches method.",`
Using the deprecated listGames method instead.`),this.listGames(e);console.error("The database connector does not implement a listMatches method.")}}const n4=({game:r,unlisted:e,setupData:t,numPlayers:i})=>{const o={gameName:r.name,unlisted:!0,players:{},createdAt:Date.now(),updatedAt:Date.now()};for(let u=0;u<i;u++)o.players[u]={id:u};return o},r4=({game:r,numPlayers:e,setupData:t,unlisted:i})=>{(!e||typeof e!="number")&&(e=2);const o=r.validateSetupData&&r.validateSetupData(t,e);if(o!==void 0)return{setupDataError:o};const u=n4({game:r,numPlayers:e,setupData:t,unlisted:i}),d=L1({game:r,numPlayers:e,setupData:t});return{metadata:u,initialState:d}},tm=r=>Object.values(r.players).map(e=>{const{credentials:t,...i}=e;return i}),i4=r=>{const{credentials:e,...t}=r.payload;return{...r,payload:t}};class s4{constructor(e,t,i,o){this.game=Yh(e),this.storageAPI=t,this.transportAPI=i,this.subscribeCallback=()=>{},this.auth=o}subscribe(e){this.subscribeCallback=e}async onUpdate(e,t,i,o){if(!e||!e.payload)return{error:"missing action or action payload"};let u;if(Oa(this.storageAPI)?{metadata:u}=this.storageAPI.fetch(i,{metadata:!0}):{metadata:u}=await this.storageAPI.fetch(i,{metadata:!0}),this.auth&&!await this.auth.authenticateCredentials({playerID:o,credentials:e.payload.credentials,metadata:u}))return{error:"unauthorized action"};const d=i4(e),f=i;let g;if(Oa(this.storageAPI)?{state:g}=this.storageAPI.fetch(f,{state:!0}):{state:g}=await this.storageAPI.fetch(f,{state:!0}),g===void 0)return yt(`game not found, matchID=[${f}]`),{error:"game not found"};if(g.ctx.gameover!==void 0){yt(`game over - matchID=[${f}] - playerID=[${o}] - action[${d.payload.type}]`);return}const x=m0({game:this.game}),w=O1(I1),S=y0(x,g,w);if(d.type==Vh||d.type==Hh){const I=g.ctx.activePlayers!==null,T=g.ctx.currentPlayer===o;if(!I&&!T||I&&(g.ctx.activePlayers[o]===void 0||Object.keys(g.ctx.activePlayers).length>1)){yt(`playerID=[${o}] cannot undo / redo right now`);return}}if(!this.game.flow.isPlayerActive(g.G,g.ctx,o)){yt(`player not active - playerID=[${o}] - action[${d.payload.type}]`);return}const C=d.type==Dc?this.game.flow.getMove(g.ctx,d.payload.type,o):null;if(d.type==Dc&&!C){yt(`move not processed - canPlayerMakeMove=false - playerID=[${o}] - action[${d.payload.type}]`);return}if(g._stateID!==t&&!(C&&R1(C)&&C.ignoreStaleStateID)){yt(`invalid stateID, was=[${t}], expected=[${g._stateID}] - playerID=[${o}] - action[${d.payload.type}]`);return}const b=S.getState();S.dispatch(d),g=S.getState(),this.subscribeCallback({state:g,action:d,matchID:i}),this.game.deltaState?this.transportAPI.sendAll({type:"patch",args:[i,t,b,g]}):this.transportAPI.sendAll({type:"update",args:[i,g]});const{deltalog:P,...A}=g;let R;if(u&&(u.gameover===void 0||u.gameover===null)&&(R={...u,updatedAt:Date.now()},g.ctx.gameover!==void 0&&(R.gameover=g.ctx.gameover)),Oa(this.storageAPI))this.storageAPI.setState(f,A,P),R&&this.storageAPI.setMetadata(f,R);else{const I=[this.storageAPI.setState(f,A,P)];R&&I.push(this.storageAPI.setMetadata(f,R)),await Promise.all(I)}}async onSync(e,t,i,o=2){const u=e,d={state:!0,metadata:!0,log:!0,initialState:!0},f=Oa(this.storageAPI)?this.storageAPI.fetch(u,d):await this.storageAPI.fetch(u,d);let{state:g,initialState:x,log:w,metadata:S}=f;if(this.auth&&t!==void 0&&t!==null&&!await this.auth.authenticateCredentials({playerID:t,credentials:i,metadata:S}))return{error:"unauthorized"};if(g===void 0){const P=r4({game:this.game,unlisted:!0,numPlayers:o,setupData:void 0});if("setupDataError"in P)return{error:"game requires setupData"};x=g=P.initialState,S=P.metadata,this.subscribeCallback({state:g,matchID:e}),Oa(this.storageAPI)?this.storageAPI.createMatch(u,{initialState:x,metadata:S}):await this.storageAPI.createMatch(u,{initialState:x,metadata:S})}const C=S?tm(S):void 0,b={state:g,log:w,filteredMetadata:C,initialState:x};this.transportAPI.send({playerID:t,type:"sync",args:[e,b]})}async onConnectionChange(e,t,i,o){const u=e;if(t==null)return;let d;if(Oa(this.storageAPI)?{metadata:d}=this.storageAPI.fetch(u,{metadata:!0}):{metadata:d}=await this.storageAPI.fetch(u,{metadata:!0}),d===void 0)return yt(`metadata not found for matchID=[${u}]`),{error:"metadata not found"};if(d.players[t]===void 0)return yt(`Player not in the match, matchID=[${u}] playerID=[${t}]`),{error:"player not in the match"};if(this.auth&&!await this.auth.authenticateCredentials({playerID:t,credentials:i,metadata:d}))return{error:"unauthorized"};d.players[t].isConnected=o;const f=tm(d);this.transportAPI.sendAll({type:"matchData",args:[e,f]}),Oa(this.storageAPI)?this.storageAPI.setMetadata(u,d):await this.storageAPI.setMetadata(u,d)}async onChatMessage(e,t,i){const o=e;if(this.auth){const{metadata:u}=await this.storageAPI.fetch(o,{metadata:!0});if(!(t&&typeof t.sender=="string"))return{error:"unauthorized"};if(!await this.auth.authenticateCredentials({playerID:t.sender,credentials:i,metadata:u}))return{error:"unauthorized"}}this.transportAPI.sendAll({type:"chat",args:[e,t]})}}const uh=(r,e,t)=>({...t,G:r.playerView({G:t.G,ctx:t.ctx,playerID:e}),plugins:E1(t,{playerID:e,game:r}),deltalog:void 0,_undo:[],_redo:[]}),o4=r=>(e,t)=>{switch(t.type){case"patch":{const[i,o,u,d]=t.args,f=op(d.deltalog,e),g=uh(r,e,d),x=d._stateID,w=uh(r,e,u),S=N1.createPatch(w,g);return{type:"patch",args:[i,o,x,S,f]}}case"update":{const[i,o]=t.args,u=op(o.deltalog,e),d=uh(r,e,o);return{type:"update",args:[i,d,u]}}case"sync":{const[i,o]=t.args,u=uh(r,e,o.state),d=op(o.log,e),f={...o,state:u,log:d};return{type:"sync",args:[i,f]}}default:return t}};function op(r,e){return r===void 0?r:r.map(t=>{if(e!==null&&+e==+t.action.payload.playerID||t.redact!==!0)return t;const i={...t.action.payload,args:null},o={...t,action:{...t.action,payload:i}},{redact:u,...d}=o;return d})}const ss=Object.create(null);ss.open="0";ss.close="1";ss.ping="2";ss.pong="3";ss.message="4";ss.upgrade="5";ss.noop="6";const Eh=Object.create(null);Object.keys(ss).forEach(r=>{Eh[ss[r]]=r});const Lp={type:"error",data:"parser error"},z1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",F1=typeof ArrayBuffer=="function",B1=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,w0=({type:r,data:e},t,i)=>z1&&e instanceof Blob?t?i(e):nm(e,i):F1&&(e instanceof ArrayBuffer||B1(e))?t?i(e):nm(new Blob([e]),i):i(ss[r]+(e||"")),nm=(r,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(r)};function rm(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let ap;function a4(r,e){if(z1&&r.data instanceof Blob)return r.data.arrayBuffer().then(rm).then(e);if(F1&&(r.data instanceof ArrayBuffer||B1(r.data)))return e(rm(r.data));w0(r,!1,t=>{ap||(ap=new TextEncoder),e(ap.encode(t))})}const im="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<im.length;r++)Sc[im.charCodeAt(r)]=r;const l4=r=>{let e=r.length*.75,t=r.length,i,o=0,u,d,f,g;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const x=new ArrayBuffer(e),w=new Uint8Array(x);for(i=0;i<t;i+=4)u=Sc[r.charCodeAt(i)],d=Sc[r.charCodeAt(i+1)],f=Sc[r.charCodeAt(i+2)],g=Sc[r.charCodeAt(i+3)],w[o++]=u<<2|d>>4,w[o++]=(d&15)<<4|f>>2,w[o++]=(f&3)<<6|g&63;return x},u4=typeof ArrayBuffer=="function",_0=(r,e)=>{if(typeof r!="string")return{type:"message",data:G1(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:c4(r.substring(1),e)}:Eh[t]?r.length>1?{type:Eh[t],data:r.substring(1)}:{type:Eh[t]}:Lp},c4=(r,e)=>{if(u4){const t=l4(r);return G1(t,e)}else return{base64:!0,data:r}},G1=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},U1="",d4=(r,e)=>{const t=r.length,i=new Array(t);let o=0;r.forEach((u,d)=>{w0(u,!1,f=>{i[d]=f,++o===t&&e(i.join(U1))})})},h4=(r,e)=>{const t=r.split(U1),i=[];for(let o=0;o<t.length;o++){const u=_0(t[o],e);if(i.push(u),u.type==="error")break}return i};function f4(){return new TransformStream({transform(r,e){a4(r,t=>{const i=t.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(t)})}})}let lp;function ch(r){return r.reduce((e,t)=>e+t.length,0)}function dh(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let i=0;for(let o=0;o<e;o++)t[o]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),t}function p4(r,e){lp||(lp=new TextDecoder);const t=[];let i=0,o=-1,u=!1;return new TransformStream({transform(d,f){for(t.push(d);;){if(i===0){if(ch(t)<1)break;const g=dh(t,1);u=(g[0]&128)===128,o=g[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(ch(t)<2)break;const g=dh(t,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),i=3}else if(i===2){if(ch(t)<8)break;const g=dh(t,8),x=new DataView(g.buffer,g.byteOffset,g.length),w=x.getUint32(0);if(w>Math.pow(2,21)-1){f.enqueue(Lp);break}o=w*Math.pow(2,32)+x.getUint32(4),i=3}else{if(ch(t)<o)break;const g=dh(t,o);f.enqueue(_0(u?g:lp.decode(g),e)),i=0}if(o===0||o>r){f.enqueue(Lp);break}}}})}const W1=4;function hn(r){if(r)return g4(r)}function g4(r){for(var e in hn.prototype)r[e]=hn.prototype[e];return r}hn.prototype.on=hn.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};hn.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};hn.prototype.off=hn.prototype.removeListener=hn.prototype.removeAllListeners=hn.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,o=0;o<t.length;o++)if(i=t[o],i===e||i.fn===e){t.splice(o,1);break}return t.length===0&&delete this._callbacks["$"+r],this};hn.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,o=t.length;i<o;++i)t[i].apply(this,e)}return this};hn.prototype.emitReserved=hn.prototype.emit;hn.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};hn.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Xh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),li=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),m4="arraybuffer";function H1(r,...e){return e.reduce((t,i)=>(r.hasOwnProperty(i)&&(t[i]=r[i]),t),{})}const y4=li.setTimeout,v4=li.clearTimeout;function Qh(r,e){e.useNativeTimers?(r.setTimeoutFn=y4.bind(li),r.clearTimeoutFn=v4.bind(li)):(r.setTimeoutFn=li.setTimeout.bind(li),r.clearTimeoutFn=li.clearTimeout.bind(li))}const x4=1.33;function w4(r){return typeof r=="string"?_4(r):Math.ceil((r.byteLength||r.size)*x4)}function _4(r){let e=0,t=0;for(let i=0,o=r.length;i<o;i++)e=r.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function V1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function S4(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function k4(r){let e={},t=r.split("&");for(let i=0,o=t.length;i<o;i++){let u=t[i].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class C4 extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class S0 extends hn{constructor(e){super(),this.writable=!1,Qh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new C4(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=_0(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=S4(e);return t.length?"?"+t:""}}class E4 extends S0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};h4(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,d4(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=V1()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let q1=!1;try{q1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const P4=q1;function b4(){}class T4 extends E4{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class rs extends hn{constructor(e,t,i){super(),this.createRequest=e,Qh(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=H1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=rs.requestsCount++,rs.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=b4,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rs.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}rs.requestsCount=0;rs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",sm);else if(typeof addEventListener=="function"){const r="onpagehide"in li?"pagehide":"unload";addEventListener(r,sm,!1)}}function sm(){for(let r in rs.requests)rs.requests.hasOwnProperty(r)&&rs.requests[r].abort()}const N4=(function(){const r=Y1({xdomain:!1});return r&&r.responseType!==null})();class R4 extends T4{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=N4&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new rs(Y1,this.uri(),e)}}function Y1(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||P4))return new XMLHttpRequest}catch{}if(!e)try{return new li[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const X1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class M4 extends S0{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=X1?{}:H1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],o=t===e.length-1;w0(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}o&&Xh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=V1()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const up=li.WebSocket||li.MozWebSocket;class I4 extends M4{createSocket(e,t,i){return X1?new up(e,t,i):t?new up(e,t):new up(e)}doWrite(e,t){this.ws.send(t)}}class A4 extends S0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=p4(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),o=f4();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const u=()=>{i.read().then(({done:f,value:g})=>{f||(this.onPacket(g),u())}).catch(f=>{})};u();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],o=t===e.length-1;this._writer.write(i).then(()=>{o&&Xh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const O4={websocket:I4,webtransport:A4,polling:R4},L4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,D4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dp(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),i=r.indexOf("]");t!=-1&&i!=-1&&(r=r.substring(0,t)+r.substring(t,i).replace(/:/g,";")+r.substring(i,r.length));let o=L4.exec(r||""),u={},d=14;for(;d--;)u[D4[d]]=o[d]||"";return t!=-1&&i!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=j4(u,u.path),u.queryKey=z4(u,u.query),u}function j4(r,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function z4(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,u){o&&(t[o]=u)}),t}const jp=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ph=[];jp&&addEventListener("offline",()=>{Ph.forEach(r=>r())},!1);class qo extends hn{constructor(e,t){if(super(),this.binaryType=m4,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=Dp(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=Dp(t.host).host);Qh(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=k4(this.opts.query)),jp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ph.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=W1,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&qo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",qo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(t+=w4(o)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Xh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,o){if(typeof t=="function"&&(o=t,t=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:e,data:t,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(qo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Ph.indexOf(this._offlineEventListener);i!==-1&&Ph.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}qo.protocol=W1;class F4 extends qo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;qo.priorWebsocketSuccess=!1;const o=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",S=>{if(!i)if(S.type==="pong"&&S.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;qo.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(w(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=t.name,this.emitReserved("upgradeError",C)}}))};function u(){i||(i=!0,w(),t.close(),t=null)}const d=S=>{const C=new Error("probe error: "+S);C.transport=t.name,u(),this.emitReserved("upgradeError",C)};function f(){d("transport closed")}function g(){d("socket closed")}function x(S){t&&S.name!==t.name&&u()}const w=()=>{t.removeListener("open",o),t.removeListener("error",d),t.removeListener("close",f),this.off("close",g),this.off("upgrading",x)};t.once("open",o),t.once("error",d),t.once("close",f),this.once("close",g),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let B4=class extends F4{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>O4[o]).filter(o=>!!o)),super(e,i)}};function G4(r,e="",t){let i=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),i=Dp(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+e,i.href=i.protocol+"://"+u+(t&&t.port===i.port?"":":"+i.port),i}const U4=typeof ArrayBuffer=="function",W4=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Q1=Object.prototype.toString,H4=typeof Blob=="function"||typeof Blob<"u"&&Q1.call(Blob)==="[object BlobConstructor]",V4=typeof File=="function"||typeof File<"u"&&Q1.call(File)==="[object FileConstructor]";function k0(r){return U4&&(r instanceof ArrayBuffer||W4(r))||H4&&r instanceof Blob||V4&&r instanceof File}function bh(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,i=r.length;t<i;t++)if(bh(r[t]))return!0;return!1}if(k0(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return bh(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&bh(r[t]))return!0;return!1}function q4(r){const e=[],t=r.data,i=r;return i.data=zp(t,e),i.attachments=e.length,{packet:i,buffers:e}}function zp(r,e){if(!r)return r;if(k0(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let i=0;i<r.length;i++)t[i]=zp(r[i],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=zp(r[i],e));return t}return r}function Y4(r,e){return r.data=Fp(r.data,e),delete r.attachments,r}function Fp(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=Fp(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=Fp(r[t],e));return r}const X4=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var lt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(lt||(lt={}));class Q4{constructor(e){this.replacer=e}encode(e){return(e.type===lt.EVENT||e.type===lt.ACK)&&bh(e)?this.encodeAsBinary({type:e.type===lt.EVENT?lt.BINARY_EVENT:lt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===lt.BINARY_EVENT||e.type===lt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=q4(e),i=this.encodeAsString(t.packet),o=t.buffers;return o.unshift(i),o}}class C0 extends hn{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===lt.BINARY_EVENT;i||t.type===lt.BINARY_ACK?(t.type=i?lt.EVENT:lt.ACK,this.reconstructor=new K4(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(k0(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(lt[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===lt.BINARY_EVENT||i.type===lt.BINARY_ACK){const u=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const d=e.substring(u,t);if(d!=Number(d)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(d)}if(e.charAt(t+1)==="/"){const u=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(u,t)}else i.nsp="/";const o=e.charAt(t+1);if(o!==""&&Number(o)==o){const u=t+1;for(;++t;){const d=e.charAt(t);if(d==null||Number(d)!=d){--t;break}if(t===e.length)break}i.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){const u=this.tryParse(e.substr(t));if(C0.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case lt.CONNECT:return om(t);case lt.DISCONNECT:return t===void 0;case lt.CONNECT_ERROR:return typeof t=="string"||om(t);case lt.EVENT:case lt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&X4.indexOf(t[0])===-1);case lt.ACK:case lt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class K4{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Y4(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function om(r){return Object.prototype.toString.call(r)==="[object Object]"}const $4=Object.freeze(Object.defineProperty({__proto__:null,Decoder:C0,Encoder:Q4,get PacketType(){return lt}},Symbol.toStringTag,{value:"Module"}));function Ti(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const J4=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class K1 extends hn{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ti(e,"open",this.onopen.bind(this)),Ti(e,"packet",this.onpacket.bind(this)),Ti(e,"error",this.onerror.bind(this)),Ti(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,o,u;if(J4.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const d={type:lt.EVENT,data:t};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const w=this.ids++,S=t.pop();this._registerAckCallback(w,S),d.id=w}const f=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,g=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!f||(g?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(e,t){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[e]=t;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===e&&this.sendBuffer.splice(f,1);t.call(this,new Error("operation has timed out"))},o),d=(...f)=>{this.io.clearTimeoutFn(u),t.apply(this,f)};d.withError=!0,this.acks[e]=d}emitWithAck(e,...t){return new Promise((i,o)=>{const u=(d,f)=>d?o(d):i(f);u.withError=!0,t.push(u),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...u)=>(this._queue[0],o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(o)):(this._queue.shift(),t&&t(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:lt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case lt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case lt.EVENT:case lt.BINARY_EVENT:this.onevent(e);break;case lt.ACK:case lt.BINARY_ACK:this.onack(e);break;case lt.DISCONNECT:this.ondisconnect();break;case lt.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...o){i||(i=!0,t.packet({type:lt.ACK,id:e,data:o}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:lt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function ou(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}ou.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};ou.prototype.reset=function(){this.attempts=0};ou.prototype.setMin=function(r){this.ms=r};ou.prototype.setMax=function(r){this.max=r};ou.prototype.setJitter=function(r){this.jitter=r};class Bp extends hn{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Qh(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ou({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const o=t.parser||$4;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new B4(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=Ti(t,"open",function(){i.onopen(),e&&e()}),u=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),e?e(f):this.maybeReconnectOnOpen()},d=Ti(t,"error",u);if(this._timeout!==!1){const f=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),t.close()},f);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(d),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ti(e,"ping",this.onping.bind(this)),Ti(e,"data",this.ondata.bind(this)),Ti(e,"error",this.onerror.bind(this)),Ti(e,"close",this.onclose.bind(this)),Ti(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Xh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new K1(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const fc={};function Th(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=G4(r,e.path||"/socket.io"),i=t.source,o=t.id,u=t.path,d=fc[o]&&u in fc[o].nsps,f=e.forceNew||e["force new connection"]||e.multiplex===!1||d;let g;return f?g=new Bp(i,e):(fc[o]||(fc[o]=new Bp(i,e)),g=fc[o]),t.query&&!e.query&&(e.query=t.queryKey),g.socket(t.path,e)}Object.assign(Th,{Manager:Bp,Socket:K1,io:Th,connect:Th});class $1 extends t4{constructor(){super(),this.state=new Map,this.initial=new Map,this.metadata=new Map,this.log=new Map}createMatch(e,t){this.initial.set(e,t.initialState),this.setState(e,t.initialState),this.setMetadata(e,t.metadata)}setMetadata(e,t){this.metadata.set(e,t)}setState(e,t,i){if(i&&i.length>0){const o=this.log.get(e)||[];this.log.set(e,[...o,...i])}this.state.set(e,t)}fetch(e,t){const i={};return t.state&&(i.state=this.state.get(e)),t.metadata&&(i.metadata=this.metadata.get(e)),t.log&&(i.log=this.log.get(e)||[]),t.initialState&&(i.initialState=this.initial.get(e)),i}wipe(e){this.state.delete(e),this.metadata.delete(e)}listMatches(e){return[...this.metadata.entries()].filter(([,t])=>e?!(e.gameName!==void 0&&t.gameName!==e.gameName||e.where!==void 0&&(e.where.isGameover!==void 0&&t.gameover!==void 0!==e.where.isGameover||e.where.updatedBefore!==void 0&&t.updatedAt>=e.where.updatedBefore||e.where.updatedAfter!==void 0&&t.updatedAt<=e.where.updatedAfter)):!0).map(([t])=>t)}}class Z4 extends Map{constructor(e){super(),this.key=e,(JSON.parse(localStorage.getItem(this.key))||[]).forEach(i=>this.set(...i))}sync(){const e=[...this.entries()];localStorage.setItem(this.key,JSON.stringify(e))}set(e,t){return super.set(e,t),this.sync(),this}delete(e){const t=super.delete(e);return this.sync(),t}}class e3 extends $1{constructor(e="bgio"){super();const t=i=>new Z4(`${e}_${i}`);this.state=t("state"),this.initial=t("initial"),this.metadata=t("metadata"),this.log=t("log")}}function t3(r,e){if(r.ctx.gameover!==void 0)return null;if(r.ctx.activePlayers){for(const t of Object.keys(e))if(t in r.ctx.activePlayers)return t}else if(r.ctx.currentPlayer in e)return r.ctx.currentPlayer;return null}class n3 extends s4{constructor({game:e,bots:t,storageKey:i,persist:o}){const u={},d={};if(e&&e.ai&&t)for(const S in t){const C=t[S];d[S]=new C({game:e,enumerate:e.ai.enumerate,seed:e.seed})}const f=({playerID:S,...C})=>{const b=u[S];b!==void 0&&b(g(S,C))},g=o4(e),x={send:f,sendAll:S=>{for(const C in u)f({playerID:C,...S})}},w=o?new e3(i):new $1;super(e,w,x),this.connect=(S,C)=>{u[S]=C},this.subscribe(({state:S,matchID:C})=>{if(!t)return;const b=t3(S,d);b!==null&&setTimeout(async()=>{const P=await d[b].play(S,b);await this.onUpdate(P.action,S._stateID,C,P.action.payload.playerID)},100)})}}class r3 extends v0{constructor({master:e,...t}){super(t),this.master=e}sendChatMessage(e,t){const i=[e,t,this.credentials];this.master.onChatMessage(...i)}sendAction(e,t){this.master.onUpdate(t,e._stateID,this.matchID,this.playerID)}requestSync(){this.master.onSync(this.matchID,this.playerID,this.credentials,this.numPlayers)}connect(){this.setConnectionStatus(!0),this.master.connect(this.playerID,e=>this.notifyClient(e)),this.requestSync()}disconnect(){this.setConnectionStatus(!1)}updateMatchID(e){this.matchID=e,this.connect()}updatePlayerID(e){this.playerID=e,this.connect()}updateCredentials(e){this.credentials=e,this.connect()}}const am=new Map;function i3({bots:r,persist:e,storageKey:t}={}){return i=>{const{gameKey:o,game:u}=i;let d;const f=am.get(o);return f&&f.bots===r&&f.storageKey===t&&f.persist===e&&(d=f.master),d||(d=new n3({game:u,bots:r,persist:e,storageKey:t}),am.set(o,{master:d,bots:r,persist:e,storageKey:t})),new r3({master:d,...i})}}const lm=Th;class s3 extends v0{constructor({socket:e,socketOpts:t,server:i,...o}){super(o),this.server=i,this.socket=e,this.socketOpts=t}sendAction(e,t){const i=[t,e._stateID,this.matchID,this.playerID];this.socket.emit("update",...i)}sendChatMessage(e,t){const i=[e,t,this.credentials];this.socket.emit("chat",...i)}connect(){if(!this.socket)if(this.server){let e=this.server;e.search(/^https?:\/\//)==-1&&(e="http://"+this.server),e.slice(-1)!="/"&&(e=e+"/"),this.socket=lm(e+this.gameName,this.socketOpts)}else this.socket=lm("/"+this.gameName,this.socketOpts);this.socket.on("patch",(e,t,i,o,u)=>{this.notifyClient({type:"patch",args:[e,t,i,o,u]})}),this.socket.on("update",(e,t,i)=>{this.notifyClient({type:"update",args:[e,t,i]})}),this.socket.on("sync",(e,t)=>{this.notifyClient({type:"sync",args:[e,t]})}),this.socket.on("matchData",(e,t)=>{this.notifyClient({type:"matchData",args:[e,t]})}),this.socket.on("chat",(e,t)=>{this.notifyClient({type:"chat",args:[e,t]})}),this.socket.on("connect",()=>{this.requestSync(),this.setConnectionStatus(!0)}),this.socket.on("disconnect",()=>{this.setConnectionStatus(!1)})}disconnect(){this.socket.close(),this.socket=null,this.setConnectionStatus(!1)}requestSync(){if(this.socket){const e=[this.matchID,this.playerID,this.credentials,this.numPlayers];this.socket.emit("sync",...e)}}updateMatchID(e){this.matchID=e,this.requestSync()}updatePlayerID(e){this.playerID=e,this.requestSync()}updateCredentials(e){this.credentials=e,this.requestSync()}}function Gp({server:r,socketOpts:e}={}){return t=>new s3({server:r,socketOpts:e,...t})}function J1(r){var e;const{game:t,numPlayers:i,board:o,multiplayer:u,enhancer:d}=r;let{loading:f,debug:g}=r;return f===void 0&&(f=()=>be.createElement("div",{className:"bgio-loading"},"connecting...")),e=class extends be.Component{constructor(w){super(w),g===void 0&&(g=w.debug),this.client=Vv({game:t,debug:g,numPlayers:i,multiplayer:u,matchID:w.matchID,playerID:w.playerID,credentials:w.credentials,enhancer:d})}componentDidMount(){this.unsubscribe=this.client.subscribe(()=>this.forceUpdate()),this.client.start()}componentWillUnmount(){this.client.stop(),this.unsubscribe()}componentDidUpdate(w){this.props.matchID!=w.matchID&&this.client.updateMatchID(this.props.matchID),this.props.playerID!=w.playerID&&this.client.updatePlayerID(this.props.playerID),this.props.credentials!=w.credentials&&this.client.updateCredentials(this.props.credentials)}render(){const w=this.client.getState();if(w===null)return be.createElement(f);let S=null;return o&&(S=be.createElement(o,{...w,...this.props,isMultiplayer:!!u,moves:this.client.moves,events:this.client.events,matchID:this.client.matchID,playerID:this.client.playerID,reset:this.client.reset,undo:this.client.undo,redo:this.client.redo,log:this.client.log,matchData:this.client.matchData,sendChatMessage:this.client.sendChatMessage,chatMessages:this.client.chatMessages})),be.createElement("div",{className:"bgio-client"},S)}},e.propTypes={matchID:ts.string,playerID:ts.string,credentials:ts.string,debug:ts.any},e.defaultProps={matchID:"default",playerID:null,credentials:null,debug:!0},e}class o3{constructor({server:e,gameComponents:t,playerName:i,playerCredentials:o}){this.client=new j1({server:e}),this.gameComponents=t,this.playerName=i||"Visitor",this.playerCredentials=o,this.matches=[]}async refresh(){try{this.matches=[];const e=await this.client.listGames();for(const t of e){if(!this._getGameComponents(t))continue;const{matches:i}=await this.client.listMatches(t);this.matches.push(...i)}}catch(e){throw new Error("failed to retrieve list of matches ("+e+")")}}_getMatchInstance(e){for(const t of this.matches)if(t.matchID===e)return t}_getGameComponents(e){for(const t of this.gameComponents)if(t.game.name===e)return t}_findPlayer(e){for(const t of this.matches)if(t.players.some(i=>i.name===e))return t}async join(e,t,i){try{let o=this._findPlayer(this.playerName);if(o)throw new Error("player has already joined "+o.matchID);if(o=this._getMatchInstance(t),!o)throw new Error("game instance "+t+" not found");const u=await this.client.joinMatch(e,t,{playerID:i,playerName:this.playerName});o.players[Number.parseInt(i)].name=this.playerName,this.playerCredentials=u.playerCredentials}catch(o){throw new Error("failed to join match "+t+" ("+o+")")}}async leave(e,t){try{const i=this._getMatchInstance(t);if(!i)throw new Error("match instance not found");for(const o of i.players)if(o.name===this.playerName){await this.client.leaveMatch(e,t,{playerID:o.id.toString(),credentials:this.playerCredentials}),delete o.name,delete this.playerCredentials;return}throw new Error("player not found in match")}catch(i){throw new Error("failed to leave match "+t+" ("+i+")")}}async disconnect(){const e=this._findPlayer(this.playerName);e&&await this.leave(e.gameName,e.matchID),this.matches=[],this.playerName="Visitor"}async create(e,t){try{const i=this._getGameComponents(e);if(!i)throw new Error("game not found");if(t<i.game.minPlayers||t>i.game.maxPlayers)throw new Error("invalid number of players "+t);await this.client.createMatch(e,{numPlayers:t})}catch(i){throw new Error("failed to create match for "+e+" ("+i+")")}}}function a3(r){return new o3(r)}class Z1 extends be.Component{constructor(){super(...arguments),this.state={playerName:this.props.playerName,nameErrorMsg:""},this.onClickEnter=()=>{this.state.playerName!==""&&this.props.onEnter(this.state.playerName)},this.onKeyPress=e=>{e.key==="Enter"&&this.onClickEnter()},this.onChangePlayerName=e=>{const t=e.target.value.trim();this.setState({playerName:t,nameErrorMsg:t.length>0?"":"empty player name"})}}render(){return be.createElement("div",null,be.createElement("p",{className:"phase-title"},"Choose a player name:"),be.createElement("input",{type:"text",value:this.state.playerName,onChange:this.onChangePlayerName,onKeyPress:this.onKeyPress}),be.createElement("span",{className:"buttons"},be.createElement("button",{className:"buttons",onClick:this.onClickEnter},"Enter")),be.createElement("br",null),be.createElement("span",{className:"error-msg"},this.state.nameErrorMsg,be.createElement("br",null)))}}Z1.defaultProps={playerName:""};class l3 extends be.Component{constructor(){super(...arguments),this._createSeat=e=>e.name||"[free]",this._createButtonJoin=(e,t)=>be.createElement("button",{key:"button-join-"+e.matchID,onClick:()=>this.props.onClickJoin(e.gameName,e.matchID,""+t)},"Join"),this._createButtonLeave=e=>be.createElement("button",{key:"button-leave-"+e.matchID,onClick:()=>this.props.onClickLeave(e.gameName,e.matchID)},"Leave"),this._createButtonPlay=(e,t)=>be.createElement("button",{key:"button-play-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,playerID:""+t,numPlayers:e.players.length})},"Play"),this._createButtonSpectate=e=>be.createElement("button",{key:"button-spectate-"+e.matchID,onClick:()=>this.props.onClickPlay(e.gameName,{matchID:e.matchID,numPlayers:e.players.length})},"Spectate"),this._createInstanceButtons=e=>{const t=e.players.find(o=>o.name===this.props.playerName),i=e.players.find(o=>!o.name);return t&&i?this._createButtonLeave(e):i?this._createButtonJoin(e,i.id):t?be.createElement("div",null,[this._createButtonPlay(e,t.id),this._createButtonLeave(e)]):this._createButtonSpectate(e)}}render(){const e=this.props.match;let t="OPEN";return e.players.some(i=>!i.name)||(t="RUNNING"),be.createElement("tr",{key:"line-"+e.matchID},be.createElement("td",{key:"cell-name-"+e.matchID},e.gameName),be.createElement("td",{key:"cell-status-"+e.matchID},t),be.createElement("td",{key:"cell-seats-"+e.matchID},e.players.map(i=>this._createSeat(i)).join(", ")),be.createElement("td",{key:"cell-buttons-"+e.matchID},this._createInstanceButtons(e)))}}class u3 extends be.Component{constructor(e){super(e),this.state={selectedGame:0,numPlayers:2},this._createGameNameOption=(t,i)=>be.createElement("option",{key:"name-option-"+i,value:i},t.game.name),this._createNumPlayersOption=t=>be.createElement("option",{key:"num-option-"+t,value:t},t),this._createNumPlayersRange=t=>Array.from({length:t.maxPlayers+1}).map((i,o)=>o).slice(t.minPlayers),this.onChangeNumPlayers=t=>{this.setState({numPlayers:Number.parseInt(t.target.value)})},this.onChangeSelectedGame=t=>{const i=Number.parseInt(t.target.value);this.setState({selectedGame:i,numPlayers:this.props.games[i].game.minPlayers})},this.onClickCreate=()=>{this.props.createMatch(this.props.games[this.state.selectedGame].game.name,this.state.numPlayers)};for(const t of e.games){const i=t.game;i.minPlayers||(i.minPlayers=1),i.maxPlayers||(i.maxPlayers=4),console.assert(i.maxPlayers>=i.minPlayers)}this.state={selectedGame:0,numPlayers:e.games[0].game.minPlayers}}render(){return be.createElement("div",null,be.createElement("select",{value:this.state.selectedGame,onChange:e=>this.onChangeSelectedGame(e)},this.props.games.map((e,t)=>this._createGameNameOption(e,t))),be.createElement("span",null,"Players:"),be.createElement("select",{value:this.state.numPlayers,onChange:this.onChangeNumPlayers},this._createNumPlayersRange(this.props.games[this.state.selectedGame].game).map(e=>this._createNumPlayersOption(e))),be.createElement("span",{className:"buttons"},be.createElement("button",{onClick:this.onClickCreate},"Create")))}}var Pr;(function(r){r.ENTER="enter",r.PLAY="play",r.LIST="list"})(Pr||(Pr={}));let ey=class extends be.Component{constructor(e){super(e),this.state={phase:Pr.ENTER,playerName:"Visitor",runningMatch:null,errorMsg:"",credentialStore:{}},this._createConnection=t=>{const i=this.state.playerName;this.connection=a3({server:t.lobbyServer,gameComponents:t.gameComponents,playerName:i,playerCredentials:this.state.credentialStore[i]})},this._updateCredentials=(t,i)=>{this.setState(o=>{const u=Object.assign({},o.credentialStore);return u[t]=i,{credentialStore:u}})},this._updateConnection=async()=>{await this.connection.refresh(),this.forceUpdate()},this._enterLobby=t=>{this._startRefreshInterval(),this.setState({playerName:t,phase:Pr.LIST})},this._exitLobby=async()=>{this._clearRefreshInterval(),await this.connection.disconnect(),this.setState({phase:Pr.ENTER,errorMsg:""})},this._createMatch=async(t,i)=>{try{await this.connection.create(t,i),await this.connection.refresh(),this.setState({})}catch(o){this.setState({errorMsg:o.message})}},this._joinMatch=async(t,i,o)=>{try{await this.connection.join(t,i,o),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(u){this.setState({errorMsg:u.message})}},this._leaveMatch=async(t,i)=>{try{await this.connection.leave(t,i),await this.connection.refresh(),this._updateCredentials(this.connection.playerName,this.connection.playerCredentials)}catch(o){this.setState({errorMsg:o.message})}},this._startMatch=(t,i)=>{const o=this.connection._getGameComponents(t);if(!o){this.setState({errorMsg:"game "+t+" not supported"});return}let u;if(i.numPlayers>1&&(u=this.props.gameServer?Gp({server:this.props.gameServer}):Gp()),i.numPlayers==1){const g=o.game.maxPlayers,x={};for(let w=1;w<g;w++)x[w+""]=Iv;u=i3({bots:x})}const f={app:this.props.clientFactory({game:o.game,board:o.board,debug:this.props.debug,multiplayer:u}),matchID:i.matchID,playerID:i.numPlayers>1?i.playerID:"0",credentials:this.connection.playerCredentials};this._clearRefreshInterval(),this.setState({phase:Pr.PLAY,runningMatch:f})},this._exitMatch=()=>{this._startRefreshInterval(),this.setState({phase:Pr.LIST,runningMatch:null})},this._getPhaseVisibility=t=>this.state.phase!==t?"hidden":"phase",this.renderMatches=(t,i)=>t.map(o=>{const{matchID:u,gameName:d,players:f}=o;return be.createElement(l3,{key:"instance-"+u,match:{matchID:u,gameName:d,players:Object.values(f)},playerName:i,onClickJoin:this._joinMatch,onClickLeave:this._leaveMatch,onClickPlay:this._startMatch})}),this._createConnection(this.props)}componentDidMount(){const e=em.load("lobbyState")||{};e.phase&&e.phase===Pr.PLAY&&(e.phase=Pr.LIST),e.phase&&e.phase!==Pr.ENTER&&this._startRefreshInterval(),this.setState({phase:e.phase||Pr.ENTER,playerName:e.playerName||"Visitor",credentialStore:e.credentialStore||{}})}componentDidUpdate(e,t){const i=this.state.playerName,o=this.state.credentialStore[i];if(t.phase!==this.state.phase||t.credentialStore[i]!==o||t.playerName!==i){this._createConnection(this.props),this._updateConnection();const u={phase:this.state.phase,playerName:i,credentialStore:this.state.credentialStore};em.save("lobbyState",u,{path:"/"})}e.refreshInterval!==this.props.refreshInterval&&this._startRefreshInterval()}componentWillUnmount(){this._clearRefreshInterval()}_startRefreshInterval(){this._clearRefreshInterval(),this._currentInterval=setInterval(this._updateConnection,this.props.refreshInterval)}_clearRefreshInterval(){clearInterval(this._currentInterval)}render(){const{gameComponents:e,renderer:t}=this.props,{errorMsg:i,playerName:o,phase:u,runningMatch:d}=this.state;return t?t({errorMsg:i,gameComponents:e,matches:this.connection.matches,phase:u,playerName:o,runningMatch:d,handleEnterLobby:this._enterLobby,handleExitLobby:this._exitLobby,handleCreateMatch:this._createMatch,handleJoinMatch:this._joinMatch,handleLeaveMatch:this._leaveMatch,handleExitMatch:this._exitMatch,handleRefreshMatches:this._updateConnection,handleStartMatch:this._startMatch}):be.createElement("div",{id:"lobby-view",style:{padding:50}},be.createElement("div",{className:this._getPhaseVisibility(Pr.ENTER)},be.createElement(Z1,{key:o,playerName:o,onEnter:this._enterLobby})),be.createElement("div",{className:this._getPhaseVisibility(Pr.LIST)},be.createElement("p",null,"Welcome, ",o),be.createElement("div",{className:"phase-title",id:"match-creation"},be.createElement("span",null,"Create a match:"),be.createElement(u3,{games:e,createMatch:this._createMatch})),be.createElement("p",{className:"phase-title"},"Join a match:"),be.createElement("div",{id:"instances"},be.createElement("table",null,be.createElement("tbody",null,this.renderMatches(this.connection.matches,o))),be.createElement("span",{className:"error-msg"},i,be.createElement("br",null))),be.createElement("p",{className:"phase-title"},"Matches that become empty are automatically deleted.")),be.createElement("div",{className:this._getPhaseVisibility(Pr.PLAY)},d&&be.createElement(d.app,{matchID:d.matchID,playerID:d.playerID,credentials:d.credentials}),be.createElement("div",{className:"buttons",id:"match-exit"},be.createElement("button",{onClick:this._exitMatch},"Exit match"))),be.createElement("div",{className:"buttons",id:"lobby-exit"},be.createElement("button",{onClick:this._exitLobby},"Exit lobby")))}};ey.propTypes={gameComponents:ts.array.isRequired,lobbyServer:ts.string,gameServer:ts.string,debug:ts.bool,clientFactory:ts.func,refreshInterval:ts.number};ey.defaultProps={debug:!1,clientFactory:J1,refreshInterval:2e3};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d3=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),um=r=>{const e=d3(r);return e.charAt(0).toUpperCase()+e.slice(1)},ty=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),h3=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=Ae.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:d,...f},g)=>Ae.createElement("svg",{ref:g,...f3,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:ty("lucide",o),...!u&&!h3(f)&&{"aria-hidden":"true"},...f},[...d.map(([x,w])=>Ae.createElement(x,w)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=(r,e)=>{const t=Ae.forwardRef(({className:i,...o},u)=>Ae.createElement(p3,{ref:u,iconNode:e,className:ty(`lucide-${c3(um(r))}`,`lucide-${r}`,i),...o}));return t.displayName=um(r),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],m3=Ws("loader-circle",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],v3=Ws("log-in",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w3=Ws("log-out",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],S3=Ws("plus",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],C3=Ws("refresh-cw",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cm=Ws("users",E3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],b3=Ws("wifi-off",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],N3=Ws("wifi",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],M3=Ws("zap",R3),I3=10,A3=3,dm=12,ny={alloy:1,organic:1},O3=1,hm=1,fm=1,ry={windTurbine:{metal:2,organic:1},factory:{metal:2},orbitalForge:{metal:2},bioLab:{organic:2},condenser:{energy:3},chipEngraver:{alloy:1,biomass:1},biomassFactory:{metal:1,biomass:1},turret:{metal:1,energy:1}},L3=2,D3={orbitalForge:{input:{metal:2},output:{alloy:1}},bioLab:{input:{organic:2},output:{biomass:1}},condenser:{input:{energy:3},output:{plasma:1}},chipEngraver:{input:{alloy:1,biomass:1},output:{intelligence:1}},biomassFactory:{input:{biomass:1},output:{energy:2}}},pm={2:{tileCount:12,tilesPerValue:[2,2,2,2,2,2],minResourcesPerType:3},3:{tileCount:12,tilesPerValue:[2,2,2,2,2,2],minResourcesPerType:3},4:{tileCount:16,tilesPerValue:[3,3,3,3,2,2],minResourcesPerType:4},5:{tileCount:16,tilesPerValue:[3,3,3,3,2,2],minResourcesPerType:4}},j3={metal:0,organic:0,energy:3,alloy:0,biomass:0,plasma:0,intelligence:0},z3=["factory","windTurbine"];function F3(r,e){const t=pm[String(r)]||pm[2],i=[];let o=0;for(let w=1;w<=6;w++){const S=t.tilesPerValue[w-1];for(let C=0;C<S;C++)i.push({id:o++,value:w,resourceType:"metal",resourceCount:0,probes:[],buildings:[]})}const u=e.Shuffle(i),d=Math.ceil(u.length/2),f=u.length-d,g=[...Array(d).fill("metal"),...Array(f).fill("organic")],x=e.Shuffle(g);return u.forEach((w,S)=>{w.resourceType=x[S],w.resourceCount=e.Die(4)+4}),u}function E0(r,e){return r.find(t=>t.id===e)}function B3(r){return Array.from({length:A3},(e,t)=>({id:`${r}-probe-${t}`,value:null,tileId:null}))}function G3(r){return z3.map((e,t)=>({id:`${r}-${e}-${t}`,type:e,owner:r,tileId:null,activated:!1}))}function U3(r){return{resources:{...j3},probes:B3(r),buildings:G3(r)}}function W3({ctx:r,random:e}){const t=r.numPlayers,i=F3(t,e),o={};for(let u=0;u<t;u++){const d=String(u);o[d]=U3(d)}return{tiles:i,players:o,round:1,rolledDice:!1,diceValues:[],deployedValues:[],deploymentComplete:!1,playersFinishedPhase:[]}}function H3({G:r}){for(const e of Object.keys(r.players)){const t=r.players[e];for(const u of t.buildings)u.activated=!1;const o=t.buildings.filter(u=>u.type==="windTurbine").length*L3;t.resources.energy+=o}}function iy(r,e){for(const t of Object.values(e)){const i=t.buildings.find(o=>o.id===r);if(i)return i}}function Hc(r,e){const t={};for(const{playerId:w}of r.probes)t[w]=(t[w]||0)+1;for(const w of r.buildings){const S=iy(w,e);S&&S.type==="turret"&&(t[S.owner]=(t[S.owner]||0)+1)}const i=Object.entries(t).sort((w,S)=>S[1]-w[1]);if(i.length===0)return{controller:null,strengths:t,harvestCount:0};if(i.length>1&&i[0][1]===i[1][1])return{controller:null,strengths:t,harvestCount:0};const o=i[0][0];i[0][1];const u=i.length>1?i[1][1]:0,d=r.probes.filter(w=>w.playerId===o).length,g=Math.max(0,d-u),x=Math.min(g,r.resourceCount);return{controller:o,strengths:t,harvestCount:x}}function V3(r,e,t){const i=[];for(const o of r.buildings){const u=iy(o,t);u&&u.owner!==e&&i.push(u)}return i}function q3(r,e,t){const i=t[r.owner];if(i){const o=i.buildings.findIndex(u=>u.id===r.id);o!==-1&&i.buildings.splice(o,1)}r.owner=e,t[e].buildings.push(r)}function Y3({G:r}){for(const e of r.tiles){const t=Hc(e,r.players);if(!t.controller)continue;const i=t.controller,o=r.players[i],u=V3(e,i,r.players);for(const d of u)q3(d,i,r.players);if(t.harvestCount>0&&e.resourceCount>0){const d=Math.min(t.harvestCount,e.resourceCount);o.resources[e.resourceType]+=d,e.resourceCount-=d}}}function P0(r,e){for(const[t,i]of Object.entries(e))if((r[t]||0)<(i||0))return!1;return!0}function b0(r,e){for(const[t,i]of Object.entries(e))r[t]-=i||0}function X3(r,e){for(const[t,i]of Object.entries(e))r[t]+=i||0}function Q3(r,e,t,i,o){if(Hc(t,i).controller!==o)return{valid:!1,reason:"You do not control this tile"};const d=ry[e];return P0(r.resources,d)?r.buildings.some(g=>g.type==="factory")?{valid:!0}:{valid:!1,reason:"You need a factory to build"}:{valid:!1,reason:"Not enough resources"}}function K3(r){return r.probes.length>=dm?{valid:!1,reason:`Maximum ${dm} probes reached`}:P0(r.resources,ny)?{valid:!0}:{valid:!1,reason:"Not enough resources"}}function T0(r,e){return r.resources.energy>=e}function $3({G:r,ctx:e,random:t}){const i=e.currentPlayer,o=r.players[i];if(r.rolledDice)return $t;const u=o.probes.filter(g=>g.tileId===null);if(u.length===0)return $t;const d=t.D6(u.length),f=Array.isArray(d)?d:[d];u.forEach((g,x)=>{g.value=f[x]}),r.rolledDice=!0,r.diceValues=f,r.deployedValues=[]}function J3({G:r,ctx:e},t,i){const o=e.currentPlayer,u=r.players[o];if(!r.rolledDice||r.deployedValues.includes(t)||t<1||t>6)return $t;const d=u.probes.filter(x=>x.value===t&&x.tileId===null);if(d.length===0)return $t;const f=E0(r.tiles,i);if(!f||f.value!==t)return $t;const g=d.length*O3;if(!T0(u,g))return $t;u.resources.energy-=g;for(const x of d)x.tileId=i,f.probes.push({playerId:o,probeId:x.id});r.deployedValues.push(t)}function Z3({G:r,ctx:e},t){const i=e.currentPlayer,o=r.players[i],u=o.probes.find(f=>f.id===t);if(!u||u.tileId===null||!T0(o,hm))return $t;const d=E0(r.tiles,u.tileId);if(d){const f=d.probes.findIndex(g=>g.playerId===i&&g.probeId===t);f!==-1&&d.probes.splice(f,1)}o.resources.energy-=hm,u.tileId=null,u.value=null}let e5=0;function t5({G:r,ctx:e},t,i){const o=e.currentPlayer,u=r.players[o],d=E0(r.tiles,i);if(!d||!Q3(u,t,d,r.players,o).valid)return $t;const g=ry[t];b0(u.resources,g);const x={id:`${o}-${t}-${++e5}`,type:t,owner:o,tileId:i,activated:!1};u.buildings.push(x),d.buildings.push(x.id)}function n5({G:r,ctx:e}){const t=e.currentPlayer,i=r.players[t];if(!K3(i).valid)return $t;b0(i.resources,ny);const u=`${t}-probe-${i.probes.length}`;i.probes.push({id:u,value:null,tileId:null})}function r5({G:r,ctx:e},t){const i=e.currentPlayer,o=r.players[i],u=o.buildings.find(f=>f.id===t);if(!u||u.owner!==i||u.activated)return $t;const d=D3[u.type];if(!d||!T0(o,fm)||!P0(o.resources,d.input))return $t;o.resources.energy-=fm,b0(o.resources,d.input),X3(o.resources,d.output),u.activated=!0}const i5={name:"singularity",setup:W3,turn:{order:Ip.DEFAULT},phases:{main:{start:!0,onBegin:({G:r})=>{H3({G:r}),r.playersFinishedPhase=[]},moves:{rollProbes:$3,deployProbes:J3,recallProbe:Z3,endDeployment:({G:r})=>{r.deploymentComplete=!0},buildBuilding:t5,buildProbe:n5,activateBuilding:r5,endTurn:({G:r,ctx:e,events:t})=>{const i=e.currentPlayer;r.playersFinishedPhase.includes(i)||r.playersFinishedPhase.push(i),r.rolledDice=!1,r.diceValues=[],r.deployedValues=[],r.deploymentComplete=!1,t.endTurn()}},turn:{order:Ip.DEFAULT,minMoves:0,onBegin:({G:r})=>{r.rolledDice=!1,r.diceValues=[],r.deployedValues=[],r.deploymentComplete=!1}},endIf:({G:r,ctx:e})=>r.playersFinishedPhase.length>=e.numPlayers,onEnd:({G:r})=>{Y3({G:r}),r.round+=1,r.playersFinishedPhase=[]},next:"main"}},endIf:({G:r})=>{for(const[e,t]of Object.entries(r.players))if(t.resources.intelligence>=I3)return{winner:e,intelligence:t.resources.intelligence}},ai:{enumerate:(r,e)=>{const t=[],i=e.currentPlayer,o=r.players[i];if(e.phase==="deployment"){if(r.rolledDice||o.probes.filter(d=>d.tileId===null).length>0&&t.push({move:"rollProbes"}),r.rolledDice){const u=r.diceValues.filter(d=>!r.deployedValues.includes(d));for(const d of[...new Set(u)]){const f=r.tiles.filter(g=>g.value===d);for(const g of f)t.push({move:"deployProbes",args:[d,g.id]})}}t.push({move:"endDeployment"});for(const u of o.probes)u.tileId!==null&&t.push({move:"recallProbe",args:[u.id]})}return e.phase==="construction"&&(t.push({move:"endConstruction"}),t.push({move:"buildProbe"})),t}}},s5=Math.PI/180;function o5(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Fa=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},we={_global:Fa,version:"10.2.0",isBrowser:o5(),isUnminified:/param/.test((function(r){}).toString()),dblClickWindow:400,getAngle(r){return we.angleDeg?r*s5:r},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return we.DD.isDragging},isTransforming(){var r,e;return(e=(r=we.Transformer)===null||r===void 0?void 0:r.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!we.DD.node},releaseCanvasOnDestroy:!0,document:Fa.document,_injectGlobal(r){typeof Fa.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Fa.Konva=r}},qt=r=>{we[r.prototype.getClassName()]=r};we._injectGlobal(we);const a5=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,gm=()=>{if(typeof document>"u")throw new Error(a5)};class Fr{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Fr(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),o=this.m[0]*t+this.m[2]*i,u=this.m[1]*t+this.m[3]*i,d=this.m[0]*-i+this.m[2]*t,f=this.m[1]*-i+this.m[3]*t;return this.m[0]=o,this.m[1]=u,this.m[2]=d,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const i=this.m[0]+this.m[2]*t,o=this.m[1]+this.m[3]*t,u=this.m[2]+this.m[0]*e,d=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=o,this.m[2]=u,this.m[3]=d,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],o=this.m[0]*e.m[2]+this.m[2]*e.m[3],u=this.m[1]*e.m[2]+this.m[3]*e.m[3],d=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=u,this.m[4]=d,this.m[5]=f,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,o=-this.m[2]*e,u=this.m[0]*e,d=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=u,this.m[4]=d,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],i=this.m[2],o=this.m[3],u=this.m[4],d=this.m[5],f=e*o-t*i,g={x:u,y:d,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){const x=Math.sqrt(e*e+t*t);g.rotation=t>0?Math.acos(e/x):-Math.acos(e/x),g.scaleX=x,g.scaleY=f/x,g.skewX=(e*i+t*o)/f,g.skewY=0}else if(i!=0||o!=0){const x=Math.sqrt(i*i+o*o);g.rotation=Math.PI/2-(o>0?Math.acos(-i/x):-Math.acos(i/x)),g.scaleX=f/x,g.scaleY=x,g.skewX=0,g.skewY=(e*i+t*o)/f}return g.rotation=V._getRotation(g.rotation),g}}const l5="[object Array]",u5="[object Number]",c5="[object String]",d5="[object Boolean]",h5=Math.PI/180,f5=180/Math.PI,pc="#",p5="",g5="0",m5="Konva warning: ",mm="Konva error: ",y5="rgb(",cp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v5=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let hh=[],gc=null;const x5=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(r){setTimeout(r,16)},V={_isElement(r){return!!(r&&r.nodeType==1)},_isFunction(r){return!!(r&&r.constructor&&r.call&&r.apply)},_isPlainObject(r){return!!r&&r.constructor===Object},_isArray(r){return Object.prototype.toString.call(r)===l5},_isNumber(r){return Object.prototype.toString.call(r)===u5&&!isNaN(r)&&isFinite(r)},_isString(r){return Object.prototype.toString.call(r)===c5},_isBoolean(r){return Object.prototype.toString.call(r)===d5},isObject(r){return r instanceof Object},isValidSelector(r){if(typeof r!="string")return!1;const e=r[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(r){return r===0||r>0?1:-1},requestAnimFrame(r){hh.push(r),hh.length===1&&x5(function(){const e=hh;hh=[],e.forEach(function(t){t()})})},createCanvasElement(){gm();const r=document.createElement("canvas");try{r.style=r.style||{}}catch{}return r},createImageElement(){return gm(),document.createElement("img")},_isInDocument(r){for(;r=r.parentNode;)if(r==document)return!0;return!1},_urlToImage(r,e){const t=V.createImageElement();t.onload=function(){e(t)},t.src=r},_rgbToHex(r,e,t){return((1<<24)+(r<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(r){r=r.replace(pc,p5);const e=parseInt(r,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let r=(Math.random()*16777215<<0).toString(16);for(;r.length<6;)r=g5+r;return pc+r},isCanvasFarblingActive(){if(gc!==null)return gc;if(typeof document>"u")return gc=!1,!1;const r=this.createCanvasElement();r.width=10,r.height=10;const e=r.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let o=0;o<100;o++)if(t[o*4]!==40||t[o*4+1]!==40||t[o*4+2]!==40||t[o*4+3]!==255){i=!0;break}return gc=i,this.releaseCanvas(r),gc},getHitColor(){const r=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(r):r},getHitColorKey(r,e,t){return this.isCanvasFarblingActive()&&(r=Math.round(r/5)*5,e=Math.round(e/5)*5,t=Math.round(t/5)*5),pc+this._rgbToHex(r,e,t)},getSnappedHexColor(r){const e=this._hexToRgb(r);return pc+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(r){let e;return r in cp?(e=cp[r],{r:e[0],g:e[1],b:e[2]}):r[0]===pc?this._hexToRgb(r.substring(1)):r.substr(0,4)===y5?(e=v5.exec(r.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(r){return r=r||"black",V._namedColorToRBA(r)||V._hex3ColorToRGBA(r)||V._hex4ColorToRGBA(r)||V._hex6ColorToRGBA(r)||V._hex8ColorToRGBA(r)||V._rgbColorToRGBA(r)||V._rgbaColorToRGBA(r)||V._hslColorToRGBA(r)},_namedColorToRBA(r){const e=cp[r.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(r){if(r.indexOf("rgb(")===0){r=r.match(/rgb\(([^)]+)\)/)[1];const e=r.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(r){if(r.indexOf("rgba(")===0){r=r.match(/rgba\(([^)]+)\)/)[1];const e=r.split(/ *, */).map((t,i)=>t.slice(-1)==="%"?i===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(r){if(r[0]==="#"&&r.length===9)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:parseInt(r.slice(7,9),16)/255}},_hex6ColorToRGBA(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:1}},_hex4ColorToRGBA(r){if(r[0]==="#"&&r.length===5)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:parseInt(r[4]+r[4],16)/255}},_hex3ColorToRGBA(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:1}},_hslColorToRGBA(r){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(r)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r),i=Number(t[0])/360,o=Number(t[1])/100,u=Number(t[2])/100;let d,f,g;if(o===0)return g=u*255,{r:Math.round(g),g:Math.round(g),b:Math.round(g),a:1};u<.5?d=u*(1+o):d=u+o-u*o;const x=2*u-d,w=[0,0,0];for(let S=0;S<3;S++)f=i+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?g=x+(d-x)*6*f:2*f<1?g=d:3*f<2?g=x+(d-x)*(2/3-f)*6:g=x,w[S]=g*255;return{r:Math.round(w[0]),g:Math.round(w[1]),b:Math.round(w[2]),a:1}}},haveIntersection(r,e){return!(e.x>r.x+r.width||e.x+e.width<r.x||e.y>r.y+r.height||e.y+e.height<r.y)},cloneObject(r){const e={};for(const t in r)this._isPlainObject(r[t])?e[t]=this.cloneObject(r[t]):this._isArray(r[t])?e[t]=this.cloneArray(r[t]):e[t]=r[t];return e},cloneArray(r){return r.slice(0)},degToRad(r){return r*h5},radToDeg(r){return r*f5},_degToRad(r){return V.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),V.degToRad(r)},_radToDeg(r){return V.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),V.radToDeg(r)},_getRotation(r){return we.angleDeg?V.radToDeg(r):r},_capitalize(r){return r.charAt(0).toUpperCase()+r.slice(1)},throw(r){throw new Error(mm+r)},error(r){console.error(mm+r)},warn(r){we.showWarnings&&console.warn(m5+r)},each(r,e){for(const t in r)e(t,r[t])},_inRange(r,e,t){return e<=r&&r<t},_getProjectionToSegment(r,e,t,i,o,u){let d,f,g;const x=(r-t)*(r-t)+(e-i)*(e-i);if(x==0)d=r,f=e,g=(o-t)*(o-t)+(u-i)*(u-i);else{const w=((o-r)*(t-r)+(u-e)*(i-e))/x;w<0?(d=r,f=e,g=(r-o)*(r-o)+(e-u)*(e-u)):w>1?(d=t,f=i,g=(t-o)*(t-o)+(i-u)*(i-u)):(d=r+w*(t-r),f=e+w*(i-e),g=(d-o)*(d-o)+(f-u)*(f-u))}return[d,f,g]},_getProjectionToLine(r,e,t){const i=V.cloneObject(r);let o=Number.MAX_VALUE;return e.forEach(function(u,d){if(!t&&d===e.length-1)return;const f=e[(d+1)%e.length],g=V._getProjectionToSegment(u.x,u.y,f.x,f.y,r.x,r.y),x=g[0],w=g[1],S=g[2];S<o&&(i.x=x,i.y=w,o=S)}),i},_prepareArrayForTween(r,e,t){const i=[],o=[];if(r.length>e.length){const d=e;e=r,r=d}for(let d=0;d<r.length;d+=2)i.push({x:r[d],y:r[d+1]});for(let d=0;d<e.length;d+=2)o.push({x:e[d],y:e[d+1]});const u=[];return o.forEach(function(d){const f=V._getProjectionToLine(d,i,t);u.push(f.x),u.push(f.y)}),u},_prepareToStringify(r){let e;r.visitedByCircularReferenceRemoval=!0;for(const t in r)if(r.hasOwnProperty(t)&&r[t]&&typeof r[t]=="object"){if(e=Object.getOwnPropertyDescriptor(r,t),r[t].visitedByCircularReferenceRemoval||V._isElement(r[t]))if(e.configurable)delete r[t];else return null;else if(V._prepareToStringify(r[t])===null)if(e.configurable)delete r[t];else return null}return delete r.visitedByCircularReferenceRemoval,r},_assign(r,e){for(const t in e)r[t]=e[t];return r},_getFirstPointerId(r){return r.touches?r.changedTouches[0].identifier:r.pointerId||999},releaseCanvas(...r){we.releaseCanvasOnDestroy&&r.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(r,e,t,i){let o=e<0?e:0,u=t<0?t:0;e=Math.abs(e),t=Math.abs(t);let d=0,f=0,g=0,x=0;typeof i=="number"?d=f=g=x=Math.min(i,e/2,t/2):(d=Math.min(i[0]||0,e/2,t/2),f=Math.min(i[1]||0,e/2,t/2),x=Math.min(i[2]||0,e/2,t/2),g=Math.min(i[3]||0,e/2,t/2)),r.moveTo(o+d,u),r.lineTo(o+e-f,u),r.arc(o+e-f,u+f,f,Math.PI*3/2,0,!1),r.lineTo(o+e,u+t-x),r.arc(o+e-x,u+t-x,x,0,Math.PI/2,!1),r.lineTo(o+g,u+t),r.arc(o+g,u+t-g,g,Math.PI/2,Math.PI,!1),r.lineTo(o,u+d),r.arc(o+d,u+d,d,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(r,e,t,i,o){i=Math.abs(i);for(let u=0;u<t;u++){const d=e[(u-1+t)%t],f=e[u],g=e[(u+1)%t],x={x:f.x-d.x,y:f.y-d.y},w={x:g.x-f.x,y:g.y-f.y},S=Math.hypot(x.x,x.y),C=Math.hypot(w.x,w.y);let b;typeof o=="number"?b=o:b=u<o.length?o[u]:0,b=i*Math.cos(Math.PI/t)*Math.min(1,b/i*2);const A={x:x.x/S,y:x.y/S},R={x:w.x/C,y:w.y/C},I={x:f.x-A.x*b,y:f.y-A.y*b},T={x:f.x+R.x*b,y:f.y+R.y*b};u===0?r.moveTo(I.x,I.y):r.lineTo(I.x,I.y),r.arcTo(f.x,f.y,T.x,T.y,b)}}};function w5(r){const e=[],t=r.length,i=V;for(let o=0;o<t;o++){let u=r[o];i._isNumber(u)?u=Math.round(u*1e3)/1e3:i._isString(u)||(u=u+""),e.push(u)}return e}const ym=",",_5="(",S5=")",k5="([",C5="])",E5=";",P5="()",b5="=",vm=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],T5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],N5=100;let fh=null;function xm(){if(fh!==null)return fh;try{const e=V.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(fh=!1,!1)}catch{return fh=!1,!1}}class Kh{constructor(e){this.canvas=e,we.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,o=i.length,u="",d,f,g,x;for(d=0;d<o;d++)f=i[d],g=f.method,g?(x=f.args,u+=g,e?u+=P5:V._isArray(x[0])?u+=k5+x.join(ym)+C5:(t&&(x=x.map(w=>typeof w=="number"?Math.floor(w):w)),u+=_5+x.join(ym)+S5)):(u+=f.property,e||(u+=b5+f.val)),u+=E5;return u}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=N5&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;t!=null&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,o,u,d){this._context.arc(e,t,i,o,u,d)}arcTo(e,t,i,o,u){this._context.arcTo(e,t,i,o,u)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,o,u,d){this._context.bezierCurveTo(e,t,i,o,u,d)}clearRect(e,t,i,o){this._context.clearRect(e,t,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,o){return this._context.createLinearGradient(e,t,i,o)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,o,u,d){return this._context.createRadialGradient(e,t,i,o,u,d)}drawImage(e,t,i,o,u,d,f,g,x){const w=arguments,S=this._context;w.length===3?S.drawImage(e,t,i):w.length===5?S.drawImage(e,t,i,o,u):w.length===9&&S.drawImage(e,t,i,o,u,d,f,g,x)}ellipse(e,t,i,o,u,d,f,g){this._context.ellipse(e,t,i,o,u,d,f,g)}isPointInPath(e,t,i,o){return i?this._context.isPointInPath(i,e,t,o):this._context.isPointInPath(e,t,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,o){this._context.fillRect(e,t,i,o)}strokeRect(e,t,i,o){this._context.strokeRect(e,t,i,o)}fillText(e,t,i,o){o?this._context.fillText(e,t,i,o):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,o){return this._context.getImageData(e,t,i,o)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,o){this._context.rect(e,t,i,o)}roundRect(e,t,i,o,u){this._context.roundRect(e,t,i,o,u)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,o){this._context.quadraticCurveTo(e,t,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,o,u,d){this._context.setTransform(e,t,i,o,u,d)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,o){this._context.strokeText(e,t,i,o)}transform(e,t,i,o,u,d){this._context.transform(e,t,i,o,u,d)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=vm.length,i=this.setAttr,o,u;const d=function(f){let g=e[f],x;e[f]=function(){return u=w5(Array.prototype.slice.call(arguments,0)),x=g.apply(e,arguments),e._trace({method:f,args:u}),x}};for(o=0;o<t;o++)d(vm[o]);e.setAttr=function(){i.apply(e,arguments);const f=arguments[0];let g=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(g=g/this.canvas.getPixelRatio()),e._trace({property:f,val:g})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}T5.forEach(function(r){Object.defineProperty(Kh.prototype,r,{get(){return this._context[r]},set(e){this._context[r]=e}})});class R5 extends Kh{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}const o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}const u=e.getFillLinearGradientColorStops();if(u&&i==="linear-gradient"){this._fillLinearGradient(e);return}const d=e.getFillRadialGradientColorStops();if(d&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):o?this._fillPattern(e):u?this._fillLinearGradient(e):d&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),u=this.createLinearGradient(t.x,t.y,i.x,i.y);if(o){for(let d=0;d<o.length;d+=2)u.addColorStop(o[d],o[d+1]);this.setAttr("strokeStyle",u)}}_stroke(e){const t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,o;const u=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",d=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,f=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},g=e.getAbsoluteScale(),x=this.canvas.getPixelRatio(),w=g.x*x,S=g.y*x;this.setAttr("shadowColor",u),this.setAttr("shadowBlur",d*Math.min(Math.abs(w),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*w),this.setAttr("shadowOffsetY",f.y*S)}}class M5 extends Kh{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const u=this.getCanvas().getPixelRatio();this.setTransform(u,0,0,u,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let ph;function I5(){if(ph)return ph;const r=V.createCanvasElement(),e=r.getContext("2d");return ph=(function(){const t=we._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i})(),V.releaseCanvas(r),ph}class N0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||we.pixelRatio||I5();this.pixelRatio=i,this._canvas=V.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(o){return V.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Ho extends N0{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new R5(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class R0 extends N0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new M5(this),this.setSize(e.width,e.height)}}const pt={get isDragging(){let r=!1;return pt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(r=!0)}),r},justDragged:!1,get node(){let r;return pt._dragElements.forEach(e=>{r=e.node}),r},_dragElements:new Map,_drag(r){const e=[];pt._dragElements.forEach((t,i)=>{const{node:o}=t,u=o.getStage();u.setPointersPositions(r),t.pointerId===void 0&&(t.pointerId=V._getFirstPointerId(r));const d=u._changedPointerPositions.find(f=>f.id===t.pointerId);if(d){if(t.dragStatus!=="dragging"){const f=o.dragDistance();if(Math.max(Math.abs(d.x-t.startPointerPos.x),Math.abs(d.y-t.startPointerPos.y))<f||(o.startDrag({evt:r}),!o.isDragging()))return}o._setDragPosition(r,t),e.push(o)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:r},!0)})},_endDragBefore(r){const e=[];pt._dragElements.forEach(t=>{const{node:i}=t,o=i.getStage();if(r&&o.setPointersPositions(r),!o._changedPointerPositions.find(f=>f.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(pt.justDragged=!0,we._mouseListenClick=!1,we._touchListenClick=!1,we._pointerListenClick=!1,t.dragStatus="stopped");const d=t.node.getLayer()||t.node instanceof we.Stage&&t.node;d&&e.indexOf(d)===-1&&e.push(d)}),e.forEach(t=>{t.draw()})},_endDragAfter(r){pt._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:r},!0),e.dragStatus!=="dragging"&&pt._dragElements.delete(t)})}};we.isBrowser&&(window.addEventListener("mouseup",pt._endDragBefore,!0),window.addEventListener("touchend",pt._endDragBefore,!0),window.addEventListener("touchcancel",pt._endDragBefore,!0),window.addEventListener("mousemove",pt._drag),window.addEventListener("touchmove",pt._drag),window.addEventListener("mouseup",pt._endDragAfter,!1),window.addEventListener("touchend",pt._endDragAfter,!1),window.addEventListener("touchcancel",pt._endDragAfter,!1));function Yo(r){return V._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||V._isBoolean(r)?r:Object.prototype.toString.call(r)}function sy(r){return r>255?255:r<0?0:Math.round(r)}function ye(){if(we.isUnminified)return function(r,e){return V._isNumber(r)||V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}function $h(r){if(we.isUnminified)return function(e,t){let i=V._isNumber(e),o=V._isArray(e)&&e.length==r;return!i&&!o&&V.warn(Yo(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}function M0(){if(we.isUnminified)return function(r,e){return V._isNumber(r)||r==="auto"||V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}function Wa(){if(we.isUnminified)return function(r,e){return V._isString(r)||V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}function oy(){if(we.isUnminified)return function(r,e){const t=V._isString(r),i=Object.prototype.toString.call(r)==="[object CanvasGradient]"||r&&r.addColorStop;return t||i||V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}function A5(){if(we.isUnminified)return function(r,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&r instanceof t||(V._isArray(r)?r.forEach(function(i){V._isNumber(i)||V.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),r}}function Ri(){if(we.isUnminified)return function(r,e){return r===!0||r===!1||V.warn(Yo(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}function O5(r){if(we.isUnminified)return function(e,t){return e==null||V.isObject(e)||V.warn(Yo(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}const mc="get",yc="set",D={addGetterSetter(r,e,t,i,o){D.addGetter(r,e,t),D.addSetter(r,e,i,o),D.addOverloadedGetterSetter(r,e)},addGetter(r,e,t){const i=mc+V._capitalize(e);r.prototype[i]=r.prototype[i]||function(){const o=this.attrs[e];return o===void 0?t:o}},addSetter(r,e,t,i){const o=yc+V._capitalize(e);r.prototype[o]||D.overWriteSetter(r,e,t,i)},overWriteSetter(r,e,t,i){const o=yc+V._capitalize(e);r.prototype[o]=function(u){return t&&u!==void 0&&u!==null&&(u=t.call(this,u,e)),this._setAttr(e,u),i&&i.call(this),this}},addComponentsGetterSetter(r,e,t,i,o){const u=t.length,d=V._capitalize,f=mc+d(e),g=yc+d(e);r.prototype[f]=function(){const w={};for(let S=0;S<u;S++){const C=t[S];w[C]=this.getAttr(e+d(C))}return w};const x=O5(t);r.prototype[g]=function(w){const S=this.attrs[e];i&&(w=i.call(this,w,e)),x&&x.call(this,w,e);for(const C in w)w.hasOwnProperty(C)&&this._setAttr(e+d(C),w[C]);return w||t.forEach(C=>{this._setAttr(e+d(C),void 0)}),this._fireChangeEvent(e,S,w),o&&o.call(this),this},D.addOverloadedGetterSetter(r,e)},addOverloadedGetterSetter(r,e){const t=V._capitalize(e),i=yc+t,o=mc+t;r.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(r,e,t,i){V.error("Adding deprecated "+e);const o=mc+V._capitalize(e),u=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[o]=function(){V.error(u);const d=this.attrs[e];return d===void 0?t:d},D.addSetter(r,e,i,function(){V.error(u)}),D.addOverloadedGetterSetter(r,e)},backCompat(r,e){V.each(e,function(t,i){const o=r.prototype[i],u=mc+V._capitalize(t),d=yc+V._capitalize(t);function f(){o.apply(this,arguments),V.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}r.prototype[t]=f,r.prototype[u]=f,r.prototype[d]=f})},afterSetFilter(){this._filterUpToDate=!1}};function L5(r){const e=/(\w+)\(([^)]+)\)/g;let t;for(;(t=e.exec(r))!==null;){const[,i,o]=t;switch(i){case"blur":{const u=parseFloat(o.replace("px",""));return function(d){this.blurRadius(u*.5);const f=we.Filters;f&&f.Blur&&f.Blur.call(this,d)}}case"brightness":{const u=o.includes("%")?parseFloat(o)/100:parseFloat(o);return function(d){this.brightness(u);const f=we.Filters;f&&f.Brightness&&f.Brightness.call(this,d)}}case"contrast":{const u=parseFloat(o);return function(d){const f=100*(Math.sqrt(u)-1);this.contrast(f);const g=we.Filters;g&&g.Contrast&&g.Contrast.call(this,d)}}case"grayscale":return function(u){const d=we.Filters;d&&d.Grayscale&&d.Grayscale.call(this,u)};case"sepia":return function(u){const d=we.Filters;d&&d.Sepia&&d.Sepia.call(this,u)};case"invert":return function(u){const d=we.Filters;d&&d.Invert&&d.Invert.call(this,u)};default:V.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Nh="absoluteOpacity",wm="allEventListeners",Gs="absoluteTransform",_m="absoluteScale",La="canvas",D5="Change",j5="children",z5="konva",Up="listening",F5="mouseenter",B5="mouseleave",G5="pointerenter",U5="pointerleave",W5="touchenter",H5="touchleave",Sm="set",km="Shape",Rh=" ",Cm="stage",Uo="transform",V5="Stage",Wp="visible",q5=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Rh);let Y5=1;class pe{constructor(e){this._id=Y5++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Uo||e===Gs)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===Uo||e===Gs)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){const o=t.map(u=>u+"Change.konva").join(Rh);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(La)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Gs&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(La)){const{scene:e,filter:t,hit:i}=this._cache.get(La);V.releaseCanvas(e._canvas,t._canvas,i._canvas),this._cache.delete(La)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(t.width||i.width),u=Math.ceil(t.height||i.height),d=t.pixelRatio,f=t.x===void 0?Math.floor(i.x):t.x,g=t.y===void 0?Math.floor(i.y):t.y,x=t.offset||0,w=t.drawBorder||!1,S=t.hitCanvasPixelRatio||1;if(!o||!u){V.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const C=Math.abs(Math.round(i.x)-f)>.5?1:0,b=Math.abs(Math.round(i.y)-g)>.5?1:0;o+=x*2+C,u+=x*2+b,f-=x,g-=x;const P=new Ho({pixelRatio:d,width:o,height:u}),A=new Ho({pixelRatio:d,width:0,height:0,willReadFrequently:!0}),R=new R0({pixelRatio:S,width:o,height:u}),I=P.getContext(),T=R.getContext(),O=new Ho({width:P.width/P.pixelRatio+Math.abs(f),height:P.height/P.pixelRatio+Math.abs(g),pixelRatio:P.pixelRatio}),z=O.getContext();return R.isCache=!0,P.isCache=!0,this._cache.delete(La),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(P.getContext()._context.imageSmoothingEnabled=!1,A.getContext()._context.imageSmoothingEnabled=!1),I.save(),T.save(),z.save(),I.translate(-f,-g),T.translate(-f,-g),z.translate(-f,-g),O.x=f,O.y=g,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Nh),this._clearSelfAndDescendantCache(_m),this.drawScene(P,this,O),this.drawHit(R,this),this._isUnderCache=!1,I.restore(),T.restore(),w&&(I.save(),I.beginPath(),I.rect(0,0,o,u),I.closePath(),I.setAttr("strokeStyle","red"),I.setAttr("lineWidth",5),I.stroke(),I.restore()),V.releaseCanvas(O._canvas),this._cache.set(La,{scene:P,filter:A,hit:R,x:f,y:g}),this._requestDraw(),this}isCached(){return this._cache.has(La)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let o=1/0,u=1/0,d=-1/0,f=-1/0;const g=this.getAbsoluteTransform(t);return i.forEach(function(x){const w=g.point(x);o===void 0&&(o=d=w.x,u=f=w.y),o=Math.min(o,w.x),u=Math.min(u,w.y),d=Math.max(d,w.x),f=Math.max(f,w.y)}),{x:o,y:u,width:d-o,height:f-u}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,o=t.filter,u=o.getContext(),d,f,g,x;if(!e||e.length===0)return i;if(this._filterUpToDate)return o;let w=!0;for(let C=0;C<e.length;C++)if(typeof e[C]=="string"&&xm(),typeof e[C]!="string"||!xm()){w=!1;break}const S=i.pixelRatio;if(o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),w){const C=e.join(" ");return u.save(),u.setAttr("filter",C),u.drawImage(i._canvas,0,0,i.getWidth()/S,i.getHeight()/S),u.restore(),this._filterUpToDate=!0,o}try{for(d=e.length,u.clear(),u.drawImage(i._canvas,0,0,i.getWidth()/S,i.getHeight()/S),f=u.getImageData(0,0,o.getWidth(),o.getHeight()),g=0;g<d;g++)x=e[g],typeof x=="string"&&(x=L5(x)),x.call(this,f),u.putImageData(f,0,0)}catch(C){V.error("Unable to apply filter. "+C.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,o}on(e,t){if(this._cache&&this._cache.delete(wm),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(Rh);for(let o=0;o<i.length;o++){const d=i[o].split("."),f=d[0],g=d[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:g,handler:t})}return this}off(e,t){let i=(e||"").split(Rh),o=i.length,u,d,f,g,x,w;if(this._cache&&this._cache.delete(wm),!e)for(d in this.eventListeners)this._off(d);for(u=0;u<o;u++)if(f=i[u],g=f.split("."),x=g[0],w=g[1],x)this.eventListeners[x]&&this._off(x,w,t);else for(d in this.eventListeners)this._off(d,w,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){const o=this;this.on(e,function(u){const d=u.target.findAncestors(t,!0,o);for(let f=0;f<d.length;f++)u=V.cloneObject(u),u.currentTarget=d[f],i.call(d[f],u)})}remove(){return this.isDragging()&&this.stopDrag(),pt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Gs),this._clearSelfAndDescendantCache(Nh),this._clearSelfAndDescendantCache(_m),this._clearSelfAndDescendantCache(Cm),this._clearSelfAndDescendantCache(Wp),this._clearSelfAndDescendantCache(Up)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+V._capitalize(e);return V._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==j5&&(i=Sm+V._capitalize(t),V._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(Up,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(Wp,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let o=!1;pt._dragElements.forEach(d=>{d.dragStatus==="dragging"&&(d.node.nodeType==="Stage"||d.node.getLayer()===i)&&(o=!0)});const u=!t&&!we.hitOnDragEnabled&&(o||we.isTransforming());return this.isListening()&&this.isVisible()&&!u}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,o,u,d,f;function g(w){for(o=[],u=w.length,d=0;d<u;d++)f=w[d],i++,f.nodeType!==km&&(o=o.concat(f.getChildren().slice())),f._id===t._id&&(d=u);o.length>0&&o[0].getDepth()<=e&&g(o)}const x=this.getStage();return t.nodeType!==V5&&x&&g(x.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Uo),this._clearSelfAndDescendantCache(Gs)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);const o=this.getAbsoluteTransform(e).getMatrix(),u=new Fr,d=this.offset();return u.m=o.slice(),u.translate(d.x,d.y),u.getTranslation()}setAbsolutePosition(e){const{x:t,y:i,...o}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(Uo);const u=this._getAbsoluteTransform().copy();return u.invert(),u.translate(e.x,e.y),e={x:this.attrs.x+u.getTranslation().x,y:this.attrs.y+u.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(Uo),this._clearSelfAndDescendantCache(Gs),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,o=this.x(),u=this.y();return t!==void 0&&(o+=t),i!==void 0&&(u+=i),this.setPosition({x:o,y:u}),this}_eachAncestorReverse(e,t){let i=[],o=this.getParent(),u,d;if(!(t&&t._id===this._id)){for(i.unshift(this);o&&(!t||o._id!==t._id);)i.unshift(o),o=o.parent;for(u=i.length,d=0;d<u;d++)e(i[d])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return V.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return V.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return V.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return V.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return V.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&V.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Nh,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,o,u,d;const f={attrs:{},className:this.getClassName()};for(t in e)i=e[t],d=V.isObject(i)&&!V._isPlainObject(i)&&!V._isArray(i),!d&&(o=typeof this[t]=="function"&&this[t],delete e[t],u=o?o.call(this):null,e[t]=i,u!==i&&(f.attrs[t]=i));return V._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){const o=[];t&&this._isMatch(e)&&o.push(this);let u=this.parent;for(;u;){if(u===i)return o;u._isMatch(e)&&o.push(u),u=u.parent}return o}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,o,u;for(o=0;o<i;o++)if(u=t[o],V.isValidSelector(u)||(V.warn('Selector "'+u+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),V.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),V.warn("Konva is awesome, right?")),u.charAt(0)==="#"){if(this.id()===u.slice(1))return!0}else if(u.charAt(0)==="."){if(this.hasName(u.slice(1)))return!0}else if(this.className===u||this.nodeType===u)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Cm,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Gs,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Fr,this._eachAncestorReverse(function(i){const o=i.transformsEnabled();o==="all"?t.multiply(i.getTransform()):o==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(Gs)||new Fr,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){const o=this.attrs.x||0,u=this.attrs.y||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;t.translate(o-d,u-f)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Uo,this._getTransform)}_getTransform(){var e,t;const i=this._cache.get(Uo)||new Fr;i.reset();const o=this.x(),u=this.y(),d=we.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,g=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,x=this.attrs.skewX||0,w=this.attrs.skewY||0,S=this.attrs.offsetX||0,C=this.attrs.offsetY||0;return(o!==0||u!==0)&&i.translate(o,u),d!==0&&i.rotate(d),(x!==0||w!==0)&&i.skew(x,w),(f!==1||g!==1)&&i.scale(f,g),(S!==0||C!==0)&&i.translate(-1*S,-1*C),i.dirty=!1,i}clone(e){let t=V.cloneObject(this.attrs),i,o,u,d,f;for(i in e)t[i]=e[i];const g=new this.constructor(t);for(i in this.eventListeners)for(o=this.eventListeners[i],u=o.length,d=0;d<u;d++)f=o[d],f.name.indexOf(z5)<0&&(g.eventListeners[i]||(g.eventListeners[i]=[]),g.eventListeners[i].push(f));return g}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(t.x),u=e.y!==void 0?e.y:Math.floor(t.y),d=e.pixelRatio||1,f=new Ho({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:d}),g=f.getContext(),x=new Ho({width:f.width/f.pixelRatio+Math.abs(o),height:f.height/f.pixelRatio+Math.abs(u),pixelRatio:f.pixelRatio});return e.imageSmoothingEnabled===!1&&(g._context.imageSmoothingEnabled=!1),g.save(),(o||u)&&g.translate(-1*o,-1*u),this.drawScene(f,void 0,x),g.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((t,i)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,V._urlToImage(this.toDataURL(e),function(u){t(u),o==null||o(u)})}catch(o){i(o)}})}toBlob(e){return new Promise((t,i)=>{try{const o=e==null?void 0:e.callback;o&&delete e.callback,this.toCanvas(e).toBlob(u=>{t(u),o==null||o(u)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():we.dragDistance}_off(e,t,i){let o=this.eventListeners[e],u,d,f;for(u=0;u<o.length;u++)if(d=o[u].name,f=o[u].handler,(d!=="konva"||t==="konva")&&(!t||d===t)&&(!i||i===f)){if(o.splice(u,1),o.length===0){delete this.eventListeners[e];break}u--}}_fireChangeEvent(e,t,i){this._fire(e+D5,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){const t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){const i=this[Sm+V._capitalize(e)];return V._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(we.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){const i=this.attrs[e];i===t&&!V.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,t,i){t&&this.nodeType===km&&(t.target=this);const o=[F5,B5,G5,U5,W5,H5];if(!(o.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);const d=o.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!d&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i;const{nodeType:o}=this,u=pe.protoListenerMap.get(o)||{};let d=u==null?void 0:u[e];if(d===void 0){d=[];let f=Object.getPrototypeOf(this);for(;f;){const g=(i=(t=f.eventListeners)===null||t===void 0?void 0:t[e])!==null&&i!==void 0?i:[];d.push(...g),f=Object.getPrototypeOf(f)}u[e]=d,pe.protoListenerMap.set(o,u)}return d}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const i=this._getProtoListeners(e);if(i)for(let u=0;u<i.length;u++)i[u].handler.call(this,t);const o=this.eventListeners[e];if(o)for(let u=0;u<o.length;u++)o[u].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(!i)return;const u=i._getPointerById(t)||i._changedPointerPositions[0]||o;pt._dragElements.set(this._id,{node:this,startPointerPos:u,offset:{x:u.x-o.x,y:u.y-o.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){pt._dragElements.has(this._id)||this._createDragElement(e);const i=pt._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let o={x:i.x-t.offset.x,y:i.y-t.offset.y};const u=this.dragBoundFunc();if(u!==void 0){const d=u.call(this,o,e);d?o=d:V.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(e){const t=pt._dragElements.get(this._id);t&&(t.dragStatus="stopped"),pt._endDragBefore(e),pt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=pt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||we.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let o=!1;pt._dragElements.forEach(u=>{this.isAncestorOf(u.node)&&(o=!0)}),o||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=pt._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",o=t&&t.dragStatus==="ready";i?this.stopDrag():o&&pt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return V.haveIntersection(i,this.getClientRect())}static create(e,t){return V._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=pe.prototype.getClassName.call(e),o=e.children,u,d,f;t&&(e.attrs.container=t),we[i]||(V.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const g=we[i];if(u=new g(e.attrs),o)for(d=o.length,f=0;f<d;f++)u.add(pe._createNode(o[f]));return u}}pe.protoListenerMap=new Map;pe.prototype.nodeType="Node";pe.prototype._attrsAffectingSize=[];pe.prototype.eventListeners={};pe.prototype.on.call(pe.prototype,q5,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Uo),this._clearSelfAndDescendantCache(Gs)});pe.prototype.on.call(pe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Wp)});pe.prototype.on.call(pe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Up)});pe.prototype.on.call(pe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Nh)});const Rt=D.addGetterSetter;Rt(pe,"zIndex");Rt(pe,"absolutePosition");Rt(pe,"position");Rt(pe,"x",0,ye());Rt(pe,"y",0,ye());Rt(pe,"globalCompositeOperation","source-over",Wa());Rt(pe,"opacity",1,ye());Rt(pe,"name","",Wa());Rt(pe,"id","",Wa());Rt(pe,"rotation",0,ye());D.addComponentsGetterSetter(pe,"scale",["x","y"]);Rt(pe,"scaleX",1,ye());Rt(pe,"scaleY",1,ye());D.addComponentsGetterSetter(pe,"skew",["x","y"]);Rt(pe,"skewX",0,ye());Rt(pe,"skewY",0,ye());D.addComponentsGetterSetter(pe,"offset",["x","y"]);Rt(pe,"offsetX",0,ye());Rt(pe,"offsetY",0,ye());Rt(pe,"dragDistance",void 0,ye());Rt(pe,"width",0,ye());Rt(pe,"height",0,ye());Rt(pe,"listening",!0,Ri());Rt(pe,"preventDefault",!0,Ri());Rt(pe,"filters",void 0,function(r){return this._filterUpToDate=!1,r});Rt(pe,"visible",!0,Ri());Rt(pe,"transformsEnabled","all",Wa());Rt(pe,"size");Rt(pe,"dragBoundFunc");Rt(pe,"draggable",!1,Ri());D.backCompat(pe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Gr extends pe{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const i=[];return this._descendants(o=>{const u=o._isMatch(e);return u&&i.push(o),!!(u&&t)}),i}_descendants(e){let t=!1;const i=this.getChildren();for(const o of i){if(t=e(o),t)return!0;if(o.hasChildren()&&(t=o._descendants(e),t))return!0}return!1}toObject(){const e=pe.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=pe.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){const o=this.getLayer(),u=e||o&&o.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),g=f&&f.scene,x=u&&u.isCache;if(!this.isVisible()&&!x)return this;if(g){d.save();const w=this.getAbsoluteTransform(t).getMatrix();d.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const i=this.getLayer(),o=e||i&&i.hitCanvas,u=o&&o.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const g=this.getAbsoluteTransform(t).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",o,t);return this}_drawChildren(e,t,i,o){var u;const d=t&&t.getContext(),f=this.clipWidth(),g=this.clipHeight(),x=this.clipFunc(),w=typeof f=="number"&&typeof g=="number"||x,S=i===this;if(w){d.save();const b=this.getAbsoluteTransform(i);let P=b.getMatrix();d.transform(P[0],P[1],P[2],P[3],P[4],P[5]),d.beginPath();let A;if(x)A=x.call(this,d,this);else{const R=this.clipX(),I=this.clipY();d.rect(R||0,I||0,f,g)}d.clip.apply(d,A),P=b.copy().invert().getMatrix(),d.transform(P[0],P[1],P[2],P[3],P[4],P[5])}const C=!S&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";C&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(b){b[e](t,i,o)}),C&&d.restore(),w&&d.restore()}getClientRect(e={}){var t;const i=e.skipTransform,o=e.relativeTo;let u,d,f,g,x={x:1/0,y:1/0,width:0,height:0};const w=this;(t=this.children)===null||t===void 0||t.forEach(function(b){if(!b.visible())return;const P=b.getClientRect({relativeTo:w,skipShadow:e.skipShadow,skipStroke:e.skipStroke});P.width===0&&P.height===0||(u===void 0?(u=P.x,d=P.y,f=P.x+P.width,g=P.y+P.height):(u=Math.min(u,P.x),d=Math.min(d,P.y),f=Math.max(f,P.x+P.width),g=Math.max(g,P.y+P.height)))});const S=this.find("Shape");let C=!1;for(let b=0;b<S.length;b++)if(S[b]._isVisible(this)){C=!0;break}return C&&u!==void 0?x={x:u,y:d,width:f-u,height:g-d}:x={x:0,y:0,width:0,height:0},i?x:this._transformedRect(x,o)}}D.addComponentsGetterSetter(Gr,"clip",["x","y","width","height"]);D.addGetterSetter(Gr,"clipX",void 0,ye());D.addGetterSetter(Gr,"clipY",void 0,ye());D.addGetterSetter(Gr,"clipWidth",void 0,ye());D.addGetterSetter(Gr,"clipHeight",void 0,ye());D.addGetterSetter(Gr,"clipFunc");const zc=new Map,ay=we._global.PointerEvent!==void 0;function dp(r){return zc.get(r)}function I0(r){return{evt:r,pointerId:r.pointerId}}function ly(r,e){return zc.get(r)===e}function uy(r,e){Rc(r),e.getStage()&&(zc.set(r,e),ay&&e._fire("gotpointercapture",I0(new PointerEvent("gotpointercapture"))))}function Rc(r,e){const t=zc.get(r);if(!t)return;const i=t.getStage();i&&i.content,zc.delete(r),ay&&t._fire("lostpointercapture",I0(new PointerEvent("lostpointercapture")))}const X5="Stage",Q5="string",Em="px",K5="mouseout",cy="mouseleave",dy="mouseover",hy="mouseenter",fy="mousemove",py="mousedown",gy="mouseup",kc="pointermove",Cc="pointerdown",tu="pointerup",Ec="pointercancel",$5="lostpointercapture",gh="pointerout",Pc="pointerleave",mh="pointerover",yh="pointerenter",Hp="contextmenu",my="touchstart",yy="touchend",vy="touchmove",xy="touchcancel",Vp="wheel",J5=5,Z5=[[hy,"_pointerenter"],[py,"_pointerdown"],[fy,"_pointermove"],[gy,"_pointerup"],[cy,"_pointerleave"],[my,"_pointerdown"],[vy,"_pointermove"],[yy,"_pointerup"],[xy,"_pointercancel"],[dy,"_pointerover"],[Vp,"_wheel"],[Hp,"_contextmenu"],[Cc,"_pointerdown"],[kc,"_pointermove"],[tu,"_pointerup"],[Ec,"_pointercancel"],[Pc,"_pointerleave"],[$5,"_lostpointercapture"]],hp={mouse:{[gh]:K5,[Pc]:cy,[mh]:dy,[yh]:hy,[kc]:fy,[Cc]:py,[tu]:gy,[Ec]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[gh]:"touchout",[Pc]:"touchleave",[mh]:"touchover",[yh]:"touchenter",[kc]:vy,[Cc]:my,[tu]:yy,[Ec]:xy,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[gh]:gh,[Pc]:Pc,[mh]:mh,[yh]:yh,[kc]:kc,[Cc]:Cc,[tu]:tu,[Ec]:Ec,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},bc=r=>r.indexOf("pointer")>=0?"pointer":r.indexOf("touch")>=0?"touch":"mouse",Jl=r=>{const e=bc(r);if(e==="pointer")return we.pointerEventsEnabled&&hp.pointer;if(e==="touch")return hp.touch;if(e==="mouse")return hp.mouse};function Pm(r={}){return(r.clipFunc||r.clipWidth||r.clipHeight)&&V.warn("Stage does not support clipping. Please use clip for Layers or Groups."),r}const e6="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Mc=[];let Jh=class extends Gr{constructor(e){super(Pm(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Mc.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Pm(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",i=e.getType()==="FastLayer";t||i||V.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Q5){let t;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let i=0;i<t;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Gr.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&V._isInDocument(e)&&this.container().removeChild(e);const t=Mc.indexOf(this);return t>-1&&Mc.splice(t,1),V.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(V.warn(e6),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Ho({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,o=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),o.forEach(function(u){if(!u.isVisible())return;const d=u._toKonvaCanvas(e);i.drawImage(d._canvas,e.x,e.y,d.getWidth()/d.getPixelRatio(),d.getHeight()/d.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children,i=t.length,o=i-1;for(let u=o;u>=0;u--){const d=t[u].getIntersection(e);if(d)return d}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+Em,this.content.style.height=t+Em),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e,...t){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(e);const i=this.children.length;return i>J5&&V.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),we.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return ly(e,this)}setPointerCapture(e){uy(e,this)}releaseCapture(e){Rc(e)}getLayers(){return this.children}_bindContentEvents(){we.isBrowser&&Z5.forEach(([e,t])=>{this.content.addEventListener(e,i=>{this[t](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=Jl(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=Jl(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=Jl(e.type),i=bc(e.type);if(!t)return;this.setPointersPositions(e);const o=this._getTargetShape(i),u=!(we.isDragging()||we.isTransforming())||we.hitOnDragEnabled;o&&u?(o._fireAndBubble(t.pointerout,{evt:e}),o._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):u&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=Jl(e.type),i=bc(e.type);if(!t)return;this.setPointersPositions(e);let o=!1;this._changedPointerPositions.forEach(u=>{const d=this.getIntersection(u);if(pt.justDragged=!1,we["_"+i+"ListenClick"]=!0,!d||!d.isListening()){this[i+"ClickStartShape"]=void 0;return}we.capturePointerEventsEnabled&&d.setPointerCapture(u.id),this[i+"ClickStartShape"]=d,d._fireAndBubble(t.pointerdown,{evt:e,pointerId:u.id}),o=!0;const f=e.type.indexOf("touch")>=0;d.preventDefault()&&e.cancelable&&f&&e.preventDefault()}),o||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=Jl(e.type),i=bc(e.type);if(!t)return;const o=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(we.isDragging()&&pt.node.preventDefault()&&e.cancelable&&o&&e.preventDefault(),this.setPointersPositions(e),!(!(we.isDragging()||we.isTransforming())||we.hitOnDragEnabled))return;const d={};let f=!1;const g=this._getTargetShape(i);this._changedPointerPositions.forEach(x=>{const w=dp(x.id)||this.getIntersection(x),S=x.id,C={evt:e,pointerId:S},b=g!==w;if(b&&g&&(g._fireAndBubble(t.pointerout,{...C},w),g._fireAndBubble(t.pointerleave,{...C},w)),w){if(d[w._id])return;d[w._id]=!0}w&&w.isListening()?(f=!0,b&&(w._fireAndBubble(t.pointerover,{...C},g),w._fireAndBubble(t.pointerenter,{...C},g),this[i+"targetShape"]=w),w._fireAndBubble(t.pointermove,{...C})):g&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:S}),this[i+"targetShape"]=null)}),f||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=Jl(e.type),i=bc(e.type);if(!t)return;this.setPointersPositions(e);const o=this[i+"ClickStartShape"],u=this[i+"ClickEndShape"],d={};let f=!1;this._changedPointerPositions.forEach(g=>{const x=dp(g.id)||this.getIntersection(g);if(x){if(x.releaseCapture(g.id),d[x._id])return;d[x._id]=!0}const w=g.id,S={evt:e,pointerId:w};let C=!1;we["_"+i+"InDblClickWindow"]?(C=!0,clearTimeout(this[i+"DblTimeout"])):pt.justDragged||(we["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){we["_"+i+"InDblClickWindow"]=!1},we.dblClickWindow),x&&x.isListening()?(f=!0,this[i+"ClickEndShape"]=x,x._fireAndBubble(t.pointerup,{...S}),we["_"+i+"ListenClick"]&&o&&o===x&&(x._fireAndBubble(t.pointerclick,{...S}),C&&u&&u===x&&x._fireAndBubble(t.pointerdblclick,{...S}))):(this[i+"ClickEndShape"]=null,f||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),we["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:w}),C&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:w}))}),f||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),we["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Hp,{evt:e}):this._fire(Hp,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Vp,{evt:e}):this._fire(Vp,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=dp(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(tu,I0(e)),Rc(e.pointerId)}_lostpointercapture(e){Rc(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let i=null,o=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,u=>{this._pointerPositions.push({id:u.identifier,x:(u.clientX-t.left)/t.scaleX,y:(u.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,u=>{this._changedPointerPositions.push({id:u.identifier,x:(u.clientX-t.left)/t.scaleX,y:(u.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,o=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:o},this._pointerPositions=[{x:i,y:o,id:V._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:o,id:V._getFirstPointerId(e)}])}_setPointerPosition(e){V.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Ho({width:this.width(),height:this.height()}),this.bufferHitCanvas=new R0({pixelRatio:1,width:this.width(),height:this.height()}),!we.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return V.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Jh.prototype.nodeType=X5;qt(Jh);D.addGetterSetter(Jh,"container");we.isBrowser&&document.addEventListener("visibilitychange",()=>{Mc.forEach(r=>{r.batchDraw()})});const wy="hasShadow",_y="shadowRGBA",Sy="patternImage",ky="linearGradient",Cy="radialGradient";let vh;function fp(){return vh||(vh=V.createCanvasElement().getContext("2d"),vh)}const Ic={};function t6(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function n6(r){r.stroke()}function r6(r){const e=this.attrs.fillRule;e?r.fill(e):r.fill()}function i6(r){r.stroke()}function s6(){this._clearCache(wy)}function o6(){this._clearCache(_y)}function a6(){this._clearCache(Sy)}function l6(){this._clearCache(ky)}function u6(){this._clearCache(Cy)}class le extends pe{constructor(e){super(e);let t,i=0;for(;t=V.getHitColor(),!(t&&!(t in Ic));)if(i++,i>=1e4){V.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=V.getRandomColor();break}this.colorKey=t,Ic[t]=this}getContext(){return V.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return V.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(wy,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Sy,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=fp().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const i=new Fr;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(we.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const o=i.getMatrix(),u=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);t.setTransform(u)}return t}}_getLinearGradient(){return this._getCache(ky,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=fp(),i=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),u=t.createLinearGradient(i.x,i.y,o.x,o.y);for(let d=0;d<e.length;d+=2)u.addColorStop(e[d],e[d+1]);return u}}_getRadialGradient(){return this._getCache(Cy,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=fp(),i=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),u=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let d=0;d<e.length;d+=2)u.addColorStop(e[d],e[d+1]);return u}}getShadowRGBA(){return this._getCache(_y,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=V.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return pe.prototype.destroy.call(this),delete Ic[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const o=e||this.hasFill(),u=this.hasStroke(),d=this.getAbsoluteOpacity()!==1;if(o&&u&&d)return!0;const f=this.hasShadow(),g=this.shadowForStrokeEnabled();return!!(o&&u&&f&&g)}setStrokeHitEnabled(e){V.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,i=this.getParent();for(;i;){if(i.isCached()){t=!0;break}i=i.getParent()}const o=e.skipTransform,u=e.relativeTo||t&&this.getStage()||void 0,d=this.getSelfRect(),g=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,x=d.width+g,w=d.height+g,S=!e.skipShadow&&this.hasShadow(),C=S?this.shadowOffsetX():0,b=S?this.shadowOffsetY():0,P=x+Math.abs(C),A=w+Math.abs(b),R=S&&this.shadowBlur()||0,I=P+R*2,T=A+R*2,O={width:I,height:T,x:-(g/2+R)+Math.min(C,0)+d.x,y:-(g/2+R)+Math.min(b,0)+d.y};return o?O:this._transformedRect(O,u)}drawScene(e,t,i){const o=this.getLayer(),u=e||o.getCanvas(),d=u.getContext(),f=this._getCanvasCache(),g=this.getSceneFunc(),x=this.hasShadow();let w;const S=t===this;if(!this.isVisible()&&!S)return this;if(f){d.save();const C=this.getAbsoluteTransform(t).getMatrix();return d.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(d),d.restore(),this}if(!g)return this;if(d.save(),this._useBufferCanvas()){w=this.getStage();const C=i||w.bufferCanvas,b=C.getContext();i?(b.save(),b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,C.width,C.height),b.restore()):b.clear(),b.save(),b._applyLineJoin(this),b._applyMiterLimit(this);const P=this.getAbsoluteTransform(t).getMatrix();b.transform(P[0],P[1],P[2],P[3],P[4],P[5]),g.call(this,b,this),b.restore();const A=C.pixelRatio;x&&d._applyShadow(this),S||(d._applyOpacity(this),d._applyGlobalCompositeOperation(this)),d.drawImage(C._canvas,C.x||0,C.y||0,C.width/A,C.height/A)}else{if(d._applyLineJoin(this),d._applyMiterLimit(this),!S){const C=this.getAbsoluteTransform(t).getMatrix();d.transform(C[0],C[1],C[2],C[3],C[4],C[5]),d._applyOpacity(this),d._applyGlobalCompositeOperation(this)}x&&d._applyShadow(this),g.call(this,d,this)}return d.restore(),this}drawHit(e,t,i=!1){if(!this.shouldDrawHit(t,i))return this;const o=this.getLayer(),u=e||o.hitCanvas,d=u&&u.getContext(),f=this.hitFunc()||this.sceneFunc(),g=this._getCanvasCache(),x=g&&g.hit;if(this.colorKey||V.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),x){d.save();const S=this.getAbsoluteTransform(t).getMatrix();return d.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(d),d.restore(),this}if(!f)return this;if(d.save(),d._applyLineJoin(this),d._applyMiterLimit(this),!(this===t)){const S=this.getAbsoluteTransform(t).getMatrix();d.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return f.call(this,d,this),d.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),i=this._getCachedSceneCanvas(),o=t.hit,u=o.getContext(),d=o.getWidth(),f=o.getHeight();u.clear(),u.drawImage(i._canvas,0,0,d,f);try{const g=u.getImageData(0,0,d,f),x=g.data,w=x.length,S=V._hexToRgb(this.colorKey);for(let C=0;C<w;C+=4)x[C+3]>e?(x[C]=S.r,x[C+1]=S.g,x[C+2]=S.b,x[C+3]=255):x[C+3]=0;u.putImageData(g,0,0)}catch(g){V.error("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}hasPointerCapture(e){return ly(e,this)}setPointerCapture(e){uy(e,this)}releaseCapture(e){Rc(e)}}le.prototype._fillFunc=t6;le.prototype._strokeFunc=n6;le.prototype._fillFuncHit=r6;le.prototype._strokeFuncHit=i6;le.prototype._centroid=!1;le.prototype.nodeType="Shape";qt(le);le.prototype.eventListeners={};le.prototype.on.call(le.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s6);le.prototype.on.call(le.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",o6);le.prototype.on.call(le.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",a6);le.prototype.on.call(le.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",l6);le.prototype.on.call(le.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",u6);D.addGetterSetter(le,"stroke",void 0,oy());D.addGetterSetter(le,"strokeWidth",2,ye());D.addGetterSetter(le,"fillAfterStrokeEnabled",!1);D.addGetterSetter(le,"hitStrokeWidth","auto",M0());D.addGetterSetter(le,"strokeHitEnabled",!0,Ri());D.addGetterSetter(le,"perfectDrawEnabled",!0,Ri());D.addGetterSetter(le,"shadowForStrokeEnabled",!0,Ri());D.addGetterSetter(le,"lineJoin");D.addGetterSetter(le,"lineCap");D.addGetterSetter(le,"miterLimit");D.addGetterSetter(le,"sceneFunc");D.addGetterSetter(le,"hitFunc");D.addGetterSetter(le,"dash");D.addGetterSetter(le,"dashOffset",0,ye());D.addGetterSetter(le,"shadowColor",void 0,Wa());D.addGetterSetter(le,"shadowBlur",0,ye());D.addGetterSetter(le,"shadowOpacity",1,ye());D.addComponentsGetterSetter(le,"shadowOffset",["x","y"]);D.addGetterSetter(le,"shadowOffsetX",0,ye());D.addGetterSetter(le,"shadowOffsetY",0,ye());D.addGetterSetter(le,"fillPatternImage");D.addGetterSetter(le,"fill",void 0,oy());D.addGetterSetter(le,"fillPatternX",0,ye());D.addGetterSetter(le,"fillPatternY",0,ye());D.addGetterSetter(le,"fillLinearGradientColorStops");D.addGetterSetter(le,"strokeLinearGradientColorStops");D.addGetterSetter(le,"fillRadialGradientStartRadius",0);D.addGetterSetter(le,"fillRadialGradientEndRadius",0);D.addGetterSetter(le,"fillRadialGradientColorStops");D.addGetterSetter(le,"fillPatternRepeat","repeat");D.addGetterSetter(le,"fillEnabled",!0);D.addGetterSetter(le,"strokeEnabled",!0);D.addGetterSetter(le,"shadowEnabled",!0);D.addGetterSetter(le,"dashEnabled",!0);D.addGetterSetter(le,"strokeScaleEnabled",!0);D.addGetterSetter(le,"fillPriority","color");D.addComponentsGetterSetter(le,"fillPatternOffset",["x","y"]);D.addGetterSetter(le,"fillPatternOffsetX",0,ye());D.addGetterSetter(le,"fillPatternOffsetY",0,ye());D.addComponentsGetterSetter(le,"fillPatternScale",["x","y"]);D.addGetterSetter(le,"fillPatternScaleX",1,ye());D.addGetterSetter(le,"fillPatternScaleY",1,ye());D.addComponentsGetterSetter(le,"fillLinearGradientStartPoint",["x","y"]);D.addComponentsGetterSetter(le,"strokeLinearGradientStartPoint",["x","y"]);D.addGetterSetter(le,"fillLinearGradientStartPointX",0);D.addGetterSetter(le,"strokeLinearGradientStartPointX",0);D.addGetterSetter(le,"fillLinearGradientStartPointY",0);D.addGetterSetter(le,"strokeLinearGradientStartPointY",0);D.addComponentsGetterSetter(le,"fillLinearGradientEndPoint",["x","y"]);D.addComponentsGetterSetter(le,"strokeLinearGradientEndPoint",["x","y"]);D.addGetterSetter(le,"fillLinearGradientEndPointX",0);D.addGetterSetter(le,"strokeLinearGradientEndPointX",0);D.addGetterSetter(le,"fillLinearGradientEndPointY",0);D.addGetterSetter(le,"strokeLinearGradientEndPointY",0);D.addComponentsGetterSetter(le,"fillRadialGradientStartPoint",["x","y"]);D.addGetterSetter(le,"fillRadialGradientStartPointX",0);D.addGetterSetter(le,"fillRadialGradientStartPointY",0);D.addComponentsGetterSetter(le,"fillRadialGradientEndPoint",["x","y"]);D.addGetterSetter(le,"fillRadialGradientEndPointX",0);D.addGetterSetter(le,"fillRadialGradientEndPointY",0);D.addGetterSetter(le,"fillPatternRotation",0);D.addGetterSetter(le,"fillRule",void 0,Wa());D.backCompat(le,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const c6="beforeDraw",d6="draw",Ey=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h6=Ey.length;let Ha=class extends Gr{constructor(e){super(e),this.canvas=new Ho,this.hitCanvas=new R0({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){pe.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!pe.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(pe.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(pe.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return pe.prototype.remove.call(this),e&&e.parentNode&&V._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&V.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),pe.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){V.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){V.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,V.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let o=0;o<h6;o++){const u=Ey[o],d=this._getIntersection({x:e.x+u.x*t,y:e.y+u.y*t}),f=d.shape;if(f)return f;if(i=!!d.antialiased,!d.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,o=i[3];if(o===255){const u=V.getHitColorKey(i[0],i[1],i[2]),d=Ic[u];return d?{shape:d}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,t,i){const o=this.getLayer(),u=e||o&&o.getCanvas();return this._fire(c6,{node:this}),this.clearBeforeDraw()&&u.getContext().clear(),Gr.prototype.drawScene.call(this,u,t,i),this._fire(d6,{node:this}),this}drawHit(e,t){const i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Gr.prototype.drawHit.call(this,o,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){V.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return V.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return V.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Ha.prototype.nodeType="Layer";qt(Ha);D.addGetterSetter(Ha,"imageSmoothingEnabled",!0);D.addGetterSetter(Ha,"clearBeforeDraw",!0);D.addGetterSetter(Ha,"hitGraphEnabled",!0,Ri());class A0 extends Ha{constructor(e){super(e),this.listening(!1),V.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}A0.prototype.nodeType="FastLayer";qt(A0);let iu=class extends Gr{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&V.throw("You may only add groups and shapes to groups.")}};iu.prototype.nodeType="Group";qt(iu);const pp=(function(){return Fa.performance&&Fa.performance.now?function(){return Fa.performance.now()}:function(){return new Date().getTime()}})();class ui{constructor(e,t){this.id=ui.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:pp(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,i=t.length;for(let o=0;o<i;o++)if(t[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=ui.animations,i=t.length;for(let o=0;o<i;o++)if(t[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=pp(),ui._addAnimation(this),this}stop(){return ui._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,i=this.animations,o=i.length;for(let u=0;u<o;u++)if(i[u].id===t){this.animations.splice(u,1);break}}static _runFrames(){const e={},t=this.animations;for(let i=0;i<t.length;i++){const o=t[i],u=o.layers,d=o.func;o._updateFrameObject(pp());const f=u.length;let g;if(d?g=d.call(o,o.frame)!==!1:g=!0,!!g)for(let x=0;x<f;x++){const w=u[x];w._id!==void 0&&(e[w._id]=w)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=ui;e.animations.length?(e._runFrames(),V.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,V.requestAnimFrame(this._animationLoop))}}ui.animations=[];ui.animIdCounter=0;ui.animRunning=!1;const f6={node:1,duration:1,easing:1,onFinish:1,yoyo:1},p6=1,bm=2,Tm=3,Nm=["fill","stroke","shadowColor"];let g6=0;class m6{constructor(e,t,i,o,u,d,f){this.prop=e,this.propFunc=t,this.begin=o,this._pos=o,this.duration=d,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=u-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=bm,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Tm,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===bm?this.setTime(e):this.state===Tm&&this.setTime(this.duration-e)}pause(){this.state=p6,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Lt{constructor(e){const t=this,i=e.node,o=i._id,u=e.easing||Ac.Linear,d=!!e.yoyo;let f,g;typeof e.duration>"u"?f=.3:e.duration===0?f=.001:f=e.duration,this.node=i,this._id=g6++;const x=i.getLayer()||(i instanceof we.Stage?i.getLayers():null);x||V.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ui(function(){t.tween.onEnterFrame()},x),this.tween=new m6(g,function(w){t._tweenFunc(w)},u,0,1,f*1e3,d),this._addListeners(),Lt.attrs[o]||(Lt.attrs[o]={}),Lt.attrs[o][this._id]||(Lt.attrs[o][this._id]={}),Lt.tweens[o]||(Lt.tweens[o]={});for(g in e)f6[g]===void 0&&this._addAttr(g,e[g]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const i=this.node,o=i._id;let u,d,f,g,x;const w=Lt.tweens[o][e];w&&delete Lt.attrs[o][w][e];let S=i.getAttr(e);if(V._isArray(t))if(u=[],d=Math.max(t.length,S.length),e==="points"&&t.length!==S.length&&(t.length>S.length?(g=S,S=V._prepareArrayForTween(S,t,i.closed())):(f=t,t=V._prepareArrayForTween(t,S,i.closed()))),e.indexOf("fill")===0)for(let C=0;C<d;C++)if(C%2===0)u.push(t[C]-S[C]);else{const b=V.colorToRGBA(S[C]);x=V.colorToRGBA(t[C]),S[C]=b,u.push({r:x.r-b.r,g:x.g-b.g,b:x.b-b.b,a:x.a-b.a})}else for(let C=0;C<d;C++)u.push(t[C]-S[C]);else Nm.indexOf(e)!==-1?(S=V.colorToRGBA(S),x=V.colorToRGBA(t),u={r:x.r-S.r,g:x.g-S.g,b:x.b-S.b,a:x.a-S.a}):u=t-S;Lt.attrs[o][this._id][e]={start:S,diff:u,end:t,trueEnd:f,trueStart:g},Lt.tweens[o][e]=this._id}_tweenFunc(e){const t=this.node,i=Lt.attrs[t._id][this._id];let o,u,d,f,g,x,w,S;for(o in i){if(u=i[o],d=u.start,f=u.diff,S=u.end,V._isArray(d))if(g=[],w=Math.max(d.length,S.length),o.indexOf("fill")===0)for(x=0;x<w;x++)x%2===0?g.push((d[x]||0)+f[x]*e):g.push("rgba("+Math.round(d[x].r+f[x].r*e)+","+Math.round(d[x].g+f[x].g*e)+","+Math.round(d[x].b+f[x].b*e)+","+(d[x].a+f[x].a*e)+")");else for(x=0;x<w;x++)g.push((d[x]||0)+f[x]*e);else Nm.indexOf(o)!==-1?g="rgba("+Math.round(d.r+f.r*e)+","+Math.round(d.g+f.g*e)+","+Math.round(d.b+f.b*e)+","+(d.a+f.a*e)+")":g=d+f*e;t.setAttr(o,g)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=Lt.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=Lt.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,i=Lt.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const o in i)delete Lt.tweens[e][o];delete Lt.attrs[e][t],Lt.tweens[e]&&(Object.keys(Lt.tweens[e]).length===0&&delete Lt.tweens[e],Object.keys(Lt.attrs[e]).length===0&&delete Lt.attrs[e])}}Lt.attrs={};Lt.tweens={};pe.prototype.to=function(r){const e=r.onFinish;r.node=this,r.onFinish=function(){this.destroy(),e&&e()},new Lt(r).play()};const Ac={BackEaseIn(r,e,t,i){return t*(r/=i)*r*((1.70158+1)*r-1.70158)+e},BackEaseOut(r,e,t,i){return t*((r=r/i-1)*r*((1.70158+1)*r+1.70158)+1)+e},BackEaseInOut(r,e,t,i){let o=1.70158;return(r/=i/2)<1?t/2*(r*r*(((o*=1.525)+1)*r-o))+e:t/2*((r-=2)*r*(((o*=1.525)+1)*r+o)+2)+e},ElasticEaseIn(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i)===1?e+t:(u||(u=i*.3),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),-(o*Math.pow(2,10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u))+e)},ElasticEaseOut(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i)===1?e+t:(u||(u=i*.3),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),o*Math.pow(2,-10*r)*Math.sin((r*i-d)*(2*Math.PI)/u)+t+e)},ElasticEaseInOut(r,e,t,i,o,u){let d=0;return r===0?e:(r/=i/2)===2?e+t:(u||(u=i*(.3*1.5)),!o||o<Math.abs(t)?(o=t,d=u/4):d=u/(2*Math.PI)*Math.asin(t/o),r<1?-.5*(o*Math.pow(2,10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u))+e:o*Math.pow(2,-10*(r-=1))*Math.sin((r*i-d)*(2*Math.PI)/u)*.5+t+e)},BounceEaseOut(r,e,t,i){return(r/=i)<1/2.75?t*(7.5625*r*r)+e:r<2/2.75?t*(7.5625*(r-=1.5/2.75)*r+.75)+e:r<2.5/2.75?t*(7.5625*(r-=2.25/2.75)*r+.9375)+e:t*(7.5625*(r-=2.625/2.75)*r+.984375)+e},BounceEaseIn(r,e,t,i){return t-Ac.BounceEaseOut(i-r,0,t,i)+e},BounceEaseInOut(r,e,t,i){return r<i/2?Ac.BounceEaseIn(r*2,0,t,i)*.5+e:Ac.BounceEaseOut(r*2-i,0,t,i)*.5+t*.5+e},EaseIn(r,e,t,i){return t*(r/=i)*r+e},EaseOut(r,e,t,i){return-t*(r/=i)*(r-2)+e},EaseInOut(r,e,t,i){return(r/=i/2)<1?t/2*r*r+e:-t/2*(--r*(r-2)-1)+e},StrongEaseIn(r,e,t,i){return t*(r/=i)*r*r*r*r+e},StrongEaseOut(r,e,t,i){return t*((r=r/i-1)*r*r*r*r+1)+e},StrongEaseInOut(r,e,t,i){return(r/=i/2)<1?t/2*r*r*r*r*r+e:t/2*((r-=2)*r*r*r*r+2)+e},Linear(r,e,t,i){return t*r/i+e}},Ga=V._assign(we,{Util:V,Transform:Fr,Node:pe,Container:Gr,Stage:Jh,stages:Mc,Layer:Ha,FastLayer:A0,Group:iu,DD:pt,Shape:le,shapes:Ic,Animation:ui,Tween:Lt,Easings:Ac,Context:Kh,Canvas:N0});class Hs extends le{_sceneFunc(e){const t=we.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),o=we.getAngle(i?360-this.angle():this.angle()),u=Math.cos(Math.min(o,Math.PI)),d=1,f=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),g=Math.sin(Math.min(o,Math.PI/2)),x=u*(u>0?e:t),w=d*t,S=f*(f>0?e:t),C=g*(g>0?t:e);return{x,y:i?-1*C:S,width:w-x,height:C-S}}}Hs.prototype._centroid=!0;Hs.prototype.className="Arc";Hs.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];qt(Hs);D.addGetterSetter(Hs,"innerRadius",0,ye());D.addGetterSetter(Hs,"outerRadius",0,ye());D.addGetterSetter(Hs,"angle",0,ye());D.addGetterSetter(Hs,"clockwise",!1,Ri());function qp(r,e,t,i,o,u,d){const f=Math.sqrt(Math.pow(t-r,2)+Math.pow(i-e,2)),g=Math.sqrt(Math.pow(o-t,2)+Math.pow(u-i,2)),x=d*f/(f+g),w=d*g/(f+g),S=t-x*(o-r),C=i-x*(u-e),b=t+w*(o-r),P=i+w*(u-e);return[S,C,b,P]}function Rm(r,e){const t=r.length,i=[];for(let o=2;o<t-2;o+=2){const u=qp(r[o-2],r[o-1],r[o],r[o+1],r[o+2],r[o+3],e);isNaN(u[0])||(i.push(u[0]),i.push(u[1]),i.push(r[o]),i.push(r[o+1]),i.push(u[2]),i.push(u[3]))}return i}function y6(r){const e=[[r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]]],t=[];for(const i of e){const o=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(o!==0){const u=6*i[0]-12*i[1]+6*i[2],d=-3*i[0]+3*i[1],f=u*u-4*o*d;if(f>=0){const g=Math.sqrt(f);t.push((-u+g)/(2*o)),t.push((-u-g)/(2*o))}}}return t.filter(i=>i>0&&i<1).flatMap(i=>e.map(o=>{const u=1-i;return u*u*u*o[0]+3*u*u*i*o[1]+3*u*i*i*o[2]+i*i*i*o[3]}))}let Vs=class extends le{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),i=t.length,o=this.tension(),u=this.closed(),d=this.bezier();if(!i)return;let f=0;if(e.beginPath(),e.moveTo(t[0],t[1]),o!==0&&i>4){const g=this.getTensionPoints(),x=g.length;for(f=u?0:4,u||e.quadraticCurveTo(g[0],g[1],g[2],g[3]);f<x-2;)e.bezierCurveTo(g[f++],g[f++],g[f++],g[f++],g[f++],g[f++]);u||e.quadraticCurveTo(g[x-2],g[x-1],t[i-2],t[i-1])}else if(d)for(f=2;f<i;)e.bezierCurveTo(t[f++],t[f++],t[f++],t[f++],t[f++],t[f++]);else for(f=2;f<i;f+=2)e.lineTo(t[f],t[f+1]);u?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Rm(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,i=this.tension(),o=qp(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),u=qp(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),d=Rm(e,i);return[o[2],o[3]].concat(d).concat([u[0],u[1],e[t-2],e[t-1],u[2],u[3],o[0],o[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...y6(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],i=e[0],o=e[1],u=e[1],d,f;for(let g=0;g<e.length/2;g++)d=e[g*2],f=e[g*2+1],t=Math.min(t,d),i=Math.max(i,d),o=Math.min(o,f),u=Math.max(u,f);return{x:t,y:o,width:i-t,height:u-o}}};Vs.prototype.className="Line";Vs.prototype._attrsAffectingSize=["points","bezier","tension"];qt(Vs);D.addGetterSetter(Vs,"closed",!1);D.addGetterSetter(Vs,"bezier",!1);D.addGetterSetter(Vs,"tension",0,ye());D.addGetterSetter(Vs,"points",[],A5());const v6=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],x6=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],w6=[[1],[1,1],[1,2,1],[1,3,3,1]],Mm=(r,e,t)=>{let i,o;const d=t/2;i=0;for(let f=0;f<20;f++)o=d*v6[20][f]+d,i+=x6[20][f]*_6(r,e,o);return d*i},Im=(r,e,t)=>{t===void 0&&(t=1);const i=r[0]-2*r[1]+r[2],o=e[0]-2*e[1]+e[2],u=2*r[1]-2*r[0],d=2*e[1]-2*e[0],f=4*(i*i+o*o),g=4*(i*u+o*d),x=u*u+d*d;if(f===0)return t*Math.sqrt(Math.pow(r[2]-r[0],2)+Math.pow(e[2]-e[0],2));const w=g/(2*f),S=x/f,C=t+w,b=S-w*w,P=C*C+b>0?Math.sqrt(C*C+b):0,A=w*w+b>0?Math.sqrt(w*w+b):0,R=w+Math.sqrt(w*w+b)!==0?b*Math.log(Math.abs((C+P)/(w+A))):0;return Math.sqrt(f)/2*(C*P-w*A+R)};function _6(r,e,t){const i=Yp(1,t,r),o=Yp(1,t,e),u=i*i+o*o;return Math.sqrt(u)}const Yp=(r,e,t)=>{const i=t.length-1;let o,u;if(i===0)return 0;if(r===0){u=0;for(let d=0;d<=i;d++)u+=w6[i][d]*Math.pow(1-e,i-d)*Math.pow(e,d)*t[d];return u}else{o=new Array(i);for(let d=0;d<i;d++)o[d]=i*(t[d+1]-t[d]);return Yp(r-1,e,o)}},Am=(r,e,t)=>{let i=1,o=r/e,u=(r-t(o))/e,d=0;for(;i>.001;){const f=t(o+u),g=Math.abs(r-f)/e;if(g<i)i=g,o+=u;else{const x=t(o-u),w=Math.abs(r-x)/e;w<i?(i=w,o-=u):u/=2}if(d++,d>500)break}return o};let ci=class Er extends le{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Er.parsePathData(this.data()),this.pathLength=Er.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let i=!1;for(let o=0;o<t.length;o++){const u=t[o].command,d=t[o].points;switch(u){case"L":e.lineTo(d[0],d[1]);break;case"M":e.moveTo(d[0],d[1]);break;case"C":e.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);break;case"Q":e.quadraticCurveTo(d[0],d[1],d[2],d[3]);break;case"A":const f=d[0],g=d[1],x=d[2],w=d[3],S=d[4],C=d[5],b=d[6],P=d[7],A=x>w?x:w,R=x>w?1:x/w,I=x>w?w/x:1;e.translate(f,g),e.rotate(b),e.scale(R,I),e.arc(0,0,A,S,S+C,1-P),e.scale(1/R,1/I),e.rotate(-b),e.translate(-f,-g);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],w=g.points[5],S=g.points[4]+w;let C=Math.PI/180;if(Math.abs(x-S)<C&&(C=Math.abs(x-S)),w<0)for(let b=x-C;b>S;b-=C){const P=Er.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);e.push(P.x,P.y)}else for(let b=x+C;b<S;b+=C){const P=Er.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],b,0);e.push(P.x,P.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const w=Er.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);e.push(w.x,w.y)}else e=e.concat(g.points)});let t=e[0],i=e[0],o=e[1],u=e[1],d,f;for(let g=0;g<e.length/2;g++)d=e[g*2],f=e[g*2+1],isNaN(d)||(t=Math.min(t,d),i=Math.max(i,d)),isNaN(f)||(o=Math.min(o,f),u=Math.max(u,f));return{x:t,y:o,width:i-t,height:u-o}}getLength(){return this.pathLength}getPointAtLength(e){return Er.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,o){return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}static getPathLength(e){let t=0;for(let i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let i,o=0,u=t.length;if(!u)return null;for(;o<u&&e>t[o].pathLength;)e-=t[o].pathLength,++o;if(o===u)return i=t[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return t[o].command==="M"?(i=t[o].points.slice(0,2),{x:i[0],y:i[1]}):{x:t[o].start.x,y:t[o].start.y};const d=t[o],f=d.points;switch(d.command){case"L":return Er.getPointOnLine(e,d.start.x,d.start.y,f[0],f[1]);case"C":return Er.getPointOnCubicBezier(Am(e,Er.getPathLength(t),A=>Mm([d.start.x,f[0],f[2],f[4]],[d.start.y,f[1],f[3],f[5]],A)),d.start.x,d.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return Er.getPointOnQuadraticBezier(Am(e,Er.getPathLength(t),A=>Im([d.start.x,f[0],f[2]],[d.start.y,f[1],f[3]],A)),d.start.x,d.start.y,f[0],f[1],f[2],f[3]);case"A":const g=f[0],x=f[1],w=f[2],S=f[3],C=f[5],b=f[6];let P=f[4];return P+=C*e/d.pathLength,Er.getPointOnEllipticalArc(g,x,w,S,P,b)}return null}static getPointOnLine(e,t,i,o,u,d,f){d=d??t,f=f??i;const g=this.getLineLength(t,i,o,u);if(g<1e-10)return{x:t,y:i};if(o===t)return{x:d,y:f+(u>i?e:-e)};const x=(u-i)/(o-t),w=Math.sqrt(e*e/(1+x*x))*(o<t?-1:1),S=x*w;if(Math.abs(f-i-x*(d-t))<1e-10)return{x:d+w,y:f+S};const C=((d-t)*(o-t)+(f-i)*(u-i))/(g*g),b=t+C*(o-t),P=i+C*(u-i),A=this.getLineLength(d,f,b,P),R=Math.sqrt(e*e-A*A),I=Math.sqrt(R*R/(1+x*x))*(o<t?-1:1),T=x*I;return{x:b+I,y:P+T}}static getPointOnCubicBezier(e,t,i,o,u,d,f,g,x){function w(R){return R*R*R}function S(R){return 3*R*R*(1-R)}function C(R){return 3*R*(1-R)*(1-R)}function b(R){return(1-R)*(1-R)*(1-R)}const P=g*w(e)+d*S(e)+o*C(e)+t*b(e),A=x*w(e)+f*S(e)+u*C(e)+i*b(e);return{x:P,y:A}}static getPointOnQuadraticBezier(e,t,i,o,u,d,f){function g(b){return b*b}function x(b){return 2*b*(1-b)}function w(b){return(1-b)*(1-b)}const S=d*g(e)+o*x(e)+t*w(e),C=f*g(e)+u*x(e)+i*w(e);return{x:S,y:C}}static getPointOnEllipticalArc(e,t,i,o,u,d){const f=Math.cos(d),g=Math.sin(d),x={x:i*Math.cos(u),y:o*Math.sin(u)};return{x:e+(x.x*f-x.y*g),y:t+(x.x*g+x.y*f)}}static parsePathData(e){if(!e)return[];let t=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let S=0;S<i.length;S++)t=t.replace(new RegExp(i[S],"g"),"|"+i[S]);const o=t.split("|"),u=[],d=[];let f=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let w;for(let S=1;S<o.length;S++){let C=o[S],b=C.charAt(0);for(C=C.slice(1),d.length=0;w=x.exec(C);)d.push(w[0]);let P=[],A=b==="A"||b==="a"?0:-1;for(let R=0,I=d.length;R<I;R++){const T=d[R];if(T==="00"){P.push(0,0),A>=0&&(A+=2,A>=7&&(A-=7));continue}if(A>=0){if(A===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(T)){P.push(parseInt(T[0],10)),P.push(parseInt(T[1],10)),P.push(parseFloat(T.slice(2))),A+=3,A>=7&&(A-=7);continue}if(T==="11"||T==="10"||T==="01"){P.push(parseInt(T[0],10)),P.push(parseInt(T[1],10)),A+=2,A>=7&&(A-=7);continue}if(T==="0"||T==="1"){P.push(parseInt(T,10)),A+=1,A>=7&&(A-=7);continue}}else if(A===4){if(/^[01]\d+(?:\.\d+)?$/.test(T)){P.push(parseInt(T[0],10)),P.push(parseFloat(T.slice(1))),A+=2,A>=7&&(A-=7);continue}if(T==="0"||T==="1"){P.push(parseInt(T,10)),A+=1,A>=7&&(A-=7);continue}}const O=parseFloat(T);isNaN(O)?P.push(0):P.push(O),A+=1,A>=7&&(A-=7)}else{const O=parseFloat(T);isNaN(O)?P.push(0):P.push(O)}}for(;P.length>0&&!isNaN(P[0]);){let R="",I=[];const T=f,O=g;let z,J,te,ie,Y,ge,ue,ke,de,Oe;switch(b){case"l":f+=P.shift(),g+=P.shift(),R="L",I.push(f,g);break;case"L":f=P.shift(),g=P.shift(),I.push(f,g);break;case"m":const Ne=P.shift(),_e=P.shift();if(f+=Ne,g+=_e,R="M",u.length>2&&u[u.length-1].command==="z"){for(let ae=u.length-2;ae>=0;ae--)if(u[ae].command==="M"){f=u[ae].points[0]+Ne,g=u[ae].points[1]+_e;break}}I.push(f,g),b="l";break;case"M":f=P.shift(),g=P.shift(),R="M",I.push(f,g),b="L";break;case"h":f+=P.shift(),R="L",I.push(f,g);break;case"H":f=P.shift(),R="L",I.push(f,g);break;case"v":g+=P.shift(),R="L",I.push(f,g);break;case"V":g=P.shift(),R="L",I.push(f,g);break;case"C":I.push(P.shift(),P.shift(),P.shift(),P.shift()),f=P.shift(),g=P.shift(),I.push(f,g);break;case"c":I.push(f+P.shift(),g+P.shift(),f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),R="C",I.push(f,g);break;case"S":J=f,te=g,z=u[u.length-1],z.command==="C"&&(J=f+(f-z.points[2]),te=g+(g-z.points[3])),I.push(J,te,P.shift(),P.shift()),f=P.shift(),g=P.shift(),R="C",I.push(f,g);break;case"s":J=f,te=g,z=u[u.length-1],z.command==="C"&&(J=f+(f-z.points[2]),te=g+(g-z.points[3])),I.push(J,te,f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),R="C",I.push(f,g);break;case"Q":I.push(P.shift(),P.shift()),f=P.shift(),g=P.shift(),I.push(f,g);break;case"q":I.push(f+P.shift(),g+P.shift()),f+=P.shift(),g+=P.shift(),R="Q",I.push(f,g);break;case"T":J=f,te=g,z=u[u.length-1],z.command==="Q"&&(J=f+(f-z.points[0]),te=g+(g-z.points[1])),f=P.shift(),g=P.shift(),R="Q",I.push(J,te,f,g);break;case"t":J=f,te=g,z=u[u.length-1],z.command==="Q"&&(J=f+(f-z.points[0]),te=g+(g-z.points[1])),f+=P.shift(),g+=P.shift(),R="Q",I.push(J,te,f,g);break;case"A":ie=P.shift(),Y=P.shift(),ge=P.shift(),ue=P.shift(),ke=P.shift(),de=f,Oe=g,f=P.shift(),g=P.shift(),R="A",I=this.convertEndpointToCenterParameterization(de,Oe,f,g,ue,ke,ie,Y,ge);break;case"a":ie=P.shift(),Y=P.shift(),ge=P.shift(),ue=P.shift(),ke=P.shift(),de=f,Oe=g,f+=P.shift(),g+=P.shift(),R="A",I=this.convertEndpointToCenterParameterization(de,Oe,f,g,ue,ke,ie,Y,ge);break}u.push({command:R||b,points:I,start:{x:T,y:O},pathLength:this.calcLength(T,O,R||b,I)})}(b==="z"||b==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(e,t,i,o){let u,d,f,g;const x=Er;switch(i){case"L":return x.getLineLength(e,t,o[0],o[1]);case"C":return Mm([e,o[0],o[2],o[4]],[t,o[1],o[3],o[5]],1);case"Q":return Im([e,o[0],o[2]],[t,o[1],o[3]],1);case"A":u=0;const w=o[4],S=o[5],C=o[4]+S;let b=Math.PI/180;if(Math.abs(w-C)<b&&(b=Math.abs(w-C)),d=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],w,0),S<0)for(g=w-b;g>C;g-=b)f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),d=f;else for(g=w+b;g<C;g+=b)f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),d=f;return f=x.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],C,0),u+=x.getLineLength(d.x,d.y,f.x,f.y),u}return 0}static convertEndpointToCenterParameterization(e,t,i,o,u,d,f,g,x){const w=x*(Math.PI/180),S=Math.cos(w)*(e-i)/2+Math.sin(w)*(t-o)/2,C=-1*Math.sin(w)*(e-i)/2+Math.cos(w)*(t-o)/2,b=S*S/(f*f)+C*C/(g*g);b>1&&(f*=Math.sqrt(b),g*=Math.sqrt(b));let P=Math.sqrt((f*f*(g*g)-f*f*(C*C)-g*g*(S*S))/(f*f*(C*C)+g*g*(S*S)));u===d&&(P*=-1),isNaN(P)&&(P=0);const A=P*f*C/g,R=P*-g*S/f,I=(e+i)/2+Math.cos(w)*A-Math.sin(w)*R,T=(t+o)/2+Math.sin(w)*A+Math.cos(w)*R,O=function(ue){return Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1])},z=function(ue,ke){return(ue[0]*ke[0]+ue[1]*ke[1])/(O(ue)*O(ke))},J=function(ue,ke){return(ue[0]*ke[1]<ue[1]*ke[0]?-1:1)*Math.acos(z(ue,ke))},te=J([1,0],[(S-A)/f,(C-R)/g]),ie=[(S-A)/f,(C-R)/g],Y=[(-1*S-A)/f,(-1*C-R)/g];let ge=J(ie,Y);return z(ie,Y)<=-1&&(ge=Math.PI),z(ie,Y)>=1&&(ge=0),d===0&&ge>0&&(ge=ge-2*Math.PI),d===1&&ge<0&&(ge=ge+2*Math.PI),[I,T,f,g,te,ge,w,d]}};ci.prototype.className="Path";ci.prototype._attrsAffectingSize=["data"];qt(ci);D.addGetterSetter(ci,"data");class Va extends Vs{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,i=this.points();let o=i;const u=this.tension()!==0&&i.length>4;u&&(o=this.getTensionPoints());const d=this.pointerLength(),f=i.length;let g,x;if(u){const C=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[f-2],i[f-1]],b=ci.calcLength(o[o.length-4],o[o.length-3],"C",C),P=ci.getPointOnQuadraticBezier(Math.min(1,1-d/b),C[0],C[1],C[2],C[3],C[4],C[5]);g=i[f-2]-P.x,x=i[f-1]-P.y}else g=i[f-2]-i[f-4],x=i[f-1]-i[f-3];const w=(Math.atan2(x,g)+t)%t,S=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[f-2],i[f-1]),e.rotate(w),e.moveTo(0,0),e.lineTo(-d,S/2),e.lineTo(-d,-S/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),u?(g=(o[0]+o[2])/2-i[0],x=(o[1]+o[3])/2-i[1]):(g=i[2]-i[0],x=i[3]-i[1]),e.rotate((Math.atan2(-x,-g)+t)%t),e.moveTo(0,0),e.lineTo(-d,S/2),e.lineTo(-d,-S/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}Va.prototype.className="Arrow";qt(Va);D.addGetterSetter(Va,"pointerLength",10,ye());D.addGetterSetter(Va,"pointerWidth",10,ye());D.addGetterSetter(Va,"pointerAtBeginning",!1);D.addGetterSetter(Va,"pointerAtEnding",!0);let au=class extends le{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};au.prototype._centroid=!0;au.prototype.className="Circle";au.prototype._attrsAffectingSize=["radius"];qt(au);D.addGetterSetter(au,"radius",0,ye());class Xo extends le{_sceneFunc(e){const t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Xo.prototype.className="Ellipse";Xo.prototype._centroid=!0;Xo.prototype._attrsAffectingSize=["radiusX","radiusY"];qt(Xo);D.addComponentsGetterSetter(Xo,"radius",["x","y"]);D.addGetterSetter(Xo,"radiusX",0,ye());D.addGetterSetter(Xo,"radiusY",0,ye());class Hr extends le{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),u=this.attrs.image;let d;if(u){const f=this.attrs.cropWidth,g=this.attrs.cropHeight;f&&g?d=[u,this.cropX(),this.cropY(),f,g,0,0,t,i]:d=[u,0,0,t,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?V.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),u&&(o&&e.clip(),e.drawImage.apply(e,d))}_hitFunc(e){const t=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?V.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width)!==null&&i!==void 0?i:0}getHeight(){var e,t,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}static fromURL(e,t,i=null){const o=V.createImageElement();o.onload=function(){const u=new Hr({image:o});t(u)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}}Hr.prototype.className="Image";Hr.prototype._attrsAffectingSize=["image"];qt(Hr);D.addGetterSetter(Hr,"cornerRadius",0,$h(4));D.addGetterSetter(Hr,"image");D.addComponentsGetterSetter(Hr,"crop",["x","y","width","height"]);D.addGetterSetter(Hr,"cropX",0,ye());D.addGetterSetter(Hr,"cropY",0,ye());D.addGetterSetter(Hr,"cropWidth",0,ye());D.addGetterSetter(Hr,"cropHeight",0,ye());const Py=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],S6="Change.konva",k6="none",Xp="up",Qp="right",Kp="down",$p="left",C6=Py.length;class O0 extends iu{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,i;const o=function(){t._sync()};for(i=0;i<C6;i++)e.on(Py[i]+S6,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),i,o,u,d,f,g,x;if(e&&t){switch(i=e.width(),o=e.height(),u=t.pointerDirection(),d=t.pointerWidth(),x=t.pointerHeight(),f=0,g=0,u){case Xp:f=i/2,g=-1*x;break;case Qp:f=i+d,g=o/2;break;case Kp:f=i/2,g=o+x;break;case $p:f=-1*d,g=o/2;break}t.setAttrs({x:-1*f,y:-1*g,width:i,height:o}),e.setAttrs({x:-1*f,y:-1*g})}}}O0.prototype.className="Label";qt(O0);class qa extends le{_sceneFunc(e){const t=this.width(),i=this.height(),o=this.pointerDirection(),u=this.pointerWidth(),d=this.pointerHeight(),f=this.cornerRadius();let g=0,x=0,w=0,S=0;typeof f=="number"?g=x=w=S=Math.min(f,t/2,i/2):(g=Math.min(f[0]||0,t/2,i/2),x=Math.min(f[1]||0,t/2,i/2),S=Math.min(f[2]||0,t/2,i/2),w=Math.min(f[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(g,0),o===Xp&&(e.lineTo((t-u)/2,0),e.lineTo(t/2,-1*d),e.lineTo((t+u)/2,0)),e.lineTo(t-x,0),e.arc(t-x,x,x,Math.PI*3/2,0,!1),o===Qp&&(e.lineTo(t,(i-d)/2),e.lineTo(t+u,i/2),e.lineTo(t,(i+d)/2)),e.lineTo(t,i-S),e.arc(t-S,i-S,S,0,Math.PI/2,!1),o===Kp&&(e.lineTo((t+u)/2,i),e.lineTo(t/2,i+d),e.lineTo((t-u)/2,i)),e.lineTo(w,i),e.arc(w,i-w,w,Math.PI/2,Math.PI,!1),o===$p&&(e.lineTo(0,(i+d)/2),e.lineTo(-1*u,i/2),e.lineTo(0,(i-d)/2)),e.lineTo(0,g),e.arc(g,g,g,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,i=this.pointerWidth(),o=this.pointerHeight(),u=this.pointerDirection(),d=this.width(),f=this.height();return u===Xp?(t-=o,f+=o):u===Kp?f+=o:u===$p?(e-=i*1.5,d+=i):u===Qp&&(d+=i*1.5),{x:e,y:t,width:d,height:f}}}qa.prototype.className="Tag";qt(qa);D.addGetterSetter(qa,"pointerDirection",k6);D.addGetterSetter(qa,"pointerWidth",0,ye());D.addGetterSetter(qa,"pointerHeight",0,ye());D.addGetterSetter(qa,"cornerRadius",0,$h(4));let Vc=class extends le{_sceneFunc(e){const t=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),t?V.drawRoundedRectPath(e,i,o,t):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};Vc.prototype.className="Rect";qt(Vc);D.addGetterSetter(Vc,"cornerRadius",0,$h(4));let Qo=class extends le{_sceneFunc(e){const t=this._getPoints(),i=this.radius(),o=this.sides(),u=this.cornerRadius();if(e.beginPath(),u)V.drawRoundedPolygonPath(e,t,o,i,u);else{e.moveTo(t[0].x,t[0].y);for(let d=1;d<t.length;d++)e.lineTo(t[d].x,t[d].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(let o=0;o<e;o++)i.push({x:t*Math.sin(o*2*Math.PI/e),y:-1*t*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let t=e[0].x,i=e[0].x,o=e[0].y,u=e[0].y;return e.forEach(d=>{t=Math.min(t,d.x),i=Math.max(i,d.x),o=Math.min(o,d.y),u=Math.max(u,d.y)}),{x:t,y:o,width:i-t,height:u-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Qo.prototype.className="RegularPolygon";Qo.prototype._centroid=!0;Qo.prototype._attrsAffectingSize=["radius"];qt(Qo);D.addGetterSetter(Qo,"radius",0,ye());D.addGetterSetter(Qo,"sides",0,ye());D.addGetterSetter(Qo,"cornerRadius",0,$h(4));const Om=Math.PI*2;class Ya extends le{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Om,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Om,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ya.prototype.className="Ring";Ya.prototype._centroid=!0;Ya.prototype._attrsAffectingSize=["innerRadius","outerRadius"];qt(Ya);D.addGetterSetter(Ya,"innerRadius",0,ye());D.addGetterSetter(Ya,"outerRadius",0,ye());class os extends le{constructor(e){super(e),this._updated=!0,this.anim=new ui(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),i=this.frameIndex(),o=i*4,u=this.animations()[t],d=this.frameOffsets(),f=u[o+0],g=u[o+1],x=u[o+2],w=u[o+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,x,w),e.closePath(),e.fillStrokeShape(this)),S)if(d){const C=d[t],b=i*2;e.drawImage(S,f,g,x,w,C[b+0],C[b+1],x,w)}else e.drawImage(S,f,g,x,w,0,0,x,w)}_hitFunc(e){const t=this.animation(),i=this.frameIndex(),o=i*4,u=this.animations()[t],d=this.frameOffsets(),f=u[o+2],g=u[o+3];if(e.beginPath(),d){const x=d[t],w=i*2;e.rect(x[w+0],x[w+1],f,g)}else e.rect(0,0,f,g);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),i=this.animations(),o=i[t],u=o.length/4;e<u-1?this.frameIndex(e+1):this.frameIndex(0)}}os.prototype.className="Sprite";qt(os);D.addGetterSetter(os,"animation");D.addGetterSetter(os,"animations");D.addGetterSetter(os,"frameOffsets");D.addGetterSetter(os,"image");D.addGetterSetter(os,"frameIndex",0,ye());D.addGetterSetter(os,"frameRate",17,ye());D.backCompat(os,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Ko extends le{_sceneFunc(e){const t=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let u=1;u<o*2;u++){const d=u%2===0?i:t,f=d*Math.sin(u*Math.PI/o),g=-1*d*Math.cos(u*Math.PI/o);e.lineTo(f,g)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ko.prototype.className="Star";Ko.prototype._centroid=!0;Ko.prototype._attrsAffectingSize=["innerRadius","outerRadius"];qt(Ko);D.addGetterSetter(Ko,"numPoints",5,ye());D.addGetterSetter(Ko,"innerRadius",0,ye());D.addGetterSetter(Ko,"outerRadius",0,ye());function Wo(r){return[...r].reduce((e,t,i,o)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const u=o[i+1];u&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(u)?(e.push(t+u),o[i+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(o[i+1]||""))?e.push(t+o[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const Zl="auto",E6="center",by="inherit",vc="justify",P6="Change.konva",b6="2d",Lm="-",Ty="left",T6="text",N6="Text",R6="top",M6="bottom",Dm="middle",Ny="normal",I6="px ",xh=" ",A6="right",jm="rtl",O6="word",L6="char",zm="none",gp="",Ry=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],D6=Ry.length;function j6(r){return r.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}let wh;function mp(){return wh||(wh=V.createCanvasElement().getContext(b6),wh)}function z6(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F6(r){r.setAttr("miterLimit",2),r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B6(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}let Dt=class extends le{constructor(e){super(B6(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<D6;t++)this.on(Ry[t]+P6,this._setTextData);this._setTextData()}_sceneFunc(e){var t,i;const o=this.textArr,u=o.length;if(!this.text())return;let d=this.padding(),f=this.fontSize(),g=this.lineHeight()*f,x=this.verticalAlign(),w=this.direction(),S=0,C=this.align(),b=this.getWidth(),P=this.letterSpacing(),A=this.charRenderFunc(),R=this.fill(),I=this.textDecoration(),T=this.underlineOffset(),O=I.indexOf("underline")!==-1,z=I.indexOf("line-through")!==-1,J;w=w===by?e.direction:w;let te=g/2,ie=Dm;if(!we.legacyTextRendering){const Y=this.measureSize("M");ie="alphabetic";const ge=(t=Y.fontBoundingBoxAscent)!==null&&t!==void 0?t:Y.actualBoundingBoxAscent,ue=(i=Y.fontBoundingBoxDescent)!==null&&i!==void 0?i:Y.actualBoundingBoxDescent;te=(ge-ue)/2+g/2}for(w===jm&&e.setAttr("direction",w),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",ie),e.setAttr("textAlign",Ty),x===Dm?S=(this.getHeight()-u*g-d*2)/2:x===M6&&(S=this.getHeight()-u*g-d*2),e.translate(d,S+d),J=0;J<u;J++){let Y=0,ge=0;const ue=o[J],ke=ue.text,de=ue.width,Oe=ue.lastInParagraph;if(e.save(),C===A6?Y+=b-de-d*2:C===E6&&(Y+=(b-de-d*2)/2),O){e.save(),e.beginPath();const _e=T??(we.legacyTextRendering?Math.round(f/2):Math.round(f/4)),ae=Y,Re=te+ge+_e;e.moveTo(ae,Re);const W=C===vc&&!Oe?b-d*2:de;e.lineTo(ae+Math.round(W),Re),e.lineWidth=f/15;const ve=this._getLinearGradient();e.strokeStyle=ve||R,e.stroke(),e.restore()}const Ne=Y;if(w!==jm&&(P!==0||C===vc||A)){const _e=ke.split(" ").length-1,ae=Wo(ke);for(let Re=0;Re<ae.length;Re++){const W=ae[Re];if(W===" "&&!Oe&&C===vc&&(Y+=(b-d*2-de)/_e),this._partialTextX=Y,this._partialTextY=te+ge,this._partialText=W,A){e.save();const he=o.slice(0,J).reduce((K,xe)=>K+Wo(xe.text).length,0),j=Re+he;A({char:W,index:j,x:Y,y:te+ge,lineIndex:J,column:Re,isLastInLine:Oe,width:this.measureSize(W).width,context:e})}e.fillStrokeShape(this),A&&e.restore(),Y+=this.measureSize(W).width+P}}else P!==0&&e.setAttr("letterSpacing",`${P}px`),this._partialTextX=Y,this._partialTextY=te+ge,this._partialText=ke,e.fillStrokeShape(this);if(z){e.save(),e.beginPath();const _e=we.legacyTextRendering?0:-Math.round(f/4),ae=Ne;e.moveTo(ae,te+ge+_e);const Re=C===vc&&!Oe?b-d*2:de;e.lineTo(ae+Math.round(Re),te+ge+_e),e.lineWidth=f/15;const W=this._getLinearGradient();e.strokeStyle=W||R,e.stroke(),e.restore()}e.restore(),u>1&&(te+=g)}}_hitFunc(e){const t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=V._isString(e)?e:e==null?"":e+"";return this._setAttr(T6,t),this}getWidth(){return this.attrs.width===Zl||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Zl||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return V.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,o,u,d,f,g,x,w,S,C;let b=mp(),P=this.fontSize(),A;b.save(),b.font=this._getContextFont(),A=b.measureText(e),b.restore();const R=P/100;return{actualBoundingBoxAscent:(t=A.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*R,actualBoundingBoxDescent:(i=A.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(o=A.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*R,actualBoundingBoxRight:(u=A.actualBoundingBoxRight)!==null&&u!==void 0?u:75.732421875*R,alphabeticBaseline:(d=A.alphabeticBaseline)!==null&&d!==void 0?d:0,emHeightAscent:(f=A.emHeightAscent)!==null&&f!==void 0?f:100*R,emHeightDescent:(g=A.emHeightDescent)!==null&&g!==void 0?g:-20*R,fontBoundingBoxAscent:(x=A.fontBoundingBoxAscent)!==null&&x!==void 0?x:91*R,fontBoundingBoxDescent:(w=A.fontBoundingBoxDescent)!==null&&w!==void 0?w:21*R,hangingBaseline:(S=A.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*R,ideographicBaseline:(C=A.ideographicBaseline)!==null&&C!==void 0?C:-21*R,width:A.width,height:P}}_getContextFont(){return this.fontStyle()+xh+this.fontVariant()+xh+(this.fontSize()+I6)+j6(this.fontFamily())}_addTextLine(e){this.align()===vc&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),i=e.length;return mp().measureText(e).width+t*i}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,o=this.lineHeight()*t,u=this.attrs.width,d=this.attrs.height,f=u!==Zl&&u!==void 0,g=d!==Zl&&d!==void 0,x=this.padding(),w=u-x*2,S=d-x*2,C=0,b=this.wrap(),P=b!==zm,A=b!==L6&&P,R=this.ellipsis();this.textArr=[],mp().font=this._getContextFont();const I=R?this._getTextWidth(gp):0;for(let T=0,O=e.length;T<O;++T){let z=e[T],J=this._getTextWidth(z);if(f&&J>w)for(;z.length>0;){let te=0,ie=Wo(z).length,Y="",ge=0;for(;te<ie;){const ue=te+ie>>>1,ke=Wo(z),de=ke.slice(0,ue+1).join(""),Oe=this._getTextWidth(de);(R&&g&&C+o>S?Oe+I:Oe)<=w?(te=ue+1,Y=de,ge=Oe):ie=ue}if(Y){if(A){const de=Wo(z),Oe=Wo(Y),Ne=de[Oe.length],_e=Ne===xh||Ne===Lm;let ae;if(_e&&ge<=w)ae=Oe.length;else{const Re=Oe.lastIndexOf(xh),W=Oe.lastIndexOf(Lm);ae=Math.max(Re,W)+1}ae>0&&(te=ae,Y=de.slice(0,te).join(""),ge=this._getTextWidth(Y))}if(Y=Y.trimRight(),this._addTextLine(Y),i=Math.max(i,ge),C+=o,this._shouldHandleEllipsis(C)){this._tryToAddEllipsisToLastLine();break}if(z=Wo(z).slice(te).join("").trimLeft(),z.length>0&&(J=this._getTextWidth(z),J<=w)){this._addTextLine(z),C+=o,i=Math.max(i,J);break}}else break}else this._addTextLine(z),C+=o,i=Math.max(i,J),this._shouldHandleEllipsis(C)&&T<O-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),g&&C+o>S)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){const t=+this.fontSize(),i=this.lineHeight()*t,o=this.attrs.height,u=o!==Zl&&o!==void 0,d=this.padding(),f=o-d*2;return!(this.wrap()!==zm)||u&&e+i>f}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==Zl&&e!==void 0,i=this.padding(),o=e-i*2,u=this.ellipsis(),d=this.textArr[this.textArr.length-1];!d||!u||(t&&(this._getTextWidth(d.text+gp)<o||(d.text=d.text.slice(0,d.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(d.text+gp))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};Dt.prototype._fillFunc=z6;Dt.prototype._strokeFunc=F6;Dt.prototype.className=N6;Dt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];qt(Dt);D.overWriteSetter(Dt,"width",M0());D.overWriteSetter(Dt,"height",M0());D.addGetterSetter(Dt,"direction",by);D.addGetterSetter(Dt,"fontFamily","Arial");D.addGetterSetter(Dt,"fontSize",12,ye());D.addGetterSetter(Dt,"fontStyle",Ny);D.addGetterSetter(Dt,"fontVariant",Ny);D.addGetterSetter(Dt,"padding",0,ye());D.addGetterSetter(Dt,"align",Ty);D.addGetterSetter(Dt,"verticalAlign",R6);D.addGetterSetter(Dt,"lineHeight",1,ye());D.addGetterSetter(Dt,"wrap",O6);D.addGetterSetter(Dt,"ellipsis",!1,Ri());D.addGetterSetter(Dt,"letterSpacing",0,ye());D.addGetterSetter(Dt,"text","",Wa());D.addGetterSetter(Dt,"textDecoration","");D.addGetterSetter(Dt,"underlineOffset",void 0,ye());D.addGetterSetter(Dt,"charRenderFunc",void 0);const G6="",My="normal";function Iy(r){r.fillText(this.partialText,0,0)}function Ay(r){r.strokeText(this.partialText,0,0)}class kn extends le{constructor(e){super(e),this.dummyCanvas=V.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return ci.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e>t?null:ci.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=ci.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),i=this.fill(),o=this.fontSize(),u=this.glyphInfo,d=t.indexOf("underline")!==-1,f=t.indexOf("line-through")!==-1;d&&e.beginPath();for(let g=0;g<u.length;g++){e.save();const x=u[g].p0;e.translate(x.x,x.y),e.rotate(u[g].rotation),this.partialText=u[g].text,e.fillStrokeShape(this),d&&(g===0&&e.moveTo(0,o/2+1),e.lineTo(u[g].width,o/2+1)),e.restore()}if(d&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),f){e.beginPath();for(let g=0;g<u.length;g++){e.save();const x=u[g].p0;e.translate(x.x,x.y),e.rotate(u[g].rotation),g===0&&e.moveTo(0,0),e.lineTo(u[g].width,0),e.restore()}e.strokeStyle=i,e.lineWidth=o/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const i=t[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<t.length;i++){const o=t[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return V.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Dt.prototype.setText.call(this,e)}_getContextFont(){return Dt.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=Wo(this.text()),t=[];let i=0;for(let S=0;S<e.length;S++)t.push({char:e[S],width:this._getTextSize(e[S]).width}),i+=t[S].width;const{height:o}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=o,this.glyphInfo=[],!this.attrs.data)return null;const u=this.letterSpacing(),d=this.align(),f=this.kerningFunc(),g=Math.max(this.textWidth+((this.attrs.text||"").length-1)*u,0);let x=0;d==="center"&&(x=Math.max(0,this.pathLength/2-g/2)),d==="right"&&(x=Math.max(0,this.pathLength-g));let w=x;for(let S=0;S<t.length;S++){const C=this._getPointAtLength(w);if(!C)return;const b=t[S].char;let P=t[S].width+u;if(b===" "&&d==="justify"){const z=this.text().split(" ").length-1;P+=(this.pathLength-g)/z}const A=this._getPointAtLength(w+P);if(!A)return;const R=ci.getLineLength(C.x,C.y,A.x,A.y);let I=0;if(f)try{I=f(t[S-1].char,b)*this.fontSize()}catch{I=0}C.x+=I,A.x+=I,this.textWidth+=I;const T=ci.getPointOnLine(I+R/2,C.x,C.y,A.x,A.y),O=Math.atan2(A.y-C.y,A.x-C.x);this.glyphInfo.push({transposeX:T.x,transposeY:T.y,text:e[S],rotation:O,p0:C,p1:A,width:R}),w+=P}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(x){e.push(x.p0.x),e.push(x.p0.y),e.push(x.p1.x),e.push(x.p1.y)});let t=e[0]||0,i=e[0]||0,o=e[1]||0,u=e[1]||0,d,f;for(let x=0;x<e.length/2;x++)d=e[x*2],f=e[x*2+1],t=Math.min(t,d),i=Math.max(i,d),o=Math.min(o,f),u=Math.max(u,f);const g=this.fontSize();return{x:t-g/2,y:o-g/2,width:i-t+g,height:u-o+g}}destroy(){return V.releaseCanvas(this.dummyCanvas),super.destroy()}}kn.prototype._fillFunc=Iy;kn.prototype._strokeFunc=Ay;kn.prototype._fillFuncHit=Iy;kn.prototype._strokeFuncHit=Ay;kn.prototype.className="TextPath";kn.prototype._attrsAffectingSize=["text","fontSize","data"];qt(kn);D.addGetterSetter(kn,"data");D.addGetterSetter(kn,"fontFamily","Arial");D.addGetterSetter(kn,"fontSize",12,ye());D.addGetterSetter(kn,"fontStyle",My);D.addGetterSetter(kn,"align","left");D.addGetterSetter(kn,"letterSpacing",0,ye());D.addGetterSetter(kn,"textBaseline","middle");D.addGetterSetter(kn,"fontVariant",My);D.addGetterSetter(kn,"text",G6);D.addGetterSetter(kn,"textDecoration","");D.addGetterSetter(kn,"kerningFunc",void 0);const Oy="tr-konva",U6=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(r=>r+`.${Oy}`).join(" "),Fm="nodesRect",W6=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],H6={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},V6="ontouchstart"in we._global;function q6(r,e,t){if(r==="rotater")return t;e+=V.degToRad(H6[r]||0);const i=(V.radToDeg(e)%360+360)%360;return V._inRange(i,315+22.5,360)||V._inRange(i,0,22.5)?"ns-resize":V._inRange(i,45-22.5,45+22.5)?"nesw-resize":V._inRange(i,90-22.5,90+22.5)?"ew-resize":V._inRange(i,135-22.5,135+22.5)?"nwse-resize":V._inRange(i,180-22.5,180+22.5)?"ns-resize":V._inRange(i,225-22.5,225+22.5)?"nesw-resize":V._inRange(i,270-22.5,270+22.5)?"ew-resize":V._inRange(i,315-22.5,315+22.5)?"nwse-resize":(V.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const zh=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Y6(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function Ly(r,e,t){const i=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),o=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return{...r,rotation:r.rotation+e,x:i,y:o}}function X6(r,e){const t=Y6(r);return Ly(r,e,t)}function Q6(r,e,t){let i=e;for(let o=0;o<r.length;o++){const u=we.getAngle(r[o]),d=Math.abs(u-e)%(Math.PI*2);Math.min(d,Math.PI*2-d)<t&&(i=u)}return i}let Jp=0;class at extends iu{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(U6,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return V.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Oy+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(o=>o.isAncestorOf(this)?(V.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{const u=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(o._attrsAffectingSize.length){const d=o._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");o.on(d,u)}o.on(W6.map(d=>d+`.${this._getEventNamespace()}`).join(" "),u),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,u),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,i=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!t)return;const o=e.getAbsolutePosition(),u=o.x-t.x,d=o.y-t.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const g=f.getAbsolutePosition();f.setAbsolutePosition({x:g.x+u,y:g.y+d}),f.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Fm),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Fm,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),i){const o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=e.getAbsoluteScale(i),d=e.getAbsolutePosition(i),f=o.x*u.x-e.offsetX()*u.x,g=o.y*u.y-e.offsetY()*u.y,x=(we.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),w={x:d.x+f*Math.cos(x)+g*Math.sin(-x),y:d.y+g*Math.cos(x)+f*Math.sin(x),width:o.width*u.x,height:o.height*u.y,rotation:x};return Ly(w,-we.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(x=>{const w=x.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:w.x,y:w.y},{x:w.x+w.width,y:w.y},{x:w.x+w.width,y:w.y+w.height},{x:w.x,y:w.y+w.height}],C=x.getAbsoluteTransform();S.forEach(function(b){const P=C.point(b);t.push(P)})});const i=new Fr;i.rotate(-we.getAngle(this.rotation()));let o=1/0,u=1/0,d=-1/0,f=-1/0;t.forEach(function(x){const w=i.point(x);o===void 0&&(o=d=w.x,u=f=w.y),o=Math.min(o,w.x),u=Math.min(u,w.y),d=Math.max(d,w.x),f=Math.max(f,w.y)}),i.invert();const g=i.point({x:o,y:u});return{x:g.x,y:g.y,width:d-o,height:f-u,rotation:we.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),zh.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new Vc({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:V6?10:"auto"}),i=this;t.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),t.on("dragstart",o=>{t.stopDrag(),o.cancelBubble=!0}),t.on("dragend",o=>{o.cancelBubble=!0}),t.on("mouseenter",()=>{const o=we.getAngle(this.rotation()),u=this.rotateAnchorCursor(),d=q6(e,o,u);t.getStage().content&&(t.getStage().content.style.cursor=d),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new le({name:"back",width:0,height:0,sceneFunc(t,i){const o=i.getParent(),u=o.padding(),d=i.width(),f=i.height();if(t.beginPath(),t.rect(-u,-u,d+u*2,f+u*2),o.rotateEnabled()&&o.rotateLineVisible()){const g=o.rotateAnchorAngle(),x=o.rotateAnchorOffset(),w=V.degToRad(g),S=Math.sin(w),C=-Math.cos(w),b=d/2,P=f/2;let A=1/0;C<0?A=Math.min(A,-P/C):C>0&&(A=Math.min(A,(f-P)/C)),S<0?A=Math.min(A,-b/S):S>0&&(A=Math.min(A,(d-b)/S));const R=b+S*A,I=P+C*A,T=V._sign(f),O=R+S*x*T,z=I+C*x*T;t.moveTo(R,I),t.lineTo(O,z)}t.fillStrokeShape(i)},hitFunc:(t,i)=>{if(!this.shouldOverdrawWholeArea())return;const o=this.padding();t.beginPath(),t.rect(-o,-o,i.width()+o*2,i.height()+o*2),t.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),i=t.width,o=t.height,u=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/u),this.cos=Math.abs(i/u),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const d=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-d.x,y:f.y-d.y},Jp++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(g=>{g._fire("transformstart",{evt:e.evt,target:g})})}_handleMouseMove(e){let t,i,o;const u=this.findOne("."+this._movingAnchorName),d=u.getStage();d.setPointersPositions(e);const f=d.getPointerPosition();let g={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const x=u.getAbsolutePosition();this.anchorDragBoundFunc()&&(g=this.anchorDragBoundFunc()(x,g,e)),u.setAbsolutePosition(g);const w=u.getAbsolutePosition();if(x.x===w.x&&x.y===w.y)return;if(this._movingAnchorName==="rotater"){const T=this._getNodeRect();t=u.x()-T.width/2,i=-u.y()+T.height/2;const O=we.getAngle(this.rotateAnchorAngle());let z=Math.atan2(-i,t)+Math.PI/2-O;T.height<0&&(z-=Math.PI);const te=we.getAngle(this.rotation())+z,ie=we.getAngle(this.rotationSnapTolerance()),ge=Q6(this.rotationSnaps(),te,ie)-T.rotation,ue=X6(T,ge);this._fitNodesInto(ue,e);return}const S=this.shiftBehavior();let C;S==="inverted"?C=this.keepRatio()&&!e.shiftKey:S==="none"?C=this.keepRatio():C=this.keepRatio()||e.shiftKey;let b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(C){const T=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(T.x-u.x(),2)+Math.pow(T.y-u.y(),2));const O=this.findOne(".top-left").x()>T.x?-1:1,z=this.findOne(".top-left").y()>T.y?-1:1;t=o*this.cos*O,i=o*this.sin*z,this.findOne(".top-left").x(T.x-t),this.findOne(".top-left").y(T.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(u.y());else if(this._movingAnchorName==="top-right"){if(C){const T=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(u.x()-T.x,2)+Math.pow(T.y-u.y(),2));const O=this.findOne(".top-right").x()<T.x?-1:1,z=this.findOne(".top-right").y()>T.y?-1:1;t=o*this.cos*O,i=o*this.sin*z,this.findOne(".top-right").x(T.x+t),this.findOne(".top-right").y(T.y-i)}var P=u.position();this.findOne(".top-left").y(P.y),this.findOne(".bottom-right").x(P.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(u.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(u.x());else if(this._movingAnchorName==="bottom-left"){if(C){const T=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(T.x-u.x(),2)+Math.pow(u.y()-T.y,2));const O=T.x<u.x()?-1:1,z=u.y()<T.y?-1:1;t=o*this.cos*O,i=o*this.sin*z,u.x(T.x-t),u.y(T.y+i)}P=u.position(),this.findOne(".top-left").x(P.x),this.findOne(".bottom-right").y(P.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(u.y());else if(this._movingAnchorName==="bottom-right"){if(C){const T=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(u.x()-T.x,2)+Math.pow(u.y()-T.y,2));const O=this.findOne(".bottom-right").x()<T.x?-1:1,z=this.findOne(".bottom-right").y()<T.y?-1:1;t=o*this.cos*O,i=o*this.sin*z,this.findOne(".bottom-right").x(T.x+t),this.findOne(".bottom-right").y(T.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(b=this.centeredScaling()||e.altKey,b){const T=this.findOne(".top-left"),O=this.findOne(".bottom-right"),z=T.x(),J=T.y(),te=this.getWidth()-O.x(),ie=this.getHeight()-O.y();O.move({x:-z,y:-J}),T.move({x:te,y:ie})}const A=this.findOne(".top-left").getAbsolutePosition();t=A.x,i=A.y;const R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:R,height:I,rotation:we.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();Jp--,this._fire("transformend",{evt:e,target:i}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),i&&this._nodes.forEach(o=>{var u;o._fire("transformend",{evt:e,target:o}),(u=o.getLayer())===null||u===void 0||u.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const i=this._getNodeRect(),o=1;if(V._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(V._inRange(e.height,-this.padding()*2-o,o)){this.update();return}const u=new Fr;if(u.rotate(we.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const C=u.point({x:-this.padding()*2,y:0});e.x+=C.x,e.y+=C.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=C.x,this._anchorDragOffset.y-=C.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const C=u.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=C.x,this._anchorDragOffset.y-=C.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const C=u.point({x:0,y:-this.padding()*2});e.x+=C.x,e.y+=C.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=C.x,this._anchorDragOffset.y-=C.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const C=u.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=C.x,this._anchorDragOffset.y-=C.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const C=this.boundBoxFunc()(i,e);C?e=C:V.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const d=1e7,f=new Fr;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/d,i.height/d);const g=new Fr,x=e.width/d,w=e.height/d;this.flipEnabled()===!1?(g.translate(e.x,e.y),g.rotate(e.rotation),g.translate(e.width<0?e.width:0,e.height<0?e.height:0),g.scale(Math.abs(x),Math.abs(w))):(g.translate(e.x,e.y),g.rotate(e.rotation),g.scale(x,w));const S=g.multiply(f.invert());this._nodes.forEach(C=>{var b;if(!C.getStage())return;const P=C.getParent().getAbsoluteTransform(),A=C.getTransform().copy();A.translate(C.offsetX(),C.offsetY());const R=new Fr;R.multiply(P.copy().invert()).multiply(S).multiply(P).multiply(A);const I=R.decompose();C.setAttrs(I),(b=C.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(V._getRotation(e.rotation)),this._nodes.forEach(C=>{this._fire("transform",{evt:t,target:C}),C._fire("transform",{evt:t,target:C})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(V._getRotation(t.rotation));const i=t.width,o=t.height,u=this.enabledAnchors(),d=this.resizeEnabled(),f=this.padding(),g=this.anchorSize(),x=this.find("._anchor");x.forEach(te=>{te.setAttrs({width:g,height:g,offsetX:g/2,offsetY:g/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:g/2+f,offsetY:g/2+f,visible:d&&u.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:g/2+f,visible:d&&u.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:g/2-f,offsetY:g/2+f,visible:d&&u.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:g/2+f,visible:d&&u.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:g/2-f,visible:d&&u.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:g/2+f,offsetY:g/2-f,visible:d&&u.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:g/2-f,visible:d&&u.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:g/2-f,offsetY:g/2-f,visible:d&&u.indexOf("bottom-right")>=0});const w=this.rotateAnchorAngle(),S=this.rotateAnchorOffset(),C=V.degToRad(w),b=Math.sin(C),P=-Math.cos(C),A=i/2,R=o/2;let I=1/0;P<0?I=Math.min(I,-R/P):P>0&&(I=Math.min(I,(o-R)/P)),b<0?I=Math.min(I,-A/b):b>0&&(I=Math.min(I,(i-A)/b));const T=A+b*I,O=R+P*I,z=V._sign(o);this._batchChangeChild(".rotater",{x:T+b*S*z,y:O+P*S*z-f*P,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(te=>te.draggable()),x:0,y:0});const J=this.anchorStyleFunc();J&&x.forEach(te=>{J(te)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),iu.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return pe.prototype.toObject.call(this)}clone(e){return pe.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}at.isTransforming=()=>Jp>0;function K6(r){return r instanceof Array||V.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){zh.indexOf(e)===-1&&V.warn("Unknown anchor name: "+e+". Available names are: "+zh.join(", "))}),r||[]}at.prototype.className="Transformer";qt(at);D.addGetterSetter(at,"enabledAnchors",zh,K6);D.addGetterSetter(at,"flipEnabled",!0,Ri());D.addGetterSetter(at,"resizeEnabled",!0);D.addGetterSetter(at,"anchorSize",10,ye());D.addGetterSetter(at,"rotateEnabled",!0);D.addGetterSetter(at,"rotateLineVisible",!0);D.addGetterSetter(at,"rotationSnaps",[]);D.addGetterSetter(at,"rotateAnchorOffset",50,ye());D.addGetterSetter(at,"rotateAnchorAngle",0,ye());D.addGetterSetter(at,"rotateAnchorCursor","crosshair");D.addGetterSetter(at,"rotationSnapTolerance",5,ye());D.addGetterSetter(at,"borderEnabled",!0);D.addGetterSetter(at,"anchorStroke","rgb(0, 161, 255)");D.addGetterSetter(at,"anchorStrokeWidth",1,ye());D.addGetterSetter(at,"anchorFill","white");D.addGetterSetter(at,"anchorCornerRadius",0,ye());D.addGetterSetter(at,"borderStroke","rgb(0, 161, 255)");D.addGetterSetter(at,"borderStrokeWidth",1,ye());D.addGetterSetter(at,"borderDash");D.addGetterSetter(at,"keepRatio",!0);D.addGetterSetter(at,"shiftBehavior","default");D.addGetterSetter(at,"centeredScaling",!1);D.addGetterSetter(at,"ignoreStroke",!1);D.addGetterSetter(at,"padding",0,ye());D.addGetterSetter(at,"nodes");D.addGetterSetter(at,"node");D.addGetterSetter(at,"boundBoxFunc");D.addGetterSetter(at,"anchorDragBoundFunc");D.addGetterSetter(at,"anchorStyleFunc");D.addGetterSetter(at,"shouldOverdrawWholeArea",!1);D.addGetterSetter(at,"useSingleNodeRotation",!0);D.backCompat(at,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class qs extends le{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,we.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}qs.prototype.className="Wedge";qs.prototype._centroid=!0;qs.prototype._attrsAffectingSize=["radius"];qt(qs);D.addGetterSetter(qs,"radius",0,ye());D.addGetterSetter(qs,"angle",0,ye());D.addGetterSetter(qs,"clockwise",!1);D.backCompat(qs,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Bm(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const $6=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],J6=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Z6(r,e){const t=r.data,i=r.width,o=r.height;let u,d,f,g,x,w,S,C,b,P,A,R,I,T,O,z,J,te,ie,Y;const ge=e+e+1,ue=i-1,ke=o-1,de=e+1,Oe=de*(de+1)/2,Ne=new Bm,_e=$6[e],ae=J6[e];let Re=null,W=Ne,ve=null,he=null;for(let j=1;j<ge;j++)W=W.next=new Bm,j===de&&(Re=W);W.next=Ne,f=d=0;for(let j=0;j<o;j++){R=I=T=O=g=x=w=S=0,C=de*(z=t[d]),b=de*(J=t[d+1]),P=de*(te=t[d+2]),A=de*(ie=t[d+3]),g+=Oe*z,x+=Oe*J,w+=Oe*te,S+=Oe*ie,W=Ne;for(let K=0;K<de;K++)W.r=z,W.g=J,W.b=te,W.a=ie,W=W.next;for(let K=1;K<de;K++)u=d+((ue<K?ue:K)<<2),g+=(W.r=z=t[u])*(Y=de-K),x+=(W.g=J=t[u+1])*Y,w+=(W.b=te=t[u+2])*Y,S+=(W.a=ie=t[u+3])*Y,R+=z,I+=J,T+=te,O+=ie,W=W.next;ve=Ne,he=Re;for(let K=0;K<i;K++)t[d+3]=ie=S*_e>>ae,ie!==0?(ie=255/ie,t[d]=(g*_e>>ae)*ie,t[d+1]=(x*_e>>ae)*ie,t[d+2]=(w*_e>>ae)*ie):t[d]=t[d+1]=t[d+2]=0,g-=C,x-=b,w-=P,S-=A,C-=ve.r,b-=ve.g,P-=ve.b,A-=ve.a,u=f+((u=K+e+1)<ue?u:ue)<<2,R+=ve.r=t[u],I+=ve.g=t[u+1],T+=ve.b=t[u+2],O+=ve.a=t[u+3],g+=R,x+=I,w+=T,S+=O,ve=ve.next,C+=z=he.r,b+=J=he.g,P+=te=he.b,A+=ie=he.a,R-=z,I-=J,T-=te,O-=ie,he=he.next,d+=4;f+=i}for(let j=0;j<i;j++){I=T=O=R=x=w=S=g=0,d=j<<2,C=de*(z=t[d]),b=de*(J=t[d+1]),P=de*(te=t[d+2]),A=de*(ie=t[d+3]),g+=Oe*z,x+=Oe*J,w+=Oe*te,S+=Oe*ie,W=Ne;for(let xe=0;xe<de;xe++)W.r=z,W.g=J,W.b=te,W.a=ie,W=W.next;let K=i;for(let xe=1;xe<=e;xe++)d=K+j<<2,g+=(W.r=z=t[d])*(Y=de-xe),x+=(W.g=J=t[d+1])*Y,w+=(W.b=te=t[d+2])*Y,S+=(W.a=ie=t[d+3])*Y,R+=z,I+=J,T+=te,O+=ie,W=W.next,xe<ke&&(K+=i);d=j,ve=Ne,he=Re;for(let xe=0;xe<o;xe++)u=d<<2,t[u+3]=ie=S*_e>>ae,ie>0?(ie=255/ie,t[u]=(g*_e>>ae)*ie,t[u+1]=(x*_e>>ae)*ie,t[u+2]=(w*_e>>ae)*ie):t[u]=t[u+1]=t[u+2]=0,g-=C,x-=b,w-=P,S-=A,C-=ve.r,b-=ve.g,P-=ve.b,A-=ve.a,u=j+((u=xe+de)<ke?u:ke)*i<<2,g+=R+=ve.r=t[u],x+=I+=ve.g=t[u+1],w+=T+=ve.b=t[u+2],S+=O+=ve.a=t[u+3],ve=ve.next,C+=z=he.r,b+=J=he.g,P+=te=he.b,A+=ie=he.a,R-=z,I-=J,T-=te,O-=ie,he=he.next,d+=i}}const e8=function(e){const t=Math.round(this.blurRadius());t>0&&Z6(e,t)};D.addGetterSetter(pe,"blurRadius",0,ye(),D.afterSetFilter);const t8=function(r){const e=this.brightness()*255,t=r.data,i=t.length;for(let o=0;o<i;o+=4)t[o]+=e,t[o+1]+=e,t[o+2]+=e};D.addGetterSetter(pe,"brightness",0,ye(),D.afterSetFilter);const n8=function(r){const e=this.brightness(),t=r.data,i=t.length;for(let o=0;o<i;o+=4)t[o]=Math.min(255,t[o]*e),t[o+1]=Math.min(255,t[o+1]*e),t[o+2]=Math.min(255,t[o+2]*e)},r8=function(r){const e=Math.pow((this.contrast()+100)/100,2),t=r.data,i=t.length;let o=150,u=150,d=150;for(let f=0;f<i;f+=4)o=t[f],u=t[f+1],d=t[f+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,u/=255,u-=.5,u*=e,u+=.5,u*=255,d/=255,d-=.5,d*=e,d+=.5,d*=255,o=o<0?0:o>255?255:o,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,t[f]=o,t[f+1]=u,t[f+2]=d};D.addGetterSetter(pe,"contrast",0,ye(),D.afterSetFilter);const i8=function(r){var e,t,i,o,u,d,f,g,x;const w=r.data,S=r.width,C=r.height,b=Math.min(1,Math.max(0,(t=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:.5)),P=Math.min(1,Math.max(0,(o=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&o!==void 0?o:.5)),R=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(d=(u=this.embossDirection)===null||u===void 0?void 0:u.call(this))!==null&&d!==void 0?d:"top-left"])!==null&&f!==void 0?f:315,I=!!((x=(g=this.embossBlend)===null||g===void 0?void 0:g.call(this))!==null&&x!==void 0&&x),T=b*10,O=P*255,z=R*Math.PI/180,J=Math.cos(z),te=Math.sin(z),ie=128/1020*T,Y=new Uint8ClampedArray(w),ge=new Float32Array(S*C);for(let Ne=0,_e=0;_e<w.length;_e+=4,Ne++)ge[Ne]=.2126*Y[_e]+.7152*Y[_e+1]+.0722*Y[_e+2];const ue=[-1,0,1,-2,0,2,-1,0,1],ke=[-1,-2,-1,0,0,0,1,2,1],de=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],Oe=Ne=>Ne<0?0:Ne>255?255:Ne;for(let Ne=1;Ne<C-1;Ne++)for(let _e=1;_e<S-1;_e++){const ae=Ne*S+_e;let Re=0,W=0;Re+=ge[ae+de[0]]*ue[0],W+=ge[ae+de[0]]*ke[0],Re+=ge[ae+de[1]]*ue[1],W+=ge[ae+de[1]]*ke[1],Re+=ge[ae+de[2]]*ue[2],W+=ge[ae+de[2]]*ke[2],Re+=ge[ae+de[3]]*ue[3],W+=ge[ae+de[3]]*ke[3],Re+=ge[ae+de[5]]*ue[5],W+=ge[ae+de[5]]*ke[5],Re+=ge[ae+de[6]]*ue[6],W+=ge[ae+de[6]]*ke[6],Re+=ge[ae+de[7]]*ue[7],W+=ge[ae+de[7]]*ke[7],Re+=ge[ae+de[8]]*ue[8],W+=ge[ae+de[8]]*ke[8];const ve=J*Re+te*W,he=Oe(O+ve*ie),j=ae*4;if(I){const K=he-O;w[j]=Oe(Y[j]+K),w[j+1]=Oe(Y[j+1]+K),w[j+2]=Oe(Y[j+2]+K),w[j+3]=Y[j+3]}else w[j]=w[j+1]=w[j+2]=he,w[j+3]=Y[j+3]}for(let Ne=0;Ne<S;Ne++){let _e=Ne*4,ae=((C-1)*S+Ne)*4;w[_e]=Y[_e],w[_e+1]=Y[_e+1],w[_e+2]=Y[_e+2],w[_e+3]=Y[_e+3],w[ae]=Y[ae],w[ae+1]=Y[ae+1],w[ae+2]=Y[ae+2],w[ae+3]=Y[ae+3]}for(let Ne=1;Ne<C-1;Ne++){let _e=Ne*S*4,ae=(Ne*S+(S-1))*4;w[_e]=Y[_e],w[_e+1]=Y[_e+1],w[_e+2]=Y[_e+2],w[_e+3]=Y[_e+3],w[ae]=Y[ae],w[ae+1]=Y[ae+1],w[ae+2]=Y[ae+2],w[ae+3]=Y[ae+3]}return r};D.addGetterSetter(pe,"embossStrength",.5,ye(),D.afterSetFilter);D.addGetterSetter(pe,"embossWhiteLevel",.5,ye(),D.afterSetFilter);D.addGetterSetter(pe,"embossDirection","top-left",void 0,D.afterSetFilter);D.addGetterSetter(pe,"embossBlend",!1,void 0,D.afterSetFilter);function yp(r,e,t,i,o){const u=t-e,d=o-i;if(u===0)return i+d/2;if(d===0)return i;let f=(r-e)/u;return f=d*f+i,f}const s8=function(r){const e=r.data,t=e.length;let i=e[0],o=i,u,d=e[1],f=d,g,x=e[2],w=x,S;const C=this.enhance();if(C===0)return;for(let O=0;O<t;O+=4)u=e[O+0],u<i?i=u:u>o&&(o=u),g=e[O+1],g<d?d=g:g>f&&(f=g),S=e[O+2],S<x?x=S:S>w&&(w=S);o===i&&(o=255,i=0),f===d&&(f=255,d=0),w===x&&(w=255,x=0);let b,P,A,R,I,T;if(C>0)b=o+C*(255-o),P=i-C*(i-0),A=f+C*(255-f),R=d-C*(d-0),I=w+C*(255-w),T=x-C*(x-0);else{const O=(o+i)*.5;b=o+C*(o-O),P=i+C*(i-O);const z=(f+d)*.5;A=f+C*(f-z),R=d+C*(d-z);const J=(w+x)*.5;I=w+C*(w-J),T=x+C*(x-J)}for(let O=0;O<t;O+=4)e[O+0]=yp(e[O+0],i,o,P,b),e[O+1]=yp(e[O+1],d,f,R,A),e[O+2]=yp(e[O+2],x,w,T,I)};D.addGetterSetter(pe,"enhance",0,ye(),D.afterSetFilter);const o8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4){const o=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=o,e[i+1]=o,e[i+2]=o}};D.addGetterSetter(pe,"hue",0,ye(),D.afterSetFilter);D.addGetterSetter(pe,"saturation",0,ye(),D.afterSetFilter);D.addGetterSetter(pe,"luminance",0,ye(),D.afterSetFilter);const a8=function(r){const e=r.data,t=e.length,i=1,o=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=i*o*Math.cos(u*Math.PI/180),g=i*o*Math.sin(u*Math.PI/180),x=.299*i+.701*f+.167*g,w=.587*i-.587*f+.33*g,S=.114*i-.114*f-.497*g,C=.299*i-.299*f-.328*g,b=.587*i+.413*f+.035*g,P=.114*i-.114*f+.293*g,A=.299*i-.3*f+1.25*g,R=.587*i-.586*f-1.05*g,I=.114*i+.886*f-.2*g;let T,O,z,J;for(let te=0;te<t;te+=4)T=e[te+0],O=e[te+1],z=e[te+2],J=e[te+3],e[te+0]=x*T+w*O+S*z+d,e[te+1]=C*T+b*O+P*z+d,e[te+2]=A*T+R*O+I*z+d,e[te+3]=J},l8=function(r){const e=r.data,t=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=i*o*Math.cos(u*Math.PI/180),f=i*o*Math.sin(u*Math.PI/180),g=.299*i+.701*d+.167*f,x=.587*i-.587*d+.33*f,w=.114*i-.114*d-.497*f,S=.299*i-.299*d-.328*f,C=.587*i+.413*d+.035*f,b=.114*i-.114*d+.293*f,P=.299*i-.3*d+1.25*f,A=.587*i-.586*d-1.05*f,R=.114*i+.886*d-.2*f;for(let I=0;I<t;I+=4){const T=e[I+0],O=e[I+1],z=e[I+2],J=e[I+3];e[I+0]=g*T+x*O+w*z,e[I+1]=S*T+C*O+b*z,e[I+2]=P*T+A*O+R*z,e[I+3]=J}};D.addGetterSetter(pe,"hue",0,ye(),D.afterSetFilter);D.addGetterSetter(pe,"saturation",0,ye(),D.afterSetFilter);D.addGetterSetter(pe,"value",0,ye(),D.afterSetFilter);const u8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},c8=function(r,e,t){const i=r.data,o=e.data,u=r.width,d=r.height,f=t.polarCenterX||u/2,g=t.polarCenterY||d/2;let x=Math.sqrt(f*f+g*g),w=u-f,S=d-g;const C=Math.sqrt(w*w+S*S);x=C>x?C:x;const b=d,P=u,A=360/P*Math.PI/180;for(let R=0;R<P;R+=1){const I=Math.sin(R*A),T=Math.cos(R*A);for(let O=0;O<b;O+=1){w=Math.floor(f+x*O/b*T),S=Math.floor(g+x*O/b*I);let z=(S*u+w)*4;const J=i[z+0],te=i[z+1],ie=i[z+2],Y=i[z+3];z=(R+O*u)*4,o[z+0]=J,o[z+1]=te,o[z+2]=ie,o[z+3]=Y}}},d8=function(r,e,t){const i=r.data,o=e.data,u=r.width,d=r.height,f=t.polarCenterX||u/2,g=t.polarCenterY||d/2;let x=Math.sqrt(f*f+g*g),w=u-f,S=d-g;const C=Math.sqrt(w*w+S*S);x=C>x?C:x;const b=d,P=u,A=0;let R,I;for(w=0;w<u;w+=1)for(S=0;S<d;S+=1){const T=w-f,O=S-g,z=Math.sqrt(T*T+O*O)*b/x;let J=(Math.atan2(O,T)*180/Math.PI+360+A)%360;J=J*P/360,R=Math.floor(J),I=Math.floor(z);let te=(I*u+R)*4;const ie=i[te+0],Y=i[te+1],ge=i[te+2],ue=i[te+3];te=(S*u+w)*4,o[te+0]=ie,o[te+1]=Y,o[te+2]=ge,o[te+3]=ue}},h8=function(r){const e=r.width,t=r.height;let i,o,u,d,f,g,x,w,S,C,b=Math.round(this.kaleidoscopePower());const P=Math.round(this.kaleidoscopeAngle()),A=Math.floor(e*(P%360)/360);if(b<1)return;const R=V.createCanvasElement();R.width=e,R.height=t;const I=R.getContext("2d").getImageData(0,0,e,t);V.releaseCanvas(R),c8(r,I,{polarCenterX:e/2,polarCenterY:t/2});let T=e/Math.pow(2,b);for(;T<=8;)T=T*2,b-=1;T=Math.ceil(T);let O=T,z=0,J=O,te=1;for(A+T>e&&(z=O,J=0,te=-1),o=0;o<t;o+=1)for(i=z;i!==J;i+=te)u=Math.round(i+A)%e,S=(e*o+u)*4,f=I.data[S+0],g=I.data[S+1],x=I.data[S+2],w=I.data[S+3],C=(e*o+i)*4,I.data[C+0]=f,I.data[C+1]=g,I.data[C+2]=x,I.data[C+3]=w;for(o=0;o<t;o+=1)for(O=Math.floor(T),d=0;d<b;d+=1){for(i=0;i<O+1;i+=1)S=(e*o+i)*4,f=I.data[S+0],g=I.data[S+1],x=I.data[S+2],w=I.data[S+3],C=(e*o+O*2-i-1)*4,I.data[C+0]=f,I.data[C+1]=g,I.data[C+2]=x,I.data[C+3]=w;O*=2}d8(I,r,{})};D.addGetterSetter(pe,"kaleidoscopePower",2,ye(),D.afterSetFilter);D.addGetterSetter(pe,"kaleidoscopeAngle",0,ye(),D.afterSetFilter);function _h(r,e,t){let i=(t*r.width+e)*4;const o=[];return o.push(r.data[i++],r.data[i++],r.data[i++],r.data[i++]),o}function xc(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function f8(r){const e=[0,0,0];for(let t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function p8(r,e){const t=_h(r,0,0),i=_h(r,r.width-1,0),o=_h(r,0,r.height-1),u=_h(r,r.width-1,r.height-1),d=e||10;if(xc(t,i)<d&&xc(i,u)<d&&xc(u,o)<d&&xc(o,t)<d){const f=f8([i,t,u,o]),g=[];for(let x=0;x<r.width*r.height;x++){const w=xc(f,[r.data[x*4],r.data[x*4+1],r.data[x*4+2]]);g[x]=w<d?0:255}return g}}function g8(r,e){for(let t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function m8(r,e,t){const i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let w=0;for(let S=0;S<o;S++)for(let C=0;C<o;C++){const b=f+S-u,P=g+C-u;if(b>=0&&b<t&&P>=0&&P<e){const A=b*e+P,R=i[S*o+C];w+=r[A]*R}}d[x]=w===2040?255:0}return d}function y8(r,e,t){const i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let w=0;for(let S=0;S<o;S++)for(let C=0;C<o;C++){const b=f+S-u,P=g+C-u;if(b>=0&&b<t&&P>=0&&P<e){const A=b*e+P,R=i[S*o+C];w+=r[A]*R}}d[x]=w>=1020?255:0}return d}function v8(r,e,t){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),u=Math.floor(o/2),d=[];for(let f=0;f<t;f++)for(let g=0;g<e;g++){const x=f*e+g;let w=0;for(let S=0;S<o;S++)for(let C=0;C<o;C++){const b=f+S-u,P=g+C-u;if(b>=0&&b<t&&P>=0&&P<e){const A=b*e+P,R=i[S*o+C];w+=r[A]*R}}d[x]=w}return d}const x8=function(r){const e=this.threshold();let t=p8(r,e);return t&&(t=m8(t,r.width,r.height),t=y8(t,r.width,r.height),t=v8(t,r.width,r.height),g8(r,t)),r};D.addGetterSetter(pe,"threshold",0,ye(),D.afterSetFilter);const w8=function(r){const e=this.noise()*255,t=r.data,i=t.length,o=e/2;for(let u=0;u<i;u+=4)t[u+0]+=o-2*o*Math.random(),t[u+1]+=o-2*o*Math.random(),t[u+2]+=o-2*o*Math.random()};D.addGetterSetter(pe,"noise",.2,ye(),D.afterSetFilter);const _8=function(r){let e=Math.ceil(this.pixelSize()),t=r.width,i=r.height,o=Math.ceil(t/e),u=Math.ceil(i/e),d=r.data;if(e<=0){V.error("pixelSize value can not be <= 0");return}for(let f=0;f<o;f+=1)for(let g=0;g<u;g+=1){let x=0,w=0,S=0,C=0;const b=f*e,P=b+e,A=g*e,R=A+e;let I=0;for(let T=b;T<P;T+=1)if(!(T>=t))for(let O=A;O<R;O+=1){if(O>=i)continue;const z=(t*O+T)*4;x+=d[z+0],w+=d[z+1],S+=d[z+2],C+=d[z+3],I+=1}x=x/I,w=w/I,S=S/I,C=C/I;for(let T=b;T<P;T+=1)if(!(T>=t))for(let O=A;O<R;O+=1){if(O>=i)continue;const z=(t*O+T)*4;d[z+0]=x,d[z+1]=w,d[z+2]=S,d[z+3]=C}}};D.addGetterSetter(pe,"pixelSize",8,ye(),D.afterSetFilter);const S8=function(r){const e=Math.round(this.levels()*254)+1,t=r.data,i=t.length,o=255/e;for(let u=0;u<i;u+=1)t[u]=Math.floor(t[u]/o)*o};D.addGetterSetter(pe,"levels",.5,ye(),D.afterSetFilter);const k8=function(r){const e=r.data,t=e.length,i=this.red(),o=this.green(),u=this.blue();for(let d=0;d<t;d+=4){const f=(.34*e[d]+.5*e[d+1]+.16*e[d+2])/255;e[d]=f*i,e[d+1]=f*o,e[d+2]=f*u,e[d+3]=e[d+3]}};D.addGetterSetter(pe,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});D.addGetterSetter(pe,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});D.addGetterSetter(pe,"blue",0,sy,D.afterSetFilter);const C8=function(r){const e=r.data,t=e.length,i=this.red(),o=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<t;f+=4){const g=1-d;e[f]=i*d+e[f]*g,e[f+1]=o*d+e[f+1]*g,e[f+2]=u*d+e[f+2]*g}};D.addGetterSetter(pe,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});D.addGetterSetter(pe,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});D.addGetterSetter(pe,"blue",0,sy,D.afterSetFilter);D.addGetterSetter(pe,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});const E8=function(r){const e=r.data,t=e.length;for(let i=0;i<t;i+=4){const o=e[i+0],u=e[i+1],d=e[i+2];e[i+0]=Math.min(255,o*.393+u*.769+d*.189),e[i+1]=Math.min(255,o*.349+u*.686+d*.168),e[i+2]=Math.min(255,o*.272+u*.534+d*.131)}},P8=function(r){const t=r.data;for(let i=0;i<t.length;i+=4){const o=t[i],u=t[i+1],d=t[i+2];.2126*o+.7152*u+.0722*d>=128&&(t[i]=255-o,t[i+1]=255-u,t[i+2]=255-d)}return r},b8=function(r){const e=this.threshold()*255,t=r.data,i=t.length;for(let o=0;o<i;o+=1)t[o]=t[o]<e?0:255};D.addGetterSetter(pe,"threshold",.5,ye(),D.afterSetFilter);Ga.Util._assign(Ga,{Arc:Hs,Arrow:Va,Circle:au,Ellipse:Xo,Image:Hr,Label:O0,Tag:qa,Line:Vs,Path:ci,Rect:Vc,RegularPolygon:Qo,Ring:Ya,Sprite:os,Star:Ko,Text:Dt,TextPath:kn,Transformer:at,Wedge:qs,Filters:{Blur:e8,Brightness:n8,Brighten:t8,Contrast:r8,Emboss:i8,Enhance:s8,Grayscale:o8,HSL:a8,HSV:l8,Invert:u8,Kaleidoscope:h8,Mask:x8,Noise:w8,Pixelate:_8,Posterize:S8,RGB:k8,RGBA:C8,Sepia:E8,Solarize:P8,Threshold:b8}});var vp={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp,Gm;function T8(){return Gm||(Gm=1,xp=function(e){var t={},i=Uh(),o=n0(),u=Object.assign;function d(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),P=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),J=Symbol.iterator;function te(a){return a===null||typeof a!="object"?null:(a=J&&a[J]||a["@@iterator"],typeof a=="function"?a:null)}function ie(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case x:return"Portal";case C:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case P:return(a.displayName||"Context")+".Consumer";case b:return(a._context.displayName||"Context")+".Provider";case A:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case T:return l=a.displayName||null,l!==null?l:ie(a.type)||"Memo";case O:l=a._payload,a=a._init;try{return ie(a(l))}catch{}}return null}function Y(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(l);case 8:return l===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ge(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function ue(a){if(ge(a)!==a)throw Error(d(188))}function ke(a){var l=a.alternate;if(!l){if(l=ge(a),l===null)throw Error(d(188));return l!==a?null:a}for(var h=a,m=l;;){var v=h.return;if(v===null)break;var k=v.alternate;if(k===null){if(m=v.return,m!==null){h=m;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===h)return ue(v),a;if(k===m)return ue(v),l;k=k.sibling}throw Error(d(188))}if(h.return!==m.return)h=v,m=k;else{for(var M=!1,U=v.child;U;){if(U===h){M=!0,h=v,m=k;break}if(U===m){M=!0,m=v,h=k;break}U=U.sibling}if(!M){for(U=k.child;U;){if(U===h){M=!0,h=k,m=v;break}if(U===m){M=!0,m=k,h=v;break}U=U.sibling}if(!M)throw Error(d(189))}}if(h.alternate!==m)throw Error(d(190))}if(h.tag!==3)throw Error(d(188));return h.stateNode.current===h?a:l}function de(a){return a=ke(a),a!==null?Oe(a):null}function Oe(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=Oe(a);if(l!==null)return l;a=a.sibling}return null}function Ne(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var l=Ne(a);if(l!==null)return l}a=a.sibling}return null}var _e=Array.isArray,ae=e.getPublicInstance,Re=e.getRootHostContext,W=e.getChildHostContext,ve=e.prepareForCommit,he=e.resetAfterCommit,j=e.createInstance,K=e.appendInitialChild,xe=e.finalizeInitialChildren,Le=e.prepareUpdate,qe=e.shouldSetTextContent,Ve=e.createTextInstance,He=e.scheduleTimeout,Ze=e.cancelTimeout,B=e.noTimeout,X=e.isPrimaryRenderer,re=e.supportsMutation,Fe=e.supportsPersistence,Ce=e.supportsHydration,Ue=e.getInstanceFromNode,vt=e.preparePortalMount,gt=e.getCurrentEventPriority,Cn=e.detachDeletedInstance,jt=e.supportsMicrotasks,Ut=e.scheduleMicrotask,Et=e.supportsTestSelectors,fn=e.findFiberRoot,br=e.getBoundingRect,Tr=e.getTextContent,Vr=e.isHiddenSubtree,Jo=e.matchAccessibilityRole,Mi=e.setFocusIfFocusable,as=e.setupIntersectionObserver,gr=e.appendChild,Xa=e.appendChildToContainer,ls=e.commitTextUpdate,Zo=e.commitMount,ef=e.commitUpdate,qc=e.insertBefore,Yc=e.insertInContainerBefore,tf=e.removeChild,cu=e.removeChildFromContainer,Qa=e.resetTextContent,du=e.hideInstance,hu=e.hideTextInstance,fu=e.unhideInstance,Xs=e.unhideTextInstance,Qs=e.clearContainer,Xc=e.cloneInstance,pu=e.createContainerChildSet,gu=e.appendChildToContainerChildSet,Qc=e.finalizeContainerChildren,Ka=e.replaceContainerChildren,$a=e.cloneHiddenInstance,mu=e.cloneHiddenTextInstance,ea=e.canHydrateInstance,yu=e.canHydrateTextInstance,ta=e.canHydrateSuspenseInstance,Kc=e.isSuspenseInstancePending,us=e.isSuspenseInstanceFallback,Ja=e.getSuspenseInstanceFallbackErrorDetails,Za=e.registerSuspenseInstanceRetry,Ks=e.getNextHydratableSibling,nf=e.getFirstHydratableChild,rf=e.getFirstHydratableChildWithinContainer,sf=e.getFirstHydratableChildWithinSuspenseInstance,cs=e.hydrateInstance,$c=e.hydrateTextInstance,Jc=e.hydrateSuspenseInstance,of=e.getNextHydratableInstanceAfterSuspenseInstance,Zc=e.commitHydratedContainer,ed=e.commitHydratedSuspenseInstance,td=e.clearSuspenseBoundary,nd=e.clearSuspenseBoundaryFromContainer,af=e.shouldDeleteUnhydratedTailInstances,lf=e.didNotMatchHydratedContainerTextInstance,Wt=e.didNotMatchHydratedTextInstance,vu;function ds(a){if(vu===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);vu=l&&l[1]||""}return`
`+vu+a}var el=!1;function $s(a,l){if(!a||el)return"";el=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(fe){var m=fe}Reflect.construct(a,[],l)}else{try{l.call()}catch(fe){m=fe}a.call(l.prototype)}else{try{throw Error()}catch(fe){m=fe}a()}}catch(fe){if(fe&&m&&typeof fe.stack=="string"){for(var v=fe.stack.split(`
`),k=m.stack.split(`
`),M=v.length-1,U=k.length-1;1<=M&&0<=U&&v[M]!==k[U];)U--;for(;1<=M&&0<=U;M--,U--)if(v[M]!==k[U]){if(M!==1||U!==1)do if(M--,U--,0>U||v[M]!==k[U]){var ee=`
`+v[M].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=M&&0<=U);break}}}finally{el=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?ds(a):""}var uf=Object.prototype.hasOwnProperty,tl=[],di=-1;function pn(a){return{current:a}}function Pt(a){0>di||(a.current=tl[di],tl[di]=null,di--)}function nt(a,l){di++,tl[di]=a.current,a.current=l}var Ii={},En=pn(Ii),Vn=pn(!1),qr=Ii;function hi(a,l){var h=a.type.contextTypes;if(!h)return Ii;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===l)return m.__reactInternalMemoizedMaskedChildContext;var v={},k;for(k in h)v[k]=l[k];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function on(a){return a=a.childContextTypes,a!=null}function hs(){Pt(Vn),Pt(En)}function rd(a,l,h){if(En.current!==Ii)throw Error(d(168));nt(En,l),nt(Vn,h)}function id(a,l,h){var m=a.stateNode;if(l=l.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var v in m)if(!(v in l))throw Error(d(108,Y(a)||"Unknown",v));return u({},h,m)}function Js(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ii,qr=En.current,nt(En,a),nt(Vn,Vn.current),!0}function xu(a,l,h){var m=a.stateNode;if(!m)throw Error(d(169));h?(a=id(a,l,qr),m.__reactInternalMemoizedMergedChildContext=a,Pt(Vn),Pt(En),nt(En,a)):Pt(Vn),nt(Vn,h)}var er=Math.clz32?Math.clz32:wu,na=Math.log,cf=Math.LN2;function wu(a){return a>>>=0,a===0?32:31-(na(a)/cf|0)|0}var ut=64,ra=4194304;function Zs(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function eo(a,l){var h=a.pendingLanes;if(h===0)return 0;var m=0,v=a.suspendedLanes,k=a.pingedLanes,M=h&268435455;if(M!==0){var U=M&~v;U!==0?m=Zs(U):(k&=M,k!==0&&(m=Zs(k)))}else M=h&~v,M!==0?m=Zs(M):k!==0&&(m=Zs(k));if(m===0)return 0;if(l!==0&&l!==m&&(l&v)===0&&(v=m&-m,k=l&-l,v>=k||v===16&&(k&4194240)!==0))return l;if((m&4)!==0&&(m|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=m;0<l;)h=31-er(l),v=1<<h,m|=a[h],l&=~v;return m}function sd(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function od(a,l){for(var h=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,k=a.pendingLanes;0<k;){var M=31-er(k),U=1<<M,ee=v[M];ee===-1?((U&h)===0||(U&m)!==0)&&(v[M]=sd(U,l)):ee<=l&&(a.expiredLanes|=U),k&=~U}}function nl(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function rl(){var a=ut;return ut<<=1,(ut&4194240)===0&&(ut=64),a}function to(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function mr(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-er(l),a[l]=h}function Ai(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<h;){var v=31-er(h),k=1<<v;l[v]=0,m[v]=-1,a[v]=-1,h&=~k}}function Yr(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var m=31-er(h),v=1<<m;v&l|a[m]&l&&(a[m]|=l),h&=~v}}var rt=0;function no(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Xr=o.unstable_scheduleCallback,ad=o.unstable_cancelCallback,ld=o.unstable_shouldYield,ia=o.unstable_requestPaint,an=o.unstable_now,il=o.unstable_ImmediatePriority,sl=o.unstable_UserBlockingPriority,ol=o.unstable_NormalPriority,df=o.unstable_IdlePriority,Oi=null,qn=null;function ro(a){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Oi,a,void 0,(a.current.flags&128)===128)}catch{}}function al(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Nr=typeof Object.is=="function"?Object.is:al,fi=null,io=!1,so=!1;function ll(a){fi===null?fi=[a]:fi.push(a)}function ud(a){io=!0,ll(a)}function gn(){if(!so&&fi!==null){so=!0;var a=0,l=rt;try{var h=fi;for(rt=1;a<h.length;a++){var m=h[a];do m=m(!0);while(m!==null)}fi=null,io=!1}catch(v){throw fi!==null&&(fi=fi.slice(a+1)),Xr(il,gn),v}finally{rt=l,so=!1}}return null}var Li=[],pi=0,sa=null,fs=0,On=[],tr=0,Jt=null,Yn=1,Rr="";function Mr(a,l){Li[pi++]=fs,Li[pi++]=sa,sa=a,fs=l}function cd(a,l,h){On[tr++]=Yn,On[tr++]=Rr,On[tr++]=Jt,Jt=a;var m=Yn;a=Rr;var v=32-er(m)-1;m&=~(1<<v),h+=1;var k=32-er(l)+v;if(30<k){var M=v-v%5;k=(m&(1<<M)-1).toString(32),m>>=M,v-=M,Yn=1<<32-er(l)+v|h<<v|m,Rr=k+a}else Yn=1<<k|h<<v|m,Rr=a}function oa(a){a.return!==null&&(Mr(a,1),cd(a,1,0))}function aa(a){for(;a===sa;)sa=Li[--pi],Li[pi]=null,fs=Li[--pi],Li[pi]=null;for(;a===Jt;)Jt=On[--tr],On[tr]=null,Rr=On[--tr],On[tr]=null,Yn=On[--tr],On[tr]=null}var mn=null,Ln=null,bt=!1,la=!1,Ir=null;function dd(a,l){var h=dr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function ul(a,l){switch(a.tag){case 5:return l=ea(l,a.type,a.pendingProps),l!==null?(a.stateNode=l,mn=a,Ln=nf(l),!0):!1;case 6:return l=yu(l,a.pendingProps),l!==null?(a.stateNode=l,mn=a,Ln=null,!0):!1;case 13:if(l=ta(l),l!==null){var h=Jt!==null?{id:Yn,overflow:Rr}:null;return a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=dr(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,mn=a,Ln=null,!0}return!1;default:return!1}}function _u(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Su(a){if(bt){var l=Ln;if(l){var h=l;if(!ul(a,l)){if(_u(a))throw Error(d(418));l=Ks(h);var m=mn;l&&ul(a,l)?dd(m,h):(a.flags=a.flags&-4097|2,bt=!1,mn=a)}}else{if(_u(a))throw Error(d(418));a.flags=a.flags&-4097|2,bt=!1,mn=a}}}function hd(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;mn=a}function cl(a){if(!Ce||a!==mn)return!1;if(!bt)return hd(a),bt=!0,!1;if(a.tag!==3&&(a.tag!==5||af(a.type)&&!qe(a.type,a.memoizedProps))){var l=Ln;if(l){if(_u(a))throw fd(),Error(d(418));for(;l;)dd(a,l),l=Ks(l)}}if(hd(a),a.tag===13){if(!Ce)throw Error(d(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(d(317));Ln=of(a)}else Ln=mn?Ks(a.stateNode):null;return!0}function fd(){for(var a=Ln;a;)a=Ks(a)}function ps(){Ce&&(Ln=mn=null,la=bt=!1)}function ku(a){Ir===null?Ir=[a]:Ir.push(a)}var hf=f.ReactCurrentBatchConfig;function dl(a,l){if(Nr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var v=h[m];if(!uf.call(l,v)||!Nr(a[v],l[v]))return!1}return!0}function ff(a){switch(a.tag){case 5:return ds(a.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return a=$s(a.type,!1),a;case 11:return a=$s(a.type.render,!1),a;case 1:return a=$s(a.type,!0),a;default:return""}}function gs(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(d(309));var m=h.stateNode}if(!m)throw Error(d(147,a));var v=m,k=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===k?l.ref:(l=function(M){var U=v.refs;M===null?delete U[k]:U[k]=M},l._stringRef=k,l)}if(typeof a!="string")throw Error(d(284));if(!h._owner)throw Error(d(290,a))}return a}function hl(a,l){throw a=Object.prototype.toString.call(l),Error(d(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function pd(a){var l=a._init;return l(a._payload)}function gd(a){function l($,H){if(a){var ne=$.deletions;ne===null?($.deletions=[H],$.flags|=16):ne.push(H)}}function h($,H){if(!a)return null;for(;H!==null;)l($,H),H=H.sibling;return null}function m($,H){for($=new Map;H!==null;)H.key!==null?$.set(H.key,H):$.set(H.index,H),H=H.sibling;return $}function v($,H){return $=Zi($,H),$.index=0,$.sibling=null,$}function k($,H,ne){return $.index=ne,a?(ne=$.alternate,ne!==null?(ne=ne.index,ne<H?($.flags|=2,H):ne):($.flags|=2,H)):($.flags|=1048576,H)}function M($){return a&&$.alternate===null&&($.flags|=2),$}function U($,H,ne,Pe){return H===null||H.tag!==6?(H=Mo(ne,$.mode,Pe),H.return=$,H):(H=v(H,ne),H.return=$,H)}function ee($,H,ne,Pe){var We=ne.type;return We===w?Me($,H,ne.props.children,Pe,ne.key):H!==null&&(H.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===O&&pd(We)===H.type)?(Pe=v(H,ne.props),Pe.ref=gs($,H,ne),Pe.return=$,Pe):(Pe=Hl(ne.type,ne.key,ne.props,null,$.mode,Pe),Pe.ref=gs($,H,ne),Pe.return=$,Pe)}function fe($,H,ne,Pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=Vl(ne,$.mode,Pe),H.return=$,H):(H=v(H,ne.children||[]),H.return=$,H)}function Me($,H,ne,Pe,We){return H===null||H.tag!==7?(H=xn(ne,$.mode,Pe,We),H.return=$,H):(H=v(H,ne),H.return=$,H)}function Ke($,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Mo(""+H,$.mode,ne),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case g:return ne=Hl(H.type,H.key,H.props,null,$.mode,ne),ne.ref=gs($,null,H),ne.return=$,ne;case x:return H=Vl(H,$.mode,ne),H.return=$,H;case O:var Pe=H._init;return Ke($,Pe(H._payload),ne)}if(_e(H)||te(H))return H=xn(H,$.mode,ne,null),H.return=$,H;hl($,H)}return null}function Ee($,H,ne,Pe){var We=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number")return We!==null?null:U($,H,""+ne,Pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===We?ee($,H,ne,Pe):null;case x:return ne.key===We?fe($,H,ne,Pe):null;case O:return We=ne._init,Ee($,H,We(ne._payload),Pe)}if(_e(ne)||te(ne))return We!==null?null:Me($,H,ne,Pe,null);hl($,ne)}return null}function Ct($,H,ne,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return $=$.get(ne)||null,U(H,$,""+Pe,We);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case g:return $=$.get(Pe.key===null?ne:Pe.key)||null,ee(H,$,Pe,We);case x:return $=$.get(Pe.key===null?ne:Pe.key)||null,fe(H,$,Pe,We);case O:var et=Pe._init;return Ct($,H,ne,et(Pe._payload),We)}if(_e(Pe)||te(Pe))return $=$.get(ne)||null,Me(H,$,Pe,We,null);hl(H,Pe)}return null}function ft($,H,ne,Pe){for(var We=null,et=null,$e=H,ot=H=0,rn=null;$e!==null&&ot<ne.length;ot++){$e.index>ot?(rn=$e,$e=null):rn=$e.sibling;var st=Ee($,$e,ne[ot],Pe);if(st===null){$e===null&&($e=rn);break}a&&$e&&st.alternate===null&&l($,$e),H=k(st,H,ot),et===null?We=st:et.sibling=st,et=st,$e=rn}if(ot===ne.length)return h($,$e),bt&&Mr($,ot),We;if($e===null){for(;ot<ne.length;ot++)$e=Ke($,ne[ot],Pe),$e!==null&&(H=k($e,H,ot),et===null?We=$e:et.sibling=$e,et=$e);return bt&&Mr($,ot),We}for($e=m($,$e);ot<ne.length;ot++)rn=Ct($e,$,ot,ne[ot],Pe),rn!==null&&(a&&rn.alternate!==null&&$e.delete(rn.key===null?ot:rn.key),H=k(rn,H,ot),et===null?We=rn:et.sibling=rn,et=rn);return a&&$e.forEach(function(Mn){return l($,Mn)}),bt&&Mr($,ot),We}function Gn($,H,ne,Pe){var We=te(ne);if(typeof We!="function")throw Error(d(150));if(ne=We.call(ne),ne==null)throw Error(d(151));for(var et=We=null,$e=H,ot=H=0,rn=null,st=ne.next();$e!==null&&!st.done;ot++,st=ne.next()){$e.index>ot?(rn=$e,$e=null):rn=$e.sibling;var Mn=Ee($,$e,st.value,Pe);if(Mn===null){$e===null&&($e=rn);break}a&&$e&&Mn.alternate===null&&l($,$e),H=k(Mn,H,ot),et===null?We=Mn:et.sibling=Mn,et=Mn,$e=rn}if(st.done)return h($,$e),bt&&Mr($,ot),We;if($e===null){for(;!st.done;ot++,st=ne.next())st=Ke($,st.value,Pe),st!==null&&(H=k(st,H,ot),et===null?We=st:et.sibling=st,et=st);return bt&&Mr($,ot),We}for($e=m($,$e);!st.done;ot++,st=ne.next())st=Ct($e,$,ot,st.value,Pe),st!==null&&(a&&st.alternate!==null&&$e.delete(st.key===null?ot:st.key),H=k(st,H,ot),et===null?We=st:et.sibling=st,et=st);return a&&$e.forEach(function(vf){return l($,vf)}),bt&&Mr($,ot),We}function ri($,H,ne,Pe){if(typeof ne=="object"&&ne!==null&&ne.type===w&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var We=ne.key,et=H;et!==null;){if(et.key===We){if(We=ne.type,We===w){if(et.tag===7){h($,et.sibling),H=v(et,ne.props.children),H.return=$,$=H;break e}}else if(et.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===O&&pd(We)===et.type){h($,et.sibling),H=v(et,ne.props),H.ref=gs($,et,ne),H.return=$,$=H;break e}h($,et);break}else l($,et);et=et.sibling}ne.type===w?(H=xn(ne.props.children,$.mode,Pe,ne.key),H.return=$,$=H):(Pe=Hl(ne.type,ne.key,ne.props,null,$.mode,Pe),Pe.ref=gs($,H,ne),Pe.return=$,$=Pe)}return M($);case x:e:{for(et=ne.key;H!==null;){if(H.key===et)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){h($,H.sibling),H=v(H,ne.children||[]),H.return=$,$=H;break e}else{h($,H);break}else l($,H);H=H.sibling}H=Vl(ne,$.mode,Pe),H.return=$,$=H}return M($);case O:return et=ne._init,ri($,H,et(ne._payload),Pe)}if(_e(ne))return ft($,H,ne,Pe);if(te(ne))return Gn($,H,ne,Pe);hl($,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"?(ne=""+ne,H!==null&&H.tag===6?(h($,H.sibling),H=v(H,ne),H.return=$,$=H):(h($,H),H=Mo(ne,$.mode,Pe),H.return=$,$=H),M($)):h($,H)}return ri}var ms=gd(!0),md=gd(!1),fl=pn(null),pl=null,oo=null,Cu=null;function Eu(){Cu=oo=pl=null}function yd(a,l,h){X?(nt(fl,l._currentValue),l._currentValue=h):(nt(fl,l._currentValue2),l._currentValue2=h)}function ua(a){var l=fl.current;Pt(fl),X?a._currentValue=l:a._currentValue2=l}function ys(a,l,h){for(;a!==null;){var m=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),a===h)break;a=a.return}}function ao(a,l){pl=a,Cu=oo=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(en=!0),a.firstContext=null)}function nr(a){var l=X?a._currentValue:a._currentValue2;if(Cu!==a)if(a={context:a,memoizedValue:l,next:null},oo===null){if(pl===null)throw Error(d(308));oo=a,pl.dependencies={lanes:0,firstContext:a}}else oo=oo.next=a;return l}var Di=null;function gl(a){Di===null?Di=[a]:Di.push(a)}function Pu(a,l,h,m){var v=l.interleaved;return v===null?(h.next=h,gl(l)):(h.next=v.next,v.next=h),l.interleaved=h,Ar(a,m)}function Ar(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var rr=!1;function bu(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vd(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function gi(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function mi(a,l,h){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(Je&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,Ar(a,h)}return v=m.interleaved,v===null?(l.next=l,gl(m)):(l.next=v.next,v.next=l),m.interleaved=l,Ar(a,h)}function ca(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,Yr(a,h)}}function lo(a,l){var h=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var v=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var M={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?v=k=M:k=k.next=M,h=h.next}while(h!==null);k===null?v=k=l:k=k.next=l}else v=k=l;h={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:m.shared,effects:m.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function ji(a,l,h,m){var v=a.updateQueue;rr=!1;var k=v.firstBaseUpdate,M=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var ee=U,fe=ee.next;ee.next=null,M===null?k=fe:M.next=fe,M=ee;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,U=Me.lastBaseUpdate,U!==M&&(U===null?Me.firstBaseUpdate=fe:U.next=fe,Me.lastBaseUpdate=ee))}if(k!==null){var Ke=v.baseState;M=0,Me=fe=ee=null,U=k;do{var Ee=U.lane,Ct=U.eventTime;if((m&Ee)===Ee){Me!==null&&(Me=Me.next={eventTime:Ct,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var ft=a,Gn=U;switch(Ee=l,Ct=h,Gn.tag){case 1:if(ft=Gn.payload,typeof ft=="function"){Ke=ft.call(Ct,Ke,Ee);break e}Ke=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=Gn.payload,Ee=typeof ft=="function"?ft.call(Ct,Ke,Ee):ft,Ee==null)break e;Ke=u({},Ke,Ee);break e;case 2:rr=!0}}U.callback!==null&&U.lane!==0&&(a.flags|=64,Ee=v.effects,Ee===null?v.effects=[U]:Ee.push(U))}else Ct={eventTime:Ct,lane:Ee,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Me===null?(fe=Me=Ct,ee=Ke):Me=Me.next=Ct,M|=Ee;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;Ee=U,U=Ee.next,Ee.next=null,v.lastBaseUpdate=Ee,v.shared.pending=null}}while(!0);if(Me===null&&(ee=Ke),v.baseState=ee,v.firstBaseUpdate=fe,v.lastBaseUpdate=Me,l=v.shared.interleaved,l!==null){v=l;do M|=v.lane,v=v.next;while(v!==l)}else k===null&&(v.shared.lanes=0);_i|=M,a.lanes=M,a.memoizedState=Ke}}function xd(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var m=a[l],v=m.callback;if(v!==null){if(m.callback=null,m=h,typeof v!="function")throw Error(d(191,v));v.call(m)}}}var zi={},yr=pn(zi),uo=pn(zi),Fi=pn(zi);function vr(a){if(a===zi)throw Error(d(174));return a}function ml(a,l){nt(Fi,l),nt(uo,a),nt(yr,zi),a=Re(l),Pt(yr),nt(yr,a)}function vs(){Pt(yr),Pt(uo),Pt(Fi)}function Tu(a){var l=vr(Fi.current),h=vr(yr.current);l=W(h,a.type,l),h!==l&&(nt(uo,a),nt(yr,l))}function Nu(a){uo.current===a&&(Pt(yr),Pt(uo))}var zt=pn(0);function yl(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Kc(h)||us(h)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ru=[];function Mu(){for(var a=0;a<Ru.length;a++){var l=Ru[a];X?l._workInProgressVersionPrimary=null:l._workInProgressVersionSecondary=null}Ru.length=0}var Xn=f.ReactCurrentDispatcher,xs=f.ReactCurrentBatchConfig,Bi=0,Mt=null,Yt=null,Zt=null,co=!1,da=!1,ha=0,ho=0;function ln(){throw Error(d(321))}function ws(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!Nr(a[h],l[h]))return!1;return!0}function fa(a,l,h,m,v,k){if(Bi=k,Mt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Xn.current=a===null||a.memoizedState===null?Gu:Uu,a=h(m,v),da){k=0;do{if(da=!1,ha=0,25<=k)throw Error(d(301));k+=1,Zt=Yt=null,l.updateQueue=null,Xn.current=Wu,a=h(m,v)}while(da)}if(Xn.current=Es,l=Yt!==null&&Yt.next!==null,Bi=0,Zt=Yt=Mt=null,co=!1,l)throw Error(d(300));return a}function vl(){var a=ha!==0;return ha=0,a}function ir(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Mt.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function yn(){if(Yt===null){var a=Mt.alternate;a=a!==null?a.memoizedState:null}else a=Yt.next;var l=Zt===null?Mt.memoizedState:Zt.next;if(l!==null)Zt=l,Yt=a;else{if(a===null)throw Error(d(310));Yt=a,a={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Zt===null?Mt.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function _s(a,l){return typeof l=="function"?l(a):l}function xl(a){var l=yn(),h=l.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=a;var m=Yt,v=m.baseQueue,k=h.pending;if(k!==null){if(v!==null){var M=v.next;v.next=k.next,k.next=M}m.baseQueue=v=k,h.pending=null}if(v!==null){k=v.next,m=m.baseState;var U=M=null,ee=null,fe=k;do{var Me=fe.lane;if((Bi&Me)===Me)ee!==null&&(ee=ee.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),m=fe.hasEagerState?fe.eagerState:a(m,fe.action);else{var Ke={lane:Me,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};ee===null?(U=ee=Ke,M=m):ee=ee.next=Ke,Mt.lanes|=Me,_i|=Me}fe=fe.next}while(fe!==null&&fe!==k);ee===null?M=m:ee.next=U,Nr(m,l.memoizedState)||(en=!0),l.memoizedState=m,l.baseState=M,l.baseQueue=ee,h.lastRenderedState=m}if(a=h.interleaved,a!==null){v=a;do k=v.lane,Mt.lanes|=k,_i|=k,v=v.next;while(v!==a)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function fo(a){var l=yn(),h=l.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=a;var m=h.dispatch,v=h.pending,k=l.memoizedState;if(v!==null){h.pending=null;var M=v=v.next;do k=a(k,M.action),M=M.next;while(M!==v);Nr(k,l.memoizedState)||(en=!0),l.memoizedState=k,l.baseQueue===null&&(l.baseState=k),h.lastRenderedState=k}return[k,m]}function Iu(){}function Au(a,l){var h=Mt,m=yn(),v=l(),k=!Nr(m.memoizedState,v);if(k&&(m.memoizedState=v,en=!0),m=m.queue,Sl(Du.bind(null,h,m,a),[a]),m.getSnapshot!==l||k||Zt!==null&&Zt.memoizedState.tag&1){if(h.flags|=2048,Ss(9,Lu.bind(null,h,m,v,l),void 0,null),wt===null)throw Error(d(349));(Bi&30)!==0||Ou(h,l,v)}return v}function Ou(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function Lu(a,l,h,m){l.value=h,l.getSnapshot=m,ju(l)&&yi(a)}function Du(a,l,h){return h(function(){ju(l)&&yi(a)})}function ju(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!Nr(a,h)}catch{return!0}}function yi(a){var l=Ar(a,1);l!==null&&Nn(l,a,1,-1)}function wl(a){var l=ir();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:a},l.queue=a,a=a.dispatch=pf.bind(null,Mt,a),[l.memoizedState,a]}function Ss(a,l,h,m){return a={tag:a,create:l,destroy:h,deps:m,next:null},l=Mt.updateQueue,l===null?(l={lastEffect:null,stores:null},Mt.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(m=h.next,h.next=a,a.next=m,l.lastEffect=a)),a}function wd(){return yn().memoizedState}function _l(a,l,h,m){var v=ir();Mt.flags|=a,v.memoizedState=Ss(1|l,h,void 0,m===void 0?null:m)}function Gi(a,l,h,m){var v=yn();m=m===void 0?null:m;var k=void 0;if(Yt!==null){var M=Yt.memoizedState;if(k=M.destroy,m!==null&&ws(m,M.deps)){v.memoizedState=Ss(l,h,k,m);return}}Mt.flags|=a,v.memoizedState=Ss(1|l,h,k,m)}function _d(a,l){return _l(8390656,8,a,l)}function Sl(a,l){return Gi(2048,8,a,l)}function zu(a,l){return Gi(4,2,a,l)}function _t(a,l){return Gi(4,4,a,l)}function kl(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function pa(a,l,h){return h=h!=null?h.concat([a]):null,Gi(4,4,kl.bind(null,l,a),h)}function ks(){}function Fu(a,l){var h=yn();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&ws(l,m[1])?m[0]:(h.memoizedState=[a,l],a)}function Cl(a,l){var h=yn();l=l===void 0?null:l;var m=h.memoizedState;return m!==null&&l!==null&&ws(l,m[1])?m[0]:(a=a(),h.memoizedState=[a,l],a)}function po(a,l,h){return(Bi&21)===0?(a.baseState&&(a.baseState=!1,en=!0),a.memoizedState=h):(Nr(h,l)||(h=rl(),Mt.lanes|=h,_i|=h,a.baseState=!0),l)}function El(a,l){var h=rt;rt=h!==0&&4>h?h:4,a(!0);var m=xs.transition;xs.transition={};try{a(!1),l()}finally{rt=h,xs.transition=m}}function Cs(){return yn().memoizedState}function Sd(a,l,h){var m=nn(a);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},kd(a))Bu(l,h);else if(h=Pu(a,l,h,m),h!==null){var v=Tt();Nn(h,a,m,v),ga(h,l,m)}}function pf(a,l,h){var m=nn(a),v={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(kd(a))Bu(l,v);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=l.lastRenderedReducer,k!==null))try{var M=l.lastRenderedState,U=k(M,h);if(v.hasEagerState=!0,v.eagerState=U,Nr(U,M)){var ee=l.interleaved;ee===null?(v.next=v,gl(l)):(v.next=ee.next,ee.next=v),l.interleaved=v;return}}catch{}finally{}h=Pu(a,l,v,m),h!==null&&(v=Tt(),Nn(h,a,m,v),ga(h,l,m))}}function kd(a){var l=a.alternate;return a===Mt||l!==null&&l===Mt}function Bu(a,l){da=co=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function ga(a,l,h){if((h&4194240)!==0){var m=l.lanes;m&=a.pendingLanes,h|=m,l.lanes=h,Yr(a,h)}}var Es={readContext:nr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},Gu={readContext:nr,useCallback:function(a,l){return ir().memoizedState=[a,l===void 0?null:l],a},useContext:nr,useEffect:_d,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,_l(4194308,4,kl.bind(null,l,a),h)},useLayoutEffect:function(a,l){return _l(4194308,4,a,l)},useInsertionEffect:function(a,l){return _l(4,2,a,l)},useMemo:function(a,l){var h=ir();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var m=ir();return l=h!==void 0?h(l):l,m.memoizedState=m.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},m.queue=a,a=a.dispatch=Sd.bind(null,Mt,a),[m.memoizedState,a]},useRef:function(a){var l=ir();return a={current:a},l.memoizedState=a},useState:wl,useDebugValue:ks,useDeferredValue:function(a){return ir().memoizedState=a},useTransition:function(){var a=wl(!1),l=a[0];return a=El.bind(null,a[1]),ir().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var m=Mt,v=ir();if(bt){if(h===void 0)throw Error(d(407));h=h()}else{if(h=l(),wt===null)throw Error(d(349));(Bi&30)!==0||Ou(m,l,h)}v.memoizedState=h;var k={value:h,getSnapshot:l};return v.queue=k,_d(Du.bind(null,m,k,a),[a]),m.flags|=2048,Ss(9,Lu.bind(null,m,k,h,l),void 0,null),h},useId:function(){var a=ir(),l=wt.identifierPrefix;if(bt){var h=Rr,m=Yn;h=(m&~(1<<32-er(m)-1)).toString(32)+h,l=":"+l+"R"+h,h=ha++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=ho++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},Uu={readContext:nr,useCallback:Fu,useContext:nr,useEffect:Sl,useImperativeHandle:pa,useInsertionEffect:zu,useLayoutEffect:_t,useMemo:Cl,useReducer:xl,useRef:wd,useState:function(){return xl(_s)},useDebugValue:ks,useDeferredValue:function(a){var l=yn();return po(l,Yt.memoizedState,a)},useTransition:function(){var a=xl(_s)[0],l=yn().memoizedState;return[a,l]},useMutableSource:Iu,useSyncExternalStore:Au,useId:Cs,unstable_isNewReconciler:!1},Wu={readContext:nr,useCallback:Fu,useContext:nr,useEffect:Sl,useImperativeHandle:pa,useInsertionEffect:zu,useLayoutEffect:_t,useMemo:Cl,useReducer:fo,useRef:wd,useState:function(){return fo(_s)},useDebugValue:ks,useDeferredValue:function(a){var l=yn();return Yt===null?l.memoizedState=a:po(l,Yt.memoizedState,a)},useTransition:function(){var a=fo(_s)[0],l=yn().memoizedState;return[a,l]},useMutableSource:Iu,useSyncExternalStore:Au,useId:Cs,unstable_isNewReconciler:!1};function sr(a,l){if(a&&a.defaultProps){l=u({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function Hu(a,l,h,m){l=a.memoizedState,h=h(m,l),h=h==null?l:u({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var ma={isMounted:function(a){return(a=a._reactInternals)?ge(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var m=Tt(),v=nn(a),k=gi(m,v);k.payload=l,h!=null&&(k.callback=h),l=mi(a,k,v),l!==null&&(Nn(l,a,v,m),ca(l,a,v))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var m=Tt(),v=nn(a),k=gi(m,v);k.tag=1,k.payload=l,h!=null&&(k.callback=h),l=mi(a,k,v),l!==null&&(Nn(l,a,v,m),ca(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Tt(),m=nn(a),v=gi(h,m);v.tag=2,l!=null&&(v.callback=l),l=mi(a,v,m),l!==null&&(Nn(l,a,m,h),ca(l,a,m))}};function Cd(a,l,h,m,v,k,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,k,M):l.prototype&&l.prototype.isPureReactComponent?!dl(h,m)||!dl(v,k):!0}function Ed(a,l,h){var m=!1,v=Ii,k=l.contextType;return typeof k=="object"&&k!==null?k=nr(k):(v=on(l)?qr:En.current,m=l.contextTypes,k=(m=m!=null)?hi(a,v):Ii),l=new l(h,k),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=ma,a.stateNode=l,l._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=k),l}function Pl(a,l,h,m){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==a&&ma.enqueueReplaceState(l,l.state,null)}function Qr(a,l,h,m){var v=a.stateNode;v.props=h,v.state=a.memoizedState,v.refs={},bu(a);var k=l.contextType;typeof k=="object"&&k!==null?v.context=nr(k):(k=on(l)?qr:En.current,v.context=hi(a,k)),v.state=a.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Hu(a,l,k,h),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&ma.enqueueReplaceState(v,v.state,null),ji(a,h,v,m),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function Ps(a,l){try{var h="",m=l;do h+=ff(m),m=m.return;while(m);var v=h}catch(k){v=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:l,stack:v,digest:null}}function Ui(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function xr(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var ya=typeof WeakMap=="function"?WeakMap:Map;function Kr(a,l,h){h=gi(-1,h),h.tag=3,h.payload={element:null};var m=l.value;return h.callback=function(){Gt||(Gt=!0,Xt=m),xr(a,l)},h}function bl(a,l,h){h=gi(-1,h),h.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var v=l.value;h.payload=function(){return m(v)},h.callback=function(){xr(a,l)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){xr(a,l),typeof m!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var M=l.stack;this.componentDidCatch(l.value,{componentStack:M!==null?M:""})}),h}function Pd(a,l,h){var m=a.pingCache;if(m===null){m=a.pingCache=new ya;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(h)||(v.add(h),a=Od.bind(null,a,l,h),l.then(a,a))}function bd(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function Wi(a,l,h,m,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=gi(-1,1),l.tag=2,mi(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var va=f.ReactCurrentOwner,en=!1;function un(a,l,h,m){l.child=a===null?md(l,null,h,m):ms(l,a.child,h,m)}function Tl(a,l,h,m,v){h=h.render;var k=l.ref;return ao(l,v),m=fa(a,l,h,m,k,v),h=vl(),a!==null&&!en?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,xi(a,l,v)):(bt&&h&&oa(l),l.flags|=1,un(a,l,m,v),l.child)}function bs(a,l,h,m,v){if(a===null){var k=h.type;return typeof k=="function"&&!No(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=k,vi(a,l,k,m,v)):(a=Hl(h.type,null,m,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(k=a.child,(a.lanes&v)===0){var M=k.memoizedProps;if(h=h.compare,h=h!==null?h:dl,h(M,m)&&a.ref===l.ref)return xi(a,l,v)}return l.flags|=1,a=Zi(k,m),a.ref=l.ref,a.return=l,l.child=a}function vi(a,l,h,m,v){if(a!==null){var k=a.memoizedProps;if(dl(k,m)&&a.ref===l.ref)if(en=!1,l.pendingProps=m=k,(a.lanes&v)!==0)(a.flags&131072)!==0&&(en=!0);else return l.lanes=a.lanes,xi(a,l,v)}return $r(a,l,h,m,v)}function St(a,l,h){var m=l.pendingProps,v=m.children,k=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Qi,tn),tn|=h;else{if((h&1073741824)===0)return a=k!==null?k.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,nt(Qi,tn),tn|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=k!==null?k.baseLanes:h,nt(Qi,tn),tn|=m}else k!==null?(m=k.baseLanes|h,l.memoizedState=null):m=h,nt(Qi,tn),tn|=m;return un(a,l,v,h),l.child}function xt(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function $r(a,l,h,m,v){var k=on(h)?qr:En.current;return k=hi(l,k),ao(l,v),h=fa(a,l,h,m,k,v),m=vl(),a!==null&&!en?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,xi(a,l,v)):(bt&&m&&oa(l),l.flags|=1,un(a,l,h,v),l.child)}function vn(a,l,h,m,v){if(on(h)){var k=!0;Js(l)}else k=!1;if(ao(l,v),l.stateNode===null)xa(a,l),Ed(l,h,m),Qr(l,h,m,v),m=!0;else if(a===null){var M=l.stateNode,U=l.memoizedProps;M.props=U;var ee=M.context,fe=h.contextType;typeof fe=="object"&&fe!==null?fe=nr(fe):(fe=on(h)?qr:En.current,fe=hi(l,fe));var Me=h.getDerivedStateFromProps,Ke=typeof Me=="function"||typeof M.getSnapshotBeforeUpdate=="function";Ke||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(U!==m||ee!==fe)&&Pl(l,M,m,fe),rr=!1;var Ee=l.memoizedState;M.state=Ee,ji(l,m,M,v),ee=l.memoizedState,U!==m||Ee!==ee||Vn.current||rr?(typeof Me=="function"&&(Hu(l,h,Me,m),ee=l.memoizedState),(U=rr||Cd(l,h,U,m,Ee,ee,fe))?(Ke||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(l.flags|=4194308)):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ee),M.props=m,M.state=ee,M.context=fe,m=U):(typeof M.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{M=l.stateNode,vd(a,l),U=l.memoizedProps,fe=l.type===l.elementType?U:sr(l.type,U),M.props=fe,Ke=l.pendingProps,Ee=M.context,ee=h.contextType,typeof ee=="object"&&ee!==null?ee=nr(ee):(ee=on(h)?qr:En.current,ee=hi(l,ee));var Ct=h.getDerivedStateFromProps;(Me=typeof Ct=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(U!==Ke||Ee!==ee)&&Pl(l,M,m,ee),rr=!1,Ee=l.memoizedState,M.state=Ee,ji(l,m,M,v);var ft=l.memoizedState;U!==Ke||Ee!==ft||Vn.current||rr?(typeof Ct=="function"&&(Hu(l,h,Ct,m),ft=l.memoizedState),(fe=rr||Cd(l,h,fe,m,Ee,ft,ee)||!1)?(Me||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(m,ft,ee),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(m,ft,ee)),typeof M.componentDidUpdate=="function"&&(l.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof M.componentDidUpdate!="function"||U===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||U===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ft),M.props=m,M.state=ft,M.context=ee,m=fe):(typeof M.componentDidUpdate!="function"||U===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||U===a.memoizedProps&&Ee===a.memoizedState||(l.flags|=1024),m=!1)}return Pn(a,l,h,m,k,v)}function Pn(a,l,h,m,v,k){xt(a,l);var M=(l.flags&128)!==0;if(!m&&!M)return v&&xu(l,h,!1),xi(a,l,k);m=l.stateNode,va.current=l;var U=M&&typeof h.getDerivedStateFromError!="function"?null:m.render();return l.flags|=1,a!==null&&M?(l.child=ms(l,a.child,null,k),l.child=ms(l,null,U,k)):un(a,l,U,k),l.memoizedState=m.state,v&&xu(l,h,!0),l.child}function Hi(a){var l=a.stateNode;l.pendingContext?rd(a,l.pendingContext,l.pendingContext!==l.context):l.context&&rd(a,l.context,!1),ml(a,l.containerInfo)}function Ts(a,l,h,m,v){return ps(),ku(v),l.flags|=256,un(a,l,h,m),l.child}var bn={dehydrated:null,treeContext:null,retryLane:0};function go(a){return{baseLanes:a,cachePool:null,transitions:null}}function Vu(a,l,h){var m=l.pendingProps,v=zt.current,k=!1,M=(l.flags&128)!==0,U;if((U=M)||(U=a!==null&&a.memoizedState===null?!1:(v&2)!==0),U?(k=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),nt(zt,v&1),a===null)return Su(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:us(a)?l.lanes=8:l.lanes=1073741824,null):(M=m.children,a=m.fallback,k?(m=l.mode,k=l.child,M={mode:"hidden",children:M},(m&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=M):k=Ro(M,m,0,null),a=xn(a,m,h,null),k.return=l,a.return=l,k.sibling=a,l.child=k,l.child.memoizedState=go(h),l.memoizedState=bn,a):Nl(l,M));if(v=a.memoizedState,v!==null&&(U=v.dehydrated,U!==null))return Td(a,l,M,m,U,v,h);if(k){k=m.fallback,M=l.mode,v=a.child,U=v.sibling;var ee={mode:"hidden",children:m.children};return(M&1)===0&&l.child!==v?(m=l.child,m.childLanes=0,m.pendingProps=ee,l.deletions=null):(m=Zi(v,ee),m.subtreeFlags=v.subtreeFlags&14680064),U!==null?k=Zi(U,k):(k=xn(k,M,h,null),k.flags|=2),k.return=l,m.return=l,m.sibling=k,l.child=m,m=k,k=l.child,M=a.child.memoizedState,M=M===null?go(h):{baseLanes:M.baseLanes|h,cachePool:null,transitions:M.transitions},k.memoizedState=M,k.childLanes=a.childLanes&~h,l.memoizedState=bn,m}return k=a.child,a=k.sibling,m=Zi(k,{mode:"visible",children:m.children}),(l.mode&1)===0&&(m.lanes=h),m.return=l,m.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=m,l.memoizedState=null,m}function Nl(a,l){return l=Ro({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function Ns(a,l,h,m){return m!==null&&ku(m),ms(l,a.child,null,h),a=Nl(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Td(a,l,h,m,v,k,M){if(h)return l.flags&256?(l.flags&=-257,m=Ui(Error(d(422))),Ns(a,l,M,m)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(k=m.fallback,v=l.mode,m=Ro({mode:"visible",children:m.children},v,0,null),k=xn(k,v,M,null),k.flags|=2,m.return=l,k.return=l,m.sibling=k,l.child=m,(l.mode&1)!==0&&ms(l,a.child,null,M),l.child.memoizedState=go(M),l.memoizedState=bn,k);if((l.mode&1)===0)return Ns(a,l,M,null);if(us(v))return m=Ja(v).digest,k=Error(d(419)),m=Ui(k,m,void 0),Ns(a,l,M,m);if(h=(M&a.childLanes)!==0,en||h){if(m=wt,m!==null){switch(M&-M){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|M))!==0?0:v,v!==0&&v!==k.retryLane&&(k.retryLane=v,Ar(a,v),Nn(m,a,v,-1))}return To(),m=Ui(Error(d(421))),Ns(a,l,M,m)}return Kc(v)?(l.flags|=128,l.child=a.child,l=Dd.bind(null,a),Za(v,l),null):(a=k.treeContext,Ce&&(Ln=sf(v),mn=l,bt=!0,Ir=null,la=!1,a!==null&&(On[tr++]=Yn,On[tr++]=Rr,On[tr++]=Jt,Yn=a.id,Rr=a.overflow,Jt=l)),l=Nl(l,m.children),l.flags|=4096,l)}function Jr(a,l,h){a.lanes|=l;var m=a.alternate;m!==null&&(m.lanes|=l),ys(a.return,l,h)}function mo(a,l,h,m,v){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:v}:(k.isBackwards=l,k.rendering=null,k.renderingStartTime=0,k.last=m,k.tail=h,k.tailMode=v)}function Rl(a,l,h){var m=l.pendingProps,v=m.revealOrder,k=m.tail;if(un(a,l,m.children,h),m=zt.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Jr(a,h,l);else if(a.tag===19)Jr(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(nt(zt,m),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)a=h.alternate,a!==null&&yl(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),mo(l,!1,v,h,k);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&yl(a)===null){l.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}mo(l,!0,h,null,k);break;case"together":mo(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function xa(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function xi(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),_i|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(d(153));if(l.child!==null){for(a=l.child,h=Zi(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=Zi(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function Vi(a,l,h){switch(l.tag){case 3:Hi(l),ps();break;case 5:Tu(l);break;case 1:on(l.type)&&Js(l);break;case 4:ml(l,l.stateNode.containerInfo);break;case 10:yd(l,l.type._context,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(nt(zt,zt.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Vu(a,l,h):(nt(zt,zt.current&1),a=xi(a,l,h),a!==null?a.sibling:null);nt(zt,zt.current&1);break;case 19:if(m=(h&l.childLanes)!==0,(a.flags&128)!==0){if(m)return Rl(a,l,h);l.flags|=128}var v=l.memoizedState;if(v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),nt(zt,zt.current),m)break;return null;case 22:case 23:return l.lanes=0,St(a,l,h)}return xi(a,l,h)}function Dn(a){a.flags|=4}function Rs(a,l){if(a!==null&&a.child===l.child)return!0;if((l.flags&16)!==0)return!1;for(a=l.child;a!==null;){if((a.flags&12854)!==0||(a.subtreeFlags&12854)!==0)return!1;a=a.sibling}return!0}var qi,Yi,jn,zn;if(re)qi=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)K(a,h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Yi=function(){},jn=function(a,l,h,m,v){if(a=a.memoizedProps,a!==m){var k=l.stateNode,M=vr(yr.current);h=Le(k,h,a,m,v,M),(l.updateQueue=h)&&Dn(l)}},zn=function(a,l,h,m){h!==m&&Dn(l)};else if(Fe){qi=function(a,l,h,m){for(var v=l.child;v!==null;){if(v.tag===5){var k=v.stateNode;h&&m&&(k=$a(k,v.type,v.memoizedProps,v)),K(a,k)}else if(v.tag===6)k=v.stateNode,h&&m&&(k=mu(k,v.memoizedProps,v)),K(a,k);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)k=v.child,k!==null&&(k.return=v),qi(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};var Xi=function(a,l,h,m){for(var v=l.child;v!==null;){if(v.tag===5){var k=v.stateNode;h&&m&&(k=$a(k,v.type,v.memoizedProps,v)),gu(a,k)}else if(v.tag===6)k=v.stateNode,h&&m&&(k=mu(k,v.memoizedProps,v)),gu(a,k);else if(v.tag!==4){if(v.tag===22&&v.memoizedState!==null)k=v.child,k!==null&&(k.return=v),Xi(a,v,!0,!0);else if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===l)break;for(;v.sibling===null;){if(v.return===null||v.return===l)return;v=v.return}v.sibling.return=v.return,v=v.sibling}};Yi=function(a,l){var h=l.stateNode;if(!Rs(a,l)){a=h.containerInfo;var m=pu(a);Xi(m,l,!1,!1),h.pendingChildren=m,Dn(l),Qc(a,m)}},jn=function(a,l,h,m,v){var k=a.stateNode,M=a.memoizedProps;if((a=Rs(a,l))&&M===m)l.stateNode=k;else{var U=l.stateNode,ee=vr(yr.current),fe=null;M!==m&&(fe=Le(U,h,M,m,v,ee)),a&&fe===null?l.stateNode=k:(k=Xc(k,fe,h,M,m,l,a,U),xe(k,h,m,v,ee)&&Dn(l),l.stateNode=k,a?Dn(l):qi(k,l,!1,!1))}},zn=function(a,l,h,m){h!==m?(a=vr(Fi.current),h=vr(yr.current),l.stateNode=Ve(m,a,h,l),Dn(l)):l.stateNode=a.stateNode}}else Yi=function(){},jn=function(){},zn=function(){};function or(a,l){if(!bt)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function It(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,m=0;if(l)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=h,l}function Ms(a,l,h){var m=l.pendingProps;switch(aa(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(l),null;case 1:return on(l.type)&&hs(),It(l),null;case 3:return h=l.stateNode,vs(),Pt(Vn),Pt(En),Mu(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(cl(l)?Dn(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Ir!==null&&(Ul(Ir),Ir=null))),Yi(a,l),It(l),null;case 5:Nu(l),h=vr(Fi.current);var v=l.type;if(a!==null&&l.stateNode!=null)jn(a,l,v,m,h),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!m){if(l.stateNode===null)throw Error(d(166));return It(l),null}if(a=vr(yr.current),cl(l)){if(!Ce)throw Error(d(175));a=cs(l.stateNode,l.type,l.memoizedProps,h,a,l,!la),l.updateQueue=a,a!==null&&Dn(l)}else{var k=j(v,m,h,a,l);qi(k,l,!1,!1),l.stateNode=k,xe(k,v,m,h,a)&&Dn(l)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return It(l),null;case 6:if(a&&l.stateNode!=null)zn(a,l,a.memoizedProps,m);else{if(typeof m!="string"&&l.stateNode===null)throw Error(d(166));if(a=vr(Fi.current),h=vr(yr.current),cl(l)){if(!Ce)throw Error(d(176));if(a=l.stateNode,h=l.memoizedProps,(m=$c(a,h,l,!la))&&(v=mn,v!==null))switch(v.tag){case 3:lf(v.stateNode.containerInfo,a,h,(v.mode&1)!==0);break;case 5:Wt(v.type,v.memoizedProps,v.stateNode,a,h,(v.mode&1)!==0)}m&&Dn(l)}else l.stateNode=Ve(m,a,h,l)}return It(l),null;case 13:if(Pt(zt),m=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(bt&&Ln!==null&&(l.mode&1)!==0&&(l.flags&128)===0)fd(),ps(),l.flags|=98560,v=!1;else if(v=cl(l),m!==null&&m.dehydrated!==null){if(a===null){if(!v)throw Error(d(318));if(!Ce)throw Error(d(344));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(d(317));Jc(v,l)}else ps(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;It(l),v=!1}else Ir!==null&&(Ul(Ir),Ir=null),v=!0;if(!v)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(h=m!==null,h!==(a!==null&&a.memoizedState!==null)&&h&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(zt.current&1)!==0?Ot===0&&(Ot=3):To())),l.updateQueue!==null&&(l.flags|=4),It(l),null);case 4:return vs(),Yi(a,l),a===null&&vt(l.stateNode.containerInfo),It(l),null;case 10:return ua(l.type._context),It(l),null;case 17:return on(l.type)&&hs(),It(l),null;case 19:if(Pt(zt),v=l.memoizedState,v===null)return It(l),null;if(m=(l.flags&128)!==0,k=v.rendering,k===null)if(m)or(v,!1);else{if(Ot!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(k=yl(a),k!==null){for(l.flags|=128,or(v,!1),a=k.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),l.subtreeFlags=0,a=h,h=l.child;h!==null;)m=h,v=a,m.flags&=14680066,k=m.alternate,k===null?(m.childLanes=0,m.lanes=v,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=k.childLanes,m.lanes=k.lanes,m.child=k.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=k.memoizedProps,m.memoizedState=k.memoizedState,m.updateQueue=k.updateQueue,m.type=k.type,v=k.dependencies,m.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),h=h.sibling;return nt(zt,zt.current&1|2),l.child}a=a.sibling}v.tail!==null&&an()>Pa&&(l.flags|=128,m=!0,or(v,!1),l.lanes=4194304)}else{if(!m)if(a=yl(k),a!==null){if(l.flags|=128,m=!0,a=a.updateQueue,a!==null&&(l.updateQueue=a,l.flags|=4),or(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!bt)return It(l),null}else 2*an()-v.renderingStartTime>Pa&&h!==1073741824&&(l.flags|=128,m=!0,or(v,!1),l.lanes=4194304);v.isBackwards?(k.sibling=l.child,l.child=k):(a=v.last,a!==null?a.sibling=k:l.child=k,v.last=k)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=an(),l.sibling=null,a=zt.current,nt(zt,m?a&1|2:a&1),l):(It(l),null);case 22:case 23:return Wl(),h=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==h&&(l.flags|=8192),h&&(l.mode&1)!==0?(tn&1073741824)!==0&&(It(l),re&&l.subtreeFlags&6&&(l.flags|=8192)):It(l),null;case 24:return null;case 25:return null}throw Error(d(156,l.tag))}function Nd(a,l){switch(aa(l),l.tag){case 1:return on(l.type)&&hs(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return vs(),Pt(Vn),Pt(En),Mu(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Nu(l),null;case 13:if(Pt(zt),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(d(340));ps()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Pt(zt),null;case 4:return vs(),null;case 10:return ua(l.type._context),null;case 22:case 23:return Wl(),null;case 24:return null;default:return null}}var yo=!1,cn=!1,ar=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ht(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Nt(a,l,m)}else h.current=null}function lr(a,l,h){try{h()}catch(m){Nt(a,l,m)}}var qu=!1;function Rd(a,l){for(ve(a.containerInfo),Se=l;Se!==null;)if(a=Se,l=a.child,(a.subtreeFlags&1028)!==0&&l!==null)l.return=a,Se=l;else for(;Se!==null;){a=Se;try{var h=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,v=h.memoizedState,k=a.stateNode,M=k.getSnapshotBeforeUpdate(a.elementType===a.type?m:sr(a.type,m),v);k.__reactInternalSnapshotBeforeUpdate=M}break;case 3:re&&Qs(a.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(U){Nt(a,a.return,U)}if(l=a.sibling,l!==null){l.return=a.return,Se=l;break}Se=a.return}return h=qu,qu=!1,h}function Is(a,l,h){var m=l.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&a)===a){var k=v.destroy;v.destroy=void 0,k!==void 0&&lr(l,h,k)}v=v.next}while(v!==m)}}function vo(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var m=h.create;h.destroy=m()}h=h.next}while(h!==l)}}function Ml(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=ae(h);break;default:a=h}typeof l=="function"?l(a):l.current=a}}function wa(a){var l=a.alternate;l!==null&&(a.alternate=null,wa(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Cn(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Yu(a){return a.tag===5||a.tag===3||a.tag===4}function As(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Yu(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function _a(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?Yc(h,a,l):Xa(h,a);else if(m!==4&&(a=a.child,a!==null))for(_a(a,l,h),a=a.sibling;a!==null;)_a(a,l,h),a=a.sibling}function Xu(a,l,h){var m=a.tag;if(m===5||m===6)a=a.stateNode,l?qc(h,a,l):gr(h,a);else if(m!==4&&(a=a.child,a!==null))for(Xu(a,l,h),a=a.sibling;a!==null;)Xu(a,l,h),a=a.sibling}var Ht=null,Qn=!1;function Or(a,l,h){for(h=h.child;h!==null;)Il(a,l,h),h=h.sibling}function Il(a,l,h){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Oi,h)}catch{}switch(h.tag){case 5:cn||ht(h,l);case 6:if(re){var m=Ht,v=Qn;Ht=null,Or(a,l,h),Ht=m,Qn=v,Ht!==null&&(Qn?cu(Ht,h.stateNode):tf(Ht,h.stateNode))}else Or(a,l,h);break;case 18:re&&Ht!==null&&(Qn?nd(Ht,h.stateNode):td(Ht,h.stateNode));break;case 4:re?(m=Ht,v=Qn,Ht=h.stateNode.containerInfo,Qn=!0,Or(a,l,h),Ht=m,Qn=v):(Fe&&(m=h.stateNode.containerInfo,v=pu(m),Ka(m,v)),Or(a,l,h));break;case 0:case 11:case 14:case 15:if(!cn&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var k=v,M=k.destroy;k=k.tag,M!==void 0&&((k&2)!==0||(k&4)!==0)&&lr(h,l,M),v=v.next}while(v!==m)}Or(a,l,h);break;case 1:if(!cn&&(ht(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(U){Nt(h,l,U)}Or(a,l,h);break;case 21:Or(a,l,h);break;case 22:h.mode&1?(cn=(m=cn)||h.memoizedState!==null,Or(a,l,h),cn=m):Or(a,l,h);break;default:Or(a,l,h)}}function Os(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new ar),l.forEach(function(m){var v=gf.bind(null,a,m);h.has(m)||(h.add(m),m.then(v,v))})}}function wr(a,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];try{var k=a,M=l;if(re){var U=M;e:for(;U!==null;){switch(U.tag){case 5:Ht=U.stateNode,Qn=!1;break e;case 3:Ht=U.stateNode.containerInfo,Qn=!0;break e;case 4:Ht=U.stateNode.containerInfo,Qn=!0;break e}U=U.return}if(Ht===null)throw Error(d(160));Il(k,M,v),Ht=null,Qn=!1}else Il(k,M,v);var ee=v.alternate;ee!==null&&(ee.return=null),v.return=null}catch(fe){Nt(v,l,fe)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Sa(l,a),l=l.sibling}function Sa(a,l){var h=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(wr(l,a),ur(a),m&4){try{Is(3,a,a.return),vo(3,a)}catch(Ee){Nt(a,a.return,Ee)}try{Is(5,a,a.return)}catch(Ee){Nt(a,a.return,Ee)}}break;case 1:wr(l,a),ur(a),m&512&&h!==null&&ht(h,h.return);break;case 5:if(wr(l,a),ur(a),m&512&&h!==null&&ht(h,h.return),re){if(a.flags&32){var v=a.stateNode;try{Qa(v)}catch(Ee){Nt(a,a.return,Ee)}}if(m&4&&(v=a.stateNode,v!=null)){var k=a.memoizedProps;if(h=h!==null?h.memoizedProps:k,m=a.type,l=a.updateQueue,a.updateQueue=null,l!==null)try{ef(v,l,m,h,k,a)}catch(Ee){Nt(a,a.return,Ee)}}}break;case 6:if(wr(l,a),ur(a),m&4&&re){if(a.stateNode===null)throw Error(d(162));v=a.stateNode,k=a.memoizedProps,h=h!==null?h.memoizedProps:k;try{ls(v,h,k)}catch(Ee){Nt(a,a.return,Ee)}}break;case 3:if(wr(l,a),ur(a),m&4){if(re&&Ce&&h!==null&&h.memoizedState.isDehydrated)try{Zc(l.containerInfo)}catch(Ee){Nt(a,a.return,Ee)}if(Fe){v=l.containerInfo,k=l.pendingChildren;try{Ka(v,k)}catch(Ee){Nt(a,a.return,Ee)}}}break;case 4:if(wr(l,a),ur(a),m&4&&Fe){k=a.stateNode,v=k.containerInfo,k=k.pendingChildren;try{Ka(v,k)}catch(Ee){Nt(a,a.return,Ee)}}break;case 13:wr(l,a),ur(a),v=a.child,v.flags&8192&&(k=v.memoizedState!==null,v.stateNode.isHidden=k,!k||v.alternate!==null&&v.alternate.memoizedState!==null||(Co=an())),m&4&&Os(a);break;case 22:var M=h!==null&&h.memoizedState!==null;if(a.mode&1?(cn=(h=cn)||M,wr(l,a),cn=h):wr(l,a),ur(a),m&8192){if(h=a.memoizedState!==null,(a.stateNode.isHidden=h)&&!M&&(a.mode&1)!==0)for(Se=a,m=a.child;m!==null;){for(l=Se=m;Se!==null;){M=Se;var U=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Is(4,M,M.return);break;case 1:ht(M,M.return);var ee=M.stateNode;if(typeof ee.componentWillUnmount=="function"){var fe=M,Me=M.return;try{var Ke=fe;ee.props=Ke.memoizedProps,ee.state=Ke.memoizedState,ee.componentWillUnmount()}catch(Ee){Nt(fe,Me,Ee)}}break;case 5:ht(M,M.return);break;case 22:if(M.memoizedState!==null){Ll(l);continue}}U!==null?(U.return=M,Se=U):Ll(l)}m=m.sibling}if(re){e:if(m=null,re)for(l=a;;){if(l.tag===5){if(m===null){m=l;try{v=l.stateNode,h?du(v):fu(l.stateNode,l.memoizedProps)}catch(Ee){Nt(a,a.return,Ee)}}}else if(l.tag===6){if(m===null)try{k=l.stateNode,h?hu(k):Xs(k,l.memoizedProps)}catch(Ee){Nt(a,a.return,Ee)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;m===l&&(m=null),l=l.return}m===l&&(m=null),l.sibling.return=l.return,l=l.sibling}}}break;case 19:wr(l,a),ur(a),m&4&&Os(a);break;case 21:break;default:wr(l,a),ur(a)}}function ur(a){var l=a.flags;if(l&2){try{if(re){e:{for(var h=a.return;h!==null;){if(Yu(h)){var m=h;break e}h=h.return}throw Error(d(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(Qa(v),m.flags&=-33);var k=As(a);Xu(a,k,v);break;case 3:case 4:var M=m.stateNode.containerInfo,U=As(a);_a(a,U,M);break;default:throw Error(d(161))}}}catch(ee){Nt(a,a.return,ee)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function xo(a,l,h){Se=a,Al(a)}function Al(a,l,h){for(var m=(a.mode&1)!==0;Se!==null;){var v=Se,k=v.child;if(v.tag===22&&m){var M=v.memoizedState!==null||yo;if(!M){var U=v.alternate,ee=U!==null&&U.memoizedState!==null||cn;U=yo;var fe=cn;if(yo=M,(cn=ee)&&!fe)for(Se=v;Se!==null;)M=Se,ee=M.child,M.tag===22&&M.memoizedState!==null?Dl(v):ee!==null?(ee.return=M,Se=ee):Dl(v);for(;k!==null;)Se=k,Al(k),k=k.sibling;Se=v,yo=U,cn=fe}Ol(a)}else(v.subtreeFlags&8772)!==0&&k!==null?(k.return=v,Se=k):Ol(a)}}function Ol(a){for(;Se!==null;){var l=Se;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:cn||vo(5,l);break;case 1:var m=l.stateNode;if(l.flags&4&&!cn)if(h===null)m.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:sr(l.type,h.memoizedProps);m.componentDidUpdate(v,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var k=l.updateQueue;k!==null&&xd(l,k,m);break;case 3:var M=l.updateQueue;if(M!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=ae(l.child.stateNode);break;case 1:h=l.child.stateNode}xd(l,M,h)}break;case 5:var U=l.stateNode;h===null&&l.flags&4&&Zo(U,l.type,l.memoizedProps,l);break;case 6:break;case 4:break;case 12:break;case 13:if(Ce&&l.memoizedState===null){var ee=l.alternate;if(ee!==null){var fe=ee.memoizedState;if(fe!==null){var Me=fe.dehydrated;Me!==null&&ed(Me)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(d(163))}cn||l.flags&512&&Ml(l)}catch(Ke){Nt(l,l.return,Ke)}}if(l===a){Se=null;break}if(h=l.sibling,h!==null){h.return=l.return,Se=h;break}Se=l.return}}function Ll(a){for(;Se!==null;){var l=Se;if(l===a){Se=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Se=h;break}Se=l.return}}function Dl(a){for(;Se!==null;){var l=Se;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{vo(4,l)}catch(ee){Nt(l,h,ee)}break;case 1:var m=l.stateNode;if(typeof m.componentDidMount=="function"){var v=l.return;try{m.componentDidMount()}catch(ee){Nt(l,v,ee)}}var k=l.return;try{Ml(l)}catch(ee){Nt(l,k,ee)}break;case 5:var M=l.return;try{Ml(l)}catch(ee){Nt(l,M,ee)}}}catch(ee){Nt(l,l.return,ee)}if(l===a){Se=null;break}var U=l.sibling;if(U!==null){U.return=l.return,Se=U;break}Se=l.return}}var wi=0,Fn=1,Zr=2,wo=3,ka=4;if(typeof Symbol=="function"&&Symbol.for){var cr=Symbol.for;wi=cr("selector.component"),Fn=cr("selector.has_pseudo_class"),Zr=cr("selector.role"),wo=cr("selector.test_id"),ka=cr("selector.text")}function ei(a){var l=Ue(a);if(l!=null){if(typeof l.memoizedProps["data-testname"]!="string")throw Error(d(364));return l}if(a=fn(a),a===null)throw Error(d(362));return a.stateNode.current}function Ca(a,l){switch(l.$$typeof){case wi:if(a.type===l.value)return!0;break;case Fn:e:{l=l.value,a=[a,0];for(var h=0;h<a.length;){var m=a[h++],v=a[h++],k=l[v];if(m.tag!==5||!Vr(m)){for(;k!=null&&Ca(m,k);)v++,k=l[v];if(v===l.length){l=!0;break e}else for(m=m.child;m!==null;)a.push(m,v),m=m.sibling}}l=!1}return l;case Zr:if(a.tag===5&&Jo(a.stateNode,l.value))return!0;break;case ka:if((a.tag===5||a.tag===6)&&(a=Tr(a),a!==null&&0<=a.indexOf(l.value)))return!0;break;case wo:if(a.tag===5&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function jl(a){switch(a.$$typeof){case wi:return"<"+(ie(a.value)||"Unknown")+">";case Fn:return":has("+(jl(a)||"")+")";case Zr:return'[role="'+a.value+'"]';case ka:return'"'+a.value+'"';case wo:return'[data-testname="'+a.value+'"]';default:throw Error(d(365))}}function ti(a,l){var h=[];a=[a,0];for(var m=0;m<a.length;){var v=a[m++],k=a[m++],M=l[k];if(v.tag!==5||!Vr(v)){for(;M!=null&&Ca(v,M);)k++,M=l[k];if(k===l.length)h.push(v);else for(v=v.child;v!==null;)a.push(v,k),v=v.sibling}}return h}function ni(a,l){if(!Et)throw Error(d(363));a=ei(a),a=ti(a,l),l=[],a=Array.from(a);for(var h=0;h<a.length;){var m=a[h++];if(m.tag===5)Vr(m)||l.push(m.stateNode);else for(m=m.child;m!==null;)a.push(m),m=m.sibling}return l}var zl=Math.ceil,Ea=f.ReactCurrentDispatcher,_o=f.ReactCurrentOwner,Bt=f.ReactCurrentBatchConfig,Je=0,wt=null,At=null,Vt=0,tn=0,Qi=pn(0),Ot=0,So=null,_i=0,kt=0,ko=0,Ls=null,Tn=null,Co=0,Pa=1/0,Bn=null;function mt(){Pa=an()+500}var Gt=!1,Xt=null,Lr=null,Ki=!1,_r=null,Fl=0,Qt=0,ba=null,Eo=-1,Po=0;function Tt(){return(Je&6)!==0?an():Eo!==-1?Eo:Eo=an()}function nn(a){return(a.mode&1)===0?1:(Je&2)!==0&&Vt!==0?Vt&-Vt:hf.transition!==null?(Po===0&&(Po=rl()),Po):(a=rt,a!==0?a:gt())}function Nn(a,l,h,m){if(50<Qt)throw Qt=0,ba=null,Error(d(185));mr(a,h,m),((Je&2)===0||a!==wt)&&(a===wt&&((Je&2)===0&&(kt|=h),Ot===4&&Si(a,Vt)),Rn(a,m),h===1&&Je===0&&(l.mode&1)===0&&(mt(),io&&gn()))}function Rn(a,l){var h=a.callbackNode;od(a,l);var m=eo(a,a===wt?Vt:0);if(m===0)h!==null&&ad(h),a.callbackNode=null,a.callbackPriority=0;else if(l=m&-m,a.callbackPriority!==l){if(h!=null&&ad(h),l===1)a.tag===0?ud(Qu.bind(null,a)):ll(Qu.bind(null,a)),jt?Ut(function(){(Je&6)===0&&gn()}):Xr(il,gn),h=null;else{switch(no(m)){case 1:h=il;break;case 4:h=sl;break;case 16:h=ol;break;case 536870912:h=df;break;default:h=ol}h=nc(h,Bl.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function Bl(a,l){if(Eo=-1,Po=0,(Je&6)!==0)throw Error(d(327));var h=a.callbackNode;if(ki()&&a.callbackNode!==h)return null;var m=eo(a,a===wt?Vt:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||l)l=Ds(a,m);else{l=m;var v=Je;Je|=2;var k=$u();(wt!==a||Vt!==l)&&(Bn=null,mt(),$i(a,l));do try{Ju();break}catch(U){bo(a,U)}while(!0);Eu(),Ea.current=k,Je=v,At!==null?l=0:(wt=null,Vt=0,l=Ot)}if(l!==0){if(l===2&&(v=nl(a),v!==0&&(m=v,l=Gl(a,v))),l===1)throw h=So,$i(a,0),Si(a,m),Rn(a,an()),h;if(l===6)Si(a,m);else{if(v=a.current.alternate,(m&30)===0&&!Md(v)&&(l=Ds(a,m),l===2&&(k=nl(a),k!==0&&(m=k,l=Gl(a,k))),l===1))throw h=So,$i(a,0),Si(a,m),Rn(a,an()),h;switch(a.finishedWork=v,a.finishedLanes=m,l){case 0:case 1:throw Error(d(345));case 2:Ji(a,Tn,Bn);break;case 3:if(Si(a,m),(m&130023424)===m&&(l=Co+500-an(),10<l)){if(eo(a,0)!==0)break;if(v=a.suspendedLanes,(v&m)!==m){Tt(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=He(Ji.bind(null,a,Tn,Bn),l);break}Ji(a,Tn,Bn);break;case 4:if(Si(a,m),(m&4194240)===m)break;for(l=a.eventTimes,v=-1;0<m;){var M=31-er(m);k=1<<M,M=l[M],M>v&&(v=M),m&=~k}if(m=v,m=an()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*zl(m/1960))-m,10<m){a.timeoutHandle=He(Ji.bind(null,a,Tn,Bn),m);break}Ji(a,Tn,Bn);break;case 5:Ji(a,Tn,Bn);break;default:throw Error(d(329))}}}return Rn(a,an()),a.callbackNode===h?Bl.bind(null,a):null}function Gl(a,l){var h=Ls;return a.current.memoizedState.isDehydrated&&($i(a,l).flags|=256),a=Ds(a,l),a!==2&&(l=Tn,Tn=h,l!==null&&Ul(l)),a}function Ul(a){Tn===null?Tn=a:Tn.push.apply(Tn,a)}function Md(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var v=h[m],k=v.getSnapshot;v=v.value;try{if(!Nr(k(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Si(a,l){for(l&=~ko,l&=~kt,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-er(l),m=1<<h;a[h]=-1,l&=~m}}function Qu(a){if((Je&6)!==0)throw Error(d(327));ki();var l=eo(a,0);if((l&1)===0)return Rn(a,an()),null;var h=Ds(a,l);if(a.tag!==0&&h===2){var m=nl(a);m!==0&&(l=m,h=Gl(a,m))}if(h===1)throw h=So,$i(a,0),Si(a,l),Rn(a,an()),h;if(h===6)throw Error(d(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Ji(a,Tn,Bn),Rn(a,an()),null}function Ku(a){_r!==null&&_r.tag===0&&(Je&6)===0&&ki();var l=Je;Je|=1;var h=Bt.transition,m=rt;try{if(Bt.transition=null,rt=1,a)return a()}finally{rt=m,Bt.transition=h,Je=l,(Je&6)===0&&gn()}}function Wl(){tn=Qi.current,Pt(Qi)}function $i(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==B&&(a.timeoutHandle=B,Ze(h)),At!==null)for(h=At.return;h!==null;){var m=h;switch(aa(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&hs();break;case 3:vs(),Pt(Vn),Pt(En),Mu();break;case 5:Nu(m);break;case 4:vs();break;case 13:Pt(zt);break;case 19:Pt(zt);break;case 10:ua(m.type._context);break;case 22:case 23:Wl()}h=h.return}if(wt=a,At=a=Zi(a.current,null),Vt=tn=l,Ot=0,So=null,ko=kt=_i=0,Tn=Ls=null,Di!==null){for(l=0;l<Di.length;l++)if(h=Di[l],m=h.interleaved,m!==null){h.interleaved=null;var v=m.next,k=h.pending;if(k!==null){var M=k.next;k.next=v,m.next=M}h.pending=m}Di=null}return a}function bo(a,l){do{var h=At;try{if(Eu(),Xn.current=Es,co){for(var m=Mt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}co=!1}if(Bi=0,Zt=Yt=Mt=null,da=!1,ha=0,_o.current=null,h===null||h.return===null){Ot=1,So=l,At=null;break}e:{var k=a,M=h.return,U=h,ee=l;if(l=Vt,U.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var fe=ee,Me=U,Ke=Me.tag;if((Me.mode&1)===0&&(Ke===0||Ke===11||Ke===15)){var Ee=Me.alternate;Ee?(Me.updateQueue=Ee.updateQueue,Me.memoizedState=Ee.memoizedState,Me.lanes=Ee.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Ct=bd(M);if(Ct!==null){Ct.flags&=-257,Wi(Ct,M,U,k,l),Ct.mode&1&&Pd(k,fe,l),l=Ct,ee=fe;var ft=l.updateQueue;if(ft===null){var Gn=new Set;Gn.add(ee),l.updateQueue=Gn}else ft.add(ee);break e}else{if((l&1)===0){Pd(k,fe,l),To();break e}ee=Error(d(426))}}else if(bt&&U.mode&1){var ri=bd(M);if(ri!==null){(ri.flags&65536)===0&&(ri.flags|=256),Wi(ri,M,U,k,l),ku(Ps(ee,U));break e}}k=ee=Ps(ee,U),Ot!==4&&(Ot=2),Ls===null?Ls=[k]:Ls.push(k),k=M;do{switch(k.tag){case 3:k.flags|=65536,l&=-l,k.lanes|=l;var $=Kr(k,ee,l);lo(k,$);break e;case 1:U=ee;var H=k.type,ne=k.stateNode;if((k.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Lr===null||!Lr.has(ne)))){k.flags|=65536,l&=-l,k.lanes|=l;var Pe=bl(k,U,l);lo(k,Pe);break e}}k=k.return}while(k!==null)}ec(h)}catch(We){l=We,At===h&&h!==null&&(At=h=h.return);continue}break}while(!0)}function $u(){var a=Ea.current;return Ea.current=Es,a===null?Es:a}function To(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),wt===null||(_i&268435455)===0&&(kt&268435455)===0||Si(wt,Vt)}function Ds(a,l){var h=Je;Je|=2;var m=$u();(wt!==a||Vt!==l)&&(Bn=null,$i(a,l));do try{Id();break}catch(v){bo(a,v)}while(!0);if(Eu(),Je=h,Ea.current=m,At!==null)throw Error(d(261));return wt=null,Vt=0,Ot}function Id(){for(;At!==null;)Zu(At)}function Ju(){for(;At!==null&&!ld();)Zu(At)}function Zu(a){var l=jd(a.alternate,a,tn);a.memoizedProps=a.pendingProps,l===null?ec(a):At=l,_o.current=null}function ec(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=Ms(h,l,tn),h!==null){At=h;return}}else{if(h=Nd(h,l),h!==null){h.flags&=32767,At=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ot=6,At=null;return}}if(l=l.sibling,l!==null){At=l;return}At=l=a}while(l!==null);Ot===0&&(Ot=5)}function Ji(a,l,h){var m=rt,v=Bt.transition;try{Bt.transition=null,rt=1,Ad(a,l,h,m)}finally{Bt.transition=v,rt=m}return null}function Ad(a,l,h,m){do ki();while(_r!==null);if((Je&6)!==0)throw Error(d(327));h=a.finishedWork;var v=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(d(177));a.callbackNode=null,a.callbackPriority=0;var k=h.lanes|h.childLanes;if(Ai(a,k),a===wt&&(At=wt=null,Vt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Ki||(Ki=!0,nc(ol,function(){return ki(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=Bt.transition,Bt.transition=null;var M=rt;rt=1;var U=Je;Je|=4,_o.current=null,Rd(a,h),Sa(h,a),he(a.containerInfo),a.current=h,xo(h),ia(),Je=U,rt=M,Bt.transition=k}else a.current=h;if(Ki&&(Ki=!1,_r=a,Fl=v),k=a.pendingLanes,k===0&&(Lr=null),ro(h.stateNode),Rn(a,an()),l!==null)for(m=a.onRecoverableError,h=0;h<l.length;h++)v=l[h],m(v.value,{componentStack:v.stack,digest:v.digest});if(Gt)throw Gt=!1,a=Xt,Xt=null,a;return(Fl&1)!==0&&a.tag!==0&&ki(),k=a.pendingLanes,(k&1)!==0?a===ba?Qt++:(Qt=0,ba=a):Qt=0,gn(),null}function ki(){if(_r!==null){var a=no(Fl),l=Bt.transition,h=rt;try{if(Bt.transition=null,rt=16>a?16:a,_r===null)var m=!1;else{if(a=_r,_r=null,Fl=0,(Je&6)!==0)throw Error(d(331));var v=Je;for(Je|=4,Se=a.current;Se!==null;){var k=Se,M=k.child;if((Se.flags&16)!==0){var U=k.deletions;if(U!==null){for(var ee=0;ee<U.length;ee++){var fe=U[ee];for(Se=fe;Se!==null;){var Me=Se;switch(Me.tag){case 0:case 11:case 15:Is(8,Me,k)}var Ke=Me.child;if(Ke!==null)Ke.return=Me,Se=Ke;else for(;Se!==null;){Me=Se;var Ee=Me.sibling,Ct=Me.return;if(wa(Me),Me===fe){Se=null;break}if(Ee!==null){Ee.return=Ct,Se=Ee;break}Se=Ct}}}var ft=k.alternate;if(ft!==null){var Gn=ft.child;if(Gn!==null){ft.child=null;do{var ri=Gn.sibling;Gn.sibling=null,Gn=ri}while(Gn!==null)}}Se=k}}if((k.subtreeFlags&2064)!==0&&M!==null)M.return=k,Se=M;else e:for(;Se!==null;){if(k=Se,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Is(9,k,k.return)}var $=k.sibling;if($!==null){$.return=k.return,Se=$;break e}Se=k.return}}var H=a.current;for(Se=H;Se!==null;){M=Se;var ne=M.child;if((M.subtreeFlags&2064)!==0&&ne!==null)ne.return=M,Se=ne;else e:for(M=H;Se!==null;){if(U=Se,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:vo(9,U)}}catch(We){Nt(U,U.return,We)}if(U===M){Se=null;break e}var Pe=U.sibling;if(Pe!==null){Pe.return=U.return,Se=Pe;break e}Se=U.return}}if(Je=v,gn(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Oi,a)}catch{}m=!0}return m}finally{rt=h,Bt.transition=l}}return!1}function tc(a,l,h){l=Ps(h,l),l=Kr(a,l,1),a=mi(a,l,1),l=Tt(),a!==null&&(mr(a,1,l),Rn(a,l))}function Nt(a,l,h){if(a.tag===3)tc(a,a,h);else for(;l!==null;){if(l.tag===3){tc(l,a,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Lr===null||!Lr.has(m))){a=Ps(h,a),a=bl(l,a,1),l=mi(l,a,1),a=Tt(),l!==null&&(mr(l,1,a),Rn(l,a));break}}l=l.return}}function Od(a,l,h){var m=a.pingCache;m!==null&&m.delete(l),l=Tt(),a.pingedLanes|=a.suspendedLanes&h,wt===a&&(Vt&h)===h&&(Ot===4||Ot===3&&(Vt&130023424)===Vt&&500>an()-Co?$i(a,0):ko|=h),Rn(a,l)}function Ld(a,l){l===0&&((a.mode&1)===0?l=1:(l=ra,ra<<=1,(ra&130023424)===0&&(ra=4194304)));var h=Tt();a=Ar(a,l),a!==null&&(mr(a,l,h),Rn(a,h))}function Dd(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),Ld(a,h)}function gf(a,l){var h=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(d(314))}m!==null&&m.delete(l),Ld(a,h)}var jd;jd=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||Vn.current)en=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return en=!1,Vi(a,l,h);en=(a.flags&131072)!==0}else en=!1,bt&&(l.flags&1048576)!==0&&cd(l,fs,l.index);switch(l.lanes=0,l.tag){case 2:var m=l.type;xa(a,l),a=l.pendingProps;var v=hi(l,En.current);ao(l,h),v=fa(null,l,m,a,v,h);var k=vl();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,on(m)?(k=!0,Js(l)):k=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,bu(l),v.updater=ma,l.stateNode=v,v._reactInternals=l,Qr(l,m,a,h),l=Pn(null,l,m,!0,k,h)):(l.tag=0,bt&&k&&oa(l),un(null,l,v,h),l=l.child),l;case 16:m=l.elementType;e:{switch(xa(a,l),a=l.pendingProps,v=m._init,m=v(m._payload),l.type=m,v=l.tag=mf(m),a=sr(m,a),v){case 0:l=$r(null,l,m,a,h);break e;case 1:l=vn(null,l,m,a,h);break e;case 11:l=Tl(null,l,m,a,h);break e;case 14:l=bs(null,l,m,sr(m.type,a),h);break e}throw Error(d(306,m,""))}return l;case 0:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),$r(a,l,m,v,h);case 1:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),vn(a,l,m,v,h);case 3:e:{if(Hi(l),a===null)throw Error(d(387));m=l.pendingProps,k=l.memoizedState,v=k.element,vd(a,l),ji(l,m,null,h);var M=l.memoizedState;if(m=M.element,Ce&&k.isDehydrated)if(k={element:m,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},l.updateQueue.baseState=k,l.memoizedState=k,l.flags&256){v=Ps(Error(d(423)),l),l=Ts(a,l,m,h,v);break e}else if(m!==v){v=Ps(Error(d(424)),l),l=Ts(a,l,m,h,v);break e}else for(Ce&&(Ln=rf(l.stateNode.containerInfo),mn=l,bt=!0,Ir=null,la=!1),h=md(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ps(),m===v){l=xi(a,l,h);break e}un(a,l,m,h)}l=l.child}return l;case 5:return Tu(l),a===null&&Su(l),m=l.type,v=l.pendingProps,k=a!==null?a.memoizedProps:null,M=v.children,qe(m,v)?M=null:k!==null&&qe(m,k)&&(l.flags|=32),xt(a,l),un(a,l,M,h),l.child;case 6:return a===null&&Su(l),null;case 13:return Vu(a,l,h);case 4:return ml(l,l.stateNode.containerInfo),m=l.pendingProps,a===null?l.child=ms(l,null,m,h):un(a,l,m,h),l.child;case 11:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),Tl(a,l,m,v,h);case 7:return un(a,l,l.pendingProps,h),l.child;case 8:return un(a,l,l.pendingProps.children,h),l.child;case 12:return un(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(m=l.type._context,v=l.pendingProps,k=l.memoizedProps,M=v.value,yd(l,m,M),k!==null)if(Nr(k.value,M)){if(k.children===v.children&&!Vn.current){l=xi(a,l,h);break e}}else for(k=l.child,k!==null&&(k.return=l);k!==null;){var U=k.dependencies;if(U!==null){M=k.child;for(var ee=U.firstContext;ee!==null;){if(ee.context===m){if(k.tag===1){ee=gi(-1,h&-h),ee.tag=2;var fe=k.updateQueue;if(fe!==null){fe=fe.shared;var Me=fe.pending;Me===null?ee.next=ee:(ee.next=Me.next,Me.next=ee),fe.pending=ee}}k.lanes|=h,ee=k.alternate,ee!==null&&(ee.lanes|=h),ys(k.return,h,l),U.lanes|=h;break}ee=ee.next}}else if(k.tag===10)M=k.type===l.type?null:k.child;else if(k.tag===18){if(M=k.return,M===null)throw Error(d(341));M.lanes|=h,U=M.alternate,U!==null&&(U.lanes|=h),ys(M,h,l),M=k.sibling}else M=k.child;if(M!==null)M.return=k;else for(M=k;M!==null;){if(M===l){M=null;break}if(k=M.sibling,k!==null){k.return=M.return,M=k;break}M=M.return}k=M}un(a,l,v.children,h),l=l.child}return l;case 9:return v=l.type,m=l.pendingProps.children,ao(l,h),v=nr(v),m=m(v),l.flags|=1,un(a,l,m,h),l.child;case 14:return m=l.type,v=sr(m,l.pendingProps),v=sr(m.type,v),bs(a,l,m,v,h);case 15:return vi(a,l,l.type,l.pendingProps,h);case 17:return m=l.type,v=l.pendingProps,v=l.elementType===m?v:sr(m,v),xa(a,l),l.tag=1,on(m)?(a=!0,Js(l)):a=!1,ao(l,h),Ed(l,m,v),Qr(l,m,v,h),Pn(null,l,m,!0,a,h);case 19:return Rl(a,l,h);case 22:return St(a,l,h)}throw Error(d(156,l.tag))};function nc(a,l){return Xr(a,l)}function zd(a,l,h,m){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(a,l,h,m){return new zd(a,l,h,m)}function No(a){return a=a.prototype,!(!a||!a.isReactComponent)}function mf(a){if(typeof a=="function")return No(a)?1:0;if(a!=null){if(a=a.$$typeof,a===A)return 11;if(a===T)return 14}return 2}function Zi(a,l){var h=a.alternate;return h===null?(h=dr(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Hl(a,l,h,m,v,k){var M=2;if(m=a,typeof a=="function")No(a)&&(M=1);else if(typeof a=="string")M=5;else e:switch(a){case w:return xn(h.children,v,k,l);case S:M=8,v|=8;break;case C:return a=dr(12,h,l,v|2),a.elementType=C,a.lanes=k,a;case R:return a=dr(13,h,l,v),a.elementType=R,a.lanes=k,a;case I:return a=dr(19,h,l,v),a.elementType=I,a.lanes=k,a;case z:return Ro(h,v,k,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case b:M=10;break e;case P:M=9;break e;case A:M=11;break e;case T:M=14;break e;case O:M=16,m=null;break e}throw Error(d(130,a==null?a:typeof a,""))}return l=dr(M,h,l,v),l.elementType=a,l.type=m,l.lanes=k,l}function xn(a,l,h,m){return a=dr(7,a,m,l),a.lanes=h,a}function Ro(a,l,h,m){return a=dr(22,a,m,l),a.elementType=z,a.lanes=h,a.stateNode={isHidden:!1},a}function Mo(a,l,h){return a=dr(6,a,null,l),a.lanes=h,a}function Vl(a,l,h){return l=dr(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function Fd(a,l,h,m,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=B,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=to(0),this.expirationTimes=to(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=to(0),this.identifierPrefix=m,this.onRecoverableError=v,Ce&&(this.mutableSourceEagerHydrationData=null)}function rc(a,l,h,m,v,k,M,U,ee){return a=new Fd(a,l,h,U,ee),l===1?(l=1,k===!0&&(l|=8)):l=0,k=dr(3,null,null,l),a.current=k,k.stateNode=a,k.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},bu(k),a}function ql(a){if(!a)return Ii;a=a._reactInternals;e:{if(ge(a)!==a||a.tag!==1)throw Error(d(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(on(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(d(171))}if(a.tag===1){var h=a.type;if(on(h))return id(a,h,l)}return l}function js(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(d(188)):(a=Object.keys(a).join(","),Error(d(268,a)));return a=de(l),a===null?null:a.stateNode}function Yl(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function Io(a,l){Yl(a,l),(a=a.alternate)&&Yl(a,l)}function yf(a){return a=de(a),a===null?null:a.stateNode}function Bd(){return null}return t.attemptContinuousHydration=function(a){if(a.tag===13){var l=Ar(a,134217728);if(l!==null){var h=Tt();Nn(l,a,134217728,h)}Io(a,134217728)}},t.attemptDiscreteHydration=function(a){if(a.tag===13){var l=Ar(a,1);if(l!==null){var h=Tt();Nn(l,a,1,h)}Io(a,1)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var l=nn(a),h=Ar(a,l);if(h!==null){var m=Tt();Nn(h,a,l,m)}Io(a,l)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=Zs(l.pendingLanes);h!==0&&(Yr(l,h|1),Rn(l,an()),(Je&6)===0&&(mt(),gn()))}break;case 13:Ku(function(){var m=Ar(a,1);if(m!==null){var v=Tt();Nn(m,a,1,v)}}),Io(a,1)}},t.batchedUpdates=function(a,l){var h=Je;Je|=1;try{return a(l)}finally{Je=h,Je===0&&(mt(),io&&gn())}},t.createComponentSelector=function(a){return{$$typeof:wi,value:a}},t.createContainer=function(a,l,h,m,v,k,M){return rc(a,l,!1,null,h,m,v,k,M)},t.createHasPseudoClassSelector=function(a){return{$$typeof:Fn,value:a}},t.createHydrationContainer=function(a,l,h,m,v,k,M,U,ee){return a=rc(h,m,!0,a,v,k,M,U,ee),a.context=ql(null),h=a.current,m=Tt(),v=nn(h),k=gi(m,v),k.callback=l??null,mi(h,k,v),a.current.lanes=v,mr(a,v,m),Rn(a,m),a},t.createPortal=function(a,l,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:m==null?null:""+m,children:a,containerInfo:l,implementation:h}},t.createRoleSelector=function(a){return{$$typeof:Zr,value:a}},t.createTestNameSelector=function(a){return{$$typeof:wo,value:a}},t.createTextSelector=function(a){return{$$typeof:ka,value:a}},t.deferredUpdates=function(a){var l=rt,h=Bt.transition;try{return Bt.transition=null,rt=16,a()}finally{rt=l,Bt.transition=h}},t.discreteUpdates=function(a,l,h,m,v){var k=rt,M=Bt.transition;try{return Bt.transition=null,rt=1,a(l,h,m,v)}finally{rt=k,Bt.transition=M,Je===0&&mt()}},t.findAllNodes=ni,t.findBoundingRects=function(a,l){if(!Et)throw Error(d(363));l=ni(a,l),a=[];for(var h=0;h<l.length;h++)a.push(br(l[h]));for(l=a.length-1;0<l;l--){h=a[l];for(var m=h.x,v=m+h.width,k=h.y,M=k+h.height,U=l-1;0<=U;U--)if(l!==U){var ee=a[U],fe=ee.x,Me=fe+ee.width,Ke=ee.y,Ee=Ke+ee.height;if(m>=fe&&k>=Ke&&v<=Me&&M<=Ee){a.splice(l,1);break}else if(m!==fe||h.width!==ee.width||Ee<k||Ke>M){if(!(k!==Ke||h.height!==ee.height||Me<m||fe>v)){fe>m&&(ee.width+=fe-m,ee.x=m),Me<v&&(ee.width=v-fe),a.splice(l,1);break}}else{Ke>k&&(ee.height+=Ke-k,ee.y=k),Ee<M&&(ee.height=M-Ke),a.splice(l,1);break}}}return a},t.findHostInstance=js,t.findHostInstanceWithNoPortals=function(a){return a=ke(a),a=a!==null?Ne(a):null,a===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return js(a)},t.flushControlled=function(a){var l=Je;Je|=1;var h=Bt.transition,m=rt;try{Bt.transition=null,rt=1,a()}finally{rt=m,Bt.transition=h,Je=l,Je===0&&(mt(),gn())}},t.flushPassiveEffects=ki,t.flushSync=Ku,t.focusWithin=function(a,l){if(!Et)throw Error(d(363));for(a=ei(a),l=ti(a,l),l=Array.from(l),a=0;a<l.length;){var h=l[a++];if(!Vr(h)){if(h.tag===5&&Mi(h.stateNode))return!0;for(h=h.child;h!==null;)l.push(h),h=h.sibling}}return!1},t.getCurrentUpdatePriority=function(){return rt},t.getFindAllNodesFailureDescription=function(a,l){if(!Et)throw Error(d(363));var h=0,m=[];a=[ei(a),0];for(var v=0;v<a.length;){var k=a[v++],M=a[v++],U=l[M];if((k.tag!==5||!Vr(k))&&(Ca(k,U)&&(m.push(jl(U)),M++,M>h&&(h=M)),M<l.length))for(k=k.child;k!==null;)a.push(k,M),k=k.sibling}if(h<l.length){for(a=[];h<l.length;h++)a.push(jl(l[h]));return`findAllNodes was able to match part of the selector:
  `+(m.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},t.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return ae(a.child.stateNode);default:return a.child.stateNode}},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:yf,findFiberByHostInstance:a.findFiberByHostInstance||Bd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)a=!0;else{try{Oi=l.inject(a),qn=l}catch{}a=!!l.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,l,h,m){if(!Et)throw Error(d(363));a=ni(a,l);var v=as(a,h,m).disconnect;return{disconnect:function(){v()}}},t.registerMutableSourceForHydration=function(a,l){var h=l._getVersion;h=h(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,h]:a.mutableSourceEagerHydrationData.push(l,h)},t.runWithPriority=function(a,l){var h=rt;try{return rt=a,l()}finally{rt=h}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,l,h,m){var v=l.current,k=Tt(),M=nn(v);return h=ql(h),l.context===null?l.context=h:l.pendingContext=h,l=gi(k,M),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=mi(v,l,M),a!==null&&(Nn(a,v,M,k),ca(a,v,M)),M},t}),xp}var Um;function N8(){return Um||(Um=1,vp.exports=T8()),vp.exports}var R8=N8();const M8=Gh(R8);var wp={exports:{}},Bo={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function I8(){return Wm||(Wm=1,Bo.ConcurrentRoot=1,Bo.ContinuousEventPriority=4,Bo.DefaultEventPriority=16,Bo.DiscreteEventPriority=1,Bo.IdleEventPriority=536870912,Bo.LegacyRoot=0),Bo}var Hm;function A8(){return Hm||(Hm=1,wp.exports=I8()),wp.exports}var Dy=A8();const Vm={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let qm=!1,Ym=!1;const L0=".react-konva-event",O8=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,L8=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,D8={};function Zh(r,e,t=D8){if(!qm&&"zIndex"in e&&(console.warn(L8),qm=!0),!Ym&&e.draggable){var i=e.x!==void 0||e.y!==void 0,o=e.onDragEnd||e.onDragMove;i&&!o&&(console.warn(O8),Ym=!0)}for(var u in t)if(!Vm[u]){var d=u.slice(0,2)==="on",f=t[u]!==e[u];if(d&&f){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),r.off(g,t[u])}var x=!e.hasOwnProperty(u);x&&r.setAttr(u,void 0)}var w=e._useStrictMode,S={},C=!1;const b={};for(var u in e)if(!Vm[u]){var d=u.slice(0,2)==="on",P=t[u]!==e[u];if(d&&P){var g=u.substr(2).toLowerCase();g.substr(0,7)==="content"&&(g="content"+g.substr(7,1).toUpperCase()+g.substr(8)),e[u]&&(b[g]=e[u])}!d&&(e[u]!==t[u]||w&&e[u]!==r.getAttr(u))&&(C=!0,S[u]=e[u])}C&&(r.setAttrs(S),$o(r));for(var g in b)r.on(g+L0,b[g])}function $o(r){if(!we.autoDrawEnabled){var e=r.getLayer()||r.getStage();e&&e.batchDraw()}}var _p=n0();const jy={},j8={};Ga.Node.prototype._applyProps=Zh;function z8(r,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}r.add(e),$o(r)}function F8(r,e,t){let i=Ga[r];i||(console.error(`Konva has no node with the type ${r}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${r}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Ga.Group);const o={},u={};for(var d in e){var f=d.slice(0,2)==="on";f?u[d]=e[d]:o[d]=e[d]}const g=new i(o);return Zh(g,u),g}function B8(r,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${r}"`)}function G8(r,e,t){return!1}function U8(r){return r}function W8(){return null}function H8(){return null}function V8(r,e,t,i){return j8}function q8(){}function Y8(r){}function X8(r,e){return!1}function Q8(){return jy}function K8(){return jy}const $8=setTimeout,J8=clearTimeout,Z8=-1;function ex(r,e){return!1}const tx=!1,nx=!0,rx=!0;function ix(r,e){e.parent===r?e.moveToTop():r.add(e),$o(r)}function sx(r,e){e.parent===r?e.moveToTop():r.add(e),$o(r)}function zy(r,e,t){e._remove(),r.add(e),e.setZIndex(t.getZIndex()),$o(r)}function ox(r,e,t){zy(r,e,t)}function ax(r,e){e.destroy(),e.off(L0),$o(r)}function lx(r,e){e.destroy(),e.off(L0),$o(r)}function ux(r,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function cx(r,e,t){}function dx(r,e,t,i,o){Zh(r,o,i)}function hx(r){r.hide(),$o(r)}function fx(r){}function px(r,e){(e.visible==null||e.visible)&&r.show()}function gx(r,e){}function mx(r){}function yx(){}const vx=()=>Dy.DefaultEventPriority,xx=Object.freeze(Object.defineProperty({__proto__:null,appendChild:ix,appendChildToContainer:sx,appendInitialChild:z8,cancelTimeout:J8,clearContainer:mx,commitMount:cx,commitTextUpdate:ux,commitUpdate:dx,createInstance:F8,createTextInstance:B8,detachDeletedInstance:yx,finalizeInitialChildren:G8,getChildHostContext:K8,getCurrentEventPriority:vx,getPublicInstance:U8,getRootHostContext:Q8,hideInstance:hx,hideTextInstance:fx,idlePriority:_p.unstable_IdlePriority,insertBefore:zy,insertInContainerBefore:ox,isPrimaryRenderer:tx,noTimeout:Z8,now:_p.unstable_now,prepareForCommit:W8,preparePortalMount:H8,prepareUpdate:V8,removeChild:ax,removeChildFromContainer:lx,resetAfterCommit:q8,resetTextContent:Y8,run:_p.unstable_runWithPriority,scheduleTimeout:$8,shouldDeprioritizeSubtree:X8,shouldSetTextContent:ex,supportsMutation:rx,unhideInstance:px,unhideTextInstance:gx,warnsIfNotActing:nx},Symbol.toStringTag,{value:"Module"}));var wx=Object.defineProperty,_x=Object.defineProperties,Sx=Object.getOwnPropertyDescriptors,Xm=Object.getOwnPropertySymbols,kx=Object.prototype.hasOwnProperty,Cx=Object.prototype.propertyIsEnumerable,Qm=(r,e,t)=>e in r?wx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Km=(r,e)=>{for(var t in e||(e={}))kx.call(e,t)&&Qm(r,t,e[t]);if(Xm)for(var t of Xm(e))Cx.call(e,t)&&Qm(r,t,e[t]);return r},Ex=(r,e)=>_x(r,Sx(e)),$m,Jm;typeof window<"u"&&(($m=window.document)!=null&&$m.createElement||((Jm=window.navigator)==null?void 0:Jm.product)==="ReactNative")?Ae.useLayoutEffect:Ae.useEffect;function Fy(r,e,t){if(!r)return;if(t(r)===!0)return r;let i=r.child;for(;i;){const o=Fy(i,e,t);if(o)return o;i=i.sibling}}function By(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Zm=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=Zm;return}return Zm.apply(this,arguments)};const D0=By(Ae.createContext(null));class Gy extends Ae.Component{render(){return Ae.createElement(D0.Provider,{value:this._reactInternals},this.props.children)}}function Px(){const r=Ae.useContext(D0);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ae.useId();return Ae.useMemo(()=>{for(const i of[r,r==null?void 0:r.alternate]){if(!i)continue;const o=Fy(i,!1,u=>{let d=u.memoizedState;for(;d;){if(d.memoizedState===e)return!0;d=d.next}});if(o)return o}},[r,e])}function bx(){const r=Px(),[e]=Ae.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const o=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;o&&o!==D0&&!e.has(o)&&e.set(o,Ae.useContext(By(o)))}t=t.return}return e}function Tx(){const r=bx();return Ae.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>i=>Ae.createElement(e,null,Ae.createElement(t.Provider,Ex(Km({},i),{value:r.get(t)}))),e=>Ae.createElement(Gy,Km({},e))),[r])}function Nx(r){const e=be.useRef({});return be.useLayoutEffect(()=>{e.current=r}),be.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Rx=r=>{const e=be.useRef(null),t=be.useRef(null),i=be.useRef(null),o=Nx(r),u=Tx(),d=f=>{const{forwardedRef:g}=r;g&&(typeof g=="function"?g(f):g.current=f)};return be.useLayoutEffect(()=>(t.current=new Ga.Stage({width:r.width,height:r.height,container:e.current}),d(t.current),i.current=Tc.createContainer(t.current,Dy.LegacyRoot,!1,null),Tc.updateContainer(be.createElement(u,{},r.children),i.current),()=>{Ga.isBrowser&&(d(null),Tc.updateContainer(null,i.current,null),t.current.destroy())}),[]),be.useLayoutEffect(()=>{d(t.current),Zh(t.current,r,o),Tc.updateContainer(be.createElement(u,{},r.children),i.current,null)}),be.createElement("div",{ref:e,id:r.id,accessKey:r.accessKey,className:r.className,role:r.role,style:r.style,tabIndex:r.tabIndex,title:r.title})},Mx="Layer",Sn="Group",is="Rect",Br="Circle",zr="Line",Vo="Text",Ua="Path",Sp="RegularPolygon",Tc=M8(xx);Tc.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:be.version,rendererPackageName:"react-konva"});const Ix=be.forwardRef((r,e)=>be.createElement(Gy,{},be.createElement(Rx,{...r,forwardedRef:e})));function Uy(r){var e,t,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=Uy(r[e]))&&(i&&(i+=" "),i+=t)}else for(t in r)r[t]&&(i&&(i+=" "),i+=t);return i}function Wy(){for(var r,e,t=0,i="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=Uy(r))&&(i&&(i+=" "),i+=e);return i}const Ax=(r,e)=>{const t=new Array(r.length+e.length);for(let i=0;i<r.length;i++)t[i]=r[i];for(let i=0;i<e.length;i++)t[r.length+i]=e[i];return t},Ox=(r,e)=>({classGroupId:r,validator:e}),Hy=(r=new Map,e=null,t)=>({nextPart:r,validators:e,classGroupId:t}),Fh="-",e1=[],Lx="arbitrary..",Dx=r=>{const e=zx(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=r;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return jx(d);const f=d.split(Fh),g=f[0]===""&&f.length>1?1:0;return Vy(f,g,e)},getConflictingClassGroupIds:(d,f)=>{if(f){const g=i[d],x=t[d];return g?x?Ax(x,g):g:x||e1}return t[d]||e1}}},Vy=(r,e,t)=>{if(r.length-e===0)return t.classGroupId;const o=r[e],u=t.nextPart.get(o);if(u){const x=Vy(r,e+1,u);if(x)return x}const d=t.validators;if(d===null)return;const f=e===0?r.join(Fh):r.slice(e).join(Fh),g=d.length;for(let x=0;x<g;x++){const w=d[x];if(w.validator(f))return w.classGroupId}},jx=r=>r.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=r.slice(1,-1),t=e.indexOf(":"),i=e.slice(0,t);return i?Lx+i:void 0})(),zx=r=>{const{theme:e,classGroups:t}=r;return Fx(t,e)},Fx=(r,e)=>{const t=Hy();for(const i in r){const o=r[i];j0(o,t,i,e)}return t},j0=(r,e,t,i)=>{const o=r.length;for(let u=0;u<o;u++){const d=r[u];Bx(d,e,t,i)}},Bx=(r,e,t,i)=>{if(typeof r=="string"){Gx(r,e,t);return}if(typeof r=="function"){Ux(r,e,t,i);return}Wx(r,e,t,i)},Gx=(r,e,t)=>{const i=r===""?e:qy(e,r);i.classGroupId=t},Ux=(r,e,t,i)=>{if(Hx(r)){j0(r(i),e,t,i);return}e.validators===null&&(e.validators=[]),e.validators.push(Ox(t,r))},Wx=(r,e,t,i)=>{const o=Object.entries(r),u=o.length;for(let d=0;d<u;d++){const[f,g]=o[d];j0(g,qy(e,f),t,i)}},qy=(r,e)=>{let t=r;const i=e.split(Fh),o=i.length;for(let u=0;u<o;u++){const d=i[u];let f=t.nextPart.get(d);f||(f=Hy(),t.nextPart.set(d,f)),t=f}return t},Hx=r=>"isThemeGetter"in r&&r.isThemeGetter===!0,Vx=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),i=Object.create(null);const o=(u,d)=>{t[u]=d,e++,e>r&&(e=0,i=t,t=Object.create(null))};return{get(u){let d=t[u];if(d!==void 0)return d;if((d=i[u])!==void 0)return o(u,d),d},set(u,d){u in t?t[u]=d:o(u,d)}}},Zp="!",t1=":",qx=[],n1=(r,e,t,i,o)=>({modifiers:r,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:i,isExternal:o}),Yx=r=>{const{prefix:e,experimentalParseClassName:t}=r;let i=o=>{const u=[];let d=0,f=0,g=0,x;const w=o.length;for(let A=0;A<w;A++){const R=o[A];if(d===0&&f===0){if(R===t1){u.push(o.slice(g,A)),g=A+1;continue}if(R==="/"){x=A;continue}}R==="["?d++:R==="]"?d--:R==="("?f++:R===")"&&f--}const S=u.length===0?o:o.slice(g);let C=S,b=!1;S.endsWith(Zp)?(C=S.slice(0,-1),b=!0):S.startsWith(Zp)&&(C=S.slice(1),b=!0);const P=x&&x>g?x-g:void 0;return n1(u,b,C,P)};if(e){const o=e+t1,u=i;i=d=>d.startsWith(o)?u(d.slice(o.length)):n1(qx,!1,d,void 0,!0)}if(t){const o=i;i=u=>t({className:u,parseClassName:o})}return i},Xx=r=>{const e=new Map;return r.orderSensitiveModifiers.forEach((t,i)=>{e.set(t,1e6+i)}),t=>{const i=[];let o=[];for(let u=0;u<t.length;u++){const d=t[u],f=d[0]==="[",g=e.has(d);f||g?(o.length>0&&(o.sort(),i.push(...o),o=[]),i.push(d)):o.push(d)}return o.length>0&&(o.sort(),i.push(...o)),i}},Qx=r=>({cache:Vx(r.cacheSize),parseClassName:Yx(r),sortModifiers:Xx(r),...Dx(r)}),Kx=/\s+/,$x=(r,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:u}=e,d=[],f=r.trim().split(Kx);let g="";for(let x=f.length-1;x>=0;x-=1){const w=f[x],{isExternal:S,modifiers:C,hasImportantModifier:b,baseClassName:P,maybePostfixModifierPosition:A}=t(w);if(S){g=w+(g.length>0?" "+g:g);continue}let R=!!A,I=i(R?P.substring(0,A):P);if(!I){if(!R){g=w+(g.length>0?" "+g:g);continue}if(I=i(P),!I){g=w+(g.length>0?" "+g:g);continue}R=!1}const T=C.length===0?"":C.length===1?C[0]:u(C).join(":"),O=b?T+Zp:T,z=O+I;if(d.indexOf(z)>-1)continue;d.push(z);const J=o(I,R);for(let te=0;te<J.length;++te){const ie=J[te];d.push(O+ie)}g=w+(g.length>0?" "+g:g)}return g},Jx=(...r)=>{let e=0,t,i,o="";for(;e<r.length;)(t=r[e++])&&(i=Yy(t))&&(o&&(o+=" "),o+=i);return o},Yy=r=>{if(typeof r=="string")return r;let e,t="";for(let i=0;i<r.length;i++)r[i]&&(e=Yy(r[i]))&&(t&&(t+=" "),t+=e);return t},Zx=(r,...e)=>{let t,i,o,u;const d=g=>{const x=e.reduce((w,S)=>S(w),r());return t=Qx(x),i=t.cache.get,o=t.cache.set,u=f,f(g)},f=g=>{const x=i(g);if(x)return x;const w=$x(g,t);return o(g,w),w};return u=d,(...g)=>u(Jx(...g))},ew=[],_n=r=>{const e=t=>t[r]||ew;return e.isThemeGetter=!0,e},Xy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Qy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tw=/^\d+\/\d+$/,nw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,sw=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ow=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,eu=r=>tw.test(r),tt=r=>!!r&&!Number.isNaN(Number(r)),Go=r=>!!r&&Number.isInteger(Number(r)),kp=r=>r.endsWith("%")&&tt(r.slice(0,-1)),Bs=r=>nw.test(r),aw=()=>!0,lw=r=>rw.test(r)&&!iw.test(r),Ky=()=>!1,uw=r=>sw.test(r),cw=r=>ow.test(r),dw=r=>!je(r)&&!ze(r),hw=r=>lu(r,Zy,Ky),je=r=>Xy.test(r),Da=r=>lu(r,e2,lw),Cp=r=>lu(r,yw,tt),r1=r=>lu(r,$y,Ky),fw=r=>lu(r,Jy,cw),Sh=r=>lu(r,t2,uw),ze=r=>Qy.test(r),wc=r=>uu(r,e2),pw=r=>uu(r,vw),i1=r=>uu(r,$y),gw=r=>uu(r,Zy),mw=r=>uu(r,Jy),kh=r=>uu(r,t2,!0),lu=(r,e,t)=>{const i=Xy.exec(r);return i?i[1]?e(i[1]):t(i[2]):!1},uu=(r,e,t=!1)=>{const i=Qy.exec(r);return i?i[1]?e(i[1]):t:!1},$y=r=>r==="position"||r==="percentage",Jy=r=>r==="image"||r==="url",Zy=r=>r==="length"||r==="size"||r==="bg-size",e2=r=>r==="length",yw=r=>r==="number",vw=r=>r==="family-name",t2=r=>r==="shadow",xw=()=>{const r=_n("color"),e=_n("font"),t=_n("text"),i=_n("font-weight"),o=_n("tracking"),u=_n("leading"),d=_n("breakpoint"),f=_n("container"),g=_n("spacing"),x=_n("radius"),w=_n("shadow"),S=_n("inset-shadow"),C=_n("text-shadow"),b=_n("drop-shadow"),P=_n("blur"),A=_n("perspective"),R=_n("aspect"),I=_n("ease"),T=_n("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],J=()=>[...z(),ze,je],te=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto","contain","none"],Y=()=>[ze,je,g],ge=()=>[eu,"full","auto",...Y()],ue=()=>[Go,"none","subgrid",ze,je],ke=()=>["auto",{span:["full",Go,ze,je]},Go,ze,je],de=()=>[Go,"auto",ze,je],Oe=()=>["auto","min","max","fr",ze,je],Ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...Y()],Re=()=>[eu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Y()],W=()=>[r,ze,je],ve=()=>[...z(),i1,r1,{position:[ze,je]}],he=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",gw,hw,{size:[ze,je]}],K=()=>[kp,wc,Da],xe=()=>["","none","full",x,ze,je],Le=()=>["",tt,wc,Da],qe=()=>["solid","dashed","dotted","double"],Ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],He=()=>[tt,kp,i1,r1],Ze=()=>["","none",P,ze,je],B=()=>["none",tt,ze,je],X=()=>["none",tt,ze,je],re=()=>[tt,ze,je],Fe=()=>[eu,"full",...Y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bs],breakpoint:[Bs],color:[aw],container:[Bs],"drop-shadow":[Bs],ease:["in","out","in-out"],font:[dw],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bs],shadow:[Bs],spacing:["px",tt],text:[Bs],"text-shadow":[Bs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",eu,je,ze,R]}],container:["container"],columns:[{columns:[tt,je,ze,f]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:J()}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:ie()}],"overscroll-x":[{"overscroll-x":ie()}],"overscroll-y":[{"overscroll-y":ie()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ge()}],"inset-x":[{"inset-x":ge()}],"inset-y":[{"inset-y":ge()}],start:[{start:ge()}],end:[{end:ge()}],top:[{top:ge()}],right:[{right:ge()}],bottom:[{bottom:ge()}],left:[{left:ge()}],visibility:["visible","invisible","collapse"],z:[{z:[Go,"auto",ze,je]}],basis:[{basis:[eu,"full","auto",f,...Y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,eu,"auto","initial","none",je]}],grow:[{grow:["",tt,ze,je]}],shrink:[{shrink:["",tt,ze,je]}],order:[{order:[Go,"first","last","none",ze,je]}],"grid-cols":[{"grid-cols":ue()}],"col-start-end":[{col:ke()}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":ue()}],"row-start-end":[{row:ke()}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Oe()}],"auto-rows":[{"auto-rows":Oe()}],gap:[{gap:Y()}],"gap-x":[{"gap-x":Y()}],"gap-y":[{"gap-y":Y()}],"justify-content":[{justify:[...Ne(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...Ne()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ne()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:Y()}],px:[{px:Y()}],py:[{py:Y()}],ps:[{ps:Y()}],pe:[{pe:Y()}],pt:[{pt:Y()}],pr:[{pr:Y()}],pb:[{pb:Y()}],pl:[{pl:Y()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":Y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Y()}],"space-y-reverse":["space-y-reverse"],size:[{size:Re()}],w:[{w:[f,"screen",...Re()]}],"min-w":[{"min-w":[f,"screen","none",...Re()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...Re()]}],h:[{h:["screen","lh",...Re()]}],"min-h":[{"min-h":["screen","lh","none",...Re()]}],"max-h":[{"max-h":["screen","lh",...Re()]}],"font-size":[{text:["base",t,wc,Da]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,ze,Cp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",kp,je]}],"font-family":[{font:[pw,je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ze,je]}],"line-clamp":[{"line-clamp":[tt,"none",ze,Cp]}],leading:[{leading:[u,...Y()]}],"list-image":[{"list-image":["none",ze,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ze,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:W()}],"text-color":[{text:W()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",ze,Da]}],"text-decoration-color":[{decoration:W()}],"underline-offset":[{"underline-offset":[tt,"auto",ze,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ve()}],"bg-repeat":[{bg:he()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Go,ze,je],radial:["",ze,je],conic:[Go,ze,je]},mw,fw]}],"bg-color":[{bg:W()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:W()}],"gradient-via":[{via:W()}],"gradient-to":[{to:W()}],rounded:[{rounded:xe()}],"rounded-s":[{"rounded-s":xe()}],"rounded-e":[{"rounded-e":xe()}],"rounded-t":[{"rounded-t":xe()}],"rounded-r":[{"rounded-r":xe()}],"rounded-b":[{"rounded-b":xe()}],"rounded-l":[{"rounded-l":xe()}],"rounded-ss":[{"rounded-ss":xe()}],"rounded-se":[{"rounded-se":xe()}],"rounded-ee":[{"rounded-ee":xe()}],"rounded-es":[{"rounded-es":xe()}],"rounded-tl":[{"rounded-tl":xe()}],"rounded-tr":[{"rounded-tr":xe()}],"rounded-br":[{"rounded-br":xe()}],"rounded-bl":[{"rounded-bl":xe()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...qe(),"hidden","none"]}],"divide-style":[{divide:[...qe(),"hidden","none"]}],"border-color":[{border:W()}],"border-color-x":[{"border-x":W()}],"border-color-y":[{"border-y":W()}],"border-color-s":[{"border-s":W()}],"border-color-e":[{"border-e":W()}],"border-color-t":[{"border-t":W()}],"border-color-r":[{"border-r":W()}],"border-color-b":[{"border-b":W()}],"border-color-l":[{"border-l":W()}],"divide-color":[{divide:W()}],"outline-style":[{outline:[...qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,ze,je]}],"outline-w":[{outline:["",tt,wc,Da]}],"outline-color":[{outline:W()}],shadow:[{shadow:["","none",w,kh,Sh]}],"shadow-color":[{shadow:W()}],"inset-shadow":[{"inset-shadow":["none",S,kh,Sh]}],"inset-shadow-color":[{"inset-shadow":W()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:W()}],"ring-offset-w":[{"ring-offset":[tt,Da]}],"ring-offset-color":[{"ring-offset":W()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":W()}],"text-shadow":[{"text-shadow":["none",C,kh,Sh]}],"text-shadow-color":[{"text-shadow":W()}],opacity:[{opacity:[tt,ze,je]}],"mix-blend":[{"mix-blend":[...Ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":He()}],"mask-image-linear-to-pos":[{"mask-linear-to":He()}],"mask-image-linear-from-color":[{"mask-linear-from":W()}],"mask-image-linear-to-color":[{"mask-linear-to":W()}],"mask-image-t-from-pos":[{"mask-t-from":He()}],"mask-image-t-to-pos":[{"mask-t-to":He()}],"mask-image-t-from-color":[{"mask-t-from":W()}],"mask-image-t-to-color":[{"mask-t-to":W()}],"mask-image-r-from-pos":[{"mask-r-from":He()}],"mask-image-r-to-pos":[{"mask-r-to":He()}],"mask-image-r-from-color":[{"mask-r-from":W()}],"mask-image-r-to-color":[{"mask-r-to":W()}],"mask-image-b-from-pos":[{"mask-b-from":He()}],"mask-image-b-to-pos":[{"mask-b-to":He()}],"mask-image-b-from-color":[{"mask-b-from":W()}],"mask-image-b-to-color":[{"mask-b-to":W()}],"mask-image-l-from-pos":[{"mask-l-from":He()}],"mask-image-l-to-pos":[{"mask-l-to":He()}],"mask-image-l-from-color":[{"mask-l-from":W()}],"mask-image-l-to-color":[{"mask-l-to":W()}],"mask-image-x-from-pos":[{"mask-x-from":He()}],"mask-image-x-to-pos":[{"mask-x-to":He()}],"mask-image-x-from-color":[{"mask-x-from":W()}],"mask-image-x-to-color":[{"mask-x-to":W()}],"mask-image-y-from-pos":[{"mask-y-from":He()}],"mask-image-y-to-pos":[{"mask-y-to":He()}],"mask-image-y-from-color":[{"mask-y-from":W()}],"mask-image-y-to-color":[{"mask-y-to":W()}],"mask-image-radial":[{"mask-radial":[ze,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":He()}],"mask-image-radial-to-pos":[{"mask-radial-to":He()}],"mask-image-radial-from-color":[{"mask-radial-from":W()}],"mask-image-radial-to-color":[{"mask-radial-to":W()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":He()}],"mask-image-conic-to-pos":[{"mask-conic-to":He()}],"mask-image-conic-from-color":[{"mask-conic-from":W()}],"mask-image-conic-to-color":[{"mask-conic-to":W()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ve()}],"mask-repeat":[{mask:he()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ze,je]}],filter:[{filter:["","none",ze,je]}],blur:[{blur:Ze()}],brightness:[{brightness:[tt,ze,je]}],contrast:[{contrast:[tt,ze,je]}],"drop-shadow":[{"drop-shadow":["","none",b,kh,Sh]}],"drop-shadow-color":[{"drop-shadow":W()}],grayscale:[{grayscale:["",tt,ze,je]}],"hue-rotate":[{"hue-rotate":[tt,ze,je]}],invert:[{invert:["",tt,ze,je]}],saturate:[{saturate:[tt,ze,je]}],sepia:[{sepia:["",tt,ze,je]}],"backdrop-filter":[{"backdrop-filter":["","none",ze,je]}],"backdrop-blur":[{"backdrop-blur":Ze()}],"backdrop-brightness":[{"backdrop-brightness":[tt,ze,je]}],"backdrop-contrast":[{"backdrop-contrast":[tt,ze,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,ze,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,ze,je]}],"backdrop-invert":[{"backdrop-invert":["",tt,ze,je]}],"backdrop-opacity":[{"backdrop-opacity":[tt,ze,je]}],"backdrop-saturate":[{"backdrop-saturate":[tt,ze,je]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,ze,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Y()}],"border-spacing-x":[{"border-spacing-x":Y()}],"border-spacing-y":[{"border-spacing-y":Y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ze,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",ze,je]}],ease:[{ease:["linear","initial",I,ze,je]}],delay:[{delay:[tt,ze,je]}],animate:[{animate:["none",T,ze,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,ze,je]}],"perspective-origin":[{"perspective-origin":J()}],rotate:[{rotate:B()}],"rotate-x":[{"rotate-x":B()}],"rotate-y":[{"rotate-y":B()}],"rotate-z":[{"rotate-z":B()}],scale:[{scale:X()}],"scale-x":[{"scale-x":X()}],"scale-y":[{"scale-y":X()}],"scale-z":[{"scale-z":X()}],"scale-3d":["scale-3d"],skew:[{skew:re()}],"skew-x":[{"skew-x":re()}],"skew-y":[{"skew-y":re()}],transform:[{transform:[ze,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:J()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:W()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:W()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze,je]}],fill:[{fill:["none",...W()]}],"stroke-w":[{stroke:[tt,wc,Da,Cp]}],stroke:[{stroke:["none",...W()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ww=Zx(xw);function Ys(...r){return ww(Wy(r))}const Fc=Ae.forwardRef(({className:r,...e},t)=>N.jsx("div",{ref:t,className:Ys("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));Fc.displayName="Card";const Bc=Ae.forwardRef(({className:r,...e},t)=>N.jsx("div",{ref:t,className:Ys("flex flex-col space-y-1.5 p-6",r),...e}));Bc.displayName="CardHeader";const Gc=Ae.forwardRef(({className:r,...e},t)=>N.jsx("h3",{ref:t,className:Ys("text-2xl font-semibold leading-none tracking-tight",r),...e}));Gc.displayName="CardTitle";const n2=Ae.forwardRef(({className:r,...e},t)=>N.jsx("p",{ref:t,className:Ys("text-sm text-muted-foreground",r),...e}));n2.displayName="CardDescription";const Uc=Ae.forwardRef(({className:r,...e},t)=>N.jsx("div",{ref:t,className:Ys("p-6 pt-0",r),...e}));Uc.displayName="CardContent";const _w=Ae.forwardRef(({className:r,...e},t)=>N.jsx("div",{ref:t,className:Ys("flex items-center p-6 pt-0",r),...e}));_w.displayName="CardFooter";function s1(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function Sw(...r){return e=>{let t=!1;const i=r.map(o=>{const u=s1(o,e);return!t&&typeof u=="function"&&(t=!0),u});if(t)return()=>{for(let o=0;o<i.length;o++){const u=i[o];typeof u=="function"?u():s1(r[o],null)}}}}var kw=Symbol.for("react.lazy"),Bh=F2[" use ".trim().toString()];function Cw(r){return typeof r=="object"&&r!==null&&"then"in r}function r2(r){return r!=null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===kw&&"_payload"in r&&Cw(r._payload)}function Ew(r){const e=bw(r),t=Ae.forwardRef((i,o)=>{let{children:u,...d}=i;r2(u)&&typeof Bh=="function"&&(u=Bh(u._payload));const f=Ae.Children.toArray(u),g=f.find(Nw);if(g){const x=g.props.children,w=f.map(S=>S===g?Ae.Children.count(x)>1?Ae.Children.only(null):Ae.isValidElement(x)?x.props.children:null:S);return N.jsx(e,{...d,ref:o,children:Ae.isValidElement(x)?Ae.cloneElement(x,void 0,w):null})}return N.jsx(e,{...d,ref:o,children:u})});return t.displayName=`${r}.Slot`,t}var Pw=Ew("Slot");function bw(r){const e=Ae.forwardRef((t,i)=>{let{children:o,...u}=t;if(r2(o)&&typeof Bh=="function"&&(o=Bh(o._payload)),Ae.isValidElement(o)){const d=Mw(o),f=Rw(u,o.props);return o.type!==Ae.Fragment&&(f.ref=i?Sw(i,d):d),Ae.cloneElement(o,f)}return Ae.Children.count(o)>1?Ae.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Tw=Symbol("radix.slottable");function Nw(r){return Ae.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Tw}function Rw(r,e){const t={...e};for(const i in e){const o=r[i],u=e[i];/^on[A-Z]/.test(i)?o&&u?t[i]=(...f)=>{const g=u(...f);return o(...f),g}:o&&(t[i]=o):i==="style"?t[i]={...o,...u}:i==="className"&&(t[i]=[o,u].filter(Boolean).join(" "))}return{...r,...t}}function Mw(r){var i,o;let e=(i=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(o=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:o.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const o1=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,a1=Wy,i2=(r,e)=>t=>{var i;if((e==null?void 0:e.variants)==null)return a1(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:o,defaultVariants:u}=e,d=Object.keys(o).map(x=>{const w=t==null?void 0:t[x],S=u==null?void 0:u[x];if(w===null)return null;const C=o1(w)||o1(S);return o[x][C]}),f=t&&Object.entries(t).reduce((x,w)=>{let[S,C]=w;return C===void 0||(x[S]=C),x},{}),g=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((x,w)=>{let{class:S,className:C,...b}=w;return Object.entries(b).every(P=>{let[A,R]=P;return Array.isArray(R)?R.includes({...u,...f}[A]):{...u,...f}[A]===R})?[...x,S,C]:x},[]);return a1(r,d,g,t==null?void 0:t.class,t==null?void 0:t.className)},Iw=i2("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ai=Ae.forwardRef(({className:r,variant:e,size:t,asChild:i=!1,...o},u)=>{const d=i?Pw:"button";return N.jsx(d,{className:Ys(Iw({variant:e,size:t,className:r})),ref:u,...o})});ai.displayName="Button";const Aw=i2("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white",warning:"border-transparent bg-yellow-500 text-black"}},defaultVariants:{variant:"default"}});function e0({className:r,variant:e,...t}){return N.jsx("div",{className:Ys(Aw({variant:e}),r),...t})}const s2=2,Hn={metal:{base:"#2d3748",light:"#4a5568",accent:"#718096"},organic:{base:"#1a4731",light:"#276749"},player0:{fill:"#0891b2",stroke:"#22d3ee",glow:"#06b6d4"},player1:{fill:"#ea580c",stroke:"#fb923c",glow:"#f97316"},highlight:{valid:"#fbbf24",active:"#f59e0b"}},z0={0:{bg:"bg-cyan-500",bgLight:"bg-cyan-500/20",border:"border-cyan-400",text:"text-cyan-400"},1:{bg:"bg-orange-500",bgLight:"bg-orange-500/20",border:"border-orange-400",text:"text-orange-400"}};function Ow({x:r,y:e,size:t=20,color:i="#718096"}){const o=t/20;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Ua,{data:`M 0 ${-8*o} L ${5*o} ${-2*o} L ${3*o} ${8*o} L ${-3*o} ${8*o} L ${-5*o} ${-2*o} Z`,fill:i,stroke:"#cbd5e1",strokeWidth:1.5,opacity:.9}),N.jsx(Ua,{data:`M ${-2*o} ${-5*o} L 0 ${-2*o} L ${-1*o} ${2*o}`,stroke:"#ffffff",strokeWidth:1.5,opacity:.6,lineCap:"round",lineJoin:"round"})]})}function Lw({x:r,y:e,size:t=20}){const i=t/20;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Ua,{data:`M 0 ${-8*i} Q ${7*i} ${-4*i} ${5*i} ${4*i} Q ${2*i} ${8*i} 0 ${8*i} Q ${-2*i} ${8*i} ${-5*i} ${4*i} Q ${-7*i} ${-4*i} 0 ${-8*i}`,fill:"#48bb78",stroke:"#276749",strokeWidth:1.5}),N.jsx(zr,{points:[0,-4*i,0,6*i],stroke:"#276749",strokeWidth:1.5,lineCap:"round"}),N.jsx(zr,{points:[0,0,3*i,-2*i],stroke:"#276749",strokeWidth:1,lineCap:"round"}),N.jsx(zr,{points:[0,2*i,-2.5*i,0],stroke:"#276749",strokeWidth:1,lineCap:"round"})]})}function o2({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("path",{d:"M12 2 L18 8 L15 20 L9 20 L6 8 Z",fill:"#475569",stroke:"#64748b",strokeWidth:"1.5"}),N.jsx("path",{d:"M9 6 L12 10 L10 14",stroke:"#94a3b8",strokeWidth:"1.5",fill:"none",opacity:"0.7"})]})}function a2({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("path",{d:"M12 2 Q20 6 17 14 Q14 20 12 20 Q10 20 7 14 Q4 6 12 2",fill:"#22c55e",stroke:"#16a34a",strokeWidth:"1.5"}),N.jsx("path",{d:"M12 6 L12 18 M12 10 L15 7 M12 14 L9 12",stroke:"#16a34a",strokeWidth:"1.5",fill:"none"})]})}function F0({size:r=16,className:e=""}){return N.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:N.jsx("path",{d:"M13 2 L6 14 L11 14 L10 22 L18 10 L13 10 Z",fill:"#facc15",stroke:"#eab308",strokeWidth:"1.5"})})}function l2({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("circle",{cx:"12",cy:"12",r:"8",fill:"#b45309",stroke:"#d97706",strokeWidth:"1.5"}),N.jsx("circle",{cx:"12",cy:"12",r:"4",fill:"#fbbf24",stroke:"#d97706",strokeWidth:"1"}),N.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#b45309"})]})}function u2({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("ellipse",{cx:"12",cy:"12",rx:"7",ry:"9",fill:"#0d9488",stroke:"#14b8a6",strokeWidth:"1.5"}),N.jsx("path",{d:"M9 8 Q12 12 9 16 M15 8 Q12 12 15 16",stroke:"#5eead4",strokeWidth:"1.5",fill:"none"})]})}function Dw({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("circle",{cx:"12",cy:"12",r:"7",fill:"#c026d3",stroke:"#e879f9",strokeWidth:"1.5"}),N.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#f0abfc",opacity:"0.8"}),N.jsx("circle",{cx:"12",cy:"12",r:"1",fill:"#fff"})]})}function c2({size:r=16,className:e=""}){return N.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24",className:e,children:[N.jsx("ellipse",{cx:"12",cy:"10",rx:"8",ry:"7",fill:"#6366f1",stroke:"#818cf8",strokeWidth:"1.5"}),N.jsx("path",{d:"M8 17 Q12 20 16 17",stroke:"#818cf8",strokeWidth:"1.5",fill:"none"}),N.jsx("circle",{cx:"9",cy:"9",r:"1.5",fill:"#c7d2fe"}),N.jsx("circle",{cx:"15",cy:"9",r:"1.5",fill:"#c7d2fe"})]})}function jw({x:r,y:e,size:t=16,color:i="#facc15"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(zr,{points:[0,8*o,0,-2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),N.jsx(zr,{points:[0,-2*o,0,-8*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),N.jsx(zr,{points:[0,-2*o,5*o,2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),N.jsx(zr,{points:[0,-2*o,-5*o,2*o],stroke:i,strokeWidth:2*o,lineCap:"round"}),N.jsx(Br,{radius:2*o,fill:i})]})}function zw({x:r,y:e,size:t=16,color:i="#94a3b8"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Ua,{data:`M ${-6*o} ${8*o} L ${-6*o} ${-2*o} L ${-2*o} ${-6*o} L ${2*o} ${-2*o} L ${6*o} ${-6*o} L ${6*o} ${8*o} Z`,fill:i,stroke:"#64748b",strokeWidth:1}),N.jsx(is,{x:-2*o,y:2*o,width:4*o,height:6*o,fill:"#475569"})]})}function Fw({x:r,y:e,size:t=16,color:i="#f97316"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Ua,{data:`M ${-6*o} ${4*o} L ${-4*o} ${-4*o} L ${4*o} ${-4*o} L ${6*o} ${4*o} L ${4*o} ${8*o} L ${-4*o} ${8*o} Z`,fill:i,stroke:"#c2410c",strokeWidth:1}),N.jsx(Br,{x:0,y:-6*o,radius:2*o,fill:"#fbbf24"})]})}function Bw({x:r,y:e,size:t=16,color:i="#22c55e"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Ua,{data:`M ${-2*o} ${-8*o} L ${-2*o} ${-2*o} L ${-6*o} ${8*o} L ${6*o} ${8*o} L ${2*o} ${-2*o} L ${2*o} ${-8*o} Z`,fill:i,stroke:"#16a34a",strokeWidth:1}),N.jsx(Ua,{data:`M ${-4*o} ${4*o} L ${4*o} ${4*o} L ${5*o} ${8*o} L ${-5*o} ${8*o} Z`,fill:"#4ade80"})]})}function Gw({x:r,y:e,size:t=16,color:i="#c026d3"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(Br,{radius:6*o,fill:"transparent",stroke:i,strokeWidth:3*o}),N.jsx(Br,{radius:3*o,fill:i}),N.jsx(Br,{radius:1.5*o,fill:"#f0abfc"})]})}function Uw({x:r,y:e,size:t=16,color:i="#6366f1"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(is,{x:-5*o,y:-5*o,width:10*o,height:10*o,fill:i,stroke:"#818cf8",strokeWidth:1}),N.jsx(zr,{points:[-7*o,-3*o,-5*o,-3*o],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(zr,{points:[-7*o,0,-5*o,0],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(zr,{points:[-7*o,3*o,-5*o,3*o],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(zr,{points:[5*o,-3*o,7*o,-3*o],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(zr,{points:[5*o,0,7*o,0],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(zr,{points:[5*o,3*o,7*o,3*o],stroke:"#818cf8",strokeWidth:2*o}),N.jsx(is,{x:-2*o,y:-2*o,width:4*o,height:4*o,fill:"#c7d2fe"})]})}function Ww({x:r,y:e,size:t=16,color:i="#14b8a6"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(is,{x:-5*o,y:-4*o,width:10*o,height:12*o,fill:i,stroke:"#0d9488",strokeWidth:1,cornerRadius:2*o}),N.jsx(Br,{x:-2*o,y:2*o,radius:2*o,fill:"#5eead4"}),N.jsx(Br,{x:2*o,y:0,radius:1.5*o,fill:"#5eead4"}),N.jsx(Br,{x:0,y:4*o,radius:1*o,fill:"#5eead4"})]})}function Hw({x:r,y:e,size:t=16,color:i="#ef4444"}){const o=t/16;return N.jsxs(Sn,{x:r,y:e,children:[N.jsx(is,{x:-5*o,y:2*o,width:10*o,height:6*o,fill:i,stroke:"#dc2626",strokeWidth:1}),N.jsx(Br,{y:0,radius:4*o,fill:i,stroke:"#dc2626",strokeWidth:1}),N.jsx(is,{x:-1.5*o,y:-8*o,width:3*o,height:6*o,fill:"#fca5a5",stroke:"#dc2626",strokeWidth:1})]})}const Vw={windTurbine:"olienne (+2 nergie/tour)",factory:"Usine (permet construction)",orbitalForge:"Forge (2 mtal  1 alliage)",bioLab:"Labo Bio (2 organique  1 biomasse)",condenser:"Condenseur (3 nergie  1 plasma)",chipEngraver:"Graveur (1 alliage + 1 biomasse  1 intel)",biomassFactory:"Usine Bio (1 biomasse  2 nergie)",turret:"Tourelle (+1 dfense)"};function qw({type:r,x:e,y:t,size:i=14,playerColor:o}){return{windTurbine:N.jsx(jw,{x:e,y:t,size:i,color:"#facc15"}),factory:N.jsx(zw,{x:e,y:t,size:i,color:o}),orbitalForge:N.jsx(Fw,{x:e,y:t,size:i,color:"#f97316"}),bioLab:N.jsx(Bw,{x:e,y:t,size:i,color:"#22c55e"}),condenser:N.jsx(Gw,{x:e,y:t,size:i,color:"#c026d3"}),chipEngraver:N.jsx(Uw,{x:e,y:t,size:i,color:"#6366f1"}),biomassFactory:N.jsx(Ww,{x:e,y:t,size:i,color:"#14b8a6"}),turret:N.jsx(Hw,{x:e,y:t,size:i,color:o})}[r]||null}function Yw({tile:r,x:e,y:t,size:i,isSelected:o,controllerId:u,currentPlayerId:d,isValidDrop:f,isDragOver:g,canBuildOnTile:x,probesByPlayer:w,buildingsOnTile:S,onClick:C,onBuildingHover:b}){const P=r.resourceType==="metal",A=u===d,R=u!==null&&u!==d;let I=P?Hn.metal.base:Hn.organic.base,T=P?Hn.metal.light:Hn.organic.light,O=2;return A?(T=Hn.player0.stroke,O=3):R&&(T=Hn.player1.stroke,O=3),x&&(T="#10b981",O=4),f&&(T=Hn.highlight.valid,O=4),g&&(I="#3d2810",T=Hn.highlight.active,O=5),o&&(T="#ffffff",O=4),N.jsxs(Sn,{x:e,y:t,onClick:C,style:{cursor:x?"pointer":"default"},children:[(f||g)&&N.jsx(Sp,{sides:6,radius:i+6,fill:Hn.highlight.valid,rotation:0,opacity:.2}),x&&!f&&!g&&N.jsx(Sp,{sides:6,radius:i+4,fill:"#10b981",rotation:0,opacity:.15}),N.jsx(Sp,{sides:6,radius:i,fill:I,stroke:T,strokeWidth:O,rotation:0}),N.jsxs(Sn,{x:-i*.7,y:-i*.7,children:[N.jsx(Br,{radius:12,fill:"#0f0f1a",stroke:T,strokeWidth:2}),N.jsx(Vo,{x:-4,y:-5,text:String(r.value),fontSize:12,fontStyle:"bold",fill:"#ffffff",fontFamily:"monospace"})]}),N.jsx(Sn,{y:-8,children:P?N.jsx(Ow,{x:0,y:0,size:20,color:Hn.metal.accent}):N.jsx(Lw,{x:0,y:0,size:20})}),N.jsx(Vo,{x:-8,y:10,text:String(r.resourceCount),fontSize:14,fontStyle:"bold",fill:"#e2e8f0",fontFamily:"monospace",width:16,align:"center"}),S.length>0&&N.jsx(Sn,{children:S.slice(0,4).map((z,J)=>{const te=(J*90+45)*(Math.PI/180),ie=Math.cos(te)*(i*.5),Y=Math.sin(te)*(i*.5),ge=z.owner==="0"?Hn.player0.fill:Hn.player1.fill;return N.jsxs(Sn,{onMouseEnter:ue=>{if(b){const ke=ue.evt;b(z.type,ke.clientX,ke.clientY)}},onMouseLeave:()=>b==null?void 0:b(null,0,0),children:[N.jsx(Br,{x:ie,y:Y,radius:16,fill:"#0f0f1a",opacity:.8}),N.jsx(qw,{type:z.type,x:ie,y:Y,size:18,playerColor:ge})]},J)})}),w.length>0&&N.jsx(Sn,{y:i*.5,children:w.map((z,J)=>{const te=z.playerId==="0"?Hn.player0:Hn.player1,ie=(J-(w.length-1)/2)*28;return N.jsxs(Sn,{x:ie,children:[N.jsx(Br,{radius:14,fill:te.glow,opacity:.3}),N.jsx(Br,{radius:11,fill:te.fill,stroke:te.stroke,strokeWidth:2}),N.jsx(Vo,{x:-4,y:-6,text:String(z.count),fontSize:12,fontStyle:"bold",fill:"#ffffff"})]},z.playerId)})})]})}const oi=40;function Xw({value:r,count:e,x:t,y:i,isDeployed:o,onDragEnd:u,onDragMove:d}){const[f,g]=Ae.useState(!1);return o?N.jsxs(Sn,{x:t,y:i,children:[N.jsx(is,{x:-oi/2,y:-oi/2,width:oi,height:oi,fill:"#059669",stroke:"#34d399",strokeWidth:2,cornerRadius:8}),N.jsx(Vo,{x:-7,y:-10,text:String(r),fontSize:18,fontStyle:"bold",fill:"#fff",fontFamily:"monospace"}),N.jsx(Vo,{x:-5,y:6,text:"",fontSize:12,fill:"#fff"})]}):N.jsxs(Sn,{x:t,y:i,draggable:!0,onDragStart:()=>g(!0),onDragEnd:x=>{g(!1),u(r,x.target.x(),x.target.y()),x.target.position({x:t,y:i})},onDragMove:x=>d(r,x.target.x(),x.target.y()),children:[N.jsx(is,{x:-oi/2-6,y:-oi/2-6,width:oi+12,height:oi+12,fill:Hn.highlight.valid,opacity:f?.5:.25,cornerRadius:12}),N.jsx(is,{x:-oi/2,y:-oi/2,width:oi,height:oi,fill:f?"#d97706":Hn.highlight.valid,stroke:"#fcd34d",strokeWidth:f?4:2,cornerRadius:8,shadowColor:Hn.highlight.valid,shadowBlur:f?25:15,shadowOpacity:.6}),N.jsx(Vo,{x:-7,y:-12,text:String(r),fontSize:20,fontStyle:"bold",fill:"#000",fontFamily:"monospace"}),e>1&&N.jsx(Vo,{x:-10,y:6,text:`${e}`,fontSize:11,fontStyle:"bold",fill:"#000"})]})}function Qw({tiles:r,players:e,currentPlayerId:t,selectedTile:i,onTileClick:o,diceValues:u,deployedValues:d,moves:f,canDeploy:g,canBuild:x,playerEnergy:w,fullscreen:S}){const C=Ae.useRef(null),b=Ae.useRef(null),[P,A]=Ae.useState(500),[R,I]=Ae.useState(null),[T,O]=Ae.useState(null),[z,J]=Ae.useState(null);Ae.useEffect(()=>{const j=()=>{if(C.current){const K=C.current.getBoundingClientRect(),xe=Math.min(K.width-16,K.height-16,800);A(Math.max(350,xe))}};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const te=P/10,ie=P/2,Y=P/2-40,ge=Math.sqrt(3),ue=1.15,ke=ge*te*ue,de=1.5*te*ue,Oe=[{x:ie-ke,y:Y-de},{x:ie,y:Y-de},{x:ie+ke,y:Y-de},{x:ie-1.5*ke,y:Y},{x:ie-.5*ke,y:Y},{x:ie+.5*ke,y:Y},{x:ie+1.5*ke,y:Y},{x:ie-ke,y:Y+de},{x:ie,y:Y+de},{x:ie+ke,y:Y+de},{x:ie-.5*ke,y:Y+2*de},{x:ie+.5*ke,y:Y+2*de}],Ne=[];r.forEach((j,K)=>{if(K<Oe.length){const xe=Oe[K];Ne.push({tile:j,x:xe.x,y:xe.y})}});const _e=(j,K,xe)=>{O(j);let Le=null;for(const{tile:qe,x:Ve,y:He}of Ne)if(Math.sqrt((K-Ve)**2+(xe-He)**2)<te&&qe.value===j){Le=qe.id;break}I(Le)},ae=(j,K,xe)=>{if(O(null),I(null),!(!g||d.includes(j))){for(const{tile:Le,x:qe,y:Ve}of Ne)if(Math.sqrt((K-qe)**2+(xe-Ve)**2)<te&&Le.value===j){const Ze=u.filter(B=>B===j).length;w>=Ze&&f.deployProbes(j,Le.id);break}}},Re={};u.forEach(j=>{Re[j]=(Re[j]||0)+1});const W=Object.entries(Re).map(([j,K])=>({value:parseInt(j),count:K})),ve=P-40,he=ie-(W.length-1)*30;return N.jsxs("div",{ref:C,className:S?"w-full flex items-center justify-center":"w-full",style:S?{height:"100%",maxHeight:"100%"}:void 0,children:[N.jsx("div",{className:"rounded-xl overflow-hidden",style:{width:P,height:P,background:"radial-gradient(ellipse at center, #12121f 0%, #0a0a0f 100%)"},children:N.jsx(Ix,{ref:b,width:P,height:P,children:N.jsxs(Mx,{children:[Ne.map(({tile:j,x:K,y:xe})=>{const Le=Hc(j,e),qe=g&&u.includes(j.value)&&!d.includes(j.value)&&T===j.value,Ve=Le.controller===t,He=x&&Ve,Ze=[];for(const[re,Fe]of Object.entries(e)){const Ce=Fe.probes.filter(Ue=>Ue.tileId===j.id).length;Ce>0&&Ze.push({playerId:re,count:Ce})}const B=[];for(const[re,Fe]of Object.entries(e))for(const Ce of Fe.buildings)Ce.tileId===j.id&&B.push({type:Ce.type,owner:re});const X=re=>{if(b.current&&C.current){const Ce=C.current.getBoundingClientRect(),Ue=Ce.left+K,vt=Ce.top+xe;o(j.id,Ue,vt)}};return N.jsx(Yw,{tile:j,x:K,y:xe,size:te,isSelected:i===j.id,controllerId:Le.controller,currentPlayerId:t,isValidDrop:qe,isDragOver:R===j.id,canBuildOnTile:He,probesByPlayer:Ze,buildingsOnTile:B,onClick:X,onBuildingHover:(re,Fe,Ce)=>{J(re?{x:Fe,y:Ce,text:Vw[re]||re}:null)}},j.id)}),g&&N.jsxs(N.Fragment,{children:[N.jsx(is,{x:ie-110,y:ve-30,width:220,height:60,fill:"#0f0f1a",stroke:"#2d2d4a",strokeWidth:2,cornerRadius:10,opacity:.95}),N.jsx(Vo,{x:ie-100,y:ve-25,text:"Glisse sur les cases",fontSize:10,fill:"#6b7280",width:200,align:"center"}),W.map((j,K)=>N.jsx(Xw,{value:j.value,count:j.count,x:he+K*60,y:ve+5,isDeployed:d.includes(j.value),onDragEnd:ae,onDragMove:_e},`${j.value}-${K}`))]})]})})}),z&&N.jsx("div",{className:"fixed bg-gray-900 text-white text-xs px-2 py-1 rounded border border-gray-700 pointer-events-none z-50 whitespace-nowrap shadow-lg",style:{left:z.x+15,top:z.y-35},children:z.text})]})}function Kw({G:r,ctx:e,moves:t,playerID:i,isConnected:o,matchData:u}){var Y,ge;const[d,f]=Ae.useState(null),[g,x]=Ae.useState(null),[w,S]=Ae.useState(null),[C,b]=Ae.useState(null),P=(u==null?void 0:u.length)===s2&&u.every(ue=>ue.name),A=P&&u.every(ue=>ue.isConnected);if(!P||!A)return N.jsx(r9,{matchData:u,playerID:i,isConnected:o});if(e.gameover)return N.jsx(i9,{ctx:e,matchData:u,playerID:i});const R=r.players[i||"0"],I=e.currentPlayer===i,T=I&&r.deploymentComplete&&R.buildings.some(ue=>ue.type==="factory"),O=ue=>R.probes.filter(ke=>ke.tileId===ue),z=(ue,ke,de)=>{f(ue),x(null),S(null);const Oe=r.tiles.find(_e=>_e.id===ue);if(!Oe||!I)return;const Ne=O(ue);if(T&&Hc(Oe,r.players).controller===i){x(ue),b({x:ke,y:de});return}Ne.length>0&&(S(ue),b({x:ke,y:de}))},J=(ue,ke)=>{t.buildBuilding(ue,ke),x(null)},te=ue=>{ue.forEach(ke=>t.recallProbe(ke)),S(null)};return N.jsxs("div",{className:"bg-[#0a0a0f] flex flex-col",style:{position:"fixed",top:56,left:0,right:0,bottom:0},children:[N.jsx("div",{className:"px-3 py-2 border-b border-gray-800/50 bg-[#0a0a0f] shrink-0",children:N.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between max-w-6xl mx-auto gap-2 sm:gap-4",children:[N.jsxs("div",{className:"flex items-center justify-between w-full sm:w-auto gap-3",children:[N.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[N.jsx("div",{className:`w-4 h-4 rounded-full ${((Y=z0[i])==null?void 0:Y.bg)||"bg-cyan-500"}`}),N.jsx("span",{className:"text-white font-medium",children:((ge=u==null?void 0:u.find(ue=>String(ue.id)===i))==null?void 0:ge.name)||"Joueur"}),N.jsx(e0,{className:`${I?"bg-emerald-600":"bg-gray-700"}`,children:I?"Ton tour":"Attente"}),N.jsxs("span",{className:"text-sm text-gray-500",children:["R",r.round]})]}),N.jsx("div",{className:"sm:hidden",children:N.jsx(u1,{players:r.players,matchData:u,currentPlayerId:i||"0"})})]}),N.jsx(t9,{resources:R.resources}),N.jsx("div",{className:"hidden sm:block",children:N.jsx(u1,{players:r.players,matchData:u,currentPlayerId:i||"0"})})]})}),N.jsx("div",{className:"flex-1 min-h-0 overflow-hidden flex items-center justify-center p-2",children:N.jsx(Qw,{tiles:r.tiles,players:r.players,currentPlayerId:i||"0",selectedTile:d,onTileClick:z,diceValues:r.diceValues,deployedValues:r.deployedValues,moves:t,canDeploy:e.phase==="main"&&I&&r.rolledDice&&!r.deploymentComplete,canBuild:T,playerEnergy:R.resources.energy,fullscreen:!0})}),N.jsx("div",{className:"shrink-0 border-t border-gray-800/50 bg-[#0c0c14] p-3",children:N.jsx("div",{className:"max-w-4xl mx-auto",children:e.phase==="main"&&I?N.jsx(n9,{G:r,moves:t,playerID:i||"0"}):N.jsx("div",{className:"w-full h-14 flex items-center justify-center px-6 bg-gray-900/50 rounded-lg border border-gray-800",children:N.jsx("span",{className:"text-gray-500",children:" En attente de l'adversaire..."})})})}),g!==null&&C&&N.jsx(Zw,{x:C.x,y:C.y,tileId:g,player:R,onBuild:J,onClose:()=>x(null)}),w!==null&&C&&N.jsx(e9,{x:C.x,y:C.y,tileId:w,tile:r.tiles.find(ue=>ue.id===w),probesOnTile:O(w),playerEnergy:R.resources.energy,onRecall:te,onClose:()=>S(null)})]})}const $w=[{type:"windTurbine",name:"olienne",desc:"+2 nergie/tour",cost:{metal:2,organic:1}},{type:"factory",name:"Usine",desc:"Permet construction",cost:{metal:2}},{type:"orbitalForge",name:"Forge",desc:"2 mtal  1 alliage",cost:{metal:2}},{type:"bioLab",name:"Labo Bio",desc:"2 organique  1 biomasse",cost:{organic:2}},{type:"condenser",name:"Condenseur",desc:"3 nergie  1 plasma",cost:{energy:3}},{type:"chipEngraver",name:"Graveur",desc:"1 alliage + 1 biomasse  1 intel",cost:{alloy:1,biomass:1}},{type:"biomassFactory",name:"Usine Bio",desc:"Brle biomasse  +2 nergie",cost:{metal:1,biomass:1}},{type:"turret",name:"Tourelle",desc:"+1 dfense sur tuile",cost:{metal:1,energy:1}}],l1={orbitalForge:"Forge",bioLab:"Labo",condenser:"Condenseur",chipEngraver:"Graveur",biomassFactory:"Usine Bio"};function Jw(r){const e={metal:N.jsx(o2,{size:12}),organic:N.jsx(a2,{size:12}),energy:N.jsx(F0,{size:12}),alloy:N.jsx(l2,{size:12}),biomass:N.jsx(u2,{size:12})};return N.jsx("span",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:Object.entries(r).map(([t,i],o)=>N.jsxs("span",{className:"flex items-center",children:[o>0&&N.jsx("span",{className:"mx-0.5",children:"+"}),i,e[t]]},t))})}function Zw({x:r,y:e,tileId:t,player:i,onBuild:o,onClose:u}){const d=C=>Object.entries(C).every(([b,P])=>i.resources[b]>=(P||0)),f=window.innerWidth<640,g=f?"auto":200,x=320;let w,S;return f?(w="50%",S="50%"):(w=Math.min(r,window.innerWidth-200-20),S=Math.min(e,window.innerHeight-x-20)),N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-40",onClick:u}),N.jsxs("div",{className:`fixed z-50 bg-[#1a1a2e] border border-emerald-700 rounded-lg shadow-xl p-2 ${f?"left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-80 max-w-[90vw] max-h-[90vh] overflow-auto":""}`,style:f?{}:{left:w,top:S,width:g},children:[N.jsxs("div",{className:"flex justify-between items-center mb-2 pb-1 border-b border-gray-700",children:[N.jsxs("span",{className:"text-xs font-semibold text-emerald-400",children:["Construire sur T",t]}),N.jsx("button",{onClick:u,className:"text-gray-500 hover:text-white text-sm",children:""})]}),N.jsx("div",{className:"space-y-1 max-h-72 overflow-y-auto",children:$w.map(C=>{const b=d(C.cost);return N.jsxs("button",{onClick:()=>{b&&o(C.type,t)},disabled:!b,className:`w-full p-2 rounded text-left transition-colors ${b?"bg-gray-800 hover:bg-emerald-900/50 border border-gray-700 hover:border-emerald-600":"bg-gray-900 border border-gray-800 opacity-40 cursor-not-allowed"}`,children:[N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("span",{className:"text-xs font-medium text-white",children:C.name}),Jw(C.cost)]}),N.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:C.desc})]},C.type)})})]})]})}function e9({x:r,y:e,tileId:t,tile:i,probesOnTile:o,playerEnergy:u,onRecall:d,onClose:f}){const g=o.length,x=Math.min(g,u),w=window.innerWidth<640,S=180,C=160;let b,P;w?(b="50%",P="50%"):(b=Math.min(Math.max(10,r-S/2),window.innerWidth-S-10),P=Math.min(e+20,window.innerHeight-C-10));const A=R=>{const I=o.slice(0,R).map(T=>T.id);d(I)};return N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-40",onClick:f}),N.jsxs("div",{className:`fixed z-50 bg-[#1a1a2e] border border-cyan-700 rounded-lg shadow-xl p-3 ${w?"left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-72 max-w-[90vw] max-h-[90vh] overflow-auto":""}`,style:w?{}:{left:b,top:P,width:S},children:[N.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-gray-700",children:[N.jsxs("span",{className:"text-xs font-semibold text-cyan-400",children:["Sondes sur T",t]}),N.jsx("button",{onClick:f,className:"text-gray-500 hover:text-white text-sm",children:""})]}),N.jsxs("div",{className:"text-center mb-3",children:[N.jsx("div",{className:"text-2xl font-bold text-white",children:g}),N.jsxs("div",{className:"text-xs text-gray-400",children:["sonde",g>1?"s":""," dploye",g>1?"s":""]})]}),N.jsxs("div",{className:"space-y-1",children:[N.jsxs("p",{className:"text-[10px] text-gray-500 mb-2",children:["Rappeler (1 ",N.jsx(F0,{size:10,className:"inline"})," / sonde)"]}),x===0?N.jsx("p",{className:"text-xs text-red-400 text-center py-2",children:"Pas assez d'nergie"}):N.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:Array.from({length:x},(R,I)=>I+1).map(R=>N.jsx("button",{onClick:()=>A(R),className:"px-3 py-1.5 bg-cyan-900/50 hover:bg-cyan-800 border border-cyan-700 rounded text-xs text-white font-medium transition-colors",children:R===g?"Toutes":R},R))})]})]})]})}function ja({icon:r,value:e,label:t,highlight:i}){return N.jsxs("div",{className:"flex items-center gap-1.5 relative group cursor-help",children:[r,N.jsx("span",{className:`font-bold ${i?"text-yellow-400":"text-white"}`,children:e}),N.jsx("div",{className:"absolute -bottom-9 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 border border-gray-700",children:t})]})}function t9({resources:r}){return N.jsx("div",{className:"bg-gray-900/50 rounded-lg border border-gray-800 px-3 sm:px-4 py-2",children:N.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-1",children:[N.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 justify-between sm:justify-start",children:[N.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 pr-2 sm:pr-4 sm:border-r border-gray-700",children:[N.jsx(ja,{icon:N.jsx(o2,{size:20}),value:r.metal,label:"Mtal"}),N.jsx(ja,{icon:N.jsx(a2,{size:20}),value:r.organic,label:"Organique"}),N.jsx(ja,{icon:N.jsx(F0,{size:20}),value:r.energy,label:"nergie",highlight:!0})]}),N.jsx("div",{className:"sm:pl-2 sm:border-l border-gray-700 sm:ml-auto",children:N.jsx(ja,{icon:N.jsx(c2,{size:20}),value:r.intelligence,label:"Intelligence"})})]}),N.jsxs("div",{className:"flex items-center justify-between sm:justify-start gap-1 sm:gap-2 sm:px-4 sm:border-r border-gray-700",children:[N.jsx(ja,{icon:N.jsx(l2,{size:20}),value:r.alloy,label:"Alliage"}),N.jsx(ja,{icon:N.jsx(u2,{size:20}),value:r.biomass,label:"Biomasse"}),N.jsx(ja,{icon:N.jsx(Dw,{size:20}),value:r.plasma,label:"Plasma"})]})]})})}function n9({G:r,moves:e,playerID:t}){const i=r.players[t],o=i.probes.filter(S=>S.tileId===null),u=i.probes.filter(S=>S.tileId!==null),d=r.deployedValues.length,f=[...new Set(r.diceValues)].length,g=i.buildings.filter(S=>!S.activated&&["orbitalForge","bioLab","condenser","chipEngraver","biomassFactory"].includes(S.type)),x=i.buildings.some(S=>S.type==="factory"),w=r.tiles.filter(S=>Hc(S,r.players).controller===t);return r.deploymentComplete?N.jsx("div",{className:"w-full bg-emerald-950/30 rounded-lg border border-emerald-800/50 px-3 sm:px-5 py-3",children:N.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[N.jsxs("div",{className:"flex items-center justify-between sm:justify-start",children:[N.jsx("span",{className:"text-emerald-400 font-semibold",children:" Construction"}),N.jsx(ai,{size:"sm",className:"h-8 px-3 bg-cyan-600 hover:bg-cyan-500 sm:hidden",onClick:()=>e.endTurn(),children:"Fin tour "})]}),N.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[g.length>0&&N.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[g.slice(0,3).map(S=>N.jsxs(ai,{size:"sm",variant:"outline",className:"h-8 text-xs px-2",onClick:()=>e.activateBuilding(S.id),disabled:i.resources.energy<1,children:[N.jsxs("span",{className:"hidden sm:inline",children:[" ",l1[S.type]]}),N.jsxs("span",{className:"sm:hidden",children:["",l1[S.type].slice(0,3)]})]},S.id)),g.length>3&&N.jsxs("span",{className:"text-xs text-gray-500",children:["+",g.length-3]})]}),N.jsx(ai,{size:"sm",variant:"outline",className:"h-8 px-3",onClick:()=>e.buildProbe(),disabled:i.probes.length>=12||i.resources.alloy<1||i.resources.organic<1,children:"+ Sonde"})]}),N.jsx("div",{className:"hidden sm:block flex-1",children:x&&w.length>0?N.jsx("span",{className:"text-sm text-emerald-300",children:" Clique sur une tuile contrle pour construire"}):x?N.jsx("span",{className:"text-sm text-yellow-400",children:" Contrle une tuile d'abord"}):N.jsx("span",{className:"text-sm text-red-400",children:" Usine requise pour construire"})}),N.jsx(ai,{size:"sm",className:"h-9 px-4 bg-cyan-600 hover:bg-cyan-500 hidden sm:flex",onClick:()=>e.endTurn(),children:"Fin du tour "})]})}):N.jsx("div",{className:"w-full bg-amber-950/30 rounded-lg border border-amber-800/50 px-3 sm:px-5 py-3",children:N.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[N.jsxs("div",{className:"flex items-center justify-between sm:justify-start",children:[N.jsx("span",{className:"text-amber-400 font-semibold",children:" Dploiement"}),N.jsx(ai,{size:"sm",className:"h-8 px-3 bg-emerald-600 hover:bg-emerald-500 sm:hidden",onClick:()=>e.endDeployment(),children:r.rolledDice?"Terminer ":"Build "})]}),N.jsx("div",{className:"flex items-center gap-2 flex-1",children:r.rolledDice?N.jsxs(N.Fragment,{children:[N.jsx("span",{className:"text-xs sm:text-sm text-amber-300 hidden sm:inline",children:"Glisse les ds sur les tuiles"}),N.jsx("span",{className:"text-xs text-amber-300 sm:hidden",children:"Glisse ds"}),N.jsxs("span",{className:"font-bold text-lg text-amber-300",children:[d,"/",f]})]}):N.jsxs(N.Fragment,{children:[N.jsxs("span",{className:"text-xs sm:text-sm text-gray-400 hidden sm:inline",children:[o.length," sondes libres  ",u.length," dployes"]}),N.jsxs("span",{className:"text-xs text-gray-400 sm:hidden",children:[o.length,"/",o.length+u.length]}),o.length>0&&N.jsxs(ai,{size:"sm",className:"h-8 px-3 bg-amber-600 hover:bg-amber-500",onClick:()=>e.rollProbes(),children:[N.jsxs("span",{className:"hidden sm:inline",children:[" Lancer ",o.length," ds"]}),N.jsx("span",{className:"sm:hidden",children:" Lancer"})]})]})}),N.jsx(ai,{size:"sm",className:"h-9 px-4 bg-emerald-600 hover:bg-emerald-500 hidden sm:flex",onClick:()=>e.endDeployment(),children:r.rolledDice?"Terminer dploiement ":"Passer au build "})]})})}function u1({players:r,matchData:e,currentPlayerId:t}){return N.jsx("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-900/50 rounded-lg border border-gray-800",children:Object.entries(r).map(([i,o])=>{const u=e==null?void 0:e.find(g=>String(g.id)===i),d=z0[i],f=i===t;return N.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded ${f?d.bgLight:""}`,children:[N.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${d.bg}`}),N.jsx("span",{className:"text-xs text-white font-medium",children:(u==null?void 0:u.name)||`P${i}`}),N.jsxs("span",{className:"text-xs text-gray-400",children:[N.jsx(c2,{size:12,className:"inline mr-0.5"}),o.resources.intelligence]}),N.jsxs("span",{className:"text-xs text-gray-500",children:[o.probes.filter(g=>g.tileId===null).length,"/",o.probes.length,""]})]},i)})})}function r9({matchData:r,playerID:e,isConnected:t}){return N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] p-4",children:N.jsxs(Fc,{className:"max-w-sm w-full bg-[#12121a] border-[#2d2d4a]",children:[N.jsx(Bc,{className:"text-center pb-2",children:N.jsxs(Gc,{className:"flex items-center justify-center gap-2 text-white",children:[N.jsx(m3,{className:"h-5 w-5 animate-spin text-cyan-400"}),"En attente des joueurs"]})}),N.jsx(Uc,{className:"space-y-3",children:Array.from({length:s2},(i,o)=>{const u=r==null?void 0:r.find(g=>g.id===o),d=u&&String(u.id)===e,f=z0[String(o)];return N.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u!=null&&u.name?f.bgLight:"bg-gray-800/30"} ${u!=null&&u.name?f.border:"border-gray-700"}`,children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:`w-3 h-3 rounded-full ${u!=null&&u.name?f.bg:"bg-gray-600"}`}),N.jsxs("span",{className:"text-white",children:[(u==null?void 0:u.name)||"En attente...",d&&" (toi)"]})]}),(u==null?void 0:u.name)&&(u.isConnected?N.jsx(N3,{className:"h-4 w-4 text-green-500"}):N.jsx(b3,{className:"h-4 w-4 text-red-500"}))]},o)})})]})})}function i9({ctx:r,matchData:e,playerID:t}){var d,f,g;const i=(d=r.gameover)==null?void 0:d.winner,o=((f=e==null?void 0:e.find(x=>String(x.id)===i))==null?void 0:f.name)||`Joueur ${i}`,u=i===t;return N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f] p-4",children:N.jsxs(Fc,{className:`max-w-sm w-full border-2 ${u?"border-amber-500 bg-amber-950/30":"border-gray-700 bg-[#12121a]"}`,children:[N.jsx(Bc,{className:"text-center",children:N.jsx(Gc,{className:`text-3xl ${u?"text-amber-400":"text-gray-400"}`,children:u?" Victoire!":"Dfaite"})}),N.jsxs(Uc,{className:"text-center",children:[N.jsxs("p",{className:"text-white text-lg",children:[o," a atteint la Singularit!"]}),N.jsxs("p",{className:"text-gray-400 mt-2",children:["Intelligence: ",(g=r.gameover)==null?void 0:g.intelligence]})]})]})})}const d2=Ae.forwardRef(({className:r,type:e,...t},i)=>N.jsx("input",{type:e,className:Ys("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:i,...t}));d2.displayName="Input";const t0="boardgame-lobby-credentials",Ch="singularity";function s9({serverUrl:r,onJoinMatch:e}){const[t,i]=Ae.useState([]),[o,u]=Ae.useState(""),[d,f]=Ae.useState(!1),[g,x]=Ae.useState(null),w=new j1({server:r}),S=Ae.useCallback(async()=>{try{const{matches:R}=await w.listMatches(Ch);i(R.filter(I=>!I.gameover)),x(null)}catch{x("Failed to load matches")}},[]);Ae.useEffect(()=>{S();const R=setInterval(S,3e3);return()=>clearInterval(R)},[S]),Ae.useEffect(()=>{const R=localStorage.getItem(t0);if(R){const I=JSON.parse(R);u(I.playerName),e(I.matchID,I.playerID,I.credentials)}},[]);const C=R=>{localStorage.setItem(t0,JSON.stringify(R))},b=async()=>{if(!o.trim()){x("Please enter your name");return}f(!0),x(null);try{const{matchID:R}=await w.createMatch(Ch,{numPlayers:2}),{playerCredentials:I}=await w.joinMatch(Ch,R,{playerID:"0",playerName:o.trim()}),T={matchID:R,playerID:"0",credentials:I,playerName:o.trim()};C(T),e(R,"0",I)}catch{x("Failed to create match")}finally{f(!1)}},P=async R=>{if(!o.trim()){x("Please enter your name");return}const I=R.players.find(T=>!T.name);if(!I){x("No available seats");return}f(!0),x(null);try{const{playerCredentials:T}=await w.joinMatch(Ch,R.matchID,{playerID:String(I.id),playerName:o.trim()}),O={matchID:R.matchID,playerID:String(I.id),credentials:T,playerName:o.trim()};C(O),e(R.matchID,String(I.id),T)}catch{x("Failed to join match")}finally{f(!1)}},A=R=>{const I=R.players.filter(O=>O.name),T=R.players.length-I.length;return{joined:I.length,total:R.players.length,canJoin:T>0}};return N.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6 px-4 sm:px-0",children:[N.jsxs("div",{className:"text-center space-y-2",children:[N.jsx("h1",{className:"text-4xl font-bold",children:N.jsx("span",{className:"text-purple-400",children:"Singularity"})}),N.jsx("p",{className:"text-slate-400",children:"Race to artificial superintelligence"})]}),N.jsxs(Fc,{className:"bg-slate-800/80 border-slate-700",children:[N.jsx(Bc,{children:N.jsxs(Gc,{className:"text-lg text-white flex items-center gap-2",children:[N.jsx(M3,{className:"h-5 w-5 text-purple-400"}),"Enter the Game"]})}),N.jsxs(Uc,{className:"space-y-4",children:[N.jsx(d2,{placeholder:"Enter your name",value:o,onChange:R=>u(R.target.value),disabled:d,maxLength:20,className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-500"}),N.jsxs(ai,{onClick:b,disabled:d||!o.trim(),className:"w-full bg-purple-600 hover:bg-purple-500 text-white",children:[N.jsx(S3,{className:"mr-2 h-4 w-4"}),d?"Creating...":"Create New Match"]}),g&&N.jsx("p",{className:"text-sm text-red-400 text-center",children:g})]})]}),N.jsxs(Fc,{className:"bg-slate-800/80 border-slate-700",children:[N.jsxs(Bc,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[N.jsxs("div",{children:[N.jsx(Gc,{className:"text-lg text-white",children:"Available Matches"}),N.jsxs(n2,{className:"text-slate-500",children:[t.length," matches found"]})]}),N.jsx(ai,{variant:"ghost",size:"icon",onClick:S,disabled:d,className:"text-slate-400 hover:text-white hover:bg-slate-700",children:N.jsx(C3,{className:`h-4 w-4 ${d?"animate-spin":""}`})})]}),N.jsx(Uc,{children:t.length===0?N.jsxs("div",{className:"text-center py-8 text-slate-500",children:[N.jsx(cm,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),N.jsx("p",{children:"No matches available"}),N.jsx("p",{className:"text-sm",children:"Create one to start playing!"})]}):N.jsx("div",{className:"space-y-3",children:t.map(R=>{const I=A(R),T=R.players.find(O=>O.name);return N.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-600 bg-slate-700/30",children:[N.jsxs("div",{className:"space-y-1",children:[N.jsxs("p",{className:"font-medium text-white",children:[(T==null?void 0:T.name)||"Unknown","'s game"]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsxs(e0,{variant:"outline",className:I.canJoin?"border-purple-500 text-purple-400":"border-slate-600 text-slate-500",children:[N.jsx(cm,{className:"h-3 w-3 mr-1"}),I.joined,"/",I.total]}),!I.canJoin&&N.jsx(e0,{variant:"outline",className:"border-yellow-600 text-yellow-500",children:"Full"})]})]}),N.jsxs(ai,{size:"sm",onClick:()=>P(R),disabled:d||!I.canJoin||!o.trim(),className:"bg-purple-600 hover:bg-purple-500 text-white disabled:opacity-50",children:[N.jsx(v3,{className:"h-4 w-4 mr-1"}),"Join"]})]},R.matchID)})})})]})]})}function o9(){localStorage.removeItem(t0)}const a9=()=>{const r=window.location.hostname;return r==="localhost"||r==="127.0.0.1"||r.includes("192.168")||r.includes("10.")||r.includes("172.")?`${window.location.protocol}//${window.location.host}`:`${window.location.protocol}//${r}`};function l9(){const[r,e]=Ae.useState(null),[t]=Ae.useState(a9),i=J1({game:i5,board:Kw,multiplayer:Gp({server:t}),debug:!1}),o=(d,f,g)=>{e({matchID:d,playerID:f,credentials:g})},u=()=>{o9(),e(null)};return Ae.useEffect(()=>()=>{},[]),r?N.jsxs("div",{className:"min-h-screen",children:[N.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-slate-900/90 backdrop-blur border-b border-slate-700",children:N.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2",children:[N.jsx("h1",{className:"text-lg sm:text-xl font-bold text-white",children:N.jsx("span",{className:"text-purple-400",children:"Singularity"})}),N.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[N.jsxs("span",{className:"text-xs text-slate-500 hidden sm:inline",children:["Match: ",r.matchID.slice(0,8)]}),N.jsx("span",{className:"text-xs text-slate-500 sm:hidden",children:r.matchID.slice(0,4)}),N.jsxs(ai,{variant:"ghost",size:"sm",onClick:u,className:"text-slate-400 hover:text-white hover:bg-slate-800 px-2 sm:px-3",children:[N.jsx(w3,{className:"h-4 w-4 sm:mr-2"}),N.jsx("span",{className:"hidden sm:inline",children:"Leave"})]})]})]})}),N.jsx("main",{className:"pt-14",children:N.jsx(i,{matchID:r.matchID,playerID:r.playerID,credentials:r.credentials})})]}):N.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:N.jsx(s9,{serverUrl:t,onJoinMatch:o})})}const h2=document.getElementById("root");if(!h2)throw new Error("Root element not found");H2.createRoot(h2).render(N.jsx(Ae.StrictMode,{children:N.jsx(l9,{})}));
